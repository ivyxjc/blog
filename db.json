{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon.ico","path":"favicon.ico","modified":1,"renderable":0},{"_id":"themes/maupassant/source/css/font-awesome.min.css","path":"css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/css/grids-responsive-min.css","path":"css/grids-responsive-min.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/css/jquery.css","path":"css/jquery.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/css/jquery.fancybox.css","path":"css/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/css/normalize.css","path":"css/normalize.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":1,"renderable":1},{"_id":"themes/maupassant/source/css/style.css","path":"css/style.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/maupassant/source/css/pure-min.css","path":"css/pure-min.css","modified":1,"renderable":1},{"_id":"themes/maupassant/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/maupassant/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/maupassant/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/maupassant/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/maupassant/source/js/codeblock-resizer.js","path":"js/codeblock-resizer.js","modified":1,"renderable":1},{"_id":"themes/maupassant/source/js/totop.js","path":"js/totop.js","modified":1,"renderable":1},{"_id":"themes/maupassant/source/js/smartresize.js","path":"js/smartresize.js","modified":1,"renderable":1},{"_id":"themes/maupassant/source/js/fancybox.js","path":"js/fancybox.js","modified":1,"renderable":1},{"_id":"themes/maupassant/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/maupassant/source/js/share.js","path":"js/share.js","modified":1,"renderable":1}],"Cache":[{"_id":"themes/maupassant/.git","hash":"5ccf7a85989cb1d0a0f45248db765e1b3604298d","modified":1477394369843},{"_id":"themes/maupassant/.travis.yml","hash":"f8da426b97088e4caa5226cff219a5d95087961f","modified":1477394370641},{"_id":"source/favicon.ico","hash":"83ba696a277e1bd8e3140432ad5a7101a592f90e","modified":1477481211918},{"_id":"themes/maupassant/LICENSE","hash":"b7ea1dbb2fed3410d78bc7c125e1d80927b56981","modified":1477394370644},{"_id":"themes/maupassant/package.json","hash":"04ca87ea475f37841d3610fe5806feb8022416c3","modified":1477394370747},{"_id":"themes/maupassant/README.md","hash":"1e0e701e5ea813f7951f3fe3dac2de5ccf0ba0db","modified":1477394370651},{"_id":"themes/maupassant/_config.yml","hash":"b731f92c73b2f359100d19490e322f6affe21a0d","modified":1477394370656},{"_id":"source/_posts/others-blog.md","hash":"33dac36ebce78082885de31daf170bf144413c9e","modified":1480073326905},{"_id":"themes/maupassant/layout/archive.jade","hash":"b0bea1cffa4dbe643a8921b7e10626648119cffb","modified":1477394370725},{"_id":"themes/maupassant/layout/base-without-sidebar.jade","hash":"baa6072d381a54f2436365846649799a4a277803","modified":1477394370728},{"_id":"themes/maupassant/layout/base.jade","hash":"849a811ffcccbbebb7c2f7ee3508c414f81c0975","modified":1477483481780},{"_id":"themes/maupassant/layout/page.jade","hash":"1e98aa785073dc1bbfe70f2863bc19fe287483b9","modified":1477394370736},{"_id":"themes/maupassant/layout/index.jade","hash":"3fe1f0c5021ac696ed9846ecb1c75d285fa46708","modified":1477394370733},{"_id":"themes/maupassant/layout/single-column.jade","hash":"4be14ac93c154216e174fe0c4c05608c26f59c42","modified":1477394370741},{"_id":"themes/maupassant/layout/post.jade","hash":"f68f483242409f501bbc8b50ff129edd981087e2","modified":1477394370739},{"_id":"themes/maupassant/layout/timeline.jade","hash":"ee1e8e4e8fdf61c6d19f1f7fe31ab50ab1465a8d","modified":1477394370743},{"_id":"themes/maupassant/languages/zh-CN.yml","hash":"41f7c09365cbd5ba1b8906191ee07bc75094185a","modified":1477394370662},{"_id":"source/_posts/database/2016-11-06-mysql_basic.md","hash":"94ebac9c3d68bb380fc438e1b0c279289153143e","modified":1478781956068},{"_id":"source/_posts/Linux/2016-10-10-linux-bash.md","hash":"d4e0ce28f3fc802098e975f070985db0f00d31e9","modified":1477838995921},{"_id":"source/_posts/about/index.md","hash":"232d327cdb4b82bef940674f1128d93a1ebe05c5","modified":1477386198000},{"_id":"source/_posts/android/2016-05-11-android-qa.md","hash":"b29b158410702913ed6d8892db8c17ab54de673a","modified":1477386198000},{"_id":"source/_posts/design_pattern/2016-11-17-builder.md","hash":"64d7bde2fc6b2e59300a17708a517c7228df8b43","modified":1480073081946},{"_id":"source/_posts/design_pattern/2016-11-18-observer.md","hash":"87b890556abe0578f6b2a1df01ab2b99b8327fda","modified":1480073087930},{"_id":"source/_posts/design_pattern/2016-10-24-basic-principle_2.md","hash":"2aaf1fc5fd9c299ca9994de1fa48327af4240acb","modified":1477386202000},{"_id":"source/_posts/design_pattern/2016-10-24-basic-principle_1.md","hash":"4a120eb28067d904d89767f9a2d0ebbaa2d2082a","modified":1477386201000},{"_id":"source/_posts/python/2016-03-06-python3-注意点.md","hash":"b6649149a823031e6e14a2f27ae0ff3e8bfe6ba6","modified":1477386203000},{"_id":"source/_posts/python/2016-10-30-generator.md","hash":"0b9e6d7759b0de34ed56ffece27d92e08472bdc2","modified":1477817239614},{"_id":"source/_posts/效率/2016-04-01-Linux-python-env-tips.md","hash":"6a2c50d97eab13384f987689997474b5cd043d39","modified":1477386205000},{"_id":"source/_posts/效率/2016-07-06-proxy.md","hash":"6ab322bea7f03a6645cb76be6877df244f571a6a","modified":1477386205000},{"_id":"source/_posts/效率/2016-07-03-Reset-PC.md","hash":"0d282e9af28cff4c7b2f1a815293b4f1cf19a708","modified":1477386205000},{"_id":"source/_posts/效率/2016-06-09-update-python.md","hash":"6ac109ade9bd95dde93f27919864ae5350ec8660","modified":1477386205000},{"_id":"source/_posts/效率/2016-10-14-git.md","hash":"1e60dbf4878a77ed11af1085b1de8d7702f8d3fa","modified":1477404215734},{"_id":"themes/maupassant/layout/_partial/comments.jade","hash":"b3a0b0ce0642f2bfe9df94b075c0c2a083871e1b","modified":1477394370679},{"_id":"source/_posts/design_pattern/2016-11-18-callback.md","hash":"17cebe73bcfc85020981db85a08ef08a52fc8ed8","modified":1479479033852},{"_id":"source/_posts/design_pattern/2016-10-25-factory-pattern.md","hash":"7cf763105a23b76ab1af6a77d80721fa4828d061","modified":1479382157277},{"_id":"themes/maupassant/layout/_partial/footer.jade","hash":"ee0af2fe9b0185dee9f0c249737d1b47933adbf0","modified":1477394370683},{"_id":"themes/maupassant/layout/_partial/mathjax.jade","hash":"ac6e3a92bf18ab6bbd0e041b6796b295bae963ee","modified":1477394370691},{"_id":"themes/maupassant/layout/_partial/mathjax2.jade","hash":"234a792e64ba208fa97d2f99772ece23056a53ec","modified":1477394370693},{"_id":"themes/maupassant/layout/_partial/paginator.jade","hash":"03ad0c49ae6f8a999ae35b38d08e25775f51f52a","modified":1477394370695},{"_id":"themes/maupassant/layout/_partial/post_nav.jade","hash":"b11d9e6000449838b17f508429f29ffb60f53096","modified":1477394370697},{"_id":"themes/maupassant/layout/_partial/tag.jade","hash":"6145b483b271bba05ad1db7c039fe352a768215b","modified":1477394370699},{"_id":"themes/maupassant/layout/_partial/after_footer.jade","hash":"113890f21fa7dc6e2d75cfce1ae326cfde45d67e","modified":1477484404642},{"_id":"themes/maupassant/layout/_widget/category.jade","hash":"6576749520bc17bf2cfbaa6aa58365556b5358ed","modified":1477394370706},{"_id":"themes/maupassant/layout/_partial/totop.jade","hash":"eb91a3baf9411188c7c8130f63a674f541ca9c81","modified":1477394370702},{"_id":"themes/maupassant/layout/_widget/category0.jade","hash":"6576749520bc17bf2cfbaa6aa58365556b5358ed","modified":1477394370707},{"_id":"themes/maupassant/layout/_widget/calendar.jade","hash":"81fe1cf1b8973b62e464851687bd15acaea6cf8c","modified":1477394370704},{"_id":"themes/maupassant/layout/_widget/links.jade","hash":"2a1dd6a0e2befd073e3347347994d8dcd2047879","modified":1477394370709},{"_id":"themes/maupassant/layout/_widget/recent_posts.jade","hash":"770b6c41cbf7969ed33adf87eec3be6f50a0911b","modified":1477394370716},{"_id":"themes/maupassant/layout/_widget/recent_comments.jade","hash":"0b9e78e7f20bc69690e05f2e0c956bded9058a84","modified":1477394370713},{"_id":"themes/maupassant/layout/_widget/tag.jade","hash":"37f236365b153fc40324391e5a602d6d50014e18","modified":1477394370722},{"_id":"themes/maupassant/layout/_partial/helpers.jade","hash":"9e44f6d32f2449b4109c33118f8285fa2fc7b023","modified":1477394370688},{"_id":"themes/maupassant/layout/_widget/search.jade","hash":"c5301ca7f2ec24d790fd7f35f69f8fd8acbdb725","modified":1477394370720},{"_id":"themes/maupassant/source/css/font-awesome.min.css","hash":"3c1d63dd1176c77f9f4cdb1616fbb08c31b9822f","modified":1477394370753},{"_id":"themes/maupassant/source/css/grids-responsive-min.css","hash":"f8c15ab45a9827c2baa287049c04f747bd6dbe65","modified":1477394370757},{"_id":"themes/maupassant/source/css/jquery.css","hash":"0d142e11e27e9de1a325c32369c42254101ddd34","modified":1477394370761},{"_id":"themes/maupassant/source/css/jquery.fancybox.css","hash":"0d142e11e27e9de1a325c32369c42254101ddd34","modified":1477394370762},{"_id":"themes/maupassant/source/css/normalize.css","hash":"24759804cb541e96db7b8eafa7e9fd32cbab59da","modified":1477394370766},{"_id":"themes/maupassant/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1477394370776},{"_id":"themes/maupassant/source/css/style.css","hash":"2acbbe28739156dec39b719d2e9abeac8890e8b2","modified":1477394370775},{"_id":"themes/maupassant/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1477394370776},{"_id":"themes/maupassant/source/css/pure-min.css","hash":"edfa29e92b5d8b5e437bf75a1c6a10f192d707e2","modified":1477394370771},{"_id":"themes/maupassant/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1477394370777},{"_id":"themes/maupassant/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1477394370778},{"_id":"themes/maupassant/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1477394370779},{"_id":"source/_posts/design_pattern/2016-10-25-singleton.md","hash":"38411267e9c6b0841d1e797a4f3cea0b92962670","modified":1477484409282},{"_id":"themes/maupassant/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1477394370778},{"_id":"themes/maupassant/source/js/codeblock-resizer.js","hash":"c77270e684a60babc1abb7353e700ecdc5a66d30","modified":1477394370786},{"_id":"themes/maupassant/source/js/totop.js","hash":"15de186b089c245fe60766d509b587919f05ff23","modified":1477394370815},{"_id":"themes/maupassant/source/js/smartresize.js","hash":"150ab1cad40d7ae081b0896b13f7d7cbac4e6338","modified":1477394370812},{"_id":"themes/maupassant/source/js/fancybox.js","hash":"8a993c1c4ad40789d2960b682cb2130382a0f26a","modified":1477394370791},{"_id":"themes/maupassant/source/js/search.js","hash":"9cf2337fe9af34055782880ac27b93713d74581f","modified":1477394370800},{"_id":"themes/maupassant/source/js/share.js","hash":"bb6880e2e8e187b576daf326476f09b0907fbe14","modified":1477394370807},{"_id":"source/_posts/效率/2016-10-29-centos-update-glibc.md","hash":"3bf7c74194c0bdd0a4f6d70edef8e6b7ab3c3328","modified":1477740791570},{"_id":"source/_posts/OJ/LeetCode/2016-04-21-medium-343-122.md","hash":"6ca93962449d7bf514c357a7711e1d5832733296","modified":1477386202000},{"_id":"source/_posts/OJ/LeetCode/2016-04-21-medium-SingleNum.md","hash":"78caabda5140fae55645be6824953aaf3f92b650","modified":1477386202000},{"_id":"source/_posts/OJ/LeetCode/2016-04-26-easy-add-digits.md","hash":"3dac276ae0c2b471af9450cf856bfb32dc1eec0d","modified":1477386202000},{"_id":"source/_posts/OJ/LeetCode/2016-04-26-easy-MaximunDepthofBinary.md","hash":"c18745ca7d77391f4b4a86b02283b3103c6042a7","modified":1477386202000},{"_id":"source/_posts/OJ/LeetCode/2016-04-26-easy-move-zeroes.md","hash":"c88af5f48bbc47490f4755d3939c830f3ca3feb7","modified":1477386202000},{"_id":"source/_posts/OJ/PAT/2016-02-21-1010题-Radix-25分.md","hash":"0db313dedd6ef54dfa18cc6dbec2fe95e9cd1943","modified":1477386203000},{"_id":"source/_posts/android/UI相关/2016-09-18-RecyclerView.md","hash":"4caa388eb2d4d449412ebc59a4599b6fa1679d98","modified":1477481211793},{"_id":"source/_posts/android/adb/2016-03-10-adb-console.md","hash":"5ee85bab95624531d309840afe9af93c357a60db","modified":1477386198000},{"_id":"source/_posts/android/lifecycle/2016-06-02-lifecycle-basic.md","hash":"bbced8960f7b3402fdab29efbd28dca800b6f75f","modified":1477386198000},{"_id":"source/_posts/android/四大组件/2016-03-20-broadcast-basic.md","hash":"c74b0cd4265a820b785f95a83cb7b9fce73f2c9e","modified":1477386199000},{"_id":"source/_posts/android/四大组件/2016-05-06-service-basic.md","hash":"eec80d982abde6c74747469cfe16ba384b41aa8b","modified":1477386199000},{"_id":"source/_posts/android/并发编程/2016-05-15-async.md","hash":"e8193472191ccc6e4fc6efa5b6434bea36a33deb","modified":1477481211806},{"_id":"source/_posts/android/并发编程/2016-04-05-handler-threads.md","hash":"f25ea058a924c256e80929ab7b3e3c911f92e450","modified":1477481211803},{"_id":"source/_posts/android/第三方库/2016-05-13-volley.md","hash":"53e2d3561f5e95d492200ec47f01243467a76b2f","modified":1477481211842},{"_id":"source/_posts/android/数据持久化/2016-03-26-content-provider.md","hash":"60997d3b3075ca0a936ba8cdaba2f00579d85874","modified":1477386201000},{"_id":"source/_posts/android/数据持久化/2016-03-25-data-persistence.md","hash":"fc063e15475198cbd688204f3314a6db61230b81","modified":1477481211834},{"_id":"source/_posts/java/concurrency/2016-10-26-collections-thread-safety.md","hash":"447ba185a6386d5a50e4570aa1885073c0eee9fe","modified":1477482671278},{"_id":"source/_posts/android/第三方库/2016-11-25-retrofit-rxjava.md","hash":"ee47293fa2b8af702ae7b0ba61528432c6eebf50","modified":1480078327367},{"_id":"source/_posts/python/matplotlib/2016-10-04-matplotlib-basic.md","hash":"3f445078ebb04b63c1ecae3a68d608ca7ae76886","modified":1477386204000},{"_id":"source/_posts/python/numpy/2016-10-04-numpy-basic.md","hash":"4fb132b8623b081d8b993f7cae95cf260154abaf","modified":1477386204000},{"_id":"source/_posts/python/raspberry/2016-10-30-raspberry-basic.md","hash":"cd8fcac4a5cb7154ffd13f823ce6b4f491d18e1c","modified":1477831929074},{"_id":"source/_posts/python/os/2016-03-29-python-os.md","hash":"a09613a00d38a2180018dc7cbdf01a2b37d5ff7a","modified":1477386204000},{"_id":"source/_posts/OJ/Codeforces/eduRound/2016-02-18-Codeforces-Edu-Round7总结.md","hash":"8a07ef6c57424aacdc844d4e40c398f778843555","modified":1477386202000},{"_id":"source/_posts/android/UI相关/Fragment/2016-03-09-Fragment-basic.md","hash":"2064d90a006b482e421c48e61ce441b53446e149","modified":1477386199000},{"_id":"source/_posts/android/AndroidSamples/UI/2016-09-24-ActionBar-Basic.md","hash":"0835d22899c7cd624aa2e6823929ee9c86adbd60","modified":1477386198000},{"_id":"source/_posts/android/UI相关/Fragment/2016-03-19-Fragment-message-transportation.md","hash":"1c0995b76c25681caa927268fcb6aee91294a5c2","modified":1477386199000},{"_id":"source/_posts/android/AndroidSamples/UI/2016-09-24-ActionBar-PopupMenu.md","hash":"0be363368c2714bb3ba29b7aa2d3056ee2b4e73c","modified":1477386198000},{"_id":"source/_posts/android/UI相关/布局/2016-02-22-Layout-Gravity和Gravity.md","hash":"35fd142f83c6f64472d792be20dad5b869752a25","modified":1477481211798},{"_id":"source/_posts/android/AndroidSamples/controls/2016-10-18-custom-button.md","hash":"ea28c2aede8ac4d33b766ede5195ab2b5c9a673e","modified":1477481211778},{"_id":"source/_posts/android/AndroidSamples/UI/2016-10-16-ActionBar-ShareActionProvider.md","hash":"2d09d3181b9e87d20a603761da4167bb9fb88984","modified":1477386198000},{"_id":"source/_posts/android/AndroidSamples/controls/2016-11-10-schedule.md","hash":"9d14ee01598c48ad206f8a293f7261f6a43753fb","modified":1478783409918},{"_id":"source/_posts/android/AndroidSamples/background/2016-11-15-jobscheduler.md","hash":"186da8dc5a771b707079f3740c7e72a54a4eb3f8","modified":1479208230102},{"_id":"source/_posts/android/控件/AlertDialog/2016-03-25-Alert-Dialog.md","hash":"f6ef749407b183e9db72272c417dc5f8da3a578f","modified":1477386201000},{"_id":"source/_posts/android/控件/WebView/2016-03-07-使用WebView显示网页.md","hash":"84f706fa273bf5bb18448fa246a69c6bba8012f7","modified":1477386201000},{"_id":"source/_posts/android/控件/Notification/2016-03-26-Notification-basic.md","hash":"ee64062510aee4fab46459ea61996dcc089f0ec7","modified":1477481211829},{"_id":"source/_posts/android/开发实战/Sunshine开发实战/2016-06-02-data-persistence.md","hash":"5f7bb971b76fe5e3e6894aff584276c1489820f0","modified":1477481211824},{"_id":"source/_posts/android/控件/Bar/2016-03-09-ProgressBar.md","hash":"c19945d5008d04aec8f88c78394f12c9966c69e8","modified":1477386201000},{"_id":"source/_posts/android/开发实战/个人开发/2016-07-07-calculator.md","hash":"6817dcacca5c04d7648da8a6c4efcf9fa4614c1d","modified":1477386201000},{"_id":"source/_posts/android/开发实战/Sunshine开发实战/2016-06-03-android-test.md","hash":"07af1b55291113f3d922a5f71009f039c48bdeac","modified":1477386201000},{"_id":"source/_posts/android/开发实战/Sunshine开发实战/2016-06-03-sunshine-build-custom.md","hash":"498b7a701890316d94fb1f5bdc14b521ff15292c","modified":1477386201000},{"_id":"source/_posts/python/Spider/douban/2016-10-30-douban-spider.md","hash":"792c33f05554d153602a4bb0f2d86ed11e30c991","modified":1478782146831},{"_id":"source/_posts/python/Spider/基础知识/2016-03-27-python-spider.md","hash":"c2615c093629057d7389f95c4bb4368ddd3e62e5","modified":1477386204000},{"_id":"source/_posts/python/Spider/基础知识/2016-03-27-regex.md","hash":"c5d09488dcfa3119a40fdcb5cfd56f2412cf4ab7","modified":1477386204000},{"_id":"source/_posts/python/Spider/基础知识/2016-10-23-selenium.md","hash":"8f94a5ecee67509ab47427b078676d4b357e2d8c","modified":1477386205000},{"_id":"source/_posts/python/Spider/基础知识/2016-03-31-scrapy.md","hash":"785ad2823089c9d8e24b9d88683c2af740797135","modified":1477386204000},{"_id":"source/_posts/python/Spider/基础知识/2016-03-29-beautiful-soup4-basic.md","hash":"8937d4789372de5460edb5b5745a3e3e0093704a","modified":1478528437446},{"_id":"source/_posts/python/Spider/基础知识/2016-10-29-xml-parse.md","hash":"2a2a900dfd94e4ee334e069eeea1a7e1de7bff07","modified":1477808075016},{"_id":"source/_posts/python/Spider/基础知识/2016-10-30-socket-basic.md","hash":"a4c9db877490c36ff85814914179e03c3caa5605","modified":1478528437468},{"_id":"source/_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-17-Diaglog.md","hash":"61c4f1f8dfb74106fb2debadef5fc9cd7cb8dc2d","modified":1477481211817},{"_id":"source/_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-Intent.md","hash":"1ca25e944967c5ee291027d1adbffcdb7c01a3e9","modified":1477481211821},{"_id":"source/_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-14-CriminalIntent-Fragment.md","hash":"bd225e25aee276de7eff1df30709fdb3c6939669","modified":1477481211813},{"_id":"source/_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-ListFragment.md","hash":"5bb7b390d83b83b96725c1419fb2d5a27894507b","modified":1477386200000},{"_id":"source/_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-08-ViewPager.md","hash":"41ee1c3ed11d59dc03f9c88d7e9fcd20e2c412d6","modified":1477386200000},{"_id":"public/atom.xml","hash":"2aa18e53b44d56c61d0db90677819fa8380c46d8","modified":1480083290413},{"_id":"public/search.xml","hash":"4b01b1c8338ed1fa66ee1a3b7aae5a6449507b06","modified":1480083290449},{"_id":"public/2016/10/24/database/2016-11-06-mysql_basic/index.html","hash":"9e51a89b625c146b4816a15948b6e5bf005bb1a0","modified":1480083290462},{"_id":"public/2016/10/23/python/Spider/基础知识/2016-10-23-selenium/index.html","hash":"58e74a21592107c2fbe724f0c500115a9955e28b","modified":1480083290462},{"_id":"public/2016/10/19/效率/2016-10-29-centos-update-glibc/index.html","hash":"6b091b1a50b7eab706ba410c1401933c32f363ce","modified":1480083290462},{"_id":"public/2016/09/24/android/AndroidSamples/controls/2016-11-10-schedule/index.html","hash":"2aabc81c5ef4c68c0d9beeec83947bb0a88e60bd","modified":1480083290462},{"_id":"public/2016/09/24/android/AndroidSamples/controls/2016-10-18-custom-button/index.html","hash":"895e260ea1da8b055b75451a889a957c3e82962d","modified":1480083290462},{"_id":"public/2016/09/24/android/AndroidSamples/UI/2016-09-24-ActionBar-PopupMenu/index.html","hash":"b60cb9d76067776444c7a18c085fd450ba330483","modified":1480083290462},{"_id":"public/2016/07/08/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-08-ViewPager/index.html","hash":"ef6a7773ec2c61a762a2db9009b91ceb7f0b50ef","modified":1480083290463},{"_id":"public/2016/07/07/android/开发实战/个人开发/2016-07-07-calculator/index.html","hash":"39d98110459e031c5520cc3af76b1b6f6f176642","modified":1480083290463},{"_id":"public/2016/07/06/效率/2016-07-06-proxy/index.html","hash":"7492ed2d96b5c8d962c755643be76abb2526da1b","modified":1480083290463},{"_id":"public/2016/07/03/效率/2016-07-03-Reset-PC/index.html","hash":"7b530922930a0f03c1eb497c39ead9c2087c02ef","modified":1480083290463},{"_id":"public/2016/06/09/效率/2016-06-09-update-python/index.html","hash":"c012ab1e9e3cd4a90b1dcc65ba056e906124e892","modified":1480083290463},{"_id":"public/2016/06/03/android/开发实战/Sunshine开发实战/2016-06-03-sunshine-build-custom/index.html","hash":"141135a681a46767d1681c8ae14684abaed15dd4","modified":1480083290463},{"_id":"public/2016/06/02/android/开发实战/Sunshine开发实战/2016-06-02-data-persistence/index.html","hash":"5306e55e0065375165d2ade3eb447a22727339d5","modified":1480083290463},{"_id":"public/2016/06/02/android/lifecycle/2016-06-02-lifecycle-basic/index.html","hash":"2808bcec4c03666721aa63c63779b256a76dcb32","modified":1480083290463},{"_id":"public/2016/05/15/android/并发编程/2016-05-15-async/index.html","hash":"841b8c65768d603b290fddd917e1d9e08079024e","modified":1480083290463},{"_id":"public/2016/05/11/android/2016-05-11-android-qa/index.html","hash":"9c54a7d7fa887cd5422780212e990cdea58720c2","modified":1480083290463},{"_id":"public/2016/05/06/android/四大组件/2016-05-06-service-basic/index.html","hash":"9f20fb7d1273a0aef229e812abff0ac815a07082","modified":1480083290463},{"_id":"public/2016/04/26/OJ/LeetCode/2016-04-26-easy-MaximunDepthofBinary/index.html","hash":"8d20b6665a4cdc8f87e1d36893dc4ea8c24ad733","modified":1480083290463},{"_id":"public/2016/04/01/效率/2016-04-01-Linux-python-env-tips/index.html","hash":"12d8401a40b7a0cc35d5fbc6570e1643f4b6ffbc","modified":1480083290463},{"_id":"public/2016/03/31/python/Spider/基础知识/2016-03-31-scrapy/index.html","hash":"73acef0a5b060e8bebaf6281d2e1c3e9bf9fc357","modified":1480083290463},{"_id":"public/2016/03/29/python/os/2016-03-29-python-os/index.html","hash":"2eade2bd8d910ccaf1429039740096b2fb5eb31a","modified":1480083290463},{"_id":"public/2016/03/19/android/UI相关/Fragment/2016-03-19-Fragment-message-transportation/index.html","hash":"ffb4a3e3f114ec1ea00e33c65e6cb9c921457f7c","modified":1480083290463},{"_id":"public/2016/03/10/android/adb/2016-03-10-adb-console/index.html","hash":"ac235a95942b79d5a614aa64702d0ad6c7313133","modified":1480083290463},{"_id":"public/2016/03/06/python/2016-03-06-python3-注意点/index.html","hash":"94f76336a781bce7feb8020b77d914d732713f12","modified":1480083290464},{"_id":"public/2016/01/01/about/index/index.html","hash":"3f606d96e992209b7e7942e4bf44f2c6a4409840","modified":1480083290464},{"_id":"public/categories/database/index.html","hash":"1cbf85d39c7c15b39fa2a926ef5c8cd2aff55a89","modified":1480083290464},{"_id":"public/categories/Linux/index.html","hash":"c55da6cbd86e705b972b96f81a66bf02d9b81a7b","modified":1480083290464},{"_id":"public/categories/Android/page/4/index.html","hash":"d6b710fb7251927addcac158aff8f6fb7a673a17","modified":1480083290464},{"_id":"public/categories/OO/index.html","hash":"b98fd0b29e8d4a78e595b7fa49d15d3ab2a0513c","modified":1480083290464},{"_id":"public/categories/Python/page/2/index.html","hash":"98eef314abbcdea36028cf0b6ddc3354fff2d6dc","modified":1480083290464},{"_id":"public/categories/效率/index.html","hash":"477d109d0baf251498363c2799885f9ea21d1d76","modified":1480083290464},{"_id":"public/categories/OJ/index.html","hash":"c6490d794f88f1ccad73f30a9c4929aa6f2664e5","modified":1480083290464},{"_id":"public/archives/page/8/index.html","hash":"be4956def2da0d4885b7b5a1ea7f5f8a277a8075","modified":1480083290464},{"_id":"public/archives/2016/page/8/index.html","hash":"499c98c97e1f70a421f957ad45608742582b14ea","modified":1480083290464},{"_id":"public/archives/2016/01/index.html","hash":"8caf80e45b58c1213312b3a85942df23bf126f97","modified":1480083290464},{"_id":"public/archives/2016/02/index.html","hash":"1b46efac7816bd76dc1dbb6f68bcac715b7b5580","modified":1480083290464},{"_id":"public/archives/2016/04/index.html","hash":"dd256616eb7151e357a2db154d50321d1fc0334d","modified":1480083290464},{"_id":"public/archives/2016/05/index.html","hash":"a5a2be9aafab549474b14126d45015f1f9fa52f8","modified":1480083290464},{"_id":"public/archives/2016/06/index.html","hash":"f6f68ac2b1b9fde08c1f5d0326d65473ebda0785","modified":1480083290464},{"_id":"public/archives/2016/07/index.html","hash":"94b290a014281cca95b96d54d79e45e4ece641ef","modified":1480083290464},{"_id":"public/archives/2016/09/index.html","hash":"234c90d036767050ef1120af5a2b7a2580ca94cd","modified":1480083290464},{"_id":"public/archives/2016/10/page/2/index.html","hash":"1c9f56075c3b6c4bd175230a7b576e1d6dc50b2d","modified":1480083290464},{"_id":"public/archives/2016/11/index.html","hash":"b08a842beb832409af1d594ba4d2f43c25c67428","modified":1480083290465},{"_id":"public/archives/2100/index.html","hash":"1c49faef119345e09848ba0ea0f0018dc9cbc342","modified":1480083290465},{"_id":"public/archives/2100/01/index.html","hash":"1c49faef119345e09848ba0ea0f0018dc9cbc342","modified":1480083290465},{"_id":"public/page/8/index.html","hash":"11ddf803abb2a0e3906387ba84b196b03bc91ccd","modified":1480083290465},{"_id":"public/tags/backup/index.html","hash":"822d846ba0f3a434161a31d8cf73ae66d06d128b","modified":1480083290465},{"_id":"public/tags/blog/index.html","hash":"159903d20f3bd5d812c9bb766082d1ff9d0de405","modified":1480083290465},{"_id":"public/tags/database/index.html","hash":"1cbf85d39c7c15b39fa2a926ef5c8cd2aff55a89","modified":1480083290465},{"_id":"public/tags/linux/index.html","hash":"bfceeb70b8953887ec9a4120224865596f08816f","modified":1480083290465},{"_id":"public/tags/android/page/4/index.html","hash":"8e47588e62248ff96ddfd7801ebb729ca72585ec","modified":1480083290465},{"_id":"public/tags/java/index.html","hash":"3157488850aba379fc2400e1aba6691f21244cad","modified":1480083290465},{"_id":"public/tags/设计模式/index.html","hash":"cf6d6aeeaee90007a9787b7d3695c076c20e5df1","modified":1480083290465},{"_id":"public/tags/python3/index.html","hash":"078b150c6a5e952213b4b31a22190f1225026b16","modified":1480083290465},{"_id":"public/tags/python/page/2/index.html","hash":"fbe640f94438f0599e30fa5a9ceb08c1be0fcb9c","modified":1480083290465},{"_id":"public/tags/generators/index.html","hash":"b8bf29c9f6853fe1ddcd129fa489830295c7a8e6","modified":1480083290465},{"_id":"public/tags/faq/index.html","hash":"3bb3acb6b297bb3335a591c928cae6e7db963643","modified":1480083290465},{"_id":"public/tags/spider/index.html","hash":"61d0b20c1252b7c21bfdca5f3c312d623a438fa2","modified":1480083290465},{"_id":"public/tags/bs4/index.html","hash":"7269d637776fb4de428568d58b3eed9a71ef3c48","modified":1480083290465},{"_id":"public/tags/git/index.html","hash":"5b3da2f3634a029a435435a556b9594ac5f3e0ff","modified":1480083290465},{"_id":"public/tags/callback/index.html","hash":"2ddb3b0a3ae4bfec80eee8d3470c79cfd91a6a41","modified":1480083290466},{"_id":"public/tags/quicksort/index.html","hash":"ae49e26b5987d3a14469517a2aec0977235417cf","modified":1480083290466},{"_id":"public/tags/sort/index.html","hash":"f09e4fe64660d780509fc7f7d0bfc7aeea9cb972","modified":1480083290466},{"_id":"public/tags/bit-manipulation/index.html","hash":"a637ff235c93ea93a060ae53011abd780460224c","modified":1480083290466},{"_id":"public/tags/oj/index.html","hash":"4e3ddefbd501a452179011660af1157d98790ea0","modified":1480083290466},{"_id":"public/tags/math/index.html","hash":"c32f981010fc66761bdb608504a6b15bc974e8f0","modified":1480083290466},{"_id":"public/tags/recursion/index.html","hash":"64d2709fdf33023813db54050922dbe9a70fb579","modified":1480083290466},{"_id":"public/tags/array/index.html","hash":"558201958fbaec8a28bdf2d983f9f02343287bb9","modified":1480083290466},{"_id":"public/tags/twoPointer/index.html","hash":"9dc2cc9210fae7f7ae957b2fee029cb9b9d7efb8","modified":1480083290466},{"_id":"public/tags/todo/index.html","hash":"bea0c032ab0fc0c3c7b2a7894126c8b03fe875f8","modified":1480083290466},{"_id":"public/tags/onlinejudge/index.html","hash":"cd46743b254e6686905c9cae14fba94e39df9766","modified":1480083290466},{"_id":"public/tags/binarysearch/index.html","hash":"f224f123f8a68f203612f2cef203dbdb5c518400","modified":1480083290466},{"_id":"public/tags/android-UI/index.html","hash":"bc4a7935d2a72fce3dbb7495c079d4f97fb38524","modified":1480083290466},{"_id":"public/tags/android-RecyclerView/index.html","hash":"88b22d1d350b89b54db0f1696ace4b2486d4d984","modified":1480083290466},{"_id":"public/tags/android-adb/index.html","hash":"2f4473ba579547e3c9918d55ed670d78c659a166","modified":1480083290466},{"_id":"public/tags/android-lifecycle/index.html","hash":"ef4f743196c8e201fe1a2c38abd624d9618ec332","modified":1480083290466},{"_id":"public/tags/android-broadcast/index.html","hash":"be0a0650292b8dfac8bd1214c304d19c665ffbd6","modified":1480083290466},{"_id":"public/tags/android-service/index.html","hash":"5d749ca14ca16e41cefc51b9e26942d70b350d96","modified":1480083290467},{"_id":"public/tags/concurrency/index.html","hash":"a45a032de116bdbef94a513c68eb8619b462f169","modified":1480083290467},{"_id":"public/tags/android-lib/index.html","hash":"3a6d624cbb676489af42b7d2653db926de63e52d","modified":1480083290467},{"_id":"public/tags/android-data/index.html","hash":"6aed6c576beac8365f1ea80614e7d22bea5ff376","modified":1480083290467},{"_id":"public/tags/Java/index.html","hash":"e12549735b39ddba379dce6a7e22e9c810649a85","modified":1480083290467},{"_id":"public/tags/oncurrency/index.html","hash":"55339426d0843fd99f7ab81c785ca123dfce6a57","modified":1480083290467},{"_id":"public/tags/matplotlib/index.html","hash":"c57644bb91452393532fef6d598d9d972dff8c8a","modified":1480083290467},{"_id":"public/tags/numpy/index.html","hash":"2b00b006e855522625535925471c2f3da2de856f","modified":1480083290467},{"_id":"public/tags/regex/index.html","hash":"9911648fb916b94c30766f4c28520be6f5882bdd","modified":1480083290467},{"_id":"public/tags/格式化输出/index.html","hash":"ea2f76e973b2f6c731df2e137f80f60028d1231d","modified":1480083290467},{"_id":"public/tags/io/index.html","hash":"899a2e88bd0cd2ccdbc77424323aac54f4955301","modified":1480083290467},{"_id":"public/tags/线段树/index.html","hash":"087ac608ebea39fc97024ebfd404a5ab048cd2a7","modified":1480083290467},{"_id":"public/tags/android-control/index.html","hash":"f5bc148fe4bfeb78a1b1dda70fceb0292e559276","modified":1480083290467},{"_id":"public/tags/区间查询/index.html","hash":"04dd18da1592e3f30aa720bce25d13026d47eb01","modified":1480083290467},{"_id":"public/tags/android-project/index.html","hash":"d01a93ef61c2eb90e1af9cfe0e213567314584dc","modified":1480083290467},{"_id":"public/tags/android-test/index.html","hash":"455942a81778d0c5294549e57c42a6aaf0c99e10","modified":1480083290467},{"_id":"public/tags/android-bar/index.html","hash":"610bb6fedc2c5f7583f1d0833c21d8e5d697c296","modified":1480083290467},{"_id":"public/tags/xml/index.html","hash":"6fca46f9d7e40d249d788586fb00448e38e6d1ff","modified":1480083290467},{"_id":"public/tags/pythonspider/index.html","hash":"2b5553d53dd91d1e7a3104ea8d16807f32bde8a2","modified":1480083290467},{"_id":"public/tags/selenium/index.html","hash":"dbb380c188e4b162d93e027aef871ee17aafe89e","modified":1480083290467},{"_id":"public/tags/socket/index.html","hash":"d32b8beed8a01b41853c34b5df14b9d438a7d890","modified":1480083290467},{"_id":"public/tags/android-activity/index.html","hash":"a4c1253029b952a987e61075c549ec644bb2c20c","modified":1480083290467},{"_id":"public/tags/android-adapter/index.html","hash":"734ec2c62ec64ca7b281849f89661c02111c2e03","modified":1480083290468},{"_id":"public/tags/PhantomJS/index.html","hash":"e3ea4ac4389abdcdd5dbbced405dbffec58cf1bb","modified":1480083290468},{"_id":"public/tags/android-view-pager/index.html","hash":"ddc8a35288b9e8266be71f21a622ade97c73a034","modified":1480083290468},{"_id":"public/2100/01/01/others-blog/index.html","hash":"d5ccc41414c4e7fc5dd1db369c06369dd0b363f9","modified":1480083290468},{"_id":"public/2016/11/25/android/第三方库/2016-11-25-retrofit-rxjava/index.html","hash":"f24037692c1f6a7a30df382ae7f3fd64fd5a34ae","modified":1480083290468},{"_id":"public/2016/11/18/design_pattern/2016-11-18-observer/index.html","hash":"71c4fb88749ccb787dc422b670a8854d1f2babb8","modified":1480083290468},{"_id":"public/2016/11/18/design_pattern/2016-11-18-callback/index.html","hash":"76147537f33138dcf3eed95f018afdcfd102aa74","modified":1480083290468},{"_id":"public/2016/11/17/design_pattern/2016-11-17-builder/index.html","hash":"a0e23960b398818a184becb45868e1a57ddb1047","modified":1480083290468},{"_id":"public/2016/11/15/android/AndroidSamples/background/2016-11-15-jobscheduler/index.html","hash":"2bd35a7a09eaa34b8dd35828ce8c94e6ab266aec","modified":1480083290468},{"_id":"public/2016/10/30/python/Spider/基础知识/2016-10-30-socket-basic/index.html","hash":"b42970cdacfd6affaaaa85cb8f36e839679f5f7c","modified":1480083290468},{"_id":"public/2016/10/30/python/Spider/douban/2016-10-30-douban-spider/index.html","hash":"75af2d23db1a5448a222cec7ea70e96ddd010c1d","modified":1480083290468},{"_id":"public/2016/10/30/python/2016-10-30-generator/index.html","hash":"263e50dd90f2a716541caba3c25a5f298720f502","modified":1480083290468},{"_id":"public/2016/10/26/java/concurrency/2016-10-26-collections-thread-safety/index.html","hash":"22737f902a9a08ba333fafd814527c9c8f5efb66","modified":1480083290468},{"_id":"public/2016/10/25/design_pattern/2016-10-25-factory-pattern/index.html","hash":"3e28bfa1da60363d548464eb749d72f0847a3f50","modified":1480083290468},{"_id":"public/2016/10/25/design_pattern/2016-10-25-singleton/index.html","hash":"9a3ebc3fb3bea6dfc00e5ef1a6eb010c1a5ce409","modified":1480083290468},{"_id":"public/2016/10/24/design_pattern/2016-10-24-basic-principle_2/index.html","hash":"23120d04228ddea4e224640f19bd0ac20b2bcbb6","modified":1480083290468},{"_id":"public/2016/10/24/design_pattern/2016-10-24-basic-principle_1/index.html","hash":"4ae0c47c3d4f1c48121bd6ef82e2e3b88e558925","modified":1480083290468},{"_id":"public/2016/10/23/python/Spider/基础知识/2016-10-29-xml-parse/index.html","hash":"cdbc797d1a1bde9ccb978f999a1cd0bb3657f16d","modified":1480083290468},{"_id":"public/2016/10/16/android/AndroidSamples/UI/2016-10-16-ActionBar-ShareActionProvider/index.html","hash":"12096f67ca2f51cee1e8297385f83445a8ad6f89","modified":1480083290468},{"_id":"public/2016/10/14/效率/2016-10-14-git/index.html","hash":"8cca91aeff5679ee3d5f656cb0c8eb3dd82e99af","modified":1480083290468},{"_id":"public/2016/10/10/Linux/2016-10-10-linux-bash/index.html","hash":"dbb4a9b6247a4a852465494429c0ff938600f2ed","modified":1480083290469},{"_id":"public/2016/10/04/python/numpy/2016-10-04-numpy-basic/index.html","hash":"bac6190d36881f1c6c9958b2890e35ea99651d04","modified":1480083290469},{"_id":"public/2016/10/04/python/matplotlib/2016-10-04-matplotlib-basic/index.html","hash":"33f634230e73296f461fdd4f92c605009e2859e5","modified":1480083290469},{"_id":"public/2016/09/24/android/AndroidSamples/UI/2016-09-24-ActionBar-Basic/index.html","hash":"129dc41989facd888134f5e76e2f0be22feaf705","modified":1480083290469},{"_id":"public/2016/09/18/android/UI相关/2016-09-18-RecyclerView/index.html","hash":"eb9ffe7c3ddd560ed01d761c56139a3ce14d3865","modified":1480083290469},{"_id":"public/2016/07/06/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-ListFragment/index.html","hash":"14f325e6de567bb4df0d81384eb78ed1210a8174","modified":1480083290469},{"_id":"public/2016/07/06/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-Intent/index.html","hash":"ca084f95b699a18e9a55dc931cbe963e1e99e806","modified":1480083290469},{"_id":"public/2016/06/03/android/开发实战/Sunshine开发实战/2016-06-03-android-test/index.html","hash":"167b1890a06252d42e265c005a3b4b984f94e1f1","modified":1480083290469},{"_id":"public/2016/05/13/android/第三方库/2016-05-13-volley/index.html","hash":"d559fb55acb1fffc4ce81496daaea667dd1a7d65","modified":1480083290469},{"_id":"public/2016/04/26/OJ/LeetCode/2016-04-26-easy-move-zeroes/index.html","hash":"4a3b046b4c6609abc1b73902d8421ab6509d8a69","modified":1480083290469},{"_id":"public/2016/04/26/OJ/LeetCode/2016-04-26-easy-add-digits/index.html","hash":"3d7344f4cf286b4d4c238096c3a8d6d570211e4b","modified":1480083290469},{"_id":"public/2016/04/21/OJ/LeetCode/2016-04-21-medium-343-122/index.html","hash":"9aff745c4a00fff4f1e1459a2b7473b62cf76875","modified":1480083290469},{"_id":"public/2016/04/21/OJ/LeetCode/2016-04-21-medium-SingleNum/index.html","hash":"7b2264942c5c5a6f9e4032fdf98a716ce6a0c816","modified":1480083290470},{"_id":"public/2016/04/05/android/并发编程/2016-04-05-handler-threads/index.html","hash":"634a309286992b921fa7be63f1ba70807e1c5cad","modified":1480083290470},{"_id":"public/2016/03/29/python/Spider/基础知识/2016-03-29-beautiful-soup4-basic/index.html","hash":"9998fbae78bcd08aae9088b125f8ab6777d567a2","modified":1480083290470},{"_id":"public/2016/03/27/python/Spider/基础知识/2016-03-27-python-spider/index.html","hash":"93367cd6fe51c4ff38caa5f3d25dd5d175113af8","modified":1480083290470},{"_id":"public/2016/03/27/python/Spider/基础知识/2016-03-27-regex/index.html","hash":"2d164a8ca26e1e44af273550381ff094ecd05fb0","modified":1480083290470},{"_id":"public/2016/03/26/android/控件/Notification/2016-03-26-Notification-basic/index.html","hash":"1026b048f5466373da3fe1794a4ea08edf2dc160","modified":1480083290470},{"_id":"public/2016/03/26/android/数据持久化/2016-03-26-content-provider/index.html","hash":"9fd2b59472d24ae9d95f6017636304cb97a59fd7","modified":1480083290470},{"_id":"public/2016/03/25/android/数据持久化/2016-03-25-data-persistence/index.html","hash":"ce527ecec120e6e21d08dd1b192244e17c321818","modified":1480083290470},{"_id":"public/2016/03/25/android/控件/AlertDialog/2016-03-25-Alert-Dialog/index.html","hash":"31dec53ca6cf456359b76c59f7bf3f716696a488","modified":1480083290471},{"_id":"public/2016/03/20/android/四大组件/2016-03-20-broadcast-basic/index.html","hash":"5ee49ede2b8e7ab0bc08c86b68747884187d5639","modified":1480083290471},{"_id":"public/2016/03/17/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-17-Diaglog/index.html","hash":"5782bfa70f80fc8dc292cd2d064fa1dbdfc4f638","modified":1480083290471},{"_id":"public/2016/03/14/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-14-CriminalIntent-Fragment/index.html","hash":"90b3046f28c2b0532c5d9ed278d4c250c62d2863","modified":1480083290471},{"_id":"public/2016/03/09/android/控件/Bar/2016-03-09-ProgressBar/index.html","hash":"cf2e54051d8e116da911f394fe577ffb0f9b774d","modified":1480083290471},{"_id":"public/2016/03/09/android/UI相关/Fragment/2016-03-09-Fragment-basic/index.html","hash":"376fbe5d95b120f98651376567309e00e9b009c2","modified":1480083290471},{"_id":"public/2016/03/07/android/控件/WebView/2016-03-07-使用WebView显示网页/index.html","hash":"8f8fe2d12380d018c6377710b22bf24e897d5175","modified":1480083290471},{"_id":"public/2016/02/22/android/UI相关/布局/2016-02-22-Layout-Gravity和Gravity/index.html","hash":"b880e01db9ac665c53ae26338cc75cd1e444ae65","modified":1480083290471},{"_id":"public/2016/02/21/OJ/PAT/2016-02-21-1010题-Radix-25分/index.html","hash":"50bc516b05896c1c4709db5354289060fd7de683","modified":1480083290471},{"_id":"public/2016/02/18/OJ/Codeforces/eduRound/2016-02-18-Codeforces-Edu-Round7总结/index.html","hash":"d85f35803fd965385b71e5092feae7d8ef4b3ae5","modified":1480083290471},{"_id":"public/categories/Android/index.html","hash":"8ad71d26b7403c7f66aef02743a97ef600d63dac","modified":1480083290471},{"_id":"public/categories/Android/page/2/index.html","hash":"6d0c8dc3fc6dfe3dde2b2370b48addecbe6aaabf","modified":1480083290471},{"_id":"public/categories/Android/page/3/index.html","hash":"9933ade5d58a4a9f5003d95846607eda8760e026","modified":1480083290472},{"_id":"public/categories/Python/index.html","hash":"3ee032d89eb4c89cfcfece2082ce4a272df9d9bb","modified":1480083290472},{"_id":"public/archives/index.html","hash":"b9a6ca7db2eeb0dc156b3806b2b9fcae46e64641","modified":1480083290472},{"_id":"public/archives/page/2/index.html","hash":"8358ef482728b882951381260b4be380997b1266","modified":1480083290472},{"_id":"public/archives/page/3/index.html","hash":"8573a87a0354b134201cf709324da0db1ecd0642","modified":1480083290472},{"_id":"public/archives/page/4/index.html","hash":"930a03ab2b21ac9454f654b9a2b890e4179b6383","modified":1480083290472},{"_id":"public/archives/page/5/index.html","hash":"e8cb44ebdbd027c1bf2d9f347c3e91f0b4c23301","modified":1480083290472},{"_id":"public/archives/page/6/index.html","hash":"546fdc5d1f20cb2d10754d3437a0ecefdc7c055c","modified":1480083290472},{"_id":"public/archives/page/7/index.html","hash":"fe53495cd6e2873cf302f290d337e2db24d41bca","modified":1480083290472},{"_id":"public/archives/2016/index.html","hash":"40363587ac9b0cc489b2c0e246e7c2de6e0f62b4","modified":1480083290472},{"_id":"public/archives/2016/page/2/index.html","hash":"73c1b086db4d4711953c797c45d910ce9abf38ec","modified":1480083290472},{"_id":"public/archives/2016/page/3/index.html","hash":"7b02273eed069aebcb19b2b35ea0138714441071","modified":1480083290472},{"_id":"public/archives/2016/page/4/index.html","hash":"a0b785a255243c476649564e2b5c4b23d085d78f","modified":1480083290472},{"_id":"public/archives/2016/page/5/index.html","hash":"ee90f9cf594c2c6a72ba7be00bb5b045f3e603c0","modified":1480083290472},{"_id":"public/archives/2016/page/6/index.html","hash":"8ae8e4f28089a02bb94aca8e743d073e025bbf17","modified":1480083290472},{"_id":"public/archives/2016/page/7/index.html","hash":"5a7595c0111d091d0ed906fc112f985c24098c96","modified":1480083290472},{"_id":"public/archives/2016/03/index.html","hash":"01d35caa18766e63fc1ac6e2ead21424d13c53ab","modified":1480083290472},{"_id":"public/archives/2016/03/page/2/index.html","hash":"dcc50ea8178cecd7133c5724e15cbbf29252466a","modified":1480083290472},{"_id":"public/archives/2016/10/index.html","hash":"5d9bb6428a0eb8d1976ae41549a83378f7d9d74e","modified":1480083290472},{"_id":"public/index.html","hash":"3fbd06a766b1cf424174d1a3fbad6119006b660d","modified":1480083290472},{"_id":"public/page/2/index.html","hash":"63d7beb32088d4baa28bc5982ad00f5d5a5ea7c1","modified":1480083290472},{"_id":"public/page/3/index.html","hash":"490bd1cf69c10d75dd4bba6934ac594d6eee4d75","modified":1480083290472},{"_id":"public/page/4/index.html","hash":"83f2cb217f1f33a8ad22df76691deac7f9b83fa5","modified":1480083290472},{"_id":"public/page/5/index.html","hash":"cbfc17a02b0fb599276809418d0041c6fb13f4f6","modified":1480083290472},{"_id":"public/page/6/index.html","hash":"9f518ecea3bff65b469a8d34c601103670eac15f","modified":1480083290473},{"_id":"public/page/7/index.html","hash":"dbb5d4dde2d2463632ef32871cdff2faea870858","modified":1480083290473},{"_id":"public/tags/android/index.html","hash":"e3583b05a897bcb11bf35bc46ee6a0e403720f36","modified":1480083290473},{"_id":"public/tags/android/page/2/index.html","hash":"fdcf45f105f2b99e54a8b03824b606017e8eb36a","modified":1480083290473},{"_id":"public/tags/android/page/3/index.html","hash":"63e8071729a4c1880c4379d1f4186ca973d47a48","modified":1480083290473},{"_id":"public/tags/python/index.html","hash":"7888079d55d37272d937c26e6546d466d07101aa","modified":1480083290473},{"_id":"public/tags/android-fragment/index.html","hash":"d6faab5028024aba82bd39083295cde70db40d13","modified":1480083290473},{"_id":"public/favicon.ico","hash":"83ba696a277e1bd8e3140432ad5a7101a592f90e","modified":1480083290499},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1480083290500},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1480083290500},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1480083290500},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1480083290500},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1480083290500},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1480083290500},{"_id":"public/css/grids-responsive-min.css","hash":"703826508193cbe21f2745d3e837256e224eb512","modified":1480083290525},{"_id":"public/css/jquery.fancybox.css","hash":"f42f761157f26244673eb2f4a9215c70956f80dc","modified":1480083290525},{"_id":"public/css/normalize.css","hash":"24759804cb541e96db7b8eafa7e9fd32cbab59da","modified":1480083290525},{"_id":"public/css/jquery.css","hash":"f42f761157f26244673eb2f4a9215c70956f80dc","modified":1480083290525},{"_id":"public/js/codeblock-resizer.js","hash":"5d0b786d60bf225d9eabcc9cece2719ff4d9b6cd","modified":1480083290525},{"_id":"public/js/totop.js","hash":"7dbf8fcf582a4fb6eb9b2c60d6de9f9c2091ec4c","modified":1480083290525},{"_id":"public/js/smartresize.js","hash":"3ef157fd877167e3290f42c67a624ea375a46c24","modified":1480083290525},{"_id":"public/js/search.js","hash":"53db2eb255dd40a412ed62ea7332ca5a22f7816f","modified":1480083290525},{"_id":"public/js/fancybox.js","hash":"13c4781570339f4fba76a3d7f202e442817dd605","modified":1480083290525},{"_id":"public/js/share.js","hash":"f49776e0baa2b913ddc7a20db24b3edd469c8343","modified":1480083290525},{"_id":"public/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1480083290526},{"_id":"public/css/pure-min.css","hash":"8cf7ea3e9e00e752de63fbc443e9300366327cd9","modified":1480083290526},{"_id":"public/css/style.css","hash":"2afb6e7e24abf81c8b7b7d472fb0bb9b9a1eac16","modified":1480083290526}],"Category":[{"name":"database","_id":"civxvdgeg0007u8jrvjh4pmhm"},{"name":"Linux","_id":"civxvdgen000cu8jrhix8k5nk"},{"name":"Android","_id":"civxvdgev000iu8jry4m1mr47"},{"name":"OO","_id":"civxvdgey000ou8jrysy0zcqu"},{"name":"Python","_id":"civxvdgfh001cu8jr3fv85pif"},{"name":"效率","_id":"civxvdgfm001nu8jrak971dmq"},{"name":"OJ","_id":"civxvdgi1002uu8jrxepd7ayc"}],"Data":[],"Page":[],"Post":[{"author":"ivyxjc","date":"2099-12-31T16:00:00.000Z","title":"文章备份","category":null,"keywords":null,"description":"他人的一些比较好的文章备份","toc":true,"_content":"\n一些比较好的博客文章留档, 防止将来要用的时候又要浪费时间找.  （时间是2100年只是为了置顶...）\n\n## android\n\n### 第三方库\n1. [给 Android 开发者的 RxJava 详解](https://gank.io/post/560e15be2dca930e00da1083)<br>[archive.org备份页面](https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083)\n2. [RxJava 与 Retrofit 结合的最佳实践](https://gank.io/post/56e80c2c677659311bed9841)<br>[archive.org备份页面](https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841)\n\n## java\n\n### java8\n\n1. [java8 默认方法](http://ebnbin.com/2015/12/20/java-8-default-methods/)<br>[jarchive.org备份页面 ](https://web.archive.org/web/20161023233757/http://ebnbin.com/2015/12/20/java-8-default-methods/)\n\n\n\n\n## python\n\n### Spider\n\n1. 500 or less中A Web Crawler With asyncio Coroutines的中文翻译版(关于python爬虫以及协程) :<br>[<译> A Web Crawler With asyncio Coroutines](http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html)<br>[archive.org备份页面](http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html)\n\n\n### python\n\n1. yield到底在做什么, 来自stackoverflow中的回答:<br>\n[what-does-the-yield-keyword-do](http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do)<br>[archive.org备份页面](https://web.archive.org/web/20161018133835/http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do)<br><br>[中文翻译版本](http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html)<br>[archive.org备份页面](https://web.archive.org/web/20161030082921/http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html)\n\n\n\n\n\n\n## Raspberry\n\n1. [树莓派3的使用(Raspbian)](https://www.zybuluo.com/yangxuan/note/321467#7%E4%B8%BAssh%E5%90%AF%E7%94%A8%E4%B8%A4%E6%AD%A5%E8%AE%A4%E8%AF%81)\n2. [树莓派通过邮件上报实时IP，随时随地远程登录树莓派](http://www.kawabangga.com/posts/1398)<br>[archive.org备份页面](https://web.archive.org/web/20160731051025/http://www.kawabangga.com/posts/1398)\n3. [树莓派 挂载SAMBA（小米路由器）](http://www.itdadao.com/articles/c15a588496p0.html)<br>[archive.org备份页面](https://web.archive.org/save/http://www.itdadao.com/articles/c15a588496p0.html)\n\n\n## proxy\n\n1. [kcp安装配置教程](http://www.8dlive.com/post/371.html)<br>[archive.org备份页面](https://web.archive.org/web/20161106035844/http://www.8dlive.com/post/371.html)\n","source":"_posts/others-blog.md","raw":"---\nauthor: ivyxjc\ndate: 2100-01-01\ntitle: 文章备份\ncategory:\ntags: [backup,blog]\nkeywords:\ndescription: 他人的一些比较好的文章备份\ntoc: true\n---\n\n一些比较好的博客文章留档, 防止将来要用的时候又要浪费时间找.  （时间是2100年只是为了置顶...）\n\n## android\n\n### 第三方库\n1. [给 Android 开发者的 RxJava 详解](https://gank.io/post/560e15be2dca930e00da1083)<br>[archive.org备份页面](https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083)\n2. [RxJava 与 Retrofit 结合的最佳实践](https://gank.io/post/56e80c2c677659311bed9841)<br>[archive.org备份页面](https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841)\n\n## java\n\n### java8\n\n1. [java8 默认方法](http://ebnbin.com/2015/12/20/java-8-default-methods/)<br>[jarchive.org备份页面 ](https://web.archive.org/web/20161023233757/http://ebnbin.com/2015/12/20/java-8-default-methods/)\n\n\n\n\n## python\n\n### Spider\n\n1. 500 or less中A Web Crawler With asyncio Coroutines的中文翻译版(关于python爬虫以及协程) :<br>[<译> A Web Crawler With asyncio Coroutines](http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html)<br>[archive.org备份页面](http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html)\n\n\n### python\n\n1. yield到底在做什么, 来自stackoverflow中的回答:<br>\n[what-does-the-yield-keyword-do](http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do)<br>[archive.org备份页面](https://web.archive.org/web/20161018133835/http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do)<br><br>[中文翻译版本](http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html)<br>[archive.org备份页面](https://web.archive.org/web/20161030082921/http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html)\n\n\n\n\n\n\n## Raspberry\n\n1. [树莓派3的使用(Raspbian)](https://www.zybuluo.com/yangxuan/note/321467#7%E4%B8%BAssh%E5%90%AF%E7%94%A8%E4%B8%A4%E6%AD%A5%E8%AE%A4%E8%AF%81)\n2. [树莓派通过邮件上报实时IP，随时随地远程登录树莓派](http://www.kawabangga.com/posts/1398)<br>[archive.org备份页面](https://web.archive.org/web/20160731051025/http://www.kawabangga.com/posts/1398)\n3. [树莓派 挂载SAMBA（小米路由器）](http://www.itdadao.com/articles/c15a588496p0.html)<br>[archive.org备份页面](https://web.archive.org/save/http://www.itdadao.com/articles/c15a588496p0.html)\n\n\n## proxy\n\n1. [kcp安装配置教程](http://www.8dlive.com/post/371.html)<br>[archive.org备份页面](https://web.archive.org/web/20161106035844/http://www.8dlive.com/post/371.html)\n","slug":"others-blog","published":1,"updated":"2016-11-25T11:28:46.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdg9k0000u8jr7ccwwqgz","content":"<p>一些比较好的博客文章留档, 防止将来要用的时候又要浪费时间找.  （时间是2100年只是为了置顶…）</p>\n<h2 id=\"android\"><a href=\"#android\" class=\"headerlink\" title=\"android\"></a>android</h2><h3 id=\"第三方库\"><a href=\"#第三方库\" class=\"headerlink\" title=\"第三方库\"></a>第三方库</h3><ol>\n<li><a href=\"https://gank.io/post/560e15be2dca930e00da1083\" target=\"_blank\" rel=\"external\">给 Android 开发者的 RxJava 详解</a><br><a href=\"https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n<li><a href=\"https://gank.io/post/56e80c2c677659311bed9841\" target=\"_blank\" rel=\"external\">RxJava 与 Retrofit 结合的最佳实践</a><br><a href=\"https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n</ol>\n<h2 id=\"java\"><a href=\"#java\" class=\"headerlink\" title=\"java\"></a>java</h2><h3 id=\"java8\"><a href=\"#java8\" class=\"headerlink\" title=\"java8\"></a>java8</h3><ol>\n<li><a href=\"http://ebnbin.com/2015/12/20/java-8-default-methods/\" target=\"_blank\" rel=\"external\">java8 默认方法</a><br><a href=\"https://web.archive.org/web/20161023233757/http://ebnbin.com/2015/12/20/java-8-default-methods/\" target=\"_blank\" rel=\"external\">jarchive.org备份页面 </a></li>\n</ol>\n<h2 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h2><h3 id=\"Spider\"><a href=\"#Spider\" class=\"headerlink\" title=\"Spider\"></a>Spider</h3><ol>\n<li>500 or less中A Web Crawler With asyncio Coroutines的中文翻译版(关于python爬虫以及协程) :<br><a href=\"http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html\" target=\"_blank\" rel=\"external\">&lt;译&gt; A Web Crawler With asyncio Coroutines</a><br><a href=\"http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n</ol>\n<h3 id=\"python-1\"><a href=\"#python-1\" class=\"headerlink\" title=\"python\"></a>python</h3><ol>\n<li>yield到底在做什么, 来自stackoverflow中的回答:<br><br><a href=\"http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\" target=\"_blank\" rel=\"external\">what-does-the-yield-keyword-do</a><br><a href=\"https://web.archive.org/web/20161018133835/http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\" target=\"_blank\" rel=\"external\">archive.org备份页面</a><br><br><a href=\"http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html\" target=\"_blank\" rel=\"external\">中文翻译版本</a><br><a href=\"https://web.archive.org/web/20161030082921/http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n</ol>\n<h2 id=\"Raspberry\"><a href=\"#Raspberry\" class=\"headerlink\" title=\"Raspberry\"></a>Raspberry</h2><ol>\n<li><a href=\"https://www.zybuluo.com/yangxuan/note/321467#7%E4%B8%BAssh%E5%90%AF%E7%94%A8%E4%B8%A4%E6%AD%A5%E8%AE%A4%E8%AF%81\" target=\"_blank\" rel=\"external\">树莓派3的使用(Raspbian)</a></li>\n<li><a href=\"http://www.kawabangga.com/posts/1398\" target=\"_blank\" rel=\"external\">树莓派通过邮件上报实时IP，随时随地远程登录树莓派</a><br><a href=\"https://web.archive.org/web/20160731051025/http://www.kawabangga.com/posts/1398\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n<li><a href=\"http://www.itdadao.com/articles/c15a588496p0.html\" target=\"_blank\" rel=\"external\">树莓派 挂载SAMBA（小米路由器）</a><br><a href=\"https://web.archive.org/save/http://www.itdadao.com/articles/c15a588496p0.html\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n</ol>\n<h2 id=\"proxy\"><a href=\"#proxy\" class=\"headerlink\" title=\"proxy\"></a>proxy</h2><ol>\n<li><a href=\"http://www.8dlive.com/post/371.html\" target=\"_blank\" rel=\"external\">kcp安装配置教程</a><br><a href=\"https://web.archive.org/web/20161106035844/http://www.8dlive.com/post/371.html\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n</ol>\n","excerpt":"","more":"<p>一些比较好的博客文章留档, 防止将来要用的时候又要浪费时间找.  （时间是2100年只是为了置顶…）</p>\n<h2 id=\"android\"><a href=\"#android\" class=\"headerlink\" title=\"android\"></a>android</h2><h3 id=\"第三方库\"><a href=\"#第三方库\" class=\"headerlink\" title=\"第三方库\"></a>第三方库</h3><ol>\n<li><a href=\"https://gank.io/post/560e15be2dca930e00da1083\">给 Android 开发者的 RxJava 详解</a><br><a href=\"https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083\">archive.org备份页面</a></li>\n<li><a href=\"https://gank.io/post/56e80c2c677659311bed9841\">RxJava 与 Retrofit 结合的最佳实践</a><br><a href=\"https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841\">archive.org备份页面</a></li>\n</ol>\n<h2 id=\"java\"><a href=\"#java\" class=\"headerlink\" title=\"java\"></a>java</h2><h3 id=\"java8\"><a href=\"#java8\" class=\"headerlink\" title=\"java8\"></a>java8</h3><ol>\n<li><a href=\"http://ebnbin.com/2015/12/20/java-8-default-methods/\">java8 默认方法</a><br><a href=\"https://web.archive.org/web/20161023233757/http://ebnbin.com/2015/12/20/java-8-default-methods/\">jarchive.org备份页面 </a></li>\n</ol>\n<h2 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h2><h3 id=\"Spider\"><a href=\"#Spider\" class=\"headerlink\" title=\"Spider\"></a>Spider</h3><ol>\n<li>500 or less中A Web Crawler With asyncio Coroutines的中文翻译版(关于python爬虫以及协程) :<br><a href=\"http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html\">&lt;译&gt; A Web Crawler With asyncio Coroutines</a><br><a href=\"http://drafts.damnever.com/2015/A-Web-Crawler-With-asyncio-Coroutines.html\">archive.org备份页面</a></li>\n</ol>\n<h3 id=\"python-1\"><a href=\"#python-1\" class=\"headerlink\" title=\"python\"></a>python</h3><ol>\n<li>yield到底在做什么, 来自stackoverflow中的回答:<br><br><a href=\"http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\">what-does-the-yield-keyword-do</a><br><a href=\"https://web.archive.org/web/20161018133835/http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\">archive.org备份页面</a><br><br><a href=\"http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html\">中文翻译版本</a><br><a href=\"https://web.archive.org/web/20161030082921/http://pyzh.readthedocs.io/en/latest/the-python-yield-keyword-explained.html\">archive.org备份页面</a></li>\n</ol>\n<h2 id=\"Raspberry\"><a href=\"#Raspberry\" class=\"headerlink\" title=\"Raspberry\"></a>Raspberry</h2><ol>\n<li><a href=\"https://www.zybuluo.com/yangxuan/note/321467#7%E4%B8%BAssh%E5%90%AF%E7%94%A8%E4%B8%A4%E6%AD%A5%E8%AE%A4%E8%AF%81\">树莓派3的使用(Raspbian)</a></li>\n<li><a href=\"http://www.kawabangga.com/posts/1398\">树莓派通过邮件上报实时IP，随时随地远程登录树莓派</a><br><a href=\"https://web.archive.org/web/20160731051025/http://www.kawabangga.com/posts/1398\">archive.org备份页面</a></li>\n<li><a href=\"http://www.itdadao.com/articles/c15a588496p0.html\">树莓派 挂载SAMBA（小米路由器）</a><br><a href=\"https://web.archive.org/save/http://www.itdadao.com/articles/c15a588496p0.html\">archive.org备份页面</a></li>\n</ol>\n<h2 id=\"proxy\"><a href=\"#proxy\" class=\"headerlink\" title=\"proxy\"></a>proxy</h2><ol>\n<li><a href=\"http://www.8dlive.com/post/371.html\">kcp安装配置教程</a><br><a href=\"https://web.archive.org/web/20161106035844/http://www.8dlive.com/post/371.html\">archive.org备份页面</a></li>\n</ol>\n"},{"author":"ivyxjc","date":"2016-10-23T16:00:00.000Z","title":"mysql基本命令","keywords":null,"description":"mysql基本命令","toc":true,"_content":"\n\n`select count(column_name) from table_name;` 计数\n\n`UPDATE movie_name SET flag='1' WHERE movie_id=214143` 更新\n``\n","source":"_posts/database/2016-11-06-mysql_basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-24\ntitle: mysql基本命令\ncategory: database\ntags: [database]\nkeywords:\ndescription: mysql基本命令\ntoc: true\n---\n\n\n`select count(column_name) from table_name;` 计数\n\n`UPDATE movie_name SET flag='1' WHERE movie_id=214143` 更新\n``\n","slug":"database/2016-11-06-mysql_basic","published":1,"updated":"2016-11-10T12:45:56.068Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdged0005u8jrsq7bu0g0","content":"<p><code>select count(column_name) from table_name;</code> 计数</p>\n<p><code>UPDATE movie_name SET flag=&#39;1&#39; WHERE movie_id=214143</code> 更新<br>``</p>\n","excerpt":"","more":"<p><code>select count(column_name) from table_name;</code> 计数</p>\n<p><code>UPDATE movie_name SET flag=&#39;1&#39; WHERE movie_id=214143</code> 更新<br>``</p>\n"},{"author":"ivyxjc","date":"2016-10-09T16:00:00.000Z","title":"Linux 常用命令","keywords":null,"description":"介绍与解压, 文件操作, vim操作, 进程等相关的bash命令.","toc":true,"_content":"\n## 解压\n\n### 解压.zip文件\n\n```bash\nunzip xxx.zip\n```\n\n### 解压tar.gz文件\n\n\n## 文件相关操作\n\n### 空间使用情况\n\n`df -h`: 查看空间使用情况\n### 移动\n\n\nmv dir1 dir2\n\n## 进程相关\n\n### 如何查看正在运行的进程\n\n`ps -A`:显示所有的进程\n`ps -a`:显示终端中包括其它用户的所有进程\n`ps -x`:显示无控制终端的进程\n\n### 如何关闭正在运行的进程\n\n`kill -9 xxx`:xxx是进程的PID\n\n### 显示端口占用情况\n\n`lsof -i`\n\n## vim相关操作\n\n### 查找\n\n?pattern 光标下方查找\n/pattern 光标上方查找\n\n\n## 定时任务\n\n`crontab -l`:可以查看正在进行的定时任务\n`crontab -e`:可以进行修改\n`/etc/init.d/cron restart`: 重新该服务\n","source":"_posts/Linux/2016-10-10-linux-bash.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-10\ntitle: Linux 常用命令\ncategory: Linux\ntags: [linux]\nkeywords:\ndescription: 介绍与解压, 文件操作, vim操作, 进程等相关的bash命令.\ntoc: true\n---\n\n## 解压\n\n### 解压.zip文件\n\n```bash\nunzip xxx.zip\n```\n\n### 解压tar.gz文件\n\n\n## 文件相关操作\n\n### 空间使用情况\n\n`df -h`: 查看空间使用情况\n### 移动\n\n\nmv dir1 dir2\n\n## 进程相关\n\n### 如何查看正在运行的进程\n\n`ps -A`:显示所有的进程\n`ps -a`:显示终端中包括其它用户的所有进程\n`ps -x`:显示无控制终端的进程\n\n### 如何关闭正在运行的进程\n\n`kill -9 xxx`:xxx是进程的PID\n\n### 显示端口占用情况\n\n`lsof -i`\n\n## vim相关操作\n\n### 查找\n\n?pattern 光标下方查找\n/pattern 光标上方查找\n\n\n## 定时任务\n\n`crontab -l`:可以查看正在进行的定时任务\n`crontab -e`:可以进行修改\n`/etc/init.d/cron restart`: 重新该服务\n","slug":"Linux/2016-10-10-linux-bash","published":1,"updated":"2016-10-30T14:49:55.921Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgef0006u8jr6hrodi9m","content":"<h2 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h2><h3 id=\"解压-zip文件\"><a href=\"#解压-zip文件\" class=\"headerlink\" title=\"解压.zip文件\"></a>解压.zip文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">unzip xxx.zip</div></pre></td></tr></table></figure>\n<h3 id=\"解压tar-gz文件\"><a href=\"#解压tar-gz文件\" class=\"headerlink\" title=\"解压tar.gz文件\"></a>解压tar.gz文件</h3><h2 id=\"文件相关操作\"><a href=\"#文件相关操作\" class=\"headerlink\" title=\"文件相关操作\"></a>文件相关操作</h2><h3 id=\"空间使用情况\"><a href=\"#空间使用情况\" class=\"headerlink\" title=\"空间使用情况\"></a>空间使用情况</h3><p><code>df -h</code>: 查看空间使用情况</p>\n<h3 id=\"移动\"><a href=\"#移动\" class=\"headerlink\" title=\"移动\"></a>移动</h3><p>mv dir1 dir2</p>\n<h2 id=\"进程相关\"><a href=\"#进程相关\" class=\"headerlink\" title=\"进程相关\"></a>进程相关</h2><h3 id=\"如何查看正在运行的进程\"><a href=\"#如何查看正在运行的进程\" class=\"headerlink\" title=\"如何查看正在运行的进程\"></a>如何查看正在运行的进程</h3><p><code>ps -A</code>:显示所有的进程<br><code>ps -a</code>:显示终端中包括其它用户的所有进程<br><code>ps -x</code>:显示无控制终端的进程</p>\n<h3 id=\"如何关闭正在运行的进程\"><a href=\"#如何关闭正在运行的进程\" class=\"headerlink\" title=\"如何关闭正在运行的进程\"></a>如何关闭正在运行的进程</h3><p><code>kill -9 xxx</code>:xxx是进程的PID</p>\n<h3 id=\"显示端口占用情况\"><a href=\"#显示端口占用情况\" class=\"headerlink\" title=\"显示端口占用情况\"></a>显示端口占用情况</h3><p><code>lsof -i</code></p>\n<h2 id=\"vim相关操作\"><a href=\"#vim相关操作\" class=\"headerlink\" title=\"vim相关操作\"></a>vim相关操作</h2><h3 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h3><p>?pattern 光标下方查找<br>/pattern 光标上方查找</p>\n<h2 id=\"定时任务\"><a href=\"#定时任务\" class=\"headerlink\" title=\"定时任务\"></a>定时任务</h2><p><code>crontab -l</code>:可以查看正在进行的定时任务<br><code>crontab -e</code>:可以进行修改<br><code>/etc/init.d/cron restart</code>: 重新该服务</p>\n","excerpt":"","more":"<h2 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h2><h3 id=\"解压-zip文件\"><a href=\"#解压-zip文件\" class=\"headerlink\" title=\"解压.zip文件\"></a>解压.zip文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">unzip xxx.zip</div></pre></td></tr></table></figure>\n<h3 id=\"解压tar-gz文件\"><a href=\"#解压tar-gz文件\" class=\"headerlink\" title=\"解压tar.gz文件\"></a>解压tar.gz文件</h3><h2 id=\"文件相关操作\"><a href=\"#文件相关操作\" class=\"headerlink\" title=\"文件相关操作\"></a>文件相关操作</h2><h3 id=\"空间使用情况\"><a href=\"#空间使用情况\" class=\"headerlink\" title=\"空间使用情况\"></a>空间使用情况</h3><p><code>df -h</code>: 查看空间使用情况</p>\n<h3 id=\"移动\"><a href=\"#移动\" class=\"headerlink\" title=\"移动\"></a>移动</h3><p>mv dir1 dir2</p>\n<h2 id=\"进程相关\"><a href=\"#进程相关\" class=\"headerlink\" title=\"进程相关\"></a>进程相关</h2><h3 id=\"如何查看正在运行的进程\"><a href=\"#如何查看正在运行的进程\" class=\"headerlink\" title=\"如何查看正在运行的进程\"></a>如何查看正在运行的进程</h3><p><code>ps -A</code>:显示所有的进程<br><code>ps -a</code>:显示终端中包括其它用户的所有进程<br><code>ps -x</code>:显示无控制终端的进程</p>\n<h3 id=\"如何关闭正在运行的进程\"><a href=\"#如何关闭正在运行的进程\" class=\"headerlink\" title=\"如何关闭正在运行的进程\"></a>如何关闭正在运行的进程</h3><p><code>kill -9 xxx</code>:xxx是进程的PID</p>\n<h3 id=\"显示端口占用情况\"><a href=\"#显示端口占用情况\" class=\"headerlink\" title=\"显示端口占用情况\"></a>显示端口占用情况</h3><p><code>lsof -i</code></p>\n<h2 id=\"vim相关操作\"><a href=\"#vim相关操作\" class=\"headerlink\" title=\"vim相关操作\"></a>vim相关操作</h2><h3 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h3><p>?pattern 光标下方查找<br>/pattern 光标上方查找</p>\n<h2 id=\"定时任务\"><a href=\"#定时任务\" class=\"headerlink\" title=\"定时任务\"></a>定时任务</h2><p><code>crontab -l</code>:可以查看正在进行的定时任务<br><code>crontab -e</code>:可以进行修改<br><code>/etc/init.d/cron restart</code>: 重新该服务</p>\n"},{"date":"2015-12-31T16:00:00.000Z","layout":"page","title":"about","_content":"\nNickname: [ivyxjc](https://ivyxjc.xyz)\n\nEmail:[ivyxjc1994@hotmailc.com](mailto:ivyxjc@1994@hotmail.com)\n\nGithub: [@ivyxjc](https://github.com/ivyxjc)\n","source":"_posts/about/index.md","raw":"---\ndate: 2016-01-01\nlayout: page\ntitle: about\n---\n\nNickname: [ivyxjc](https://ivyxjc.xyz)\n\nEmail:[ivyxjc1994@hotmailc.com](mailto:ivyxjc@1994@hotmail.com)\n\nGithub: [@ivyxjc](https://github.com/ivyxjc)\n","slug":"about/index","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"photos":[],"link":"","_id":"civxvdgeh0009u8jr90s2bu3e","content":"<p>Nickname: <a href=\"https://ivyxjc.xyz\">ivyxjc</a></p>\n<p>Email:<a href=\"mailto:ivyxjc@1994@hotmail.com\" target=\"_blank\" rel=\"external\">ivyxjc1994@hotmailc.com</a></p>\n<p>Github: <a href=\"https://github.com/ivyxjc\" target=\"_blank\" rel=\"external\">@ivyxjc</a></p>\n","excerpt":"","more":"<p>Nickname: <a href=\"https://ivyxjc.xyz\">ivyxjc</a></p>\n<p>Email:<a href=\"mailto:ivyxjc@1994@hotmail.com\">ivyxjc1994@hotmailc.com</a></p>\n<p>Github: <a href=\"https://github.com/ivyxjc\">@ivyxjc</a></p>\n"},{"author":"ivyxjc","date":"2016-05-10T16:00:00.000Z","title":"android编程中的一些常见问题和解决办法","keywords":null,"description":"Android开发中常见的一些细节问题.","_content":"\n### 1.如何解决有些函数只能接受`String`而无法接受`Int`\n\n这样就无法使用`R.string...`.\n\n解决方法:<br>\n`getResources().getString(R.string.aaa))`\n","source":"_posts/android/2016-05-11-android-qa.md","raw":"---\nauthor: ivyxjc\ndate: 2016-05-11\ntitle: android编程中的一些常见问题和解决办法\ncategory: Android\ntags: [android,java]\nkeywords:\ndescription: Android开发中常见的一些细节问题.\n---\n\n### 1.如何解决有些函数只能接受`String`而无法接受`Int`\n\n这样就无法使用`R.string...`.\n\n解决方法:<br>\n`getResources().getString(R.string.aaa))`\n","slug":"android/2016-05-11-android-qa","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgej000au8jrptyxozaz","content":"<h3 id=\"1-如何解决有些函数只能接受String而无法接受Int\"><a href=\"#1-如何解决有些函数只能接受String而无法接受Int\" class=\"headerlink\" title=\"1.如何解决有些函数只能接受String而无法接受Int\"></a>1.如何解决有些函数只能接受<code>String</code>而无法接受<code>Int</code></h3><p>这样就无法使用<code>R.string...</code>.</p>\n<p>解决方法:<br><br><code>getResources().getString(R.string.aaa))</code></p>\n","excerpt":"","more":"<h3 id=\"1-如何解决有些函数只能接受String而无法接受Int\"><a href=\"#1-如何解决有些函数只能接受String而无法接受Int\" class=\"headerlink\" title=\"1.如何解决有些函数只能接受String而无法接受Int\"></a>1.如何解决有些函数只能接受<code>String</code>而无法接受<code>Int</code></h3><p>这样就无法使用<code>R.string...</code>.</p>\n<p>解决方法:<br><br><code>getResources().getString(R.string.aaa))</code></p>\n"},{"author":"ivyxjc","date":"2016-11-16T16:00:00.000Z","title":"Builder","keywords":null,"description":"创建者模式是为了将一个复杂对象的构建与它的表示分离, 使得同样的构建过程可以创建不同的表示","toc":true,"_content":"\n\n## Builder模式的使用情景\n\n1. 相同的方法, 不同的执行顺序, 产生不同的事件结果\n2. 多个部件或零件, 都可以装配到一个对象中, 但是产生的运行结果又不相同\n3.  产品类比较复杂, 或者产品类中的调用顺序不同产生了不同的作用.\n4. 当初始化一个对象特别复杂, 如参数多, 且很多参数都具有默认值.\n\n## Builder模式的整体构造\n\n![](http://oezmbgg4j.bkt.clouddn.com/builder.jpg)\n\n\n\n### 产品类\n\n```java\nabstract class Computer {\n    protected String mBoard;\n    protected String mDisplay;\n    protected String mOS;\n\n    protected Computer(){\n\n    }\n\n    public void setBoard(String board){\n        mBoard=board;\n    }\n\n    public void setDisplay(String display){\n        mDisplay=display;\n    }\n\n    public abstract void setOS();\n\n    @Override\n    public String toString() {\n        return \"Computer [mBoard=\"+ mBoard+\", mDisplay=\"+mDisplay+\", mOS=\"+mOS+\"]\";\n    }\n}\n\n\nclass Macbook extends Computer{\n    protected Macbook(){\n\n    }\n    @Override\n    public void setOS() {\n        mOS=\"Mac OS X 10.10\";\n    }\n}\n\n```\n\n### Builder类\n\n```java\n//抽象Builder类\nabstract class Builder{\n\n    public abstract void buildBoard(String board);\n    public abstract void buildDispaly(String display);\n    public abstract void buildOS();\n    public abstract Computer create();\n}\n\n//具体Builder类\nclass MacbookBuilder extends Builder{\n\n    private Computer mComputer=new Macbook();\n\n    @Override\n    public void buildBoard(String board) {\n        mComputer.setBoard(board);\n    }\n\n    @Override\n    public void buildDispaly(String display) {\n        mComputer.setDisplay(display);\n    }\n\n    @Override\n    public void buildOS() {\n        mComputer.setOS();\n    }\n\n    @Override\n    public Computer create() {\n        return mComputer;\n    }\n}\n```\n\n### 导演类\n导演类起到封装的作用, 避免高层模块深入到建造者内部的实现类\n```java\nclass Direcotr{\n    Builder mBuilder=null;\n\n    public Direcotr(Builder builder){\n        mBuilder=builder;\n    }\n\n    public void construct(String board,String dispaly){\n        mBuilder.buildBoard(board);\n        mBuilder.buildDispaly(dispaly);\n        mBuilder.buildOS();\n    }\n\n}\n\n```\n\n```java\npublic class BuildTest{\n    public static void main(String[] args){\n        Builder builder=new MacbookBuilder();\n\n        Direcotr pcDirector=new Direcotr(builder);\n\n        pcDirector.construct(\"intel\",\"retina\");\n        StdOut.println(\"Computer Info : \"+builder.create().toString());\n    }\n}\n```\n\n## 忽略Director类\n\n在开发过程中, 可以忽略Director类, 直接使用Builder来进行对象的组装, 可以使用setter方法进行链式调用.\n`new Builder().setA(\"A\").setB(\"B\").create()`\n\n\n```java\npublic class BuildTest {\n    public static void main(String[] args){\n        ConcreteProductA A= (ConcreteProductA)new A_Buider().setArg_1(\"aa\")\n                                        .setArg_2(\"bb\").create();\n        StdOut.print(A);\n\n    }\n}\n\nabstract class abstractProduct{\n    protected String arg_1;\n    protected String arg_2;\n\n    protected abstract void setArg_1(String arg_1);\n\n    protected abstract void setArg_2(String arg_2);\n\n    @Override\n    public String toString() {\n        return \"arg_1: \"+arg_1+\", arg_2: \"+arg_2;\n    }\n}\n\nclass ConcreteProductA extends abstractProduct{\n\n    protected void setArg_1(String arg_1){\n        this.arg_1=arg_1;\n    }\n\n    protected void setArg_2(String arg_2){\n        this.arg_2=arg_2;\n    }\n}\n\nabstract class Builder {\n    public abstract Builder setArg_1(String arg_1);\n\n    public abstract Builder setArg_2(String arg_2);\n\n    public abstract abstractProduct create();\n}\n\nclass A_Buider extends Builder{\n    private ConcreteProductA mConcreteProductA=new ConcreteProductA();\n\n    @Override\n    public Builder setArg_1(String arg_1) {\n        mConcreteProductA.setArg_1(arg_1);\n        return this;\n    }\n\n    @Override\n    public Builder setArg_2(String arg_2) {\n        mConcreteProductA.setArg_2(arg_2);\n        return this;\n    }\n\n    @Override\n    public abstractProduct create(){\n        return mConcreteProductA;\n    }\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/linked_builder.jpg)\n","source":"_posts/design_pattern/2016-11-17-builder.md","raw":"---\nauthor: ivyxjc\ndate: 2016-11-17\ntitle: Builder\ncategory: OO\ntags: [设计模式]\nkeywords:\ndescription: 创建者模式是为了将一个复杂对象的构建与它的表示分离, 使得同样的构建过程可以创建不同的表示\ntoc: true\n---\n\n\n## Builder模式的使用情景\n\n1. 相同的方法, 不同的执行顺序, 产生不同的事件结果\n2. 多个部件或零件, 都可以装配到一个对象中, 但是产生的运行结果又不相同\n3.  产品类比较复杂, 或者产品类中的调用顺序不同产生了不同的作用.\n4. 当初始化一个对象特别复杂, 如参数多, 且很多参数都具有默认值.\n\n## Builder模式的整体构造\n\n![](http://oezmbgg4j.bkt.clouddn.com/builder.jpg)\n\n\n\n### 产品类\n\n```java\nabstract class Computer {\n    protected String mBoard;\n    protected String mDisplay;\n    protected String mOS;\n\n    protected Computer(){\n\n    }\n\n    public void setBoard(String board){\n        mBoard=board;\n    }\n\n    public void setDisplay(String display){\n        mDisplay=display;\n    }\n\n    public abstract void setOS();\n\n    @Override\n    public String toString() {\n        return \"Computer [mBoard=\"+ mBoard+\", mDisplay=\"+mDisplay+\", mOS=\"+mOS+\"]\";\n    }\n}\n\n\nclass Macbook extends Computer{\n    protected Macbook(){\n\n    }\n    @Override\n    public void setOS() {\n        mOS=\"Mac OS X 10.10\";\n    }\n}\n\n```\n\n### Builder类\n\n```java\n//抽象Builder类\nabstract class Builder{\n\n    public abstract void buildBoard(String board);\n    public abstract void buildDispaly(String display);\n    public abstract void buildOS();\n    public abstract Computer create();\n}\n\n//具体Builder类\nclass MacbookBuilder extends Builder{\n\n    private Computer mComputer=new Macbook();\n\n    @Override\n    public void buildBoard(String board) {\n        mComputer.setBoard(board);\n    }\n\n    @Override\n    public void buildDispaly(String display) {\n        mComputer.setDisplay(display);\n    }\n\n    @Override\n    public void buildOS() {\n        mComputer.setOS();\n    }\n\n    @Override\n    public Computer create() {\n        return mComputer;\n    }\n}\n```\n\n### 导演类\n导演类起到封装的作用, 避免高层模块深入到建造者内部的实现类\n```java\nclass Direcotr{\n    Builder mBuilder=null;\n\n    public Direcotr(Builder builder){\n        mBuilder=builder;\n    }\n\n    public void construct(String board,String dispaly){\n        mBuilder.buildBoard(board);\n        mBuilder.buildDispaly(dispaly);\n        mBuilder.buildOS();\n    }\n\n}\n\n```\n\n```java\npublic class BuildTest{\n    public static void main(String[] args){\n        Builder builder=new MacbookBuilder();\n\n        Direcotr pcDirector=new Direcotr(builder);\n\n        pcDirector.construct(\"intel\",\"retina\");\n        StdOut.println(\"Computer Info : \"+builder.create().toString());\n    }\n}\n```\n\n## 忽略Director类\n\n在开发过程中, 可以忽略Director类, 直接使用Builder来进行对象的组装, 可以使用setter方法进行链式调用.\n`new Builder().setA(\"A\").setB(\"B\").create()`\n\n\n```java\npublic class BuildTest {\n    public static void main(String[] args){\n        ConcreteProductA A= (ConcreteProductA)new A_Buider().setArg_1(\"aa\")\n                                        .setArg_2(\"bb\").create();\n        StdOut.print(A);\n\n    }\n}\n\nabstract class abstractProduct{\n    protected String arg_1;\n    protected String arg_2;\n\n    protected abstract void setArg_1(String arg_1);\n\n    protected abstract void setArg_2(String arg_2);\n\n    @Override\n    public String toString() {\n        return \"arg_1: \"+arg_1+\", arg_2: \"+arg_2;\n    }\n}\n\nclass ConcreteProductA extends abstractProduct{\n\n    protected void setArg_1(String arg_1){\n        this.arg_1=arg_1;\n    }\n\n    protected void setArg_2(String arg_2){\n        this.arg_2=arg_2;\n    }\n}\n\nabstract class Builder {\n    public abstract Builder setArg_1(String arg_1);\n\n    public abstract Builder setArg_2(String arg_2);\n\n    public abstract abstractProduct create();\n}\n\nclass A_Buider extends Builder{\n    private ConcreteProductA mConcreteProductA=new ConcreteProductA();\n\n    @Override\n    public Builder setArg_1(String arg_1) {\n        mConcreteProductA.setArg_1(arg_1);\n        return this;\n    }\n\n    @Override\n    public Builder setArg_2(String arg_2) {\n        mConcreteProductA.setArg_2(arg_2);\n        return this;\n    }\n\n    @Override\n    public abstractProduct create(){\n        return mConcreteProductA;\n    }\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/linked_builder.jpg)\n","slug":"design_pattern/2016-11-17-builder","published":1,"updated":"2016-11-25T11:24:41.946Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgem000bu8jr3gf9y1bk","content":"<h2 id=\"Builder模式的使用情景\"><a href=\"#Builder模式的使用情景\" class=\"headerlink\" title=\"Builder模式的使用情景\"></a>Builder模式的使用情景</h2><ol>\n<li>相同的方法, 不同的执行顺序, 产生不同的事件结果</li>\n<li>多个部件或零件, 都可以装配到一个对象中, 但是产生的运行结果又不相同</li>\n<li>产品类比较复杂, 或者产品类中的调用顺序不同产生了不同的作用.</li>\n<li>当初始化一个对象特别复杂, 如参数多, 且很多参数都具有默认值.</li>\n</ol>\n<h2 id=\"Builder模式的整体构造\"><a href=\"#Builder模式的整体构造\" class=\"headerlink\" title=\"Builder模式的整体构造\"></a>Builder模式的整体构造</h2><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/builder.jpg\" alt=\"\"></p>\n<h3 id=\"产品类\"><a href=\"#产品类\" class=\"headerlink\" title=\"产品类\"></a>产品类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Computer</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String mBoard;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String mDisplay;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String mOS;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">Computer</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBoard</span><span class=\"params\">(String board)</span></span>&#123;</div><div class=\"line\">        mBoard=board;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDisplay</span><span class=\"params\">(String display)</span></span>&#123;</div><div class=\"line\">        mDisplay=display;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">setOS</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"Computer [mBoard=\"</span>+ mBoard+<span class=\"string\">\", mDisplay=\"</span>+mDisplay+<span class=\"string\">\", mOS=\"</span>+mOS+<span class=\"string\">\"]\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Macbook</span> <span class=\"keyword\">extends</span> <span class=\"title\">Computer</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">Macbook</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOS</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mOS=<span class=\"string\">\"Mac OS X 10.10\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"Builder类\"><a href=\"#Builder类\" class=\"headerlink\" title=\"Builder类\"></a>Builder类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//抽象Builder类</span></div><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">buildBoard</span><span class=\"params\">(String board)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">buildDispaly</span><span class=\"params\">(String display)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">buildOS</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Computer <span class=\"title\">create</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//具体Builder类</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MacbookBuilder</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> Computer mComputer=<span class=\"keyword\">new</span> Macbook();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buildBoard</span><span class=\"params\">(String board)</span> </span>&#123;</div><div class=\"line\">        mComputer.setBoard(board);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buildDispaly</span><span class=\"params\">(String display)</span> </span>&#123;</div><div class=\"line\">        mComputer.setDisplay(display);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buildOS</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mComputer.setOS();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Computer <span class=\"title\">create</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mComputer;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"导演类\"><a href=\"#导演类\" class=\"headerlink\" title=\"导演类\"></a>导演类</h3><p>导演类起到封装的作用, 避免高层模块深入到建造者内部的实现类<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Direcotr</span></span>&#123;</div><div class=\"line\">    Builder mBuilder=<span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Direcotr</span><span class=\"params\">(Builder builder)</span></span>&#123;</div><div class=\"line\">        mBuilder=builder;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">construct</span><span class=\"params\">(String board,String dispaly)</span></span>&#123;</div><div class=\"line\">        mBuilder.buildBoard(board);</div><div class=\"line\">        mBuilder.buildDispaly(dispaly);</div><div class=\"line\">        mBuilder.buildOS();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuildTest</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        Builder builder=<span class=\"keyword\">new</span> MacbookBuilder();</div><div class=\"line\"></div><div class=\"line\">        Direcotr pcDirector=<span class=\"keyword\">new</span> Direcotr(builder);</div><div class=\"line\"></div><div class=\"line\">        pcDirector.construct(<span class=\"string\">\"intel\"</span>,<span class=\"string\">\"retina\"</span>);</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"Computer Info : \"</span>+builder.create().toString());</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"忽略Director类\"><a href=\"#忽略Director类\" class=\"headerlink\" title=\"忽略Director类\"></a>忽略Director类</h2><p>在开发过程中, 可以忽略Director类, 直接使用Builder来进行对象的组装, 可以使用setter方法进行链式调用.<br><code>new Builder().setA(&quot;A&quot;).setB(&quot;B&quot;).create()</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuildTest</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        ConcreteProductA A= (ConcreteProductA)<span class=\"keyword\">new</span> A_Buider().setArg_1(<span class=\"string\">\"aa\"</span>)</div><div class=\"line\">                                        .setArg_2(<span class=\"string\">\"bb\"</span>).create();</div><div class=\"line\">        StdOut.print(A);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">abstractProduct</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String arg_1;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String arg_2;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"arg_1: \"</span>+arg_1+<span class=\"string\">\", arg_2: \"</span>+arg_2;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteProductA</span> <span class=\"keyword\">extends</span> <span class=\"title\">abstractProduct</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.arg_1=arg_1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.arg_2=arg_2;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Builder <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Builder <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> abstractProduct <span class=\"title\">create</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A_Buider</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> ConcreteProductA mConcreteProductA=<span class=\"keyword\">new</span> ConcreteProductA();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span> </span>&#123;</div><div class=\"line\">        mConcreteProductA.setArg_1(arg_1);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span> </span>&#123;</div><div class=\"line\">        mConcreteProductA.setArg_2(arg_2);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> abstractProduct <span class=\"title\">create</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mConcreteProductA;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/linked_builder.jpg\" alt=\"\"></p>\n","excerpt":"","more":"<h2 id=\"Builder模式的使用情景\"><a href=\"#Builder模式的使用情景\" class=\"headerlink\" title=\"Builder模式的使用情景\"></a>Builder模式的使用情景</h2><ol>\n<li>相同的方法, 不同的执行顺序, 产生不同的事件结果</li>\n<li>多个部件或零件, 都可以装配到一个对象中, 但是产生的运行结果又不相同</li>\n<li>产品类比较复杂, 或者产品类中的调用顺序不同产生了不同的作用.</li>\n<li>当初始化一个对象特别复杂, 如参数多, 且很多参数都具有默认值.</li>\n</ol>\n<h2 id=\"Builder模式的整体构造\"><a href=\"#Builder模式的整体构造\" class=\"headerlink\" title=\"Builder模式的整体构造\"></a>Builder模式的整体构造</h2><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/builder.jpg\" alt=\"\"></p>\n<h3 id=\"产品类\"><a href=\"#产品类\" class=\"headerlink\" title=\"产品类\"></a>产品类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Computer</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String mBoard;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String mDisplay;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String mOS;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">Computer</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBoard</span><span class=\"params\">(String board)</span></span>&#123;</div><div class=\"line\">        mBoard=board;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDisplay</span><span class=\"params\">(String display)</span></span>&#123;</div><div class=\"line\">        mDisplay=display;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">setOS</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"Computer [mBoard=\"</span>+ mBoard+<span class=\"string\">\", mDisplay=\"</span>+mDisplay+<span class=\"string\">\", mOS=\"</span>+mOS+<span class=\"string\">\"]\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Macbook</span> <span class=\"keyword\">extends</span> <span class=\"title\">Computer</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">Macbook</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOS</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mOS=<span class=\"string\">\"Mac OS X 10.10\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"Builder类\"><a href=\"#Builder类\" class=\"headerlink\" title=\"Builder类\"></a>Builder类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//抽象Builder类</span></div><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">buildBoard</span><span class=\"params\">(String board)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">buildDispaly</span><span class=\"params\">(String display)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">buildOS</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Computer <span class=\"title\">create</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//具体Builder类</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MacbookBuilder</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> Computer mComputer=<span class=\"keyword\">new</span> Macbook();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buildBoard</span><span class=\"params\">(String board)</span> </span>&#123;</div><div class=\"line\">        mComputer.setBoard(board);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buildDispaly</span><span class=\"params\">(String display)</span> </span>&#123;</div><div class=\"line\">        mComputer.setDisplay(display);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buildOS</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mComputer.setOS();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Computer <span class=\"title\">create</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mComputer;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"导演类\"><a href=\"#导演类\" class=\"headerlink\" title=\"导演类\"></a>导演类</h3><p>导演类起到封装的作用, 避免高层模块深入到建造者内部的实现类<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Direcotr</span></span>&#123;</div><div class=\"line\">    Builder mBuilder=<span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Direcotr</span><span class=\"params\">(Builder builder)</span></span>&#123;</div><div class=\"line\">        mBuilder=builder;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">construct</span><span class=\"params\">(String board,String dispaly)</span></span>&#123;</div><div class=\"line\">        mBuilder.buildBoard(board);</div><div class=\"line\">        mBuilder.buildDispaly(dispaly);</div><div class=\"line\">        mBuilder.buildOS();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuildTest</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        Builder builder=<span class=\"keyword\">new</span> MacbookBuilder();</div><div class=\"line\"></div><div class=\"line\">        Direcotr pcDirector=<span class=\"keyword\">new</span> Direcotr(builder);</div><div class=\"line\"></div><div class=\"line\">        pcDirector.construct(<span class=\"string\">\"intel\"</span>,<span class=\"string\">\"retina\"</span>);</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"Computer Info : \"</span>+builder.create().toString());</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"忽略Director类\"><a href=\"#忽略Director类\" class=\"headerlink\" title=\"忽略Director类\"></a>忽略Director类</h2><p>在开发过程中, 可以忽略Director类, 直接使用Builder来进行对象的组装, 可以使用setter方法进行链式调用.<br><code>new Builder().setA(&quot;A&quot;).setB(&quot;B&quot;).create()</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuildTest</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        ConcreteProductA A= (ConcreteProductA)<span class=\"keyword\">new</span> A_Buider().setArg_1(<span class=\"string\">\"aa\"</span>)</div><div class=\"line\">                                        .setArg_2(<span class=\"string\">\"bb\"</span>).create();</div><div class=\"line\">        StdOut.print(A);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">abstractProduct</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String arg_1;</div><div class=\"line\">    <span class=\"keyword\">protected</span> String arg_2;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"arg_1: \"</span>+arg_1+<span class=\"string\">\", arg_2: \"</span>+arg_2;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteProductA</span> <span class=\"keyword\">extends</span> <span class=\"title\">abstractProduct</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.arg_1=arg_1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.arg_2=arg_2;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Builder <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Builder <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> abstractProduct <span class=\"title\">create</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A_Buider</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> ConcreteProductA mConcreteProductA=<span class=\"keyword\">new</span> ConcreteProductA();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setArg_1</span><span class=\"params\">(String arg_1)</span> </span>&#123;</div><div class=\"line\">        mConcreteProductA.setArg_1(arg_1);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setArg_2</span><span class=\"params\">(String arg_2)</span> </span>&#123;</div><div class=\"line\">        mConcreteProductA.setArg_2(arg_2);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> abstractProduct <span class=\"title\">create</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mConcreteProductA;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/linked_builder.jpg\" alt=\"\"></p>\n"},{"author":"ivyxjc","date":"2016-11-17T16:00:00.000Z","title":"观察者模式","keywords":null,"description":"观察者模式定义对象间一种一对多的依赖关系, 使得每当一个对象改变状态, 则所有依赖于它的对象都会得到通知并被自动更新.","toc":true,"_content":"\n\n### 被观察者\n\n所有被观察者都继承Observable接口 ( java标准库中`Observable`是一个抽象类)\n\n```java\ninterface Observable{\n    public void addObserver(Observer observer);\n    public void deleteObserver(Observer observer);\n    public void notifyObserver(String context);\n}\n```\n\n\n```java\nclass AA implements Observable,IHanFeiZi_3{\n    //存放observer\n    private ArrayList<Observer> observerList=new ArrayList<Observer>();\n\n    @Override\n    public void addObserver(Observer observer) {\n        observerList.add(observer);\n    }\n\n    @Override\n    public void deleteObserver(Observer observer) {\n        this.observerList.remove(observer);\n    }\n\n    @Override\n    public void notifyObserver(String context) {\n        for(Observer observer:observerList){\n            observer.update(context);\n        }\n    }\n\n    @Override\n    public void method1() {\n      ...\n    }\n\n    @Override\n    public void method2() {\n      ...\n    }\n}\n```\n\n### 观察者\n\n所有的观察者都继承Observer接口\n\n```java\ninterface Observer{\n    public void update(String str);\n}\n```\n\n```java\nclass BB implements Observer{\n    @Override\n    public void update(String context) {\n      ...\n    }\n}\n```\n\n### 场景\n\n```java\npublic static void main(String[] args){\n        Observer a1=new AA_1();\n        Observer a2=new AA_2();\n        Observer a3=new AA_1();\n        BB bb=new BB();\n\n        bb.addObserver(a1);\n        bb.addObserver(a2);\n        bb.addObserver(a3);\n\n        bb.method1();\n    }\n```\n\n## 观察者模式的注意事项\n\n1. 需要注意效率问题\n2. 由于消息通知是顺序执行的, 如有需要, 可采用异步方式\n3. 消息不能无限制的传递下去, 一般而言, 在一个观察者模式中最多出现一个对象既是被观察者又是观察者. 否则程序的维护性会变得很差.\n","source":"_posts/design_pattern/2016-11-18-observer.md","raw":"---\nauthor: ivyxjc\ndate: 2016-11-18\ntitle: 观察者模式\ncategory: OO\ntags: [设计模式]\nkeywords:\ndescription: 观察者模式定义对象间一种一对多的依赖关系, 使得每当一个对象改变状态, 则所有依赖于它的对象都会得到通知并被自动更新.\ntoc: true\n---\n\n\n### 被观察者\n\n所有被观察者都继承Observable接口 ( java标准库中`Observable`是一个抽象类)\n\n```java\ninterface Observable{\n    public void addObserver(Observer observer);\n    public void deleteObserver(Observer observer);\n    public void notifyObserver(String context);\n}\n```\n\n\n```java\nclass AA implements Observable,IHanFeiZi_3{\n    //存放observer\n    private ArrayList<Observer> observerList=new ArrayList<Observer>();\n\n    @Override\n    public void addObserver(Observer observer) {\n        observerList.add(observer);\n    }\n\n    @Override\n    public void deleteObserver(Observer observer) {\n        this.observerList.remove(observer);\n    }\n\n    @Override\n    public void notifyObserver(String context) {\n        for(Observer observer:observerList){\n            observer.update(context);\n        }\n    }\n\n    @Override\n    public void method1() {\n      ...\n    }\n\n    @Override\n    public void method2() {\n      ...\n    }\n}\n```\n\n### 观察者\n\n所有的观察者都继承Observer接口\n\n```java\ninterface Observer{\n    public void update(String str);\n}\n```\n\n```java\nclass BB implements Observer{\n    @Override\n    public void update(String context) {\n      ...\n    }\n}\n```\n\n### 场景\n\n```java\npublic static void main(String[] args){\n        Observer a1=new AA_1();\n        Observer a2=new AA_2();\n        Observer a3=new AA_1();\n        BB bb=new BB();\n\n        bb.addObserver(a1);\n        bb.addObserver(a2);\n        bb.addObserver(a3);\n\n        bb.method1();\n    }\n```\n\n## 观察者模式的注意事项\n\n1. 需要注意效率问题\n2. 由于消息通知是顺序执行的, 如有需要, 可采用异步方式\n3. 消息不能无限制的传递下去, 一般而言, 在一个观察者模式中最多出现一个对象既是被观察者又是观察者. 否则程序的维护性会变得很差.\n","slug":"design_pattern/2016-11-18-observer","published":1,"updated":"2016-11-25T11:24:47.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdger000fu8jrplrimbf6","content":"<h3 id=\"被观察者\"><a href=\"#被观察者\" class=\"headerlink\" title=\"被观察者\"></a>被观察者</h3><p>所有被观察者都继承Observable接口 ( java标准库中<code>Observable</code>是一个抽象类)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observable</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addObserver</span><span class=\"params\">(Observer observer)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteObserver</span><span class=\"params\">(Observer observer)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">notifyObserver</span><span class=\"params\">(String context)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AA</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observable</span>,<span class=\"title\">IHanFeiZi_3</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//存放observer</span></div><div class=\"line\">    <span class=\"keyword\">private</span> ArrayList&lt;Observer&gt; observerList=<span class=\"keyword\">new</span> ArrayList&lt;Observer&gt;();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addObserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</div><div class=\"line\">        observerList.add(observer);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteObserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.observerList.remove(observer);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">notifyObserver</span><span class=\"params\">(String context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span>(Observer observer:observerList)&#123;</div><div class=\"line\">            observer.update(context);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method1</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      ...</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      ...</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"观察者\"><a href=\"#观察者\" class=\"headerlink\" title=\"观察者\"></a>观察者</h3><p>所有的观察者都继承Observer接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(String str)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BB</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(String context)</span> </span>&#123;</div><div class=\"line\">      ...</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        Observer a1=<span class=\"keyword\">new</span> AA_1();</div><div class=\"line\">        Observer a2=<span class=\"keyword\">new</span> AA_2();</div><div class=\"line\">        Observer a3=<span class=\"keyword\">new</span> AA_1();</div><div class=\"line\">        BB bb=<span class=\"keyword\">new</span> BB();</div><div class=\"line\"></div><div class=\"line\">        bb.addObserver(a1);</div><div class=\"line\">        bb.addObserver(a2);</div><div class=\"line\">        bb.addObserver(a3);</div><div class=\"line\"></div><div class=\"line\">        bb.method1();</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h2 id=\"观察者模式的注意事项\"><a href=\"#观察者模式的注意事项\" class=\"headerlink\" title=\"观察者模式的注意事项\"></a>观察者模式的注意事项</h2><ol>\n<li>需要注意效率问题</li>\n<li>由于消息通知是顺序执行的, 如有需要, 可采用异步方式</li>\n<li>消息不能无限制的传递下去, 一般而言, 在一个观察者模式中最多出现一个对象既是被观察者又是观察者. 否则程序的维护性会变得很差.</li>\n</ol>\n","excerpt":"","more":"<h3 id=\"被观察者\"><a href=\"#被观察者\" class=\"headerlink\" title=\"被观察者\"></a>被观察者</h3><p>所有被观察者都继承Observable接口 ( java标准库中<code>Observable</code>是一个抽象类)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observable</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addObserver</span><span class=\"params\">(Observer observer)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteObserver</span><span class=\"params\">(Observer observer)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">notifyObserver</span><span class=\"params\">(String context)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AA</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observable</span>,<span class=\"title\">IHanFeiZi_3</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//存放observer</span></div><div class=\"line\">    <span class=\"keyword\">private</span> ArrayList&lt;Observer&gt; observerList=<span class=\"keyword\">new</span> ArrayList&lt;Observer&gt;();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addObserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</div><div class=\"line\">        observerList.add(observer);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteObserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.observerList.remove(observer);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">notifyObserver</span><span class=\"params\">(String context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span>(Observer observer:observerList)&#123;</div><div class=\"line\">            observer.update(context);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method1</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      ...</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      ...</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"观察者\"><a href=\"#观察者\" class=\"headerlink\" title=\"观察者\"></a>观察者</h3><p>所有的观察者都继承Observer接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(String str)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BB</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(String context)</span> </span>&#123;</div><div class=\"line\">      ...</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        Observer a1=<span class=\"keyword\">new</span> AA_1();</div><div class=\"line\">        Observer a2=<span class=\"keyword\">new</span> AA_2();</div><div class=\"line\">        Observer a3=<span class=\"keyword\">new</span> AA_1();</div><div class=\"line\">        BB bb=<span class=\"keyword\">new</span> BB();</div><div class=\"line\"></div><div class=\"line\">        bb.addObserver(a1);</div><div class=\"line\">        bb.addObserver(a2);</div><div class=\"line\">        bb.addObserver(a3);</div><div class=\"line\"></div><div class=\"line\">        bb.method1();</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h2 id=\"观察者模式的注意事项\"><a href=\"#观察者模式的注意事项\" class=\"headerlink\" title=\"观察者模式的注意事项\"></a>观察者模式的注意事项</h2><ol>\n<li>需要注意效率问题</li>\n<li>由于消息通知是顺序执行的, 如有需要, 可采用异步方式</li>\n<li>消息不能无限制的传递下去, 一般而言, 在一个观察者模式中最多出现一个对象既是被观察者又是观察者. 否则程序的维护性会变得很差.</li>\n</ol>\n"},{"author":"ivyxjc","date":"2016-10-23T16:00:00.000Z","title":"面向对象六大原则(下)","keywords":null,"description":"设计模式中的六大原则：接口隔离原则, 迪米特法则, 开闭原则","toc":true,"_content":"\n## 接口隔离原则\nInterface Segregation Principles(ISP)\n\n1. 客户端不应该依赖它不需要的接口\n2. 类似的依赖关系应该建立在最小的接口上\n\n接口应该细化, 不要使用过于臃肿的接口. 客户端需要什么接口就提供什么接口, 将不需要的接口剔除掉.\n不要将太多的方法放在同一个接口之中.\n\n但是接口设计也要有度, 不可过度设计, 这个度往往根据经验和常识判断.\n\n## 迪米特法则\n\nLswo of Demeter(LOD) , 最少知识f原则(Least Knowledge Principle))\n\n一个对象应该对其它对象有最少的了解, 另一个解释是只与直接的朋友通信.\n\n```\n朋友类: 出现在成员变量, 方法的输入输出参数中的类称为成员朋友类, 而出现在方法体内部的类不属于朋友类\n```\n\n## 开闭原则\n\nOpen Close Principle(OCP)\n\n一个软件实体如类, 模块和函数等应该对扩展开放, 对修改关闭.\n\n### 实例\n```java\ninterface IBook{\n\n    public String getName();\n\n    public int getPrice();\n\n    public String getAuthor();\n}\n\nclass NovelBook implements IBook{\n    private String name;\n    private int price;\n    private String author;\n\n    public NovelBook(String name, int price, String author){\n        this.name=name;\n        this.price=price;\n        this.author=author;\n    }\n\n    @Override\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public int getPrice() {\n        return price;\n    }\n\n    @Override\n    public String getAuthor() {\n        return author;\n    }\n}\n```\n\n如果将来要搞打折, 一般可能会用以下两个方法来解决:\n\n1. 在接口中添加`getOffPrice()`方法. 但是这需要对每一个实现`IBook`接口的实现类都添加该方法, 工作繁琐. 且接口应该是稳定且可靠的, 不应该经常发生变化.\n2. 修改实现类, 直接在`getPrice()`中实现打折处理, 但是如果仍需要知道原价是多少, 就会出问题.\n3. 通过扩展实现\n\n添加一个子类\n\n```java\nclass OffNovelBook extends NovelBook{\n\n    public OffNovelBook(String name,int price, String author){\n        super(name,price,author);\n    }\n\n    @Override\n    public int getPrice(){\n        int selfPrice=super.getPrice();\n        int offPrice=selfPrice*90/100;\n        return offPrice;\n    }\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/ocp_.jpg)\n","source":"_posts/design_pattern/2016-10-24-basic-principle_2.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-24\ntitle: 面向对象六大原则(下)\ncategory: OO\ntags: [设计模式]\nkeywords:\ndescription: 设计模式中的六大原则：接口隔离原则, 迪米特法则, 开闭原则\ntoc: true\n---\n\n## 接口隔离原则\nInterface Segregation Principles(ISP)\n\n1. 客户端不应该依赖它不需要的接口\n2. 类似的依赖关系应该建立在最小的接口上\n\n接口应该细化, 不要使用过于臃肿的接口. 客户端需要什么接口就提供什么接口, 将不需要的接口剔除掉.\n不要将太多的方法放在同一个接口之中.\n\n但是接口设计也要有度, 不可过度设计, 这个度往往根据经验和常识判断.\n\n## 迪米特法则\n\nLswo of Demeter(LOD) , 最少知识f原则(Least Knowledge Principle))\n\n一个对象应该对其它对象有最少的了解, 另一个解释是只与直接的朋友通信.\n\n```\n朋友类: 出现在成员变量, 方法的输入输出参数中的类称为成员朋友类, 而出现在方法体内部的类不属于朋友类\n```\n\n## 开闭原则\n\nOpen Close Principle(OCP)\n\n一个软件实体如类, 模块和函数等应该对扩展开放, 对修改关闭.\n\n### 实例\n```java\ninterface IBook{\n\n    public String getName();\n\n    public int getPrice();\n\n    public String getAuthor();\n}\n\nclass NovelBook implements IBook{\n    private String name;\n    private int price;\n    private String author;\n\n    public NovelBook(String name, int price, String author){\n        this.name=name;\n        this.price=price;\n        this.author=author;\n    }\n\n    @Override\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public int getPrice() {\n        return price;\n    }\n\n    @Override\n    public String getAuthor() {\n        return author;\n    }\n}\n```\n\n如果将来要搞打折, 一般可能会用以下两个方法来解决:\n\n1. 在接口中添加`getOffPrice()`方法. 但是这需要对每一个实现`IBook`接口的实现类都添加该方法, 工作繁琐. 且接口应该是稳定且可靠的, 不应该经常发生变化.\n2. 修改实现类, 直接在`getPrice()`中实现打折处理, 但是如果仍需要知道原价是多少, 就会出问题.\n3. 通过扩展实现\n\n添加一个子类\n\n```java\nclass OffNovelBook extends NovelBook{\n\n    public OffNovelBook(String name,int price, String author){\n        super(name,price,author);\n    }\n\n    @Override\n    public int getPrice(){\n        int selfPrice=super.getPrice();\n        int offPrice=selfPrice*90/100;\n        return offPrice;\n    }\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/ocp_.jpg)\n","slug":"design_pattern/2016-10-24-basic-principle_2","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgeu000hu8jrzc17tqki","content":"<h2 id=\"接口隔离原则\"><a href=\"#接口隔离原则\" class=\"headerlink\" title=\"接口隔离原则\"></a>接口隔离原则</h2><p>Interface Segregation Principles(ISP)</p>\n<ol>\n<li>客户端不应该依赖它不需要的接口</li>\n<li>类似的依赖关系应该建立在最小的接口上</li>\n</ol>\n<p>接口应该细化, 不要使用过于臃肿的接口. 客户端需要什么接口就提供什么接口, 将不需要的接口剔除掉.<br>不要将太多的方法放在同一个接口之中.</p>\n<p>但是接口设计也要有度, 不可过度设计, 这个度往往根据经验和常识判断.</p>\n<h2 id=\"迪米特法则\"><a href=\"#迪米特法则\" class=\"headerlink\" title=\"迪米特法则\"></a>迪米特法则</h2><p>Lswo of Demeter(LOD) , 最少知识f原则(Least Knowledge Principle))</p>\n<p>一个对象应该对其它对象有最少的了解, 另一个解释是只与直接的朋友通信.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">朋友类: 出现在成员变量, 方法的输入输出参数中的类称为成员朋友类, 而出现在方法体内部的类不属于朋友类</div></pre></td></tr></table></figure>\n<h2 id=\"开闭原则\"><a href=\"#开闭原则\" class=\"headerlink\" title=\"开闭原则\"></a>开闭原则</h2><p>Open Close Principle(OCP)</p>\n<p>一个软件实体如类, 模块和函数等应该对扩展开放, 对修改关闭.</p>\n<h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IBook</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAuthor</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NovelBook</span> <span class=\"keyword\">implements</span> <span class=\"title\">IBook</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String name;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> price;</div><div class=\"line\">    <span class=\"keyword\">private</span> String author;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NovelBook</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> price, String author)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.name=name;</div><div class=\"line\">        <span class=\"keyword\">this</span>.price=price;</div><div class=\"line\">        <span class=\"keyword\">this</span>.author=author;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> name;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> price;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAuthor</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> author;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果将来要搞打折, 一般可能会用以下两个方法来解决:</p>\n<ol>\n<li>在接口中添加<code>getOffPrice()</code>方法. 但是这需要对每一个实现<code>IBook</code>接口的实现类都添加该方法, 工作繁琐. 且接口应该是稳定且可靠的, 不应该经常发生变化.</li>\n<li>修改实现类, 直接在<code>getPrice()</code>中实现打折处理, 但是如果仍需要知道原价是多少, 就会出问题.</li>\n<li>通过扩展实现</li>\n</ol>\n<p>添加一个子类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OffNovelBook</span> <span class=\"keyword\">extends</span> <span class=\"title\">NovelBook</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">OffNovelBook</span><span class=\"params\">(String name,<span class=\"keyword\">int</span> price, String author)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(name,price,author);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> selfPrice=<span class=\"keyword\">super</span>.getPrice();</div><div class=\"line\">        <span class=\"keyword\">int</span> offPrice=selfPrice*<span class=\"number\">90</span>/<span class=\"number\">100</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> offPrice;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/ocp_.jpg\" alt=\"\"></p>\n","excerpt":"","more":"<h2 id=\"接口隔离原则\"><a href=\"#接口隔离原则\" class=\"headerlink\" title=\"接口隔离原则\"></a>接口隔离原则</h2><p>Interface Segregation Principles(ISP)</p>\n<ol>\n<li>客户端不应该依赖它不需要的接口</li>\n<li>类似的依赖关系应该建立在最小的接口上</li>\n</ol>\n<p>接口应该细化, 不要使用过于臃肿的接口. 客户端需要什么接口就提供什么接口, 将不需要的接口剔除掉.<br>不要将太多的方法放在同一个接口之中.</p>\n<p>但是接口设计也要有度, 不可过度设计, 这个度往往根据经验和常识判断.</p>\n<h2 id=\"迪米特法则\"><a href=\"#迪米特法则\" class=\"headerlink\" title=\"迪米特法则\"></a>迪米特法则</h2><p>Lswo of Demeter(LOD) , 最少知识f原则(Least Knowledge Principle))</p>\n<p>一个对象应该对其它对象有最少的了解, 另一个解释是只与直接的朋友通信.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">朋友类: 出现在成员变量, 方法的输入输出参数中的类称为成员朋友类, 而出现在方法体内部的类不属于朋友类</div></pre></td></tr></table></figure>\n<h2 id=\"开闭原则\"><a href=\"#开闭原则\" class=\"headerlink\" title=\"开闭原则\"></a>开闭原则</h2><p>Open Close Principle(OCP)</p>\n<p>一个软件实体如类, 模块和函数等应该对扩展开放, 对修改关闭.</p>\n<h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IBook</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAuthor</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NovelBook</span> <span class=\"keyword\">implements</span> <span class=\"title\">IBook</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String name;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> price;</div><div class=\"line\">    <span class=\"keyword\">private</span> String author;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NovelBook</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> price, String author)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.name=name;</div><div class=\"line\">        <span class=\"keyword\">this</span>.price=price;</div><div class=\"line\">        <span class=\"keyword\">this</span>.author=author;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> name;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> price;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAuthor</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> author;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果将来要搞打折, 一般可能会用以下两个方法来解决:</p>\n<ol>\n<li>在接口中添加<code>getOffPrice()</code>方法. 但是这需要对每一个实现<code>IBook</code>接口的实现类都添加该方法, 工作繁琐. 且接口应该是稳定且可靠的, 不应该经常发生变化.</li>\n<li>修改实现类, 直接在<code>getPrice()</code>中实现打折处理, 但是如果仍需要知道原价是多少, 就会出问题.</li>\n<li>通过扩展实现</li>\n</ol>\n<p>添加一个子类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OffNovelBook</span> <span class=\"keyword\">extends</span> <span class=\"title\">NovelBook</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">OffNovelBook</span><span class=\"params\">(String name,<span class=\"keyword\">int</span> price, String author)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(name,price,author);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> selfPrice=<span class=\"keyword\">super</span>.getPrice();</div><div class=\"line\">        <span class=\"keyword\">int</span> offPrice=selfPrice*<span class=\"number\">90</span>/<span class=\"number\">100</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> offPrice;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/ocp_.jpg\" alt=\"\"></p>\n"},{"author":"ivyxjc","date":"2016-10-23T16:00:00.000Z","title":"面向对象六大原则(上)","keywords":null,"description":"设计模式中的六大原则：单一职责原则, 里氏替换原则, 依赖倒置原则","toc":true,"_content":"\n## 单一职责原则\n\n单一职责原则(Single Responsibility Principle,SRP)简而言之就是对于一个类或者接口, 引起其改变的应该只能有一个原因. 比如要将负责属性和行为的类分开.\n\n\n## 里氏替换原则\n\n定义：所有引用基类的地方必须能透明地使用其子类的对象. 只要父类出现的地方, 子类就可以出现, 而且替换为子类不会产生任何错误或者一场. 但是反过来不一定可行.\n\n\n\n\n1. 子类中可以增加自己特有的方法。\n2. 当子类的方法重载父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。\n3. 当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。\n\n### 前置条件\n\n当子类的方法**重载**父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。\n\n```java\nclass Father {\n\n    public Collection doSomething(HashMap map){\n        StdOut.println(\"父类被执行...\");\n        return map.values();\n    }\n}\n\nclass Son extends Father{\n\n    public Collection doSomething(Map map) {\n        StdOut.println(\"子类被执行\");\n        return map.values();\n    }\n}\n```\n\n子类方法和父类方法, 方法名相同, 返回类型相同, 但是参数不同, 所以不是Override, 而是Overload. 在这种情况下, 如果传入`HashMap`, 子类的`doSomething()`不会被执行.\n这是**正确**的, 因为子类并没有重写父类方法, 而是重载父类方法, 所以\n\n\n```java\npublic static void main(String[] args){\n    Father f=new Father();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n```java\npublic static void main(String[] args){\n    //父类出现的地方都可以被子类代替, 且不会改变逻辑\n    Son f=new Son();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n```java\npublic static void main(String[] args){\n   //子类出现的地方, 父类不一定可以代替\n    Son f=new Son();\n    Map map=new HashMap();\n    f.doSomething(map);\n}\n\n子类被执行\n```\n\n\n如果父类的前置条件(形参) 范围宽于子类则不正确.\n\n```java\nclass Father {\n\n    public Collection doSomething(Map map){\n        StdOut.println(\"父类被执行...\");\n        return map.values();\n    }\n}\n\nclass Son extends Father{\n\n    public Collection doSomething(HashMap map) {\n        StdOut.println(\"子类被执行\");\n        return map.values();\n    }\n}\n```\n\n\n```java\npublic static void main(String[] args){\n    Father f=new Father();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n```java\npublic static void main(String[] args){\n    //父类出现的地方都可以用子类代替\n    Son f=new Son();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n子类被执行\n```\n\n可以注意到, 此时子类方法被执行了, 而子类并没有重写父类的相应的方法, 而是重载了父类的方法.\n\n```java\npublic static void main(String[] args){\n    Son f=new Son();\n    Map map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n### 后置条件\n\n当子类的方法实现或覆写父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格或相同。\n\n\n### 注意点\n\n1. 在类中调用其他类时务必使用其父类或者接口, 如果不能使用父类或者接口, 则说明类的设计已经违背了LSP原则.\n2. 如果子类不能完整地实现父类的方法, 或者父类的一些方法在子类中完全和父类业务逻辑不同, 则建议不使用继承关系, 而是用依赖, 聚集, 组合等关系代替.\n\n\n## 依赖倒置原则\n\nDependence Inversion Principle\n\n1. 高层模块不应该依赖低层模块\n2. 抽象不应该依赖细节\n3. 细节应依赖抽象\n\n|||\n|--|--|\n|高层模块|原子逻辑再组装就是高层模块|\n|低层模块|每一个逻辑的实现都由院子逻辑组成,不分割的原子逻辑就是低层模块|\n\n对于Java来说.\n\n1. 模块间的依赖通过抽象产生,实现类之间不发生直接依赖关系, 其依赖关系是通过接口或者抽象类产生的\n2. 接口或这抽象类不依赖于实现类\n3. 实现类依赖接口或抽象类\n\n这样也有利于并行开发, 即使只完成了一部分工作, 仍可以进行单元测试.\n\n这也符合现代开发的流程, 先写好单元测试类, 再写实现类.\n\n### 规则\n\n1. 每个类尽量都有接口或抽象类, 或者抽象类和接口都具备\n2. 变量的表面类型尽量是接口或者是抽象类(如果使用类的clone方法, 就必须使用实现类)\n3. 任何类都不应该从具体类中派生(如果实在需要继承自具体类, 尽量不要超过两层的继承)\n4. 尽量不要覆写基类的方法\n\n\n总体而言, 依赖倒置原则是六大原则中最难实现的, 也是实现开闭原则的重要途径. 总体而言, 把握住*面向接口编程*即可.\n","source":"_posts/design_pattern/2016-10-24-basic-principle_1.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-24\ntitle: 面向对象六大原则(上)\ncategory: OO\ntags: [设计模式]\nkeywords:\ndescription: 设计模式中的六大原则：单一职责原则, 里氏替换原则, 依赖倒置原则\ntoc: true\n---\n\n## 单一职责原则\n\n单一职责原则(Single Responsibility Principle,SRP)简而言之就是对于一个类或者接口, 引起其改变的应该只能有一个原因. 比如要将负责属性和行为的类分开.\n\n\n## 里氏替换原则\n\n定义：所有引用基类的地方必须能透明地使用其子类的对象. 只要父类出现的地方, 子类就可以出现, 而且替换为子类不会产生任何错误或者一场. 但是反过来不一定可行.\n\n\n\n\n1. 子类中可以增加自己特有的方法。\n2. 当子类的方法重载父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。\n3. 当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。\n\n### 前置条件\n\n当子类的方法**重载**父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。\n\n```java\nclass Father {\n\n    public Collection doSomething(HashMap map){\n        StdOut.println(\"父类被执行...\");\n        return map.values();\n    }\n}\n\nclass Son extends Father{\n\n    public Collection doSomething(Map map) {\n        StdOut.println(\"子类被执行\");\n        return map.values();\n    }\n}\n```\n\n子类方法和父类方法, 方法名相同, 返回类型相同, 但是参数不同, 所以不是Override, 而是Overload. 在这种情况下, 如果传入`HashMap`, 子类的`doSomething()`不会被执行.\n这是**正确**的, 因为子类并没有重写父类方法, 而是重载父类方法, 所以\n\n\n```java\npublic static void main(String[] args){\n    Father f=new Father();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n```java\npublic static void main(String[] args){\n    //父类出现的地方都可以被子类代替, 且不会改变逻辑\n    Son f=new Son();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n```java\npublic static void main(String[] args){\n   //子类出现的地方, 父类不一定可以代替\n    Son f=new Son();\n    Map map=new HashMap();\n    f.doSomething(map);\n}\n\n子类被执行\n```\n\n\n如果父类的前置条件(形参) 范围宽于子类则不正确.\n\n```java\nclass Father {\n\n    public Collection doSomething(Map map){\n        StdOut.println(\"父类被执行...\");\n        return map.values();\n    }\n}\n\nclass Son extends Father{\n\n    public Collection doSomething(HashMap map) {\n        StdOut.println(\"子类被执行\");\n        return map.values();\n    }\n}\n```\n\n\n```java\npublic static void main(String[] args){\n    Father f=new Father();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n```java\npublic static void main(String[] args){\n    //父类出现的地方都可以用子类代替\n    Son f=new Son();\n    HashMap map=new HashMap();\n    f.doSomething(map);\n}\n\n子类被执行\n```\n\n可以注意到, 此时子类方法被执行了, 而子类并没有重写父类的相应的方法, 而是重载了父类的方法.\n\n```java\npublic static void main(String[] args){\n    Son f=new Son();\n    Map map=new HashMap();\n    f.doSomething(map);\n}\n\n父类被执行\n```\n\n### 后置条件\n\n当子类的方法实现或覆写父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格或相同。\n\n\n### 注意点\n\n1. 在类中调用其他类时务必使用其父类或者接口, 如果不能使用父类或者接口, 则说明类的设计已经违背了LSP原则.\n2. 如果子类不能完整地实现父类的方法, 或者父类的一些方法在子类中完全和父类业务逻辑不同, 则建议不使用继承关系, 而是用依赖, 聚集, 组合等关系代替.\n\n\n## 依赖倒置原则\n\nDependence Inversion Principle\n\n1. 高层模块不应该依赖低层模块\n2. 抽象不应该依赖细节\n3. 细节应依赖抽象\n\n|||\n|--|--|\n|高层模块|原子逻辑再组装就是高层模块|\n|低层模块|每一个逻辑的实现都由院子逻辑组成,不分割的原子逻辑就是低层模块|\n\n对于Java来说.\n\n1. 模块间的依赖通过抽象产生,实现类之间不发生直接依赖关系, 其依赖关系是通过接口或者抽象类产生的\n2. 接口或这抽象类不依赖于实现类\n3. 实现类依赖接口或抽象类\n\n这样也有利于并行开发, 即使只完成了一部分工作, 仍可以进行单元测试.\n\n这也符合现代开发的流程, 先写好单元测试类, 再写实现类.\n\n### 规则\n\n1. 每个类尽量都有接口或抽象类, 或者抽象类和接口都具备\n2. 变量的表面类型尽量是接口或者是抽象类(如果使用类的clone方法, 就必须使用实现类)\n3. 任何类都不应该从具体类中派生(如果实在需要继承自具体类, 尽量不要超过两层的继承)\n4. 尽量不要覆写基类的方法\n\n\n总体而言, 依赖倒置原则是六大原则中最难实现的, 也是实现开闭原则的重要途径. 总体而言, 把握住*面向接口编程*即可.\n","slug":"design_pattern/2016-10-24-basic-principle_1","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgew000ku8jrbzvf0ds7","content":"<h2 id=\"单一职责原则\"><a href=\"#单一职责原则\" class=\"headerlink\" title=\"单一职责原则\"></a>单一职责原则</h2><p>单一职责原则(Single Responsibility Principle,SRP)简而言之就是对于一个类或者接口, 引起其改变的应该只能有一个原因. 比如要将负责属性和行为的类分开.</p>\n<h2 id=\"里氏替换原则\"><a href=\"#里氏替换原则\" class=\"headerlink\" title=\"里氏替换原则\"></a>里氏替换原则</h2><p>定义：所有引用基类的地方必须能透明地使用其子类的对象. 只要父类出现的地方, 子类就可以出现, 而且替换为子类不会产生任何错误或者一场. 但是反过来不一定可行.</p>\n<ol>\n<li>子类中可以增加自己特有的方法。</li>\n<li>当子类的方法重载父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。</li>\n<li>当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。</li>\n</ol>\n<h3 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h3><p>当子类的方法<strong>重载</strong>父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Father</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(HashMap map)</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"父类被执行...\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Son</span> <span class=\"keyword\">extends</span> <span class=\"title\">Father</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(Map map)</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"子类被执行\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>子类方法和父类方法, 方法名相同, 返回类型相同, 但是参数不同, 所以不是Override, 而是Overload. 在这种情况下, 如果传入<code>HashMap</code>, 子类的<code>doSomething()</code>不会被执行.<br>这是<strong>正确</strong>的, 因为子类并没有重写父类方法, 而是重载父类方法, 所以</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    Father f=<span class=\"keyword\">new</span> Father();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//父类出现的地方都可以被子类代替, 且不会改变逻辑</span></div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">   <span class=\"comment\">//子类出现的地方, 父类不一定可以代替</span></div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    Map map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">子类被执行</div></pre></td></tr></table></figure>\n<p>如果父类的前置条件(形参) 范围宽于子类则不正确.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Father</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(Map map)</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"父类被执行...\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Son</span> <span class=\"keyword\">extends</span> <span class=\"title\">Father</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(HashMap map)</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"子类被执行\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    Father f=<span class=\"keyword\">new</span> Father();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//父类出现的地方都可以用子类代替</span></div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">子类被执行</div></pre></td></tr></table></figure>\n<p>可以注意到, 此时子类方法被执行了, 而子类并没有重写父类的相应的方法, 而是重载了父类的方法.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    Map map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<h3 id=\"后置条件\"><a href=\"#后置条件\" class=\"headerlink\" title=\"后置条件\"></a>后置条件</h3><p>当子类的方法实现或覆写父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格或相同。</p>\n<h3 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h3><ol>\n<li>在类中调用其他类时务必使用其父类或者接口, 如果不能使用父类或者接口, 则说明类的设计已经违背了LSP原则.</li>\n<li>如果子类不能完整地实现父类的方法, 或者父类的一些方法在子类中完全和父类业务逻辑不同, 则建议不使用继承关系, 而是用依赖, 聚集, 组合等关系代替.</li>\n</ol>\n<h2 id=\"依赖倒置原则\"><a href=\"#依赖倒置原则\" class=\"headerlink\" title=\"依赖倒置原则\"></a>依赖倒置原则</h2><p>Dependence Inversion Principle</p>\n<ol>\n<li>高层模块不应该依赖低层模块</li>\n<li>抽象不应该依赖细节</li>\n<li>细节应依赖抽象</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>高层模块</td>\n<td>原子逻辑再组装就是高层模块</td>\n</tr>\n<tr>\n<td>低层模块</td>\n<td>每一个逻辑的实现都由院子逻辑组成,不分割的原子逻辑就是低层模块</td>\n</tr>\n</tbody>\n</table>\n<p>对于Java来说.</p>\n<ol>\n<li>模块间的依赖通过抽象产生,实现类之间不发生直接依赖关系, 其依赖关系是通过接口或者抽象类产生的</li>\n<li>接口或这抽象类不依赖于实现类</li>\n<li>实现类依赖接口或抽象类</li>\n</ol>\n<p>这样也有利于并行开发, 即使只完成了一部分工作, 仍可以进行单元测试.</p>\n<p>这也符合现代开发的流程, 先写好单元测试类, 再写实现类.</p>\n<h3 id=\"规则\"><a href=\"#规则\" class=\"headerlink\" title=\"规则\"></a>规则</h3><ol>\n<li>每个类尽量都有接口或抽象类, 或者抽象类和接口都具备</li>\n<li>变量的表面类型尽量是接口或者是抽象类(如果使用类的clone方法, 就必须使用实现类)</li>\n<li>任何类都不应该从具体类中派生(如果实在需要继承自具体类, 尽量不要超过两层的继承)</li>\n<li>尽量不要覆写基类的方法</li>\n</ol>\n<p>总体而言, 依赖倒置原则是六大原则中最难实现的, 也是实现开闭原则的重要途径. 总体而言, 把握住<em>面向接口编程</em>即可.</p>\n","excerpt":"","more":"<h2 id=\"单一职责原则\"><a href=\"#单一职责原则\" class=\"headerlink\" title=\"单一职责原则\"></a>单一职责原则</h2><p>单一职责原则(Single Responsibility Principle,SRP)简而言之就是对于一个类或者接口, 引起其改变的应该只能有一个原因. 比如要将负责属性和行为的类分开.</p>\n<h2 id=\"里氏替换原则\"><a href=\"#里氏替换原则\" class=\"headerlink\" title=\"里氏替换原则\"></a>里氏替换原则</h2><p>定义：所有引用基类的地方必须能透明地使用其子类的对象. 只要父类出现的地方, 子类就可以出现, 而且替换为子类不会产生任何错误或者一场. 但是反过来不一定可行.</p>\n<ol>\n<li>子类中可以增加自己特有的方法。</li>\n<li>当子类的方法重载父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。</li>\n<li>当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。</li>\n</ol>\n<h3 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h3><p>当子类的方法<strong>重载</strong>父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Father</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(HashMap map)</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"父类被执行...\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Son</span> <span class=\"keyword\">extends</span> <span class=\"title\">Father</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(Map map)</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"子类被执行\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>子类方法和父类方法, 方法名相同, 返回类型相同, 但是参数不同, 所以不是Override, 而是Overload. 在这种情况下, 如果传入<code>HashMap</code>, 子类的<code>doSomething()</code>不会被执行.<br>这是<strong>正确</strong>的, 因为子类并没有重写父类方法, 而是重载父类方法, 所以</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    Father f=<span class=\"keyword\">new</span> Father();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//父类出现的地方都可以被子类代替, 且不会改变逻辑</span></div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">   <span class=\"comment\">//子类出现的地方, 父类不一定可以代替</span></div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    Map map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">子类被执行</div></pre></td></tr></table></figure>\n<p>如果父类的前置条件(形参) 范围宽于子类则不正确.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Father</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(Map map)</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"父类被执行...\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Son</span> <span class=\"keyword\">extends</span> <span class=\"title\">Father</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection <span class=\"title\">doSomething</span><span class=\"params\">(HashMap map)</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"子类被执行\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> map.values();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    Father f=<span class=\"keyword\">new</span> Father();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//父类出现的地方都可以用子类代替</span></div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    HashMap map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">子类被执行</div></pre></td></tr></table></figure>\n<p>可以注意到, 此时子类方法被执行了, 而子类并没有重写父类的相应的方法, 而是重载了父类的方法.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">    Son f=<span class=\"keyword\">new</span> Son();</div><div class=\"line\">    Map map=<span class=\"keyword\">new</span> HashMap();</div><div class=\"line\">    f.doSomething(map);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">父类被执行</div></pre></td></tr></table></figure>\n<h3 id=\"后置条件\"><a href=\"#后置条件\" class=\"headerlink\" title=\"后置条件\"></a>后置条件</h3><p>当子类的方法实现或覆写父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格或相同。</p>\n<h3 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h3><ol>\n<li>在类中调用其他类时务必使用其父类或者接口, 如果不能使用父类或者接口, 则说明类的设计已经违背了LSP原则.</li>\n<li>如果子类不能完整地实现父类的方法, 或者父类的一些方法在子类中完全和父类业务逻辑不同, 则建议不使用继承关系, 而是用依赖, 聚集, 组合等关系代替.</li>\n</ol>\n<h2 id=\"依赖倒置原则\"><a href=\"#依赖倒置原则\" class=\"headerlink\" title=\"依赖倒置原则\"></a>依赖倒置原则</h2><p>Dependence Inversion Principle</p>\n<ol>\n<li>高层模块不应该依赖低层模块</li>\n<li>抽象不应该依赖细节</li>\n<li>细节应依赖抽象</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>高层模块</td>\n<td>原子逻辑再组装就是高层模块</td>\n</tr>\n<tr>\n<td>低层模块</td>\n<td>每一个逻辑的实现都由院子逻辑组成,不分割的原子逻辑就是低层模块</td>\n</tr>\n</tbody>\n</table>\n<p>对于Java来说.</p>\n<ol>\n<li>模块间的依赖通过抽象产生,实现类之间不发生直接依赖关系, 其依赖关系是通过接口或者抽象类产生的</li>\n<li>接口或这抽象类不依赖于实现类</li>\n<li>实现类依赖接口或抽象类</li>\n</ol>\n<p>这样也有利于并行开发, 即使只完成了一部分工作, 仍可以进行单元测试.</p>\n<p>这也符合现代开发的流程, 先写好单元测试类, 再写实现类.</p>\n<h3 id=\"规则\"><a href=\"#规则\" class=\"headerlink\" title=\"规则\"></a>规则</h3><ol>\n<li>每个类尽量都有接口或抽象类, 或者抽象类和接口都具备</li>\n<li>变量的表面类型尽量是接口或者是抽象类(如果使用类的clone方法, 就必须使用实现类)</li>\n<li>任何类都不应该从具体类中派生(如果实在需要继承自具体类, 尽量不要超过两层的继承)</li>\n<li>尽量不要覆写基类的方法</li>\n</ol>\n<p>总体而言, 依赖倒置原则是六大原则中最难实现的, 也是实现开闭原则的重要途径. 总体而言, 把握住<em>面向接口编程</em>即可.</p>\n"},{"author":"ivyxjc","date":"2016-03-05T16:00:00.000Z","title":"python3注意点","keywords":null,"description":"python中的一些需要注意的地方. (1). tuple是不可变对象. (1)如何使用可变参数.","_content":"\n## dict set list tuple\ntuple是不可变对象。\n\ndict的key值最好使用不可变对象，例如**字符串**。最好不要用tuple。如果tuple中含有可变对象的话，还是会有错误：`TypeError: unhashable type: 'list'`。\n\n## 函数\n\n函数的默认参数最好是**不可变对象**。\n\n如下：\n\n```python\ndef add_some(L=[]):\n    if L is None:\n        L=[]\n    L.append(\"some\")\n    return L\n```\n```\n调用\n>>>add_some[]\n['some']\n>>>add_some[]\n['some','some']\n```\n\n### 可变参数\n\n在参数前加*即可使用可变参数，如下。\n\n```python\ndef calc(*numbers):\n    sum = 0\n    for n in numbers:\n        sum = sum + n * n\n    return sum\n```\n\n```\n>>>calc(1,2,3,4)\n30\n>>>calc()\n0\n```\n\n在list，tuple前加*可以使之变为可变参数传入函数之中。\n\n```\n>>>list1=[1,2,3,4]\n>>>calc(*list1)\n30\n```\n","source":"_posts/python/2016-03-06-python3-注意点.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-06\ntitle: python3注意点\ncategory: Python\ntags: [python3,python]\nkeywords:\ndescription: python中的一些需要注意的地方. (1). tuple是不可变对象. (1)如何使用可变参数.\n---\n\n## dict set list tuple\ntuple是不可变对象。\n\ndict的key值最好使用不可变对象，例如**字符串**。最好不要用tuple。如果tuple中含有可变对象的话，还是会有错误：`TypeError: unhashable type: 'list'`。\n\n## 函数\n\n函数的默认参数最好是**不可变对象**。\n\n如下：\n\n```python\ndef add_some(L=[]):\n    if L is None:\n        L=[]\n    L.append(\"some\")\n    return L\n```\n```\n调用\n>>>add_some[]\n['some']\n>>>add_some[]\n['some','some']\n```\n\n### 可变参数\n\n在参数前加*即可使用可变参数，如下。\n\n```python\ndef calc(*numbers):\n    sum = 0\n    for n in numbers:\n        sum = sum + n * n\n    return sum\n```\n\n```\n>>>calc(1,2,3,4)\n30\n>>>calc()\n0\n```\n\n在list，tuple前加*可以使之变为可变参数传入函数之中。\n\n```\n>>>list1=[1,2,3,4]\n>>>calc(*list1)\n30\n```\n","slug":"python/2016-03-06-python3-注意点","published":1,"updated":"2016-10-25T09:03:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgex000mu8jrug30mb3p","content":"<h2 id=\"dict-set-list-tuple\"><a href=\"#dict-set-list-tuple\" class=\"headerlink\" title=\"dict set list tuple\"></a>dict set list tuple</h2><p>tuple是不可变对象。</p>\n<p>dict的key值最好使用不可变对象，例如<strong>字符串</strong>。最好不要用tuple。如果tuple中含有可变对象的话，还是会有错误：<code>TypeError: unhashable type: &#39;list&#39;</code>。</p>\n<h2 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h2><p>函数的默认参数最好是<strong>不可变对象</strong>。</p>\n<p>如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_some</span><span class=\"params\">(L=[])</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> L <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">        L=[]</div><div class=\"line\">    L.append(<span class=\"string\">\"some\"</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> L</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">调用</div><div class=\"line\">&gt;&gt;&gt;add_some[]</div><div class=\"line\">[&apos;some&apos;]</div><div class=\"line\">&gt;&gt;&gt;add_some[]</div><div class=\"line\">[&apos;some&apos;,&apos;some&apos;]</div></pre></td></tr></table></figure>\n<h3 id=\"可变参数\"><a href=\"#可变参数\" class=\"headerlink\" title=\"可变参数\"></a>可变参数</h3><p>在参数前加*即可使用可变参数，如下。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc</span><span class=\"params\">(*numbers)</span>:</span></div><div class=\"line\">    sum = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> numbers:</div><div class=\"line\">        sum = sum + n * n</div><div class=\"line\">    <span class=\"keyword\">return</span> sum</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;calc(1,2,3,4)</div><div class=\"line\">30</div><div class=\"line\">&gt;&gt;&gt;calc()</div><div class=\"line\">0</div></pre></td></tr></table></figure>\n<p>在list，tuple前加*可以使之变为可变参数传入函数之中。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;list1=[1,2,3,4]</div><div class=\"line\">&gt;&gt;&gt;calc(*list1)</div><div class=\"line\">30</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"dict-set-list-tuple\"><a href=\"#dict-set-list-tuple\" class=\"headerlink\" title=\"dict set list tuple\"></a>dict set list tuple</h2><p>tuple是不可变对象。</p>\n<p>dict的key值最好使用不可变对象，例如<strong>字符串</strong>。最好不要用tuple。如果tuple中含有可变对象的话，还是会有错误：<code>TypeError: unhashable type: &#39;list&#39;</code>。</p>\n<h2 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h2><p>函数的默认参数最好是<strong>不可变对象</strong>。</p>\n<p>如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_some</span><span class=\"params\">(L=[])</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> L <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">        L=[]</div><div class=\"line\">    L.append(<span class=\"string\">\"some\"</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> L</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">调用</div><div class=\"line\">&gt;&gt;&gt;add_some[]</div><div class=\"line\">[&apos;some&apos;]</div><div class=\"line\">&gt;&gt;&gt;add_some[]</div><div class=\"line\">[&apos;some&apos;,&apos;some&apos;]</div></pre></td></tr></table></figure>\n<h3 id=\"可变参数\"><a href=\"#可变参数\" class=\"headerlink\" title=\"可变参数\"></a>可变参数</h3><p>在参数前加*即可使用可变参数，如下。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc</span><span class=\"params\">(*numbers)</span>:</span></div><div class=\"line\">    sum = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> numbers:</div><div class=\"line\">        sum = sum + n * n</div><div class=\"line\">    <span class=\"keyword\">return</span> sum</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;calc(1,2,3,4)</div><div class=\"line\">30</div><div class=\"line\">&gt;&gt;&gt;calc()</div><div class=\"line\">0</div></pre></td></tr></table></figure>\n<p>在list，tuple前加*可以使之变为可变参数传入函数之中。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;list1=[1,2,3,4]</div><div class=\"line\">&gt;&gt;&gt;calc(*list1)</div><div class=\"line\">30</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-10-29T16:00:00.000Z","title":"python 生成器函数","keywords":null,"description":"python中生成器函数","_content":"\n\n\n\n## 生成器函数\n\n生成器函数是一个迭代器, 不过只能遍历其一次, 这是因为生成器并不将数据存储在内存之中, 生成完数据后并不保存下来.\n\n```python\n\nlist=(i for i in range(5))\n\nfor i in list:\n    print(i)\n\nprint(\"---\")\nfor i in list:\n    print(i)\n\nout:\n0\n1\n2\n3\n4\n---\n\n```\n\n```python\n\ndef createGenerator():\n    for i in range(5):\n        yield i*i\n\ngen=createGenerator()\nfor i in gen:\n    print(i)\n\nprint(\"---\")\nfor i in gen:\n    print(i)\nout:\n\n0\n1\n4\n9\n16\n---\n```\n\n另外, 生成器函数并不是再调用的时候就运行的, 而是在遍历的时候才运行, 在上述代码中, 意味着生成器函数是在执行`for i in gen:`时才运行的.\n\n解释器是如何知道其是生成器函数的呢? 当解释器发现`yield`时, 就知道该函数是个生成器函数, 它会设置一个标识来标记这一情况, 调用type也可以发现这一情况.\n\n```python\n#生成器标志位在第5位\ngenerator_bit=1<<5\nb=bool(createGenerator.__code__.co_flags & generator_bit)\nprint(b)\nprint(type(createGenerator))\n\nout:\nTrue\n<class 'generator'>\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n参考文章:\n\n[A Web Crawler With asyncio Coroutines](http://aosabook.org/en/500L/a-web-crawler-with-asyncio-coroutines.html)\n\n[What does the yield keyword do](http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do)\n","source":"_posts/python/2016-10-30-generator.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-30\ntitle: python 生成器函数\ncategory: Python\ntags: [python,generators]\nkeywords:\ndescription: python中生成器函数\n---\n\n\n\n\n## 生成器函数\n\n生成器函数是一个迭代器, 不过只能遍历其一次, 这是因为生成器并不将数据存储在内存之中, 生成完数据后并不保存下来.\n\n```python\n\nlist=(i for i in range(5))\n\nfor i in list:\n    print(i)\n\nprint(\"---\")\nfor i in list:\n    print(i)\n\nout:\n0\n1\n2\n3\n4\n---\n\n```\n\n```python\n\ndef createGenerator():\n    for i in range(5):\n        yield i*i\n\ngen=createGenerator()\nfor i in gen:\n    print(i)\n\nprint(\"---\")\nfor i in gen:\n    print(i)\nout:\n\n0\n1\n4\n9\n16\n---\n```\n\n另外, 生成器函数并不是再调用的时候就运行的, 而是在遍历的时候才运行, 在上述代码中, 意味着生成器函数是在执行`for i in gen:`时才运行的.\n\n解释器是如何知道其是生成器函数的呢? 当解释器发现`yield`时, 就知道该函数是个生成器函数, 它会设置一个标识来标记这一情况, 调用type也可以发现这一情况.\n\n```python\n#生成器标志位在第5位\ngenerator_bit=1<<5\nb=bool(createGenerator.__code__.co_flags & generator_bit)\nprint(b)\nprint(type(createGenerator))\n\nout:\nTrue\n<class 'generator'>\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n参考文章:\n\n[A Web Crawler With asyncio Coroutines](http://aosabook.org/en/500L/a-web-crawler-with-asyncio-coroutines.html)\n\n[What does the yield keyword do](http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do)\n","slug":"python/2016-10-30-generator","published":1,"updated":"2016-10-30T08:47:19.614Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgez000qu8jraz0ackob","content":"<h2 id=\"生成器函数\"><a href=\"#生成器函数\" class=\"headerlink\" title=\"生成器函数\"></a>生成器函数</h2><p>生成器函数是一个迭代器, 不过只能遍历其一次, 这是因为生成器并不将数据存储在内存之中, 生成完数据后并不保存下来.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">list=(i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">5</span>))</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> list:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">print(<span class=\"string\">\"---\"</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> list:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">out:</div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">1</span></div><div class=\"line\"><span class=\"number\">2</span></div><div class=\"line\"><span class=\"number\">3</span></div><div class=\"line\"><span class=\"number\">4</span></div><div class=\"line\">---</div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">createGenerator</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">5</span>):</div><div class=\"line\">        <span class=\"keyword\">yield</span> i*i</div><div class=\"line\"></div><div class=\"line\">gen=createGenerator()</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> gen:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">print(<span class=\"string\">\"---\"</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> gen:</div><div class=\"line\">    print(i)</div><div class=\"line\">out:</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">1</span></div><div class=\"line\"><span class=\"number\">4</span></div><div class=\"line\"><span class=\"number\">9</span></div><div class=\"line\"><span class=\"number\">16</span></div><div class=\"line\">---</div></pre></td></tr></table></figure>\n<p>另外, 生成器函数并不是再调用的时候就运行的, 而是在遍历的时候才运行, 在上述代码中, 意味着生成器函数是在执行<code>for i in gen:</code>时才运行的.</p>\n<p>解释器是如何知道其是生成器函数的呢? 当解释器发现<code>yield</code>时, 就知道该函数是个生成器函数, 它会设置一个标识来标记这一情况, 调用type也可以发现这一情况.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#生成器标志位在第5位</span></div><div class=\"line\">generator_bit=<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">5</span></div><div class=\"line\">b=bool(createGenerator.__code__.co_flags &amp; generator_bit)</div><div class=\"line\">print(b)</div><div class=\"line\">print(type(createGenerator))</div><div class=\"line\"></div><div class=\"line\">out:</div><div class=\"line\"><span class=\"keyword\">True</span></div><div class=\"line\">&lt;<span class=\"class\"><span class=\"keyword\">class</span> '<span class=\"title\">generator</span>'&gt;</span></div></pre></td></tr></table></figure>\n<p>参考文章:</p>\n<p><a href=\"http://aosabook.org/en/500L/a-web-crawler-with-asyncio-coroutines.html\" target=\"_blank\" rel=\"external\">A Web Crawler With asyncio Coroutines</a></p>\n<p><a href=\"http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\" target=\"_blank\" rel=\"external\">What does the yield keyword do</a></p>\n","excerpt":"","more":"<h2 id=\"生成器函数\"><a href=\"#生成器函数\" class=\"headerlink\" title=\"生成器函数\"></a>生成器函数</h2><p>生成器函数是一个迭代器, 不过只能遍历其一次, 这是因为生成器并不将数据存储在内存之中, 生成完数据后并不保存下来.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">list=(i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">5</span>))</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> list:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">print(<span class=\"string\">\"---\"</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> list:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">out:</div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">1</span></div><div class=\"line\"><span class=\"number\">2</span></div><div class=\"line\"><span class=\"number\">3</span></div><div class=\"line\"><span class=\"number\">4</span></div><div class=\"line\">---</div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">createGenerator</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">5</span>):</div><div class=\"line\">        <span class=\"keyword\">yield</span> i*i</div><div class=\"line\"></div><div class=\"line\">gen=createGenerator()</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> gen:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">print(<span class=\"string\">\"---\"</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> gen:</div><div class=\"line\">    print(i)</div><div class=\"line\">out:</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">1</span></div><div class=\"line\"><span class=\"number\">4</span></div><div class=\"line\"><span class=\"number\">9</span></div><div class=\"line\"><span class=\"number\">16</span></div><div class=\"line\">---</div></pre></td></tr></table></figure>\n<p>另外, 生成器函数并不是再调用的时候就运行的, 而是在遍历的时候才运行, 在上述代码中, 意味着生成器函数是在执行<code>for i in gen:</code>时才运行的.</p>\n<p>解释器是如何知道其是生成器函数的呢? 当解释器发现<code>yield</code>时, 就知道该函数是个生成器函数, 它会设置一个标识来标记这一情况, 调用type也可以发现这一情况.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#生成器标志位在第5位</span></div><div class=\"line\">generator_bit=<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">5</span></div><div class=\"line\">b=bool(createGenerator.__code__.co_flags &amp; generator_bit)</div><div class=\"line\">print(b)</div><div class=\"line\">print(type(createGenerator))</div><div class=\"line\"></div><div class=\"line\">out:</div><div class=\"line\"><span class=\"keyword\">True</span></div><div class=\"line\">&lt;<span class=\"class\"><span class=\"keyword\">class</span> '<span class=\"title\">generator</span>'&gt;</span></div></pre></td></tr></table></figure>\n<p>参考文章:</p>\n<p><a href=\"http://aosabook.org/en/500L/a-web-crawler-with-asyncio-coroutines.html\">A Web Crawler With asyncio Coroutines</a></p>\n<p><a href=\"http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do\">What does the yield keyword do</a></p>\n"},{"author":"ivyxjc","date":"2016-03-31T16:00:00.000Z","title":"虚拟机环境搭建python以及相关问题解决","keywords":null,"description":"如何在linux虚拟机环境下搭建python","_content":"\n## 安装pip\n\n```\nsudo apt-get remove pip\nwget .../get-pip.py\npython get-pip.py\n```\n\n\n## 安装scrapy\n安装scrapy出现`Python.h No such file...`\n\n```\nsudo apt-get install python3-dev\n```\n\n\n若出现`failed to build wheel for Cryptography`\n\n```\nsudo apt-get install build-essential libssl-dev libffi-dev python-dev\n```\n\n## 安装pycharm\n\n进入pycharm文件内\n\n```\n./pycharm.sh\n```\n\n\n```\nsudo gedit /usr/share/applications/Pycharm.desktop\n然后输入\n[Desktop Entry]\nType=Application\nName=Pycharm\nGenericName=Pycharm3\nComment=Pycharm3:The Python IDE\nExec=\"/XXX/pycharm-community-3.4.1/bin/pycharm.sh\" %f\nIcon=/XXX/pycharm-community-3.4.1/bin/pycharm.png\nTerminal=pycharm\nCategories=Pycharm;\n```\n\n然后进入`/usr/share/applications/`双击打开即可。\n\n\n\n\n## VMware和主机共享文件夹\n\n\n\n\n```bash\nsudo apt-get install open-vm-tools-dkms\n```\n\n\n```\nsudo gksu gedit/etc/fstab\n```\n","source":"_posts/效率/2016-04-01-Linux-python-env-tips.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-01\ntitle: 虚拟机环境搭建python以及相关问题解决\ncategory: 效率\ntags: [faq,python,spider,bs4]\nkeywords:\ndescription: 如何在linux虚拟机环境下搭建python\n---\n\n## 安装pip\n\n```\nsudo apt-get remove pip\nwget .../get-pip.py\npython get-pip.py\n```\n\n\n## 安装scrapy\n安装scrapy出现`Python.h No such file...`\n\n```\nsudo apt-get install python3-dev\n```\n\n\n若出现`failed to build wheel for Cryptography`\n\n```\nsudo apt-get install build-essential libssl-dev libffi-dev python-dev\n```\n\n## 安装pycharm\n\n进入pycharm文件内\n\n```\n./pycharm.sh\n```\n\n\n```\nsudo gedit /usr/share/applications/Pycharm.desktop\n然后输入\n[Desktop Entry]\nType=Application\nName=Pycharm\nGenericName=Pycharm3\nComment=Pycharm3:The Python IDE\nExec=\"/XXX/pycharm-community-3.4.1/bin/pycharm.sh\" %f\nIcon=/XXX/pycharm-community-3.4.1/bin/pycharm.png\nTerminal=pycharm\nCategories=Pycharm;\n```\n\n然后进入`/usr/share/applications/`双击打开即可。\n\n\n\n\n## VMware和主机共享文件夹\n\n\n\n\n```bash\nsudo apt-get install open-vm-tools-dkms\n```\n\n\n```\nsudo gksu gedit/etc/fstab\n```\n","slug":"效率/2016-04-01-Linux-python-env-tips","published":1,"updated":"2016-10-25T09:03:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgf1000ru8jrhkvzmrkd","content":"<h2 id=\"安装pip\"><a href=\"#安装pip\" class=\"headerlink\" title=\"安装pip\"></a>安装pip</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get remove pip</div><div class=\"line\">wget .../get-pip.py</div><div class=\"line\">python get-pip.py</div></pre></td></tr></table></figure>\n<h2 id=\"安装scrapy\"><a href=\"#安装scrapy\" class=\"headerlink\" title=\"安装scrapy\"></a>安装scrapy</h2><p>安装scrapy出现<code>Python.h No such file...</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install python3-dev</div></pre></td></tr></table></figure>\n<p>若出现<code>failed to build wheel for Cryptography</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install build-essential libssl-dev libffi-dev python-dev</div></pre></td></tr></table></figure>\n<h2 id=\"安装pycharm\"><a href=\"#安装pycharm\" class=\"headerlink\" title=\"安装pycharm\"></a>安装pycharm</h2><p>进入pycharm文件内</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./pycharm.sh</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo gedit /usr/share/applications/Pycharm.desktop</div><div class=\"line\">然后输入</div><div class=\"line\">[Desktop Entry]</div><div class=\"line\">Type=Application</div><div class=\"line\">Name=Pycharm</div><div class=\"line\">GenericName=Pycharm3</div><div class=\"line\">Comment=Pycharm3:The Python IDE</div><div class=\"line\">Exec=&quot;/XXX/pycharm-community-3.4.1/bin/pycharm.sh&quot; %f</div><div class=\"line\">Icon=/XXX/pycharm-community-3.4.1/bin/pycharm.png</div><div class=\"line\">Terminal=pycharm</div><div class=\"line\">Categories=Pycharm;</div></pre></td></tr></table></figure>\n<p>然后进入<code>/usr/share/applications/</code>双击打开即可。</p>\n<h2 id=\"VMware和主机共享文件夹\"><a href=\"#VMware和主机共享文件夹\" class=\"headerlink\" title=\"VMware和主机共享文件夹\"></a>VMware和主机共享文件夹</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install open-vm-tools-dkms</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo gksu gedit/etc/fstab</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"安装pip\"><a href=\"#安装pip\" class=\"headerlink\" title=\"安装pip\"></a>安装pip</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get remove pip</div><div class=\"line\">wget .../get-pip.py</div><div class=\"line\">python get-pip.py</div></pre></td></tr></table></figure>\n<h2 id=\"安装scrapy\"><a href=\"#安装scrapy\" class=\"headerlink\" title=\"安装scrapy\"></a>安装scrapy</h2><p>安装scrapy出现<code>Python.h No such file...</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install python3-dev</div></pre></td></tr></table></figure>\n<p>若出现<code>failed to build wheel for Cryptography</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install build-essential libssl-dev libffi-dev python-dev</div></pre></td></tr></table></figure>\n<h2 id=\"安装pycharm\"><a href=\"#安装pycharm\" class=\"headerlink\" title=\"安装pycharm\"></a>安装pycharm</h2><p>进入pycharm文件内</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./pycharm.sh</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo gedit /usr/share/applications/Pycharm.desktop</div><div class=\"line\">然后输入</div><div class=\"line\">[Desktop Entry]</div><div class=\"line\">Type=Application</div><div class=\"line\">Name=Pycharm</div><div class=\"line\">GenericName=Pycharm3</div><div class=\"line\">Comment=Pycharm3:The Python IDE</div><div class=\"line\">Exec=&quot;/XXX/pycharm-community-3.4.1/bin/pycharm.sh&quot; %f</div><div class=\"line\">Icon=/XXX/pycharm-community-3.4.1/bin/pycharm.png</div><div class=\"line\">Terminal=pycharm</div><div class=\"line\">Categories=Pycharm;</div></pre></td></tr></table></figure>\n<p>然后进入<code>/usr/share/applications/</code>双击打开即可。</p>\n<h2 id=\"VMware和主机共享文件夹\"><a href=\"#VMware和主机共享文件夹\" class=\"headerlink\" title=\"VMware和主机共享文件夹\"></a>VMware和主机共享文件夹</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install open-vm-tools-dkms</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo gksu gedit/etc/fstab</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-07-05T16:00:00.000Z","title":"代理相关","keywords":null,"description":"各个服务使用代理的具体命令.","_content":"\n## github使用代理\n\ngit添加代理：\n\n```git\ngit config --global http.proxy 'http://127.0.0.1:1080'\ngit config --global https.proxy 'http://127.0.0.1:1080'\n```\n","source":"_posts/效率/2016-07-06-proxy.md","raw":"---\nauthor: ivyxjc\ndate: 2016-07-06\ntitle: 代理相关\ncategory: 效率\ntags: [faq]\nkeywords:\ndescription: 各个服务使用代理的具体命令.\n---\n\n## github使用代理\n\ngit添加代理：\n\n```git\ngit config --global http.proxy 'http://127.0.0.1:1080'\ngit config --global https.proxy 'http://127.0.0.1:1080'\n```\n","slug":"效率/2016-07-06-proxy","published":1,"updated":"2016-10-25T09:03:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgf3000vu8jr8t5a4xbf","content":"<h2 id=\"github使用代理\"><a href=\"#github使用代理\" class=\"headerlink\" title=\"github使用代理\"></a>github使用代理</h2><p>git添加代理：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global http.proxy &apos;http://127.0.0.1:1080&apos;</div><div class=\"line\">git config --global https.proxy &apos;http://127.0.0.1:1080&apos;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"github使用代理\"><a href=\"#github使用代理\" class=\"headerlink\" title=\"github使用代理\"></a>github使用代理</h2><p>git添加代理：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global http.proxy &apos;http://127.0.0.1:1080&apos;</div><div class=\"line\">git config --global https.proxy &apos;http://127.0.0.1:1080&apos;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-07-02T16:00:00.000Z","title":"重装电脑时的设置问题","keywords":null,"description":"重装电脑时的设置.","_content":"\n\n## 调换`Ctrl`和`Caps Lock`键\n`HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout`中添加`Scancode Map`二进制项，内容为\n\n```\n0000 00 00 00 00 00 00 00 00\n0008 03 00 00 00 3A 00 1D 00\n0010 1D 00 3A 00 00 00 00 00\n```\n\n## java环境设置\n\n环境变量中添加`JAVA_HOME`:`C:\\Program Files\\Java\\jdk1.8.0_91`\n\n`Path`中添加`$JAVA_HOME$\\jre\\bin`和`$JAVA_HOME$\\bin`\n\n## python环境变量设置\n`path`中添加`c:\\python35`\n\n## jetbrains系列idea设置\n\n更改程序主目录下`bin/idea.properties`中的内容\n","source":"_posts/效率/2016-07-03-Reset-PC.md","raw":"---\nauthor: ivyxjc\ndate: 2016-07-03\ntitle: 重装电脑时的设置问题\ncategory: 效率\ntags: [faq]\nkeywords:\ndescription: 重装电脑时的设置.\n---\n\n\n## 调换`Ctrl`和`Caps Lock`键\n`HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout`中添加`Scancode Map`二进制项，内容为\n\n```\n0000 00 00 00 00 00 00 00 00\n0008 03 00 00 00 3A 00 1D 00\n0010 1D 00 3A 00 00 00 00 00\n```\n\n## java环境设置\n\n环境变量中添加`JAVA_HOME`:`C:\\Program Files\\Java\\jdk1.8.0_91`\n\n`Path`中添加`$JAVA_HOME$\\jre\\bin`和`$JAVA_HOME$\\bin`\n\n## python环境变量设置\n`path`中添加`c:\\python35`\n\n## jetbrains系列idea设置\n\n更改程序主目录下`bin/idea.properties`中的内容\n","slug":"效率/2016-07-03-Reset-PC","published":1,"updated":"2016-10-25T09:03:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgf5000xu8jrt9xf2zkk","content":"<h2 id=\"调换Ctrl和Caps-Lock键\"><a href=\"#调换Ctrl和Caps-Lock键\" class=\"headerlink\" title=\"调换Ctrl和Caps Lock键\"></a>调换<code>Ctrl</code>和<code>Caps Lock</code>键</h2><p><code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout</code>中添加<code>Scancode Map</code>二进制项，内容为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">0000 00 00 00 00 00 00 00 00</div><div class=\"line\">0008 03 00 00 00 3A 00 1D 00</div><div class=\"line\">0010 1D 00 3A 00 00 00 00 00</div></pre></td></tr></table></figure>\n<h2 id=\"java环境设置\"><a href=\"#java环境设置\" class=\"headerlink\" title=\"java环境设置\"></a>java环境设置</h2><p>环境变量中添加<code>JAVA_HOME</code>:<code>C:\\Program Files\\Java\\jdk1.8.0_91</code></p>\n<p><code>Path</code>中添加<code>$JAVA_HOME$\\jre\\bin</code>和<code>$JAVA_HOME$\\bin</code></p>\n<h2 id=\"python环境变量设置\"><a href=\"#python环境变量设置\" class=\"headerlink\" title=\"python环境变量设置\"></a>python环境变量设置</h2><p><code>path</code>中添加<code>c:\\python35</code></p>\n<h2 id=\"jetbrains系列idea设置\"><a href=\"#jetbrains系列idea设置\" class=\"headerlink\" title=\"jetbrains系列idea设置\"></a>jetbrains系列idea设置</h2><p>更改程序主目录下<code>bin/idea.properties</code>中的内容</p>\n","excerpt":"","more":"<h2 id=\"调换Ctrl和Caps-Lock键\"><a href=\"#调换Ctrl和Caps-Lock键\" class=\"headerlink\" title=\"调换Ctrl和Caps Lock键\"></a>调换<code>Ctrl</code>和<code>Caps Lock</code>键</h2><p><code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout</code>中添加<code>Scancode Map</code>二进制项，内容为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">0000 00 00 00 00 00 00 00 00</div><div class=\"line\">0008 03 00 00 00 3A 00 1D 00</div><div class=\"line\">0010 1D 00 3A 00 00 00 00 00</div></pre></td></tr></table></figure>\n<h2 id=\"java环境设置\"><a href=\"#java环境设置\" class=\"headerlink\" title=\"java环境设置\"></a>java环境设置</h2><p>环境变量中添加<code>JAVA_HOME</code>:<code>C:\\Program Files\\Java\\jdk1.8.0_91</code></p>\n<p><code>Path</code>中添加<code>$JAVA_HOME$\\jre\\bin</code>和<code>$JAVA_HOME$\\bin</code></p>\n<h2 id=\"python环境变量设置\"><a href=\"#python环境变量设置\" class=\"headerlink\" title=\"python环境变量设置\"></a>python环境变量设置</h2><p><code>path</code>中添加<code>c:\\python35</code></p>\n<h2 id=\"jetbrains系列idea设置\"><a href=\"#jetbrains系列idea设置\" class=\"headerlink\" title=\"jetbrains系列idea设置\"></a>jetbrains系列idea设置</h2><p>更改程序主目录下<code>bin/idea.properties</code>中的内容</p>\n"},{"author":"ivyxjc","date":"2016-06-08T16:00:00.000Z","title":"在Centos 6中升级python","keywords":null,"description":null,"_content":"Centos默认的python使用的是`python2.6`,我常用的是`python3.5`,所以需要升级python.\n<!--more-->\n\n安装过程:\n\n1. 下载python3.5.1\n`wget https://www.python.org/ftp/python/3.5.1/Python-3.5.1.tgz`\n2. 解压并安装\n 1. `tar zxvf Python-3.5.1.tgz`\n 2. `cd Python-3.5.1`\n 3. `./configure --prefix=/usr/local/python3.5`\n 4. `make`\n 5. `make install`\n3. 备份原有python命令执行文件\n`mv /usr/bin/python /usr/bin/pythonbak`\n4. 创建新的python软连接\n   `ln -s /usr/local/python3.5/bin/python3.5 /usr/bin/python`\n\n问题:\n1. 2.3步可能出现`no acceptable C compiler found in $PATH`问题,这是因为完整的安装`development tools`.\n    解决方法:`yum groupinstall \"Development Tools\"`\n\n2. pip无法使用,出现`versionconflic`的问题,好像是因为pip版本的问题.进入pip的目录,删除pip.再直接下载上述错误信息中显示的`requirement.parse()`中的pip版本,解压缩,安装即可.\n","source":"_posts/效率/2016-06-09-update-python.md","raw":"---\nauthor: ivyxjc\ndate: 2016-06-09\ntitle: 在Centos 6中升级python\ncategory: 效率\ntags: [faq]\nkeywords:\ndescription:\n---\nCentos默认的python使用的是`python2.6`,我常用的是`python3.5`,所以需要升级python.\n<!--more-->\n\n安装过程:\n\n1. 下载python3.5.1\n`wget https://www.python.org/ftp/python/3.5.1/Python-3.5.1.tgz`\n2. 解压并安装\n 1. `tar zxvf Python-3.5.1.tgz`\n 2. `cd Python-3.5.1`\n 3. `./configure --prefix=/usr/local/python3.5`\n 4. `make`\n 5. `make install`\n3. 备份原有python命令执行文件\n`mv /usr/bin/python /usr/bin/pythonbak`\n4. 创建新的python软连接\n   `ln -s /usr/local/python3.5/bin/python3.5 /usr/bin/python`\n\n问题:\n1. 2.3步可能出现`no acceptable C compiler found in $PATH`问题,这是因为完整的安装`development tools`.\n    解决方法:`yum groupinstall \"Development Tools\"`\n\n2. pip无法使用,出现`versionconflic`的问题,好像是因为pip版本的问题.进入pip的目录,删除pip.再直接下载上述错误信息中显示的`requirement.parse()`中的pip版本,解压缩,安装即可.\n","slug":"效率/2016-06-09-update-python","published":1,"updated":"2016-10-25T09:03:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgf70011u8jrwjegrb0i","content":"<p>Centos默认的python使用的是<code>python2.6</code>,我常用的是<code>python3.5</code>,所以需要升级python.<br><a id=\"more\"></a></p>\n<p>安装过程:</p>\n<ol>\n<li>下载python3.5.1<br><code>wget https://www.python.org/ftp/python/3.5.1/Python-3.5.1.tgz</code></li>\n<li>解压并安装<ol>\n<li><code>tar zxvf Python-3.5.1.tgz</code></li>\n<li><code>cd Python-3.5.1</code></li>\n<li><code>./configure --prefix=/usr/local/python3.5</code></li>\n<li><code>make</code></li>\n<li><code>make install</code></li>\n</ol>\n</li>\n<li>备份原有python命令执行文件<br><code>mv /usr/bin/python /usr/bin/pythonbak</code></li>\n<li>创建新的python软连接<br><code>ln -s /usr/local/python3.5/bin/python3.5 /usr/bin/python</code></li>\n</ol>\n<p>问题:</p>\n<ol>\n<li><p>2.3步可能出现<code>no acceptable C compiler found in $PATH</code>问题,这是因为完整的安装<code>development tools</code>.<br> 解决方法:<code>yum groupinstall &quot;Development Tools&quot;</code></p>\n</li>\n<li><p>pip无法使用,出现<code>versionconflic</code>的问题,好像是因为pip版本的问题.进入pip的目录,删除pip.再直接下载上述错误信息中显示的<code>requirement.parse()</code>中的pip版本,解压缩,安装即可.</p>\n</li>\n</ol>\n","excerpt":"<p>Centos默认的python使用的是<code>python2.6</code>,我常用的是<code>python3.5</code>,所以需要升级python.<br>","more":"</p>\n<p>安装过程:</p>\n<ol>\n<li>下载python3.5.1<br><code>wget https://www.python.org/ftp/python/3.5.1/Python-3.5.1.tgz</code></li>\n<li>解压并安装<ol>\n<li><code>tar zxvf Python-3.5.1.tgz</code></li>\n<li><code>cd Python-3.5.1</code></li>\n<li><code>./configure --prefix=/usr/local/python3.5</code></li>\n<li><code>make</code></li>\n<li><code>make install</code></li>\n</ol>\n</li>\n<li>备份原有python命令执行文件<br><code>mv /usr/bin/python /usr/bin/pythonbak</code></li>\n<li>创建新的python软连接<br><code>ln -s /usr/local/python3.5/bin/python3.5 /usr/bin/python</code></li>\n</ol>\n<p>问题:</p>\n<ol>\n<li><p>2.3步可能出现<code>no acceptable C compiler found in $PATH</code>问题,这是因为完整的安装<code>development tools</code>.<br> 解决方法:<code>yum groupinstall &quot;Development Tools&quot;</code></p>\n</li>\n<li><p>pip无法使用,出现<code>versionconflic</code>的问题,好像是因为pip版本的问题.进入pip的目录,删除pip.再直接下载上述错误信息中显示的<code>requirement.parse()</code>中的pip版本,解压缩,安装即可.</p>\n</li>\n</ol>"},{"author":"ivyxjc","date":"2016-10-13T16:00:00.000Z","title":"Git相关命令及用法","keywords":null,"description":"本文主要如何使用git, (1). 最基础的add,commit, push <br> (2). 如何在git文件中添加子模块","toc":true,"_content":"\n## add commit push\n\n```\ngit add *\ngit commit -m \"\"\ngit push -u origin branch\n```\n\n在删除某一些文件时, 应使用`git add .`. 否则, 会出现`Changes not staged for commit: ...`\n\n## 添加子模块\n\n子模块的操作必须非常小心, 因为其中有很多坑.\n\n### 第一次添加子模块\n\n```git\ngit submodule add git://github.com/chneukirchen/rack.git rack\n```\n\n### 删除某个子模块\n\n`git rm --cached pathOfSubmodule`\n\n然后删除_config.yml以及.git/config文件中相关记录\n\n### 更改子模块后提交对子模块的修改\n\n进入子模块所在目录\n\n```\ngit add *\ngit commit -m \"\"\ngit push\n```\n\n### 主项目提交\n\n我们可以直接像正常git文件一样的流程进行提交, 但是如果我们忘记提交子模块的变动, 而新的项目和子模块的变动又相关. 那么其他人从远程仓库中clone的文件可能并不能正确运行(缺少必要的子模块变动).\n\n所有推荐使用以下两种方法：\n1. `git push --recurse-submodules=check`. 若有子模块的变动没有推送, 那么该`push`会失败.\n2. `git push --recurse-submodules=on-demand`. 若有子模块的变动没有推送, 那么它会先推送子模块的变动, 然后再推送主项目.\n\n### 子模块的更新\n\n其他人如果对子模块进行了修改, 在`git pull`之后, 再调用以下`git submodule update`更新子模块.\n\n调用`git submodule update`也更新子模块的相关内容, 但是会将子模块留在一个称作 `detached HEAD`的状态. 这意味着没有本地工作分支（例如 “master”）跟踪改动。 所以你做的任何改动都不会被跟踪。即使你使用了commit提交了一些变动, 在你下一次使用`git submodule update`时, 这些变动会全部丢失.\n\n所以需要进入每一个你希望对其进行修改的子模块,`git checkout branchName`检出一个分支. 从远程仓库中更新本地文件时, 使用`git submodule update --remote --merge`, 也可以使用`--rebase`.\n\n如果忘记了`--rebase`或者`--merge`, git会将子模块更新为远程仓库上的状态, 而且该项目将再一次进入 `detached HEAD` 的状态. 解决方法：\n\n1. 检出包含之前本地更改的分支\n2. 然后手动的merge或者rebase任何一个远程分支即可.\n\n即使没有提交子模块的更改也某有问题, 此时git只会抓取更改, 而不会覆盖本地内容.\n\n### 克隆一个带子模块的项目\n\n克隆一个包含子模块的项目.`git clone`下来之后, 该子模块并不会被clone下来.需要调用以下两个命令：\n1. `git submodule init`来下载本地所需的子模块配置文件文件\n2. `git submodule update `来下载主项目中列出的合适的子模块提交\n\n也可以使用`git clone --recursivegit clone --recursive https://github.com/...`自动地初始化并更新仓库中的每一个子模块.\n","source":"_posts/效率/2016-10-14-git.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-14\ntitle: Git相关命令及用法\ncategory: 效率\ntags: [faq,git]\nkeywords:\ndescription: 本文主要如何使用git, (1). 最基础的add,commit, push <br> (2). 如何在git文件中添加子模块\ntoc: true\n---\n\n## add commit push\n\n```\ngit add *\ngit commit -m \"\"\ngit push -u origin branch\n```\n\n在删除某一些文件时, 应使用`git add .`. 否则, 会出现`Changes not staged for commit: ...`\n\n## 添加子模块\n\n子模块的操作必须非常小心, 因为其中有很多坑.\n\n### 第一次添加子模块\n\n```git\ngit submodule add git://github.com/chneukirchen/rack.git rack\n```\n\n### 删除某个子模块\n\n`git rm --cached pathOfSubmodule`\n\n然后删除_config.yml以及.git/config文件中相关记录\n\n### 更改子模块后提交对子模块的修改\n\n进入子模块所在目录\n\n```\ngit add *\ngit commit -m \"\"\ngit push\n```\n\n### 主项目提交\n\n我们可以直接像正常git文件一样的流程进行提交, 但是如果我们忘记提交子模块的变动, 而新的项目和子模块的变动又相关. 那么其他人从远程仓库中clone的文件可能并不能正确运行(缺少必要的子模块变动).\n\n所有推荐使用以下两种方法：\n1. `git push --recurse-submodules=check`. 若有子模块的变动没有推送, 那么该`push`会失败.\n2. `git push --recurse-submodules=on-demand`. 若有子模块的变动没有推送, 那么它会先推送子模块的变动, 然后再推送主项目.\n\n### 子模块的更新\n\n其他人如果对子模块进行了修改, 在`git pull`之后, 再调用以下`git submodule update`更新子模块.\n\n调用`git submodule update`也更新子模块的相关内容, 但是会将子模块留在一个称作 `detached HEAD`的状态. 这意味着没有本地工作分支（例如 “master”）跟踪改动。 所以你做的任何改动都不会被跟踪。即使你使用了commit提交了一些变动, 在你下一次使用`git submodule update`时, 这些变动会全部丢失.\n\n所以需要进入每一个你希望对其进行修改的子模块,`git checkout branchName`检出一个分支. 从远程仓库中更新本地文件时, 使用`git submodule update --remote --merge`, 也可以使用`--rebase`.\n\n如果忘记了`--rebase`或者`--merge`, git会将子模块更新为远程仓库上的状态, 而且该项目将再一次进入 `detached HEAD` 的状态. 解决方法：\n\n1. 检出包含之前本地更改的分支\n2. 然后手动的merge或者rebase任何一个远程分支即可.\n\n即使没有提交子模块的更改也某有问题, 此时git只会抓取更改, 而不会覆盖本地内容.\n\n### 克隆一个带子模块的项目\n\n克隆一个包含子模块的项目.`git clone`下来之后, 该子模块并不会被clone下来.需要调用以下两个命令：\n1. `git submodule init`来下载本地所需的子模块配置文件文件\n2. `git submodule update `来下载主项目中列出的合适的子模块提交\n\n也可以使用`git clone --recursivegit clone --recursive https://github.com/...`自动地初始化并更新仓库中的每一个子模块.\n","slug":"效率/2016-10-14-git","published":1,"updated":"2016-10-25T14:03:35.734Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgfa0014u8jrr183itc1","content":"<h2 id=\"add-commit-push\"><a href=\"#add-commit-push\" class=\"headerlink\" title=\"add commit push\"></a>add commit push</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git add *</div><div class=\"line\">git commit -m &quot;&quot;</div><div class=\"line\">git push -u origin branch</div></pre></td></tr></table></figure>\n<p>在删除某一些文件时, 应使用<code>git add .</code>. 否则, 会出现<code>Changes not staged for commit: ...</code></p>\n<h2 id=\"添加子模块\"><a href=\"#添加子模块\" class=\"headerlink\" title=\"添加子模块\"></a>添加子模块</h2><p>子模块的操作必须非常小心, 因为其中有很多坑.</p>\n<h3 id=\"第一次添加子模块\"><a href=\"#第一次添加子模块\" class=\"headerlink\" title=\"第一次添加子模块\"></a>第一次添加子模块</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git submodule add git://github.com/chneukirchen/rack.git rack</div></pre></td></tr></table></figure>\n<h3 id=\"删除某个子模块\"><a href=\"#删除某个子模块\" class=\"headerlink\" title=\"删除某个子模块\"></a>删除某个子模块</h3><p><code>git rm --cached pathOfSubmodule</code></p>\n<p>然后删除_config.yml以及.git/config文件中相关记录</p>\n<h3 id=\"更改子模块后提交对子模块的修改\"><a href=\"#更改子模块后提交对子模块的修改\" class=\"headerlink\" title=\"更改子模块后提交对子模块的修改\"></a>更改子模块后提交对子模块的修改</h3><p>进入子模块所在目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git add *</div><div class=\"line\">git commit -m &quot;&quot;</div><div class=\"line\">git push</div></pre></td></tr></table></figure>\n<h3 id=\"主项目提交\"><a href=\"#主项目提交\" class=\"headerlink\" title=\"主项目提交\"></a>主项目提交</h3><p>我们可以直接像正常git文件一样的流程进行提交, 但是如果我们忘记提交子模块的变动, 而新的项目和子模块的变动又相关. 那么其他人从远程仓库中clone的文件可能并不能正确运行(缺少必要的子模块变动).</p>\n<p>所有推荐使用以下两种方法：</p>\n<ol>\n<li><code>git push --recurse-submodules=check</code>. 若有子模块的变动没有推送, 那么该<code>push</code>会失败.</li>\n<li><code>git push --recurse-submodules=on-demand</code>. 若有子模块的变动没有推送, 那么它会先推送子模块的变动, 然后再推送主项目.</li>\n</ol>\n<h3 id=\"子模块的更新\"><a href=\"#子模块的更新\" class=\"headerlink\" title=\"子模块的更新\"></a>子模块的更新</h3><p>其他人如果对子模块进行了修改, 在<code>git pull</code>之后, 再调用以下<code>git submodule update</code>更新子模块.</p>\n<p>调用<code>git submodule update</code>也更新子模块的相关内容, 但是会将子模块留在一个称作 <code>detached HEAD</code>的状态. 这意味着没有本地工作分支（例如 “master”）跟踪改动。 所以你做的任何改动都不会被跟踪。即使你使用了commit提交了一些变动, 在你下一次使用<code>git submodule update</code>时, 这些变动会全部丢失.</p>\n<p>所以需要进入每一个你希望对其进行修改的子模块,<code>git checkout branchName</code>检出一个分支. 从远程仓库中更新本地文件时, 使用<code>git submodule update --remote --merge</code>, 也可以使用<code>--rebase</code>.</p>\n<p>如果忘记了<code>--rebase</code>或者<code>--merge</code>, git会将子模块更新为远程仓库上的状态, 而且该项目将再一次进入 <code>detached HEAD</code> 的状态. 解决方法：</p>\n<ol>\n<li>检出包含之前本地更改的分支</li>\n<li>然后手动的merge或者rebase任何一个远程分支即可.</li>\n</ol>\n<p>即使没有提交子模块的更改也某有问题, 此时git只会抓取更改, 而不会覆盖本地内容.</p>\n<h3 id=\"克隆一个带子模块的项目\"><a href=\"#克隆一个带子模块的项目\" class=\"headerlink\" title=\"克隆一个带子模块的项目\"></a>克隆一个带子模块的项目</h3><p>克隆一个包含子模块的项目.<code>git clone</code>下来之后, 该子模块并不会被clone下来.需要调用以下两个命令：</p>\n<ol>\n<li><code>git submodule init</code>来下载本地所需的子模块配置文件文件</li>\n<li><code>git submodule update</code>来下载主项目中列出的合适的子模块提交</li>\n</ol>\n<p>也可以使用<code>git clone --recursivegit clone --recursive https://github.com/...</code>自动地初始化并更新仓库中的每一个子模块.</p>\n","excerpt":"","more":"<h2 id=\"add-commit-push\"><a href=\"#add-commit-push\" class=\"headerlink\" title=\"add commit push\"></a>add commit push</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git add *</div><div class=\"line\">git commit -m &quot;&quot;</div><div class=\"line\">git push -u origin branch</div></pre></td></tr></table></figure>\n<p>在删除某一些文件时, 应使用<code>git add .</code>. 否则, 会出现<code>Changes not staged for commit: ...</code></p>\n<h2 id=\"添加子模块\"><a href=\"#添加子模块\" class=\"headerlink\" title=\"添加子模块\"></a>添加子模块</h2><p>子模块的操作必须非常小心, 因为其中有很多坑.</p>\n<h3 id=\"第一次添加子模块\"><a href=\"#第一次添加子模块\" class=\"headerlink\" title=\"第一次添加子模块\"></a>第一次添加子模块</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git submodule add git://github.com/chneukirchen/rack.git rack</div></pre></td></tr></table></figure>\n<h3 id=\"删除某个子模块\"><a href=\"#删除某个子模块\" class=\"headerlink\" title=\"删除某个子模块\"></a>删除某个子模块</h3><p><code>git rm --cached pathOfSubmodule</code></p>\n<p>然后删除_config.yml以及.git/config文件中相关记录</p>\n<h3 id=\"更改子模块后提交对子模块的修改\"><a href=\"#更改子模块后提交对子模块的修改\" class=\"headerlink\" title=\"更改子模块后提交对子模块的修改\"></a>更改子模块后提交对子模块的修改</h3><p>进入子模块所在目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git add *</div><div class=\"line\">git commit -m &quot;&quot;</div><div class=\"line\">git push</div></pre></td></tr></table></figure>\n<h3 id=\"主项目提交\"><a href=\"#主项目提交\" class=\"headerlink\" title=\"主项目提交\"></a>主项目提交</h3><p>我们可以直接像正常git文件一样的流程进行提交, 但是如果我们忘记提交子模块的变动, 而新的项目和子模块的变动又相关. 那么其他人从远程仓库中clone的文件可能并不能正确运行(缺少必要的子模块变动).</p>\n<p>所有推荐使用以下两种方法：</p>\n<ol>\n<li><code>git push --recurse-submodules=check</code>. 若有子模块的变动没有推送, 那么该<code>push</code>会失败.</li>\n<li><code>git push --recurse-submodules=on-demand</code>. 若有子模块的变动没有推送, 那么它会先推送子模块的变动, 然后再推送主项目.</li>\n</ol>\n<h3 id=\"子模块的更新\"><a href=\"#子模块的更新\" class=\"headerlink\" title=\"子模块的更新\"></a>子模块的更新</h3><p>其他人如果对子模块进行了修改, 在<code>git pull</code>之后, 再调用以下<code>git submodule update</code>更新子模块.</p>\n<p>调用<code>git submodule update</code>也更新子模块的相关内容, 但是会将子模块留在一个称作 <code>detached HEAD</code>的状态. 这意味着没有本地工作分支（例如 “master”）跟踪改动。 所以你做的任何改动都不会被跟踪。即使你使用了commit提交了一些变动, 在你下一次使用<code>git submodule update</code>时, 这些变动会全部丢失.</p>\n<p>所以需要进入每一个你希望对其进行修改的子模块,<code>git checkout branchName</code>检出一个分支. 从远程仓库中更新本地文件时, 使用<code>git submodule update --remote --merge</code>, 也可以使用<code>--rebase</code>.</p>\n<p>如果忘记了<code>--rebase</code>或者<code>--merge</code>, git会将子模块更新为远程仓库上的状态, 而且该项目将再一次进入 <code>detached HEAD</code> 的状态. 解决方法：</p>\n<ol>\n<li>检出包含之前本地更改的分支</li>\n<li>然后手动的merge或者rebase任何一个远程分支即可.</li>\n</ol>\n<p>即使没有提交子模块的更改也某有问题, 此时git只会抓取更改, 而不会覆盖本地内容.</p>\n<h3 id=\"克隆一个带子模块的项目\"><a href=\"#克隆一个带子模块的项目\" class=\"headerlink\" title=\"克隆一个带子模块的项目\"></a>克隆一个带子模块的项目</h3><p>克隆一个包含子模块的项目.<code>git clone</code>下来之后, 该子模块并不会被clone下来.需要调用以下两个命令：</p>\n<ol>\n<li><code>git submodule init</code>来下载本地所需的子模块配置文件文件</li>\n<li><code>git submodule update</code>来下载主项目中列出的合适的子模块提交</li>\n</ol>\n<p>也可以使用<code>git clone --recursivegit clone --recursive https://github.com/...</code>自动地初始化并更新仓库中的每一个子模块.</p>\n"},{"author":"ivyxjc","date":"2016-11-17T16:00:00.000Z","title":"Builder","keywords":null,"description":null,"toc":true,"_content":"\n\n回调是一种特殊的调用, 调用有三种方式：同步调用, 回调\n\n回调就是在类A中持有一个接口的对象, 但是并不在A类中实现该接口的方法, 而是交给B类去实现, 但是B本身不会调用该方法, 而是供A类去使用.\n<!--nomore-->\n## 以Button为例\n\n```java\nclass Activity implements IListener{\n\n    private Button mButton;\n\n    public void onCreate(){\n        mButton=new Button();\n        mButton.setOnClickListener(this);\n        mButton.doClick();\n    }\n\n    @Override\n    public void onClick() {\n        StdOut.println(\"onClick\");\n    }\n}\n\ninterface IListener{\n    public void onClick();\n}\n\nclass Button{\n\n    IListener mListener;\n\n    public void setOnClickListener(IListener listener){\n        mListener=listener;\n    }\n\n    public void doClick(){\n        mListener.onClick();\n    }\n\n}\n\n```\n\n场景类：\n\n```java\npublic class Client_Button {\n    public static void main(String[] args){\n//        Button button=new Button();\n//        button.setOnClickListener(new IListener() {\n//            @Override\n//            public void onClick() {\n//                StdOut.println(\"onClick\");\n//            }\n//        });\n//\n//        button.doClick();\n\n        Activity activity=new Activity();\n        activity.onCreate();\n    }\n}\n\n---\nonClick\n```\n\n## Java\n\n\n```java\ninterface Callback{\n    public void solve(String str);\n}\n\nclass B implements Callback{\n    private A a;\n    public B(A a){\n        this.b=b;\n    }\n\n    public void askQuestion(final String question){\n\n//        //加一个线程就是异步回调, 把线程去掉直接doSomething就是同步调用\n//        new Thread(new Runnable() {\n//            @Override\n//            public void run() {\n                a.doSomething(A.this,question);\n//            }\n//        }).start();\n    }\n\n    @Override\n    public void solve(String str) {\n        StdOut.println(\"the answer is \"+str);\n    }\n}\n\n\n\nclass A{\n\n    void doSomething(Callback callback,String question){\n        StdOut.println(\"A gets question: \"+question);\n        StdOut.println(\"A do something\");\n        callback.solve(\"solved\");\n    }\n}\n```\n\n```java\n\npublic class Client_Java {\n    public static void main(String[] args){\n        A a=new A();\n        B b =new B(a);\n        b.askQuestion(\"a's question\");\n    }\n}\n```\n","source":"_posts/design_pattern/2016-11-18-callback.md","raw":"---\nauthor: ivyxjc\ndate: 2016-11-18\ntitle: Builder\ncategory: OO\ntags: [callback]\nkeywords:\ndescription:\ntoc: true\n---\n\n\n回调是一种特殊的调用, 调用有三种方式：同步调用, 回调\n\n回调就是在类A中持有一个接口的对象, 但是并不在A类中实现该接口的方法, 而是交给B类去实现, 但是B本身不会调用该方法, 而是供A类去使用.\n<!--nomore-->\n## 以Button为例\n\n```java\nclass Activity implements IListener{\n\n    private Button mButton;\n\n    public void onCreate(){\n        mButton=new Button();\n        mButton.setOnClickListener(this);\n        mButton.doClick();\n    }\n\n    @Override\n    public void onClick() {\n        StdOut.println(\"onClick\");\n    }\n}\n\ninterface IListener{\n    public void onClick();\n}\n\nclass Button{\n\n    IListener mListener;\n\n    public void setOnClickListener(IListener listener){\n        mListener=listener;\n    }\n\n    public void doClick(){\n        mListener.onClick();\n    }\n\n}\n\n```\n\n场景类：\n\n```java\npublic class Client_Button {\n    public static void main(String[] args){\n//        Button button=new Button();\n//        button.setOnClickListener(new IListener() {\n//            @Override\n//            public void onClick() {\n//                StdOut.println(\"onClick\");\n//            }\n//        });\n//\n//        button.doClick();\n\n        Activity activity=new Activity();\n        activity.onCreate();\n    }\n}\n\n---\nonClick\n```\n\n## Java\n\n\n```java\ninterface Callback{\n    public void solve(String str);\n}\n\nclass B implements Callback{\n    private A a;\n    public B(A a){\n        this.b=b;\n    }\n\n    public void askQuestion(final String question){\n\n//        //加一个线程就是异步回调, 把线程去掉直接doSomething就是同步调用\n//        new Thread(new Runnable() {\n//            @Override\n//            public void run() {\n                a.doSomething(A.this,question);\n//            }\n//        }).start();\n    }\n\n    @Override\n    public void solve(String str) {\n        StdOut.println(\"the answer is \"+str);\n    }\n}\n\n\n\nclass A{\n\n    void doSomething(Callback callback,String question){\n        StdOut.println(\"A gets question: \"+question);\n        StdOut.println(\"A do something\");\n        callback.solve(\"solved\");\n    }\n}\n```\n\n```java\n\npublic class Client_Java {\n    public static void main(String[] args){\n        A a=new A();\n        B b =new B(a);\n        b.askQuestion(\"a's question\");\n    }\n}\n```\n","slug":"design_pattern/2016-11-18-callback","published":1,"updated":"2016-11-18T14:23:53.852Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgfc0017u8jrcfl6yfs5","content":"<p>回调是一种特殊的调用, 调用有三种方式：同步调用, 回调</p>\n<p>回调就是在类A中持有一个接口的对象, 但是并不在A类中实现该接口的方法, 而是交给B类去实现, 但是B本身不会调用该方法, 而是供A类去使用.<br><!--nomore--></p>\n<h2 id=\"以Button为例\"><a href=\"#以Button为例\" class=\"headerlink\" title=\"以Button为例\"></a>以Button为例</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Activity</span> <span class=\"keyword\">implements</span> <span class=\"title\">IListener</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> Button mButton;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        mButton=<span class=\"keyword\">new</span> Button();</div><div class=\"line\">        mButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">        mButton.doClick();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"onClick\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IListener</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    IListener mListener;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOnClickListener</span><span class=\"params\">(IListener listener)</span></span>&#123;</div><div class=\"line\">        mListener=listener;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doClick</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        mListener.onClick();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>场景类：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Client_Button</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\"><span class=\"comment\">//        Button button=new Button();</span></div><div class=\"line\"><span class=\"comment\">//        button.setOnClickListener(new IListener() &#123;</span></div><div class=\"line\"><span class=\"comment\">//            @Override</span></div><div class=\"line\"><span class=\"comment\">//            public void onClick() &#123;</span></div><div class=\"line\"><span class=\"comment\">//                StdOut.println(\"onClick\");</span></div><div class=\"line\"><span class=\"comment\">//            &#125;</span></div><div class=\"line\"><span class=\"comment\">//        &#125;);</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">//        button.doClick();</span></div><div class=\"line\"></div><div class=\"line\">        Activity activity=<span class=\"keyword\">new</span> Activity();</div><div class=\"line\">        activity.onCreate();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">---</div><div class=\"line\">onClick</div></pre></td></tr></table></figure>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Callback</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve</span><span class=\"params\">(String str)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">implements</span> <span class=\"title\">Callback</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> A a;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">B</span><span class=\"params\">(A a)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.b=b;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">askQuestion</span><span class=\"params\">(<span class=\"keyword\">final</span> String question)</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//        //加一个线程就是异步回调, 把线程去掉直接doSomething就是同步调用</span></div><div class=\"line\"><span class=\"comment\">//        new Thread(new Runnable() &#123;</span></div><div class=\"line\"><span class=\"comment\">//            @Override</span></div><div class=\"line\"><span class=\"comment\">//            public void run() &#123;</span></div><div class=\"line\">                a.doSomething(A.<span class=\"keyword\">this</span>,question);</div><div class=\"line\"><span class=\"comment\">//            &#125;</span></div><div class=\"line\"><span class=\"comment\">//        &#125;).start();</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve</span><span class=\"params\">(String str)</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"the answer is \"</span>+str);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">(Callback callback,String question)</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"A gets question: \"</span>+question);</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"A do something\"</span>);</div><div class=\"line\">        callback.solve(<span class=\"string\">\"solved\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Client_Java</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        A a=<span class=\"keyword\">new</span> A();</div><div class=\"line\">        B b =<span class=\"keyword\">new</span> B(a);</div><div class=\"line\">        b.askQuestion(<span class=\"string\">\"a's question\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>回调是一种特殊的调用, 调用有三种方式：同步调用, 回调</p>\n<p>回调就是在类A中持有一个接口的对象, 但是并不在A类中实现该接口的方法, 而是交给B类去实现, 但是B本身不会调用该方法, 而是供A类去使用.<br><!--nomore--></p>\n<h2 id=\"以Button为例\"><a href=\"#以Button为例\" class=\"headerlink\" title=\"以Button为例\"></a>以Button为例</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Activity</span> <span class=\"keyword\">implements</span> <span class=\"title\">IListener</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> Button mButton;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        mButton=<span class=\"keyword\">new</span> Button();</div><div class=\"line\">        mButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">        mButton.doClick();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"onClick\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IListener</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    IListener mListener;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOnClickListener</span><span class=\"params\">(IListener listener)</span></span>&#123;</div><div class=\"line\">        mListener=listener;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doClick</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        mListener.onClick();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>场景类：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Client_Button</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\"><span class=\"comment\">//        Button button=new Button();</span></div><div class=\"line\"><span class=\"comment\">//        button.setOnClickListener(new IListener() &#123;</span></div><div class=\"line\"><span class=\"comment\">//            @Override</span></div><div class=\"line\"><span class=\"comment\">//            public void onClick() &#123;</span></div><div class=\"line\"><span class=\"comment\">//                StdOut.println(\"onClick\");</span></div><div class=\"line\"><span class=\"comment\">//            &#125;</span></div><div class=\"line\"><span class=\"comment\">//        &#125;);</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">//        button.doClick();</span></div><div class=\"line\"></div><div class=\"line\">        Activity activity=<span class=\"keyword\">new</span> Activity();</div><div class=\"line\">        activity.onCreate();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">---</div><div class=\"line\">onClick</div></pre></td></tr></table></figure>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Callback</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve</span><span class=\"params\">(String str)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">implements</span> <span class=\"title\">Callback</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> A a;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">B</span><span class=\"params\">(A a)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.b=b;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">askQuestion</span><span class=\"params\">(<span class=\"keyword\">final</span> String question)</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//        //加一个线程就是异步回调, 把线程去掉直接doSomething就是同步调用</span></div><div class=\"line\"><span class=\"comment\">//        new Thread(new Runnable() &#123;</span></div><div class=\"line\"><span class=\"comment\">//            @Override</span></div><div class=\"line\"><span class=\"comment\">//            public void run() &#123;</span></div><div class=\"line\">                a.doSomething(A.<span class=\"keyword\">this</span>,question);</div><div class=\"line\"><span class=\"comment\">//            &#125;</span></div><div class=\"line\"><span class=\"comment\">//        &#125;).start();</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve</span><span class=\"params\">(String str)</span> </span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"the answer is \"</span>+str);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">(Callback callback,String question)</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"A gets question: \"</span>+question);</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"A do something\"</span>);</div><div class=\"line\">        callback.solve(<span class=\"string\">\"solved\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Client_Java</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        A a=<span class=\"keyword\">new</span> A();</div><div class=\"line\">        B b =<span class=\"keyword\">new</span> B(a);</div><div class=\"line\">        b.askQuestion(<span class=\"string\">\"a's question\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-10-24T16:00:00.000Z","title":"工厂方法模式","keywords":null,"description":"设计模式中的工厂方法模式","toc":true,"_content":"\n## 工厂方法的通用源码\n\n### 抽象产品类\n\n```java\npublic abstract class Product{\n  public void method(){\n\n  }\n  public abstract void method2();\n}\n```\n### 具体产品类\n```java\npublic class ConcreteProduct1 extends Product{\n  public void method2(){\n\n  }\n}\n\npublic class ConcreteProduct2 extends Product{\n  public void method2(){\n\n  }\n}\n```\n\n### 抽象工厂类\n\n```java\npublic abstract class Creator{\n  public abstract <T extends Product> T createProduct(Class<T> c);\n}\n```\n\n### 具体工厂类\n\n```java\npublic class ConcreteCreator extends Creator{\n  public <T extends Product> T createProduct(Class<T> c){\n    Product product=null;\n    try{\n      product=(Product)Class.forName(c.getName()).newInstance();\n    }catch(Exception e){\n      ....\n    }\n    return (T)product;\n  }\n}\n\n```\n\n##  简单工厂模式\n\n简单工厂模式去掉了抽象工厂类, 并且`createProduct()`方法添加了`static`. 该模式调用过程更为简单, 方便理解. 但是扩展较为困难, 不符合开闭原则.\n\n## 多工厂模式\n\n## 利用工厂模式生成单例\n\n\n```java\nclass Singleton{\n    private Singleton(){}\n    public void doSomething(){}\n}\npublic class FactorySingle {\n    private static Singleton sSingleton;\n\n    static {\n        try{\n            Class cl=Class.forName(Singleton.class.getName());\n            Constructor constructor=cl.getDeclaredConstructor();\n            constructor.setAccessible(true);\n            sSingleton=(Singleton)constructor.newInstance();\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    public static Singleton getSingleton(){\n        return sSingleton;\n    }\n}\n```\n\n## 抽象工厂模式\n\n为创建一组相关或者是相互依赖的对象提供一个接口, 而不需要制定它们的具体类.\n","source":"_posts/design_pattern/2016-10-25-factory-pattern.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-25\ntitle: 工厂方法模式\ncategory: OO\ntags: [设计模式]\nkeywords:\ndescription: 设计模式中的工厂方法模式\ntoc: true\n---\n\n## 工厂方法的通用源码\n\n### 抽象产品类\n\n```java\npublic abstract class Product{\n  public void method(){\n\n  }\n  public abstract void method2();\n}\n```\n### 具体产品类\n```java\npublic class ConcreteProduct1 extends Product{\n  public void method2(){\n\n  }\n}\n\npublic class ConcreteProduct2 extends Product{\n  public void method2(){\n\n  }\n}\n```\n\n### 抽象工厂类\n\n```java\npublic abstract class Creator{\n  public abstract <T extends Product> T createProduct(Class<T> c);\n}\n```\n\n### 具体工厂类\n\n```java\npublic class ConcreteCreator extends Creator{\n  public <T extends Product> T createProduct(Class<T> c){\n    Product product=null;\n    try{\n      product=(Product)Class.forName(c.getName()).newInstance();\n    }catch(Exception e){\n      ....\n    }\n    return (T)product;\n  }\n}\n\n```\n\n##  简单工厂模式\n\n简单工厂模式去掉了抽象工厂类, 并且`createProduct()`方法添加了`static`. 该模式调用过程更为简单, 方便理解. 但是扩展较为困难, 不符合开闭原则.\n\n## 多工厂模式\n\n## 利用工厂模式生成单例\n\n\n```java\nclass Singleton{\n    private Singleton(){}\n    public void doSomething(){}\n}\npublic class FactorySingle {\n    private static Singleton sSingleton;\n\n    static {\n        try{\n            Class cl=Class.forName(Singleton.class.getName());\n            Constructor constructor=cl.getDeclaredConstructor();\n            constructor.setAccessible(true);\n            sSingleton=(Singleton)constructor.newInstance();\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    public static Singleton getSingleton(){\n        return sSingleton;\n    }\n}\n```\n\n## 抽象工厂模式\n\n为创建一组相关或者是相互依赖的对象提供一个接口, 而不需要制定它们的具体类.\n","slug":"design_pattern/2016-10-25-factory-pattern","published":1,"updated":"2016-11-17T11:29:17.277Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgfe001au8jr16bnxqv1","content":"<h2 id=\"工厂方法的通用源码\"><a href=\"#工厂方法的通用源码\" class=\"headerlink\" title=\"工厂方法的通用源码\"></a>工厂方法的通用源码</h2><h3 id=\"抽象产品类\"><a href=\"#抽象产品类\" class=\"headerlink\" title=\"抽象产品类\"></a>抽象产品类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"具体产品类\"><a href=\"#具体产品类\" class=\"headerlink\" title=\"具体产品类\"></a>具体产品类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteProduct1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Product</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteProduct2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Product</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"抽象工厂类\"><a href=\"#抽象工厂类\" class=\"headerlink\" title=\"抽象工厂类\"></a>抽象工厂类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Creator</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> &lt;T extends Product&gt; <span class=\"function\">T <span class=\"title\">createProduct</span><span class=\"params\">(Class&lt;T&gt; c)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"具体工厂类\"><a href=\"#具体工厂类\" class=\"headerlink\" title=\"具体工厂类\"></a>具体工厂类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteCreator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Creator</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">public</span> &lt;T extends Product&gt; <span class=\"function\">T <span class=\"title\">createProduct</span><span class=\"params\">(Class&lt;T&gt; c)</span></span>&#123;</div><div class=\"line\">    Product product=<span class=\"keyword\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">      product=(Product)Class.forName(c.getName()).newInstance();</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">      ....</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> (T)product;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"简单工厂模式\"><a href=\"#简单工厂模式\" class=\"headerlink\" title=\"简单工厂模式\"></a>简单工厂模式</h2><p>简单工厂模式去掉了抽象工厂类, 并且<code>createProduct()</code>方法添加了<code>static</code>. 该模式调用过程更为简单, 方便理解. 但是扩展较为困难, 不符合开闭原则.</p>\n<h2 id=\"多工厂模式\"><a href=\"#多工厂模式\" class=\"headerlink\" title=\"多工厂模式\"></a>多工厂模式</h2><h2 id=\"利用工厂模式生成单例\"><a href=\"#利用工厂模式生成单例\" class=\"headerlink\" title=\"利用工厂模式生成单例\"></a>利用工厂模式生成单例</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactorySingle</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton sSingleton;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">static</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">            Class cl=Class.forName(Singleton.class.getName());</div><div class=\"line\">            Constructor constructor=cl.getDeclaredConstructor();</div><div class=\"line\">            constructor.setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">            sSingleton=(Singleton)constructor.newInstance();</div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getSingleton</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> sSingleton;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"抽象工厂模式\"><a href=\"#抽象工厂模式\" class=\"headerlink\" title=\"抽象工厂模式\"></a>抽象工厂模式</h2><p>为创建一组相关或者是相互依赖的对象提供一个接口, 而不需要制定它们的具体类.</p>\n","excerpt":"","more":"<h2 id=\"工厂方法的通用源码\"><a href=\"#工厂方法的通用源码\" class=\"headerlink\" title=\"工厂方法的通用源码\"></a>工厂方法的通用源码</h2><h3 id=\"抽象产品类\"><a href=\"#抽象产品类\" class=\"headerlink\" title=\"抽象产品类\"></a>抽象产品类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"具体产品类\"><a href=\"#具体产品类\" class=\"headerlink\" title=\"具体产品类\"></a>具体产品类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteProduct1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Product</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteProduct2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Product</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"抽象工厂类\"><a href=\"#抽象工厂类\" class=\"headerlink\" title=\"抽象工厂类\"></a>抽象工厂类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Creator</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> &lt;T extends Product&gt; <span class=\"function\">T <span class=\"title\">createProduct</span><span class=\"params\">(Class&lt;T&gt; c)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"具体工厂类\"><a href=\"#具体工厂类\" class=\"headerlink\" title=\"具体工厂类\"></a>具体工厂类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteCreator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Creator</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">public</span> &lt;T extends Product&gt; <span class=\"function\">T <span class=\"title\">createProduct</span><span class=\"params\">(Class&lt;T&gt; c)</span></span>&#123;</div><div class=\"line\">    Product product=<span class=\"keyword\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">      product=(Product)Class.forName(c.getName()).newInstance();</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">      ....</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> (T)product;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"简单工厂模式\"><a href=\"#简单工厂模式\" class=\"headerlink\" title=\"简单工厂模式\"></a>简单工厂模式</h2><p>简单工厂模式去掉了抽象工厂类, 并且<code>createProduct()</code>方法添加了<code>static</code>. 该模式调用过程更为简单, 方便理解. 但是扩展较为困难, 不符合开闭原则.</p>\n<h2 id=\"多工厂模式\"><a href=\"#多工厂模式\" class=\"headerlink\" title=\"多工厂模式\"></a>多工厂模式</h2><h2 id=\"利用工厂模式生成单例\"><a href=\"#利用工厂模式生成单例\" class=\"headerlink\" title=\"利用工厂模式生成单例\"></a>利用工厂模式生成单例</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactorySingle</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton sSingleton;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">static</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">            Class cl=Class.forName(Singleton.class.getName());</div><div class=\"line\">            Constructor constructor=cl.getDeclaredConstructor();</div><div class=\"line\">            constructor.setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">            sSingleton=(Singleton)constructor.newInstance();</div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getSingleton</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> sSingleton;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"抽象工厂模式\"><a href=\"#抽象工厂模式\" class=\"headerlink\" title=\"抽象工厂模式\"></a>抽象工厂模式</h2><p>为创建一组相关或者是相互依赖的对象提供一个接口, 而不需要制定它们的具体类.</p>\n"},{"author":"ivyxjc","date":"2016-10-24T16:00:00.000Z","title":"单例模式","keywords":null,"description":"设计模式中的单例模式","toc":true,"_content":"\nEnsure a class has only one instance, and provide a global point of access to it.\n\n\n## 简介\n\n### 最基本的实例\n\n```java\npublic class Emperor {\n    private static final Emperor emperor=new Emperor();\n\n    private Emperor(){}\n\n    public static Emperor getInstance(){\n        return emperor;\n    }\n}\n```\n\nJava Language Specification 中规定了一个类只会被初始化一次.所以该方法是**线程安全**的, 但是其在方法调用前就初始化了, 比较浪费资源.\n\n### 优点\n\n1. 只有一个实例, 节约内存空间, 减少了系统的性能开销, 如果某一个对象的产生需要比较多的资源时, 可以在启动时直接产生一个单例对象, 使其永驻内存.\n2. 可以避免对资源的多重占用,\n3. 可以在系统设置全局的访问点, 优化和共享资源访问.\n\n### 缺点\n\n1. 单例模式一般没有接口, 扩展很困难, 除了修改代码基本上没有第二种途径可以实现\n2. 单例模式不利于测试, 如果单例模式没有完成, 无法进行测试\n3. 于单一职责原则相冲突.\n\n### 其它实现方式\n\n#### 懒汉模式\n\n```java\nclass Singleton {\n    private static Singleton instance;\n\n    private Singleton(){}\n\n    public static synchronized Singleton getInstance(){\n        if(instance==null){\n            instance=new Singleton();\n        }\n        return instance;\n    }\n}\n```\n\n该实现只会在需要的时候才会进行初始化且是线程安全的, 但是每次调用`getInstance()`都会进行同步, 会浪费资源\n\n#### Double Check Lock\n\n```java\nclass SingletonDCL{\n    private static SingletonDCL sInstance;\n\n    private SingletonDCL(){}\n\n    public static SingletonDCL getInstance(){\n        if(sInstance==null){\n            synchronized (SingletonDCL.class){\n                if(sInstance==null){\n                    sInstance=new SingletonDCL();\n                }\n            }\n        }\n\n        return sInstance;\n    }\n}\n```\n该实现只会在需要的时候才会进行初始化, 看似线程安全, 但实际并不是.\n\n假设线程A执行到`sInstance=new SingletonDCL()`, 这句代码并不是一个原子操作, 这句代码大致会被分为下面3个步骤来处理:\n1. 给SingletonDCL的实例分配内存\n2. 调用SingletonDCL的构造函数, 初始化成员字段\n3. 将sInstance对象指向分配的内存空间 (此时sInstance就不是null了).\n\n如果这句代码严格按照这个顺序执行,该DCL单例模式便是线程安全的, 但是事实并非如此. 原因是JVM并没有保证上述第2和第3步的执行顺序.\n也就是说执行步骤可能是1-3-2, 这种执行步骤就会出问题:\n\n\n当先执行第3步时, 另一个线程B开始执行`getInstance()`, 由于此时`sInstance`已经不是`null`了, 所以线程B会返回一个还未初始化的`sInstance`, 出现了错误.\n\nJVM1.5之后改善了这个问题, 在`sInstance`前加上`volatile`关键字可以确保线程安全.\n即`private static volatile SingletonDCL sInstance;`\n\n#### 静态内部类单例模式\n\nDCL单例模式并不推荐使用,《Java并发编程实践》推荐使用下面这个方法:\n\n```java\nclass SingletonStatic{\n    private SingletonStatic(){}\n\n    public static SingletonStatic getInstance(){\n        return SingletonStaticHolder.sInstance;\n    }\n\n    private static class SingletonStaticHolder{\n        private static final SingletonStatic sInstance=new SingletonStatic();\n    }\n}\n```\n\n第一次加载时, 并不会初始化`sInstance`, 只在第一调用`getInstance()`时初始化, 且该方法是安全的.\n\n#### 枚举单例\n\n```java\nenum SingletonEnum{\n    INSTACNE;\n    public void doSomething(){\n        StdOut.println(\"doSomething...\");\n    }\n}\n```\n\n枚举单例模式有以下3个优点:\n1. 线程安全, 任何时候都只有一个实例\n2. 反序列化时, 都只会有一个实例\n3. 可以防止反射攻击\n\n\n### 选择哪一种实现方式\n\n无论采用哪一种实现方式, 都要确保线程安全, 防止反序列化导致重新生成实例对象等一些问题. 具体选择哪一种实现方式取决于项目本身.\n\n### 关于序列化\n\n除了枚举单例, 为了避免单例对象在被反序列化时重新生成对象, 必须加入以下方法\n\n```java\nprivate Object readResolve() throws ObjectStreamException{\n    return sInstance;\n}\n```\n\n### 单例模式扩展\n\n如果生成对象的数量不受限制, 可以直接使用`new`. 如果只要有一个对象, 使用单例模式即可, 若需要且只需要两个或者三个对象, 则可以按照下面的方法:\n","source":"_posts/design_pattern/2016-10-25-singleton.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-25\ntitle: 单例模式\ncategory: OO\ntags: [设计模式]\nkeywords:\ndescription: 设计模式中的单例模式\ntoc: true\n---\n\nEnsure a class has only one instance, and provide a global point of access to it.\n\n\n## 简介\n\n### 最基本的实例\n\n```java\npublic class Emperor {\n    private static final Emperor emperor=new Emperor();\n\n    private Emperor(){}\n\n    public static Emperor getInstance(){\n        return emperor;\n    }\n}\n```\n\nJava Language Specification 中规定了一个类只会被初始化一次.所以该方法是**线程安全**的, 但是其在方法调用前就初始化了, 比较浪费资源.\n\n### 优点\n\n1. 只有一个实例, 节约内存空间, 减少了系统的性能开销, 如果某一个对象的产生需要比较多的资源时, 可以在启动时直接产生一个单例对象, 使其永驻内存.\n2. 可以避免对资源的多重占用,\n3. 可以在系统设置全局的访问点, 优化和共享资源访问.\n\n### 缺点\n\n1. 单例模式一般没有接口, 扩展很困难, 除了修改代码基本上没有第二种途径可以实现\n2. 单例模式不利于测试, 如果单例模式没有完成, 无法进行测试\n3. 于单一职责原则相冲突.\n\n### 其它实现方式\n\n#### 懒汉模式\n\n```java\nclass Singleton {\n    private static Singleton instance;\n\n    private Singleton(){}\n\n    public static synchronized Singleton getInstance(){\n        if(instance==null){\n            instance=new Singleton();\n        }\n        return instance;\n    }\n}\n```\n\n该实现只会在需要的时候才会进行初始化且是线程安全的, 但是每次调用`getInstance()`都会进行同步, 会浪费资源\n\n#### Double Check Lock\n\n```java\nclass SingletonDCL{\n    private static SingletonDCL sInstance;\n\n    private SingletonDCL(){}\n\n    public static SingletonDCL getInstance(){\n        if(sInstance==null){\n            synchronized (SingletonDCL.class){\n                if(sInstance==null){\n                    sInstance=new SingletonDCL();\n                }\n            }\n        }\n\n        return sInstance;\n    }\n}\n```\n该实现只会在需要的时候才会进行初始化, 看似线程安全, 但实际并不是.\n\n假设线程A执行到`sInstance=new SingletonDCL()`, 这句代码并不是一个原子操作, 这句代码大致会被分为下面3个步骤来处理:\n1. 给SingletonDCL的实例分配内存\n2. 调用SingletonDCL的构造函数, 初始化成员字段\n3. 将sInstance对象指向分配的内存空间 (此时sInstance就不是null了).\n\n如果这句代码严格按照这个顺序执行,该DCL单例模式便是线程安全的, 但是事实并非如此. 原因是JVM并没有保证上述第2和第3步的执行顺序.\n也就是说执行步骤可能是1-3-2, 这种执行步骤就会出问题:\n\n\n当先执行第3步时, 另一个线程B开始执行`getInstance()`, 由于此时`sInstance`已经不是`null`了, 所以线程B会返回一个还未初始化的`sInstance`, 出现了错误.\n\nJVM1.5之后改善了这个问题, 在`sInstance`前加上`volatile`关键字可以确保线程安全.\n即`private static volatile SingletonDCL sInstance;`\n\n#### 静态内部类单例模式\n\nDCL单例模式并不推荐使用,《Java并发编程实践》推荐使用下面这个方法:\n\n```java\nclass SingletonStatic{\n    private SingletonStatic(){}\n\n    public static SingletonStatic getInstance(){\n        return SingletonStaticHolder.sInstance;\n    }\n\n    private static class SingletonStaticHolder{\n        private static final SingletonStatic sInstance=new SingletonStatic();\n    }\n}\n```\n\n第一次加载时, 并不会初始化`sInstance`, 只在第一调用`getInstance()`时初始化, 且该方法是安全的.\n\n#### 枚举单例\n\n```java\nenum SingletonEnum{\n    INSTACNE;\n    public void doSomething(){\n        StdOut.println(\"doSomething...\");\n    }\n}\n```\n\n枚举单例模式有以下3个优点:\n1. 线程安全, 任何时候都只有一个实例\n2. 反序列化时, 都只会有一个实例\n3. 可以防止反射攻击\n\n\n### 选择哪一种实现方式\n\n无论采用哪一种实现方式, 都要确保线程安全, 防止反序列化导致重新生成实例对象等一些问题. 具体选择哪一种实现方式取决于项目本身.\n\n### 关于序列化\n\n除了枚举单例, 为了避免单例对象在被反序列化时重新生成对象, 必须加入以下方法\n\n```java\nprivate Object readResolve() throws ObjectStreamException{\n    return sInstance;\n}\n```\n\n### 单例模式扩展\n\n如果生成对象的数量不受限制, 可以直接使用`new`. 如果只要有一个对象, 使用单例模式即可, 若需要且只需要两个或者三个对象, 则可以按照下面的方法:\n","slug":"design_pattern/2016-10-25-singleton","published":1,"updated":"2016-10-26T12:20:09.282Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdghp002pu8jr4h71hg93","content":"<p>Ensure a class has only one instance, and provide a global point of access to it.</p>\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><h3 id=\"最基本的实例\"><a href=\"#最基本的实例\" class=\"headerlink\" title=\"最基本的实例\"></a>最基本的实例</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Emperor</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Emperor emperor=<span class=\"keyword\">new</span> Emperor();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Emperor</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Emperor <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> emperor;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Java Language Specification 中规定了一个类只会被初始化一次.所以该方法是<strong>线程安全</strong>的, 但是其在方法调用前就初始化了, 比较浪费资源.</p>\n<h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ol>\n<li>只有一个实例, 节约内存空间, 减少了系统的性能开销, 如果某一个对象的产生需要比较多的资源时, 可以在启动时直接产生一个单例对象, 使其永驻内存.</li>\n<li>可以避免对资源的多重占用,</li>\n<li>可以在系统设置全局的访问点, 优化和共享资源访问.</li>\n</ol>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><ol>\n<li>单例模式一般没有接口, 扩展很困难, 除了修改代码基本上没有第二种途径可以实现</li>\n<li>单例模式不利于测试, 如果单例模式没有完成, 无法进行测试</li>\n<li>于单一职责原则相冲突.</li>\n</ol>\n<h3 id=\"其它实现方式\"><a href=\"#其它实现方式\" class=\"headerlink\" title=\"其它实现方式\"></a>其它实现方式</h3><h4 id=\"懒汉模式\"><a href=\"#懒汉模式\" class=\"headerlink\" title=\"懒汉模式\"></a>懒汉模式</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(instance==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            instance=<span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>该实现只会在需要的时候才会进行初始化且是线程安全的, 但是每次调用<code>getInstance()</code>都会进行同步, 会浪费资源</p>\n<h4 id=\"Double-Check-Lock\"><a href=\"#Double-Check-Lock\" class=\"headerlink\" title=\"Double Check Lock\"></a>Double Check Lock</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonDCL</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> SingletonDCL sInstance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">SingletonDCL</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SingletonDCL <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(sInstance==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">synchronized</span> (SingletonDCL.class)&#123;</div><div class=\"line\">                <span class=\"keyword\">if</span>(sInstance==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                    sInstance=<span class=\"keyword\">new</span> SingletonDCL();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> sInstance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>该实现只会在需要的时候才会进行初始化, 看似线程安全, 但实际并不是.</p>\n<p>假设线程A执行到<code>sInstance=new SingletonDCL()</code>, 这句代码并不是一个原子操作, 这句代码大致会被分为下面3个步骤来处理:</p>\n<ol>\n<li>给SingletonDCL的实例分配内存</li>\n<li>调用SingletonDCL的构造函数, 初始化成员字段</li>\n<li>将sInstance对象指向分配的内存空间 (此时sInstance就不是null了).</li>\n</ol>\n<p>如果这句代码严格按照这个顺序执行,该DCL单例模式便是线程安全的, 但是事实并非如此. 原因是JVM并没有保证上述第2和第3步的执行顺序.<br>也就是说执行步骤可能是1-3-2, 这种执行步骤就会出问题:</p>\n<p>当先执行第3步时, 另一个线程B开始执行<code>getInstance()</code>, 由于此时<code>sInstance</code>已经不是<code>null</code>了, 所以线程B会返回一个还未初始化的<code>sInstance</code>, 出现了错误.</p>\n<p>JVM1.5之后改善了这个问题, 在<code>sInstance</code>前加上<code>volatile</code>关键字可以确保线程安全.<br>即<code>private static volatile SingletonDCL sInstance;</code></p>\n<h4 id=\"静态内部类单例模式\"><a href=\"#静态内部类单例模式\" class=\"headerlink\" title=\"静态内部类单例模式\"></a>静态内部类单例模式</h4><p>DCL单例模式并不推荐使用,《Java并发编程实践》推荐使用下面这个方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonStatic</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">SingletonStatic</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SingletonStatic <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> SingletonStaticHolder.sInstance;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonStaticHolder</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> SingletonStatic sInstance=<span class=\"keyword\">new</span> SingletonStatic();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>第一次加载时, 并不会初始化<code>sInstance</code>, 只在第一调用<code>getInstance()</code>时初始化, 且该方法是安全的.</p>\n<h4 id=\"枚举单例\"><a href=\"#枚举单例\" class=\"headerlink\" title=\"枚举单例\"></a>枚举单例</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">enum</span> SingletonEnum&#123;</div><div class=\"line\">    INSTACNE;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"doSomething...\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>枚举单例模式有以下3个优点:</p>\n<ol>\n<li>线程安全, 任何时候都只有一个实例</li>\n<li>反序列化时, 都只会有一个实例</li>\n<li>可以防止反射攻击</li>\n</ol>\n<h3 id=\"选择哪一种实现方式\"><a href=\"#选择哪一种实现方式\" class=\"headerlink\" title=\"选择哪一种实现方式\"></a>选择哪一种实现方式</h3><p>无论采用哪一种实现方式, 都要确保线程安全, 防止反序列化导致重新生成实例对象等一些问题. 具体选择哪一种实现方式取决于项目本身.</p>\n<h3 id=\"关于序列化\"><a href=\"#关于序列化\" class=\"headerlink\" title=\"关于序列化\"></a>关于序列化</h3><p>除了枚举单例, 为了避免单例对象在被反序列化时重新生成对象, 必须加入以下方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> Object <span class=\"title\">readResolve</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> ObjectStreamException</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> sInstance;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"单例模式扩展\"><a href=\"#单例模式扩展\" class=\"headerlink\" title=\"单例模式扩展\"></a>单例模式扩展</h3><p>如果生成对象的数量不受限制, 可以直接使用<code>new</code>. 如果只要有一个对象, 使用单例模式即可, 若需要且只需要两个或者三个对象, 则可以按照下面的方法:</p>\n","excerpt":"","more":"<p>Ensure a class has only one instance, and provide a global point of access to it.</p>\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><h3 id=\"最基本的实例\"><a href=\"#最基本的实例\" class=\"headerlink\" title=\"最基本的实例\"></a>最基本的实例</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Emperor</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Emperor emperor=<span class=\"keyword\">new</span> Emperor();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Emperor</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Emperor <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> emperor;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Java Language Specification 中规定了一个类只会被初始化一次.所以该方法是<strong>线程安全</strong>的, 但是其在方法调用前就初始化了, 比较浪费资源.</p>\n<h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ol>\n<li>只有一个实例, 节约内存空间, 减少了系统的性能开销, 如果某一个对象的产生需要比较多的资源时, 可以在启动时直接产生一个单例对象, 使其永驻内存.</li>\n<li>可以避免对资源的多重占用,</li>\n<li>可以在系统设置全局的访问点, 优化和共享资源访问.</li>\n</ol>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><ol>\n<li>单例模式一般没有接口, 扩展很困难, 除了修改代码基本上没有第二种途径可以实现</li>\n<li>单例模式不利于测试, 如果单例模式没有完成, 无法进行测试</li>\n<li>于单一职责原则相冲突.</li>\n</ol>\n<h3 id=\"其它实现方式\"><a href=\"#其它实现方式\" class=\"headerlink\" title=\"其它实现方式\"></a>其它实现方式</h3><h4 id=\"懒汉模式\"><a href=\"#懒汉模式\" class=\"headerlink\" title=\"懒汉模式\"></a>懒汉模式</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(instance==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            instance=<span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>该实现只会在需要的时候才会进行初始化且是线程安全的, 但是每次调用<code>getInstance()</code>都会进行同步, 会浪费资源</p>\n<h4 id=\"Double-Check-Lock\"><a href=\"#Double-Check-Lock\" class=\"headerlink\" title=\"Double Check Lock\"></a>Double Check Lock</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonDCL</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> SingletonDCL sInstance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">SingletonDCL</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SingletonDCL <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(sInstance==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">synchronized</span> (SingletonDCL.class)&#123;</div><div class=\"line\">                <span class=\"keyword\">if</span>(sInstance==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                    sInstance=<span class=\"keyword\">new</span> SingletonDCL();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> sInstance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>该实现只会在需要的时候才会进行初始化, 看似线程安全, 但实际并不是.</p>\n<p>假设线程A执行到<code>sInstance=new SingletonDCL()</code>, 这句代码并不是一个原子操作, 这句代码大致会被分为下面3个步骤来处理:</p>\n<ol>\n<li>给SingletonDCL的实例分配内存</li>\n<li>调用SingletonDCL的构造函数, 初始化成员字段</li>\n<li>将sInstance对象指向分配的内存空间 (此时sInstance就不是null了).</li>\n</ol>\n<p>如果这句代码严格按照这个顺序执行,该DCL单例模式便是线程安全的, 但是事实并非如此. 原因是JVM并没有保证上述第2和第3步的执行顺序.<br>也就是说执行步骤可能是1-3-2, 这种执行步骤就会出问题:</p>\n<p>当先执行第3步时, 另一个线程B开始执行<code>getInstance()</code>, 由于此时<code>sInstance</code>已经不是<code>null</code>了, 所以线程B会返回一个还未初始化的<code>sInstance</code>, 出现了错误.</p>\n<p>JVM1.5之后改善了这个问题, 在<code>sInstance</code>前加上<code>volatile</code>关键字可以确保线程安全.<br>即<code>private static volatile SingletonDCL sInstance;</code></p>\n<h4 id=\"静态内部类单例模式\"><a href=\"#静态内部类单例模式\" class=\"headerlink\" title=\"静态内部类单例模式\"></a>静态内部类单例模式</h4><p>DCL单例模式并不推荐使用,《Java并发编程实践》推荐使用下面这个方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonStatic</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">SingletonStatic</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SingletonStatic <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> SingletonStaticHolder.sInstance;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonStaticHolder</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> SingletonStatic sInstance=<span class=\"keyword\">new</span> SingletonStatic();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>第一次加载时, 并不会初始化<code>sInstance</code>, 只在第一调用<code>getInstance()</code>时初始化, 且该方法是安全的.</p>\n<h4 id=\"枚举单例\"><a href=\"#枚举单例\" class=\"headerlink\" title=\"枚举单例\"></a>枚举单例</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">enum</span> SingletonEnum&#123;</div><div class=\"line\">    INSTACNE;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        StdOut.println(<span class=\"string\">\"doSomething...\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>枚举单例模式有以下3个优点:</p>\n<ol>\n<li>线程安全, 任何时候都只有一个实例</li>\n<li>反序列化时, 都只会有一个实例</li>\n<li>可以防止反射攻击</li>\n</ol>\n<h3 id=\"选择哪一种实现方式\"><a href=\"#选择哪一种实现方式\" class=\"headerlink\" title=\"选择哪一种实现方式\"></a>选择哪一种实现方式</h3><p>无论采用哪一种实现方式, 都要确保线程安全, 防止反序列化导致重新生成实例对象等一些问题. 具体选择哪一种实现方式取决于项目本身.</p>\n<h3 id=\"关于序列化\"><a href=\"#关于序列化\" class=\"headerlink\" title=\"关于序列化\"></a>关于序列化</h3><p>除了枚举单例, 为了避免单例对象在被反序列化时重新生成对象, 必须加入以下方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> Object <span class=\"title\">readResolve</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> ObjectStreamException</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> sInstance;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"单例模式扩展\"><a href=\"#单例模式扩展\" class=\"headerlink\" title=\"单例模式扩展\"></a>单例模式扩展</h3><p>如果生成对象的数量不受限制, 可以直接使用<code>new</code>. 如果只要有一个对象, 使用单例模式即可, 若需要且只需要两个或者三个对象, 则可以按照下面的方法:</p>\n"},{"author":"ivyxjc","date":"2016-04-20T16:00:00.000Z","title":"LeetCode SingleNum 136,127,260","keywords":null,"description":"在一个int数组中, 找到出现次数与其它数并不一致的数. <br>(1). 若每个数字都出现2次, 一个数字出现的次数为1次, 对所有数字取异或.<br>(2).若每个数字都出现3次, 一个数字num出现1次. 对int32中的每一位出现1的次数进行统计, 如果该位上出现1的次数不是3的倍数,则说明num在该位上为1. <br> (3).每个数字出现两遍, 两个数字a,b例外. 对所有数求异或. 取结果二进制最右边为1的位置(`diff ^=-diff`). 以该位置为0或1, 将该数组分为两类, 题目转化为第一题.","_content":"\n这三题题意基本一样。\n1.136 题：每个数字出现两遍，一个数字例外。找出这个数字。\n2.137 题：每个数字出现三遍，一个数字例外。找出这个数字。\n3.260 题：每个数字出现两遍，两个数字例外。找出这个数字。\n\n## 使用排序的方法\n以136题为例：\n\n这种方法先将给的数组`int[] num`排序，因为数字相同则会在一起，则只需要比较`num[i]`和`nums[i+1]`若不相同，则返回`num[i]`其中`i=i+2`。\n特殊情况：\n数字出现在最末尾。\n\n```java\npublic int singleNumber(int[] nums) {\n    sort(nums);\n    int res=0;\n    for(int i=0;i<nums.length-1;){\n        if(nums[i]==nums[i+1]){\n            i+=2;\n        }else{\n            res=nums[i];\n            i+=2;\n            return res;\n        }\n    }\n    return nums[nums.length-1];\n}\n```\n\n## 使用位操作的方法\n\n### 136题\n\n因为数字会出现两次，所以对所有数字取**异或**会使得最后的数字即所求的数字。\n\n\n```java\npublic int singleNumber(int[] nums) {\n    int diff=0;\n    for(int i:nums){\n        diff=diff^i;\n    }\n    int res=diff;\n    return res;\n}\n```\n\n### 137题\n\n因为每个数字会重复三遍，所以统计32位中每一位上1出现的次数，若次数不为3的整数倍，则说明所求数字该位为1。\n\n```java\npublic int singleNumber(int[] nums) {\n    int [] count=new int[Integer.BYTES*8];\n    int res=0;\n    for(int i=0;i<count.length;i++){\n        int tmp=1<<i;\n        for(int j=0;j<nums.length;j++){\n            if((nums[j]&tmp)!=0){\n                count[i]++;\n            }\n        }\n        if(count[i]%3!=0){\n            res=res|tmp;\n        }\n    }\n\n    return res;\n}\n\n```\n\n\n### 260题\n\n同样是先对所有数字取异或，因为有两个数字只出现了一次，所以最终的结果`diff`是这两个数字的异或值。\n\n因为这两个数字不相同，所以这两个数字的二进制必定有某一位不相同。假设在`Xth`位上，一个数为0，另一个数为1。\n\n那么把所有数字分为两类，一类是在`Xth`为0的，另一类是在`Xth`为1的。\n\n关键是如何找到`Xth`位。方法时`diff ^=-diff`。\n该式子会找出最右侧的两个数字不同的位置，并将该为置为1，其余位置为0。其实就是找`diff`中为1的最右边的位置。\n\n\n```java\npublic int[] singleNumber(int[] nums) {\n    int diff = 0;\n    for (int num : nums) {\n        diff ^= num;\n    }\n\n    diff &= -diff;\n\n\n    int[] rets = {0, 0};\n\n    for (int num : nums)\n    {\n    //将数字分为两类，一类为某一位为0，另一类为某一位为1\n        if ((num & diff) == 0)\n        {\n            rets[0] ^= num;\n        }\n        else\n        {\n            rets[1] ^= num;\n        }\n    }\n    return rets;\n}\n```\n","source":"_posts/OJ/LeetCode/2016-04-21-medium-SingleNum.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-21\ntitle: LeetCode SingleNum 136,127,260\ncategory: OJ\ntags: [quicksort,sort,bit manipulation]\nkeywords:\ndescription: 在一个int数组中, 找到出现次数与其它数并不一致的数. <br>(1). 若每个数字都出现2次, 一个数字出现的次数为1次, 对所有数字取异或.<br>(2).若每个数字都出现3次, 一个数字num出现1次. 对int32中的每一位出现1的次数进行统计, 如果该位上出现1的次数不是3的倍数,则说明num在该位上为1. <br> (3).每个数字出现两遍, 两个数字a,b例外. 对所有数求异或. 取结果二进制最右边为1的位置(`diff ^=-diff`). 以该位置为0或1, 将该数组分为两类, 题目转化为第一题.\n---\n\n这三题题意基本一样。\n1.136 题：每个数字出现两遍，一个数字例外。找出这个数字。\n2.137 题：每个数字出现三遍，一个数字例外。找出这个数字。\n3.260 题：每个数字出现两遍，两个数字例外。找出这个数字。\n\n## 使用排序的方法\n以136题为例：\n\n这种方法先将给的数组`int[] num`排序，因为数字相同则会在一起，则只需要比较`num[i]`和`nums[i+1]`若不相同，则返回`num[i]`其中`i=i+2`。\n特殊情况：\n数字出现在最末尾。\n\n```java\npublic int singleNumber(int[] nums) {\n    sort(nums);\n    int res=0;\n    for(int i=0;i<nums.length-1;){\n        if(nums[i]==nums[i+1]){\n            i+=2;\n        }else{\n            res=nums[i];\n            i+=2;\n            return res;\n        }\n    }\n    return nums[nums.length-1];\n}\n```\n\n## 使用位操作的方法\n\n### 136题\n\n因为数字会出现两次，所以对所有数字取**异或**会使得最后的数字即所求的数字。\n\n\n```java\npublic int singleNumber(int[] nums) {\n    int diff=0;\n    for(int i:nums){\n        diff=diff^i;\n    }\n    int res=diff;\n    return res;\n}\n```\n\n### 137题\n\n因为每个数字会重复三遍，所以统计32位中每一位上1出现的次数，若次数不为3的整数倍，则说明所求数字该位为1。\n\n```java\npublic int singleNumber(int[] nums) {\n    int [] count=new int[Integer.BYTES*8];\n    int res=0;\n    for(int i=0;i<count.length;i++){\n        int tmp=1<<i;\n        for(int j=0;j<nums.length;j++){\n            if((nums[j]&tmp)!=0){\n                count[i]++;\n            }\n        }\n        if(count[i]%3!=0){\n            res=res|tmp;\n        }\n    }\n\n    return res;\n}\n\n```\n\n\n### 260题\n\n同样是先对所有数字取异或，因为有两个数字只出现了一次，所以最终的结果`diff`是这两个数字的异或值。\n\n因为这两个数字不相同，所以这两个数字的二进制必定有某一位不相同。假设在`Xth`位上，一个数为0，另一个数为1。\n\n那么把所有数字分为两类，一类是在`Xth`为0的，另一类是在`Xth`为1的。\n\n关键是如何找到`Xth`位。方法时`diff ^=-diff`。\n该式子会找出最右侧的两个数字不同的位置，并将该为置为1，其余位置为0。其实就是找`diff`中为1的最右边的位置。\n\n\n```java\npublic int[] singleNumber(int[] nums) {\n    int diff = 0;\n    for (int num : nums) {\n        diff ^= num;\n    }\n\n    diff &= -diff;\n\n\n    int[] rets = {0, 0};\n\n    for (int num : nums)\n    {\n    //将数字分为两类，一类为某一位为0，另一类为某一位为1\n        if ((num & diff) == 0)\n        {\n            rets[0] ^= num;\n        }\n        else\n        {\n            rets[1] ^= num;\n        }\n    }\n    return rets;\n}\n```\n","slug":"OJ/LeetCode/2016-04-21-medium-SingleNum","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdghy002su8jrlz07kz23","content":"<p>这三题题意基本一样。<br>1.136 题：每个数字出现两遍，一个数字例外。找出这个数字。<br>2.137 题：每个数字出现三遍，一个数字例外。找出这个数字。<br>3.260 题：每个数字出现两遍，两个数字例外。找出这个数字。</p>\n<h2 id=\"使用排序的方法\"><a href=\"#使用排序的方法\" class=\"headerlink\" title=\"使用排序的方法\"></a>使用排序的方法</h2><p>以136题为例：</p>\n<p>这种方法先将给的数组<code>int[] num</code>排序，因为数字相同则会在一起，则只需要比较<code>num[i]</code>和<code>nums[i+1]</code>若不相同，则返回<code>num[i]</code>其中<code>i=i+2</code>。<br>特殊情况：<br>数字出现在最末尾。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    sort(nums);</div><div class=\"line\">    <span class=\"keyword\">int</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;nums.length-<span class=\"number\">1</span>;)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(nums[i]==nums[i+<span class=\"number\">1</span>])&#123;</div><div class=\"line\">            i+=<span class=\"number\">2</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            res=nums[i];</div><div class=\"line\">            i+=<span class=\"number\">2</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> res;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> nums[nums.length-<span class=\"number\">1</span>];</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"使用位操作的方法\"><a href=\"#使用位操作的方法\" class=\"headerlink\" title=\"使用位操作的方法\"></a>使用位操作的方法</h2><h3 id=\"136题\"><a href=\"#136题\" class=\"headerlink\" title=\"136题\"></a>136题</h3><p>因为数字会出现两次，所以对所有数字取<strong>异或</strong>会使得最后的数字即所求的数字。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> diff=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i:nums)&#123;</div><div class=\"line\">        diff=diff^i;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">int</span> res=diff;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"137题\"><a href=\"#137题\" class=\"headerlink\" title=\"137题\"></a>137题</h3><p>因为每个数字会重复三遍，所以统计32位中每一位上1出现的次数，若次数不为3的整数倍，则说明所求数字该位为1。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> [] count=<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[Integer.BYTES*<span class=\"number\">8</span>];</div><div class=\"line\">    <span class=\"keyword\">int</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;count.length;i++)&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> tmp=<span class=\"number\">1</span>&lt;&lt;i;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j=<span class=\"number\">0</span>;j&lt;nums.length;j++)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>((nums[j]&amp;tmp)!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">                count[i]++;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(count[i]%<span class=\"number\">3</span>!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">            res=res|tmp;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"260题\"><a href=\"#260题\" class=\"headerlink\" title=\"260题\"></a>260题</h3><p>同样是先对所有数字取异或，因为有两个数字只出现了一次，所以最终的结果<code>diff</code>是这两个数字的异或值。</p>\n<p>因为这两个数字不相同，所以这两个数字的二进制必定有某一位不相同。假设在<code>Xth</code>位上，一个数为0，另一个数为1。</p>\n<p>那么把所有数字分为两类，一类是在<code>Xth</code>为0的，另一类是在<code>Xth</code>为1的。</p>\n<p>关键是如何找到<code>Xth</code>位。方法时<code>diff ^=-diff</code>。<br>该式子会找出最右侧的两个数字不同的位置，并将该为置为1，其余位置为0。其实就是找<code>diff</code>中为1的最右边的位置。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] singleNumber(<span class=\"keyword\">int</span>[] nums) &#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> diff = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> num : nums) &#123;</div><div class=\"line\">        diff ^= num;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    diff &amp;= -diff;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">int</span>[] rets = &#123;<span class=\"number\">0</span>, <span class=\"number\">0</span>&#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> num : nums)</div><div class=\"line\">    &#123;</div><div class=\"line\">    <span class=\"comment\">//将数字分为两类，一类为某一位为0，另一类为某一位为1</span></div><div class=\"line\">        <span class=\"keyword\">if</span> ((num &amp; diff) == <span class=\"number\">0</span>)</div><div class=\"line\">        &#123;</div><div class=\"line\">            rets[<span class=\"number\">0</span>] ^= num;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">        &#123;</div><div class=\"line\">            rets[<span class=\"number\">1</span>] ^= num;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> rets;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>这三题题意基本一样。<br>1.136 题：每个数字出现两遍，一个数字例外。找出这个数字。<br>2.137 题：每个数字出现三遍，一个数字例外。找出这个数字。<br>3.260 题：每个数字出现两遍，两个数字例外。找出这个数字。</p>\n<h2 id=\"使用排序的方法\"><a href=\"#使用排序的方法\" class=\"headerlink\" title=\"使用排序的方法\"></a>使用排序的方法</h2><p>以136题为例：</p>\n<p>这种方法先将给的数组<code>int[] num</code>排序，因为数字相同则会在一起，则只需要比较<code>num[i]</code>和<code>nums[i+1]</code>若不相同，则返回<code>num[i]</code>其中<code>i=i+2</code>。<br>特殊情况：<br>数字出现在最末尾。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    sort(nums);</div><div class=\"line\">    <span class=\"keyword\">int</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;nums.length-<span class=\"number\">1</span>;)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(nums[i]==nums[i+<span class=\"number\">1</span>])&#123;</div><div class=\"line\">            i+=<span class=\"number\">2</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            res=nums[i];</div><div class=\"line\">            i+=<span class=\"number\">2</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> res;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> nums[nums.length-<span class=\"number\">1</span>];</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"使用位操作的方法\"><a href=\"#使用位操作的方法\" class=\"headerlink\" title=\"使用位操作的方法\"></a>使用位操作的方法</h2><h3 id=\"136题\"><a href=\"#136题\" class=\"headerlink\" title=\"136题\"></a>136题</h3><p>因为数字会出现两次，所以对所有数字取<strong>异或</strong>会使得最后的数字即所求的数字。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> diff=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i:nums)&#123;</div><div class=\"line\">        diff=diff^i;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">int</span> res=diff;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"137题\"><a href=\"#137题\" class=\"headerlink\" title=\"137题\"></a>137题</h3><p>因为每个数字会重复三遍，所以统计32位中每一位上1出现的次数，若次数不为3的整数倍，则说明所求数字该位为1。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> [] count=<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[Integer.BYTES*<span class=\"number\">8</span>];</div><div class=\"line\">    <span class=\"keyword\">int</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;count.length;i++)&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> tmp=<span class=\"number\">1</span>&lt;&lt;i;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j=<span class=\"number\">0</span>;j&lt;nums.length;j++)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>((nums[j]&amp;tmp)!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">                count[i]++;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(count[i]%<span class=\"number\">3</span>!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">            res=res|tmp;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"260题\"><a href=\"#260题\" class=\"headerlink\" title=\"260题\"></a>260题</h3><p>同样是先对所有数字取异或，因为有两个数字只出现了一次，所以最终的结果<code>diff</code>是这两个数字的异或值。</p>\n<p>因为这两个数字不相同，所以这两个数字的二进制必定有某一位不相同。假设在<code>Xth</code>位上，一个数为0，另一个数为1。</p>\n<p>那么把所有数字分为两类，一类是在<code>Xth</code>为0的，另一类是在<code>Xth</code>为1的。</p>\n<p>关键是如何找到<code>Xth</code>位。方法时<code>diff ^=-diff</code>。<br>该式子会找出最右侧的两个数字不同的位置，并将该为置为1，其余位置为0。其实就是找<code>diff</code>中为1的最右边的位置。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] singleNumber(<span class=\"keyword\">int</span>[] nums) &#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> diff = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> num : nums) &#123;</div><div class=\"line\">        diff ^= num;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    diff &amp;= -diff;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">int</span>[] rets = &#123;<span class=\"number\">0</span>, <span class=\"number\">0</span>&#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> num : nums)</div><div class=\"line\">    &#123;</div><div class=\"line\">    <span class=\"comment\">//将数字分为两类，一类为某一位为0，另一类为某一位为1</span></div><div class=\"line\">        <span class=\"keyword\">if</span> ((num &amp; diff) == <span class=\"number\">0</span>)</div><div class=\"line\">        &#123;</div><div class=\"line\">            rets[<span class=\"number\">0</span>] ^= num;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">        &#123;</div><div class=\"line\">            rets[<span class=\"number\">1</span>] ^= num;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> rets;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-04-20T16:00:00.000Z","title":"LeetCode 343,122 整数拆分求积 递增区间寻找","keywords":null,"description":"整数拆分求积 递增区间寻找","_content":"\n## 122 Best Time to Buy and Sell Stock II\n\nSay you have an array for which the ith element is the price of a given stock on day i.\n\nDesign an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times). However, you may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).\n\n\n已知物品每天的价格，讨论通过买卖可以赚到的最多利润。卖之前必须买，再一次买之前必须卖掉。\n\n寻找所有递增区间，区间尾头之差即单次利润。\n\n```java\npublic int maxProfit(int[] prices) {\n    int maxProfit=0;\n    for(int i=0;i<prices.length;){\n        int plus=1;\n        int flag=0;\n\n        while (i+plus<prices.length&&prices[i+plus-1]<prices[i+plus]){\n            plus+=1;\n            flag=1;\n        }\n        if(flag==1){\n            maxProfit+=prices[i+plus-1]-prices[i];\n        }\n        i+=plus;\n    }\n    return maxProfit;\n}\n```\n\n## 343 Integer Break\n\n给一个自然数n，把它拆分为若干个数的和，记这若干个数的乘积为M，求M的最大值。\n\n方法：尽可能将这个数拆分成3，原因下方解释。\n\n\n```java\npublic int integerBreak(int n) {\n    if(n==2){\n        return 1;\n    }\n    if(n==3){\n        return 2;\n    }\n    if(n==4){\n        return 4;\n    }\n    int mod=n%3;\n    int res=0;\n    res=(int)Math.pow(3,n/3);\n    System.out.println(res);\n    if(mod==1){\n        res=res/3*4;\n        return res;\n    }\n\n    if(mod==2){\n        res=res*2;\n        return res;\n    }\n    return res;\n}\n```\n\n### 证明\n\n因为有不等式\n$$\\sqrt[k]{x_1x_2x_3x_4...x_k}\\leq \\frac{x_1x_2x_3x_4...x_k}{k}$$\n\n设$$$n=x_1+x_2+x_3+x_4+x_5+...+x_k$$$，$$$P=x_1x_2x_3x_4x_5+...x_k$$$。\n\n所以有$$$P \\leq (\\frac{n}{k})^k$$$\n","source":"_posts/OJ/LeetCode/2016-04-21-medium-343-122.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-21\ntitle: LeetCode 343,122 整数拆分求积 递增区间寻找\ncategory: OJ\ntags: [oj]\nkeywords:\ndescription: 整数拆分求积 递增区间寻找\n---\n\n## 122 Best Time to Buy and Sell Stock II\n\nSay you have an array for which the ith element is the price of a given stock on day i.\n\nDesign an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times). However, you may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).\n\n\n已知物品每天的价格，讨论通过买卖可以赚到的最多利润。卖之前必须买，再一次买之前必须卖掉。\n\n寻找所有递增区间，区间尾头之差即单次利润。\n\n```java\npublic int maxProfit(int[] prices) {\n    int maxProfit=0;\n    for(int i=0;i<prices.length;){\n        int plus=1;\n        int flag=0;\n\n        while (i+plus<prices.length&&prices[i+plus-1]<prices[i+plus]){\n            plus+=1;\n            flag=1;\n        }\n        if(flag==1){\n            maxProfit+=prices[i+plus-1]-prices[i];\n        }\n        i+=plus;\n    }\n    return maxProfit;\n}\n```\n\n## 343 Integer Break\n\n给一个自然数n，把它拆分为若干个数的和，记这若干个数的乘积为M，求M的最大值。\n\n方法：尽可能将这个数拆分成3，原因下方解释。\n\n\n```java\npublic int integerBreak(int n) {\n    if(n==2){\n        return 1;\n    }\n    if(n==3){\n        return 2;\n    }\n    if(n==4){\n        return 4;\n    }\n    int mod=n%3;\n    int res=0;\n    res=(int)Math.pow(3,n/3);\n    System.out.println(res);\n    if(mod==1){\n        res=res/3*4;\n        return res;\n    }\n\n    if(mod==2){\n        res=res*2;\n        return res;\n    }\n    return res;\n}\n```\n\n### 证明\n\n因为有不等式\n$$\\sqrt[k]{x_1x_2x_3x_4...x_k}\\leq \\frac{x_1x_2x_3x_4...x_k}{k}$$\n\n设$$$n=x_1+x_2+x_3+x_4+x_5+...+x_k$$$，$$$P=x_1x_2x_3x_4x_5+...x_k$$$。\n\n所以有$$$P \\leq (\\frac{n}{k})^k$$$\n","slug":"OJ/LeetCode/2016-04-21-medium-343-122","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdghz002tu8jrdccwq6cq","content":"<h2 id=\"122-Best-Time-to-Buy-and-Sell-Stock-II\"><a href=\"#122-Best-Time-to-Buy-and-Sell-Stock-II\" class=\"headerlink\" title=\"122 Best Time to Buy and Sell Stock II\"></a>122 Best Time to Buy and Sell Stock II</h2><p>Say you have an array for which the ith element is the price of a given stock on day i.</p>\n<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times). However, you may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).</p>\n<p>已知物品每天的价格，讨论通过买卖可以赚到的最多利润。卖之前必须买，再一次买之前必须卖掉。</p>\n<p>寻找所有递增区间，区间尾头之差即单次利润。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">maxProfit</span><span class=\"params\">(<span class=\"keyword\">int</span>[] prices)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> maxProfit=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;prices.length;)&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> plus=<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> flag=<span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">while</span> (i+plus&lt;prices.length&amp;&amp;prices[i+plus-<span class=\"number\">1</span>]&lt;prices[i+plus])&#123;</div><div class=\"line\">            plus+=<span class=\"number\">1</span>;</div><div class=\"line\">            flag=<span class=\"number\">1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(flag==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">            maxProfit+=prices[i+plus-<span class=\"number\">1</span>]-prices[i];</div><div class=\"line\">        &#125;</div><div class=\"line\">        i+=plus;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> maxProfit;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"343-Integer-Break\"><a href=\"#343-Integer-Break\" class=\"headerlink\" title=\"343 Integer Break\"></a>343 Integer Break</h2><p>给一个自然数n，把它拆分为若干个数的和，记这若干个数的乘积为M，求M的最大值。</p>\n<p>方法：尽可能将这个数拆分成3，原因下方解释。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">integerBreak</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(n==<span class=\"number\">2</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(n==<span class=\"number\">3</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(n==<span class=\"number\">4</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">4</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">int</span> mod=n%<span class=\"number\">3</span>;</div><div class=\"line\">    <span class=\"keyword\">int</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">    res=(<span class=\"keyword\">int</span>)Math.pow(<span class=\"number\">3</span>,n/<span class=\"number\">3</span>);</div><div class=\"line\">    System.out.println(res);</div><div class=\"line\">    <span class=\"keyword\">if</span>(mod==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">        res=res/<span class=\"number\">3</span>*<span class=\"number\">4</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span>(mod==<span class=\"number\">2</span>)&#123;</div><div class=\"line\">        res=res*<span class=\"number\">2</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"证明\"><a href=\"#证明\" class=\"headerlink\" title=\"证明\"></a>证明</h3><p>因为有不等式<br>$$\\sqrt[k]{x_1x_2x_3x_4…x_k}\\leq \\frac{x_1x_2x_3x_4…x_k}{k}$$</p>\n<p>设$$$n=x_1+x_2+x_3+x_4+x_5+…+x_k$$$，$$$P=x_1x_2x_3x_4x_5+…x_k$$$。</p>\n<p>所以有$$$P \\leq (\\frac{n}{k})^k$$$</p>\n","excerpt":"","more":"<h2 id=\"122-Best-Time-to-Buy-and-Sell-Stock-II\"><a href=\"#122-Best-Time-to-Buy-and-Sell-Stock-II\" class=\"headerlink\" title=\"122 Best Time to Buy and Sell Stock II\"></a>122 Best Time to Buy and Sell Stock II</h2><p>Say you have an array for which the ith element is the price of a given stock on day i.</p>\n<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times). However, you may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).</p>\n<p>已知物品每天的价格，讨论通过买卖可以赚到的最多利润。卖之前必须买，再一次买之前必须卖掉。</p>\n<p>寻找所有递增区间，区间尾头之差即单次利润。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">maxProfit</span><span class=\"params\">(<span class=\"keyword\">int</span>[] prices)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> maxProfit=<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;prices.length;)&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> plus=<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> flag=<span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">while</span> (i+plus&lt;prices.length&amp;&amp;prices[i+plus-<span class=\"number\">1</span>]&lt;prices[i+plus])&#123;</div><div class=\"line\">            plus+=<span class=\"number\">1</span>;</div><div class=\"line\">            flag=<span class=\"number\">1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(flag==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">            maxProfit+=prices[i+plus-<span class=\"number\">1</span>]-prices[i];</div><div class=\"line\">        &#125;</div><div class=\"line\">        i+=plus;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> maxProfit;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"343-Integer-Break\"><a href=\"#343-Integer-Break\" class=\"headerlink\" title=\"343 Integer Break\"></a>343 Integer Break</h2><p>给一个自然数n，把它拆分为若干个数的和，记这若干个数的乘积为M，求M的最大值。</p>\n<p>方法：尽可能将这个数拆分成3，原因下方解释。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">integerBreak</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(n==<span class=\"number\">2</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(n==<span class=\"number\">3</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(n==<span class=\"number\">4</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">4</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">int</span> mod=n%<span class=\"number\">3</span>;</div><div class=\"line\">    <span class=\"keyword\">int</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">    res=(<span class=\"keyword\">int</span>)Math.pow(<span class=\"number\">3</span>,n/<span class=\"number\">3</span>);</div><div class=\"line\">    System.out.println(res);</div><div class=\"line\">    <span class=\"keyword\">if</span>(mod==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">        res=res/<span class=\"number\">3</span>*<span class=\"number\">4</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span>(mod==<span class=\"number\">2</span>)&#123;</div><div class=\"line\">        res=res*<span class=\"number\">2</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"证明\"><a href=\"#证明\" class=\"headerlink\" title=\"证明\"></a>证明</h3><p>因为有不等式<br>$$\\sqrt[k]{x_1x_2x_3x_4…x_k}\\leq \\frac{x_1x_2x_3x_4…x_k}{k}$$</p>\n<p>设$$$n=x_1+x_2+x_3+x_4+x_5+…+x_k$$$，$$$P=x_1x_2x_3x_4x_5+…x_k$$$。</p>\n<p>所以有$$$P \\leq (\\frac{n}{k})^k$$$</p>\n"},{"author":"ivyxjc","date":"2016-10-18T16:00:00.000Z","title":"centos 64位更新glibc","keywords":null,"description":"如何在centos中升级glibc","toc":true,"_content":"\n## 下载新版本glibc\n\n```git\ngit clone git://sourceware.org/git/glibc.git\ncd glibc\ngit checkout --track -b local_glibc-2.24 origin/release/2.24/master\n```\n\n## 更新glibc\n\n```shell\n../configure --prefix=/opt/glibc-2.24\n```\n\n## 常见问题\n\n###  These critical programs are missing or too old: as ld\n\n调用`ld -v`是2.20..\n\n```shell\nvi ../configure\n```\n\n在文件中寻找到\n```\ncase $ac_prog_version in\n'') ac_prog_version=\"v. ?.??, bad\"; ac_verc_fail=yes;;\n2.1[3-9]*|2.2[0-9]*)\n```\n**|2.2[0-9]\\***是之后添加的, 因为该机的版本为2.20..., 意即该正则表达式要将本机的版本包括进去.\n\n### checking installed Linux kernel header files... missing or too old!\n","source":"_posts/效率/2016-10-29-centos-update-glibc.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-19\ntitle: centos 64位更新glibc\ncategory: 效率\ntags: [linux]\nkeywords:\ndescription: 如何在centos中升级glibc\ntoc: true\n---\n\n## 下载新版本glibc\n\n```git\ngit clone git://sourceware.org/git/glibc.git\ncd glibc\ngit checkout --track -b local_glibc-2.24 origin/release/2.24/master\n```\n\n## 更新glibc\n\n```shell\n../configure --prefix=/opt/glibc-2.24\n```\n\n## 常见问题\n\n###  These critical programs are missing or too old: as ld\n\n调用`ld -v`是2.20..\n\n```shell\nvi ../configure\n```\n\n在文件中寻找到\n```\ncase $ac_prog_version in\n'') ac_prog_version=\"v. ?.??, bad\"; ac_verc_fail=yes;;\n2.1[3-9]*|2.2[0-9]*)\n```\n**|2.2[0-9]\\***是之后添加的, 因为该机的版本为2.20..., 意即该正则表达式要将本机的版本包括进去.\n\n### checking installed Linux kernel header files... missing or too old!\n","slug":"效率/2016-10-29-centos-update-glibc","published":1,"updated":"2016-10-29T11:33:11.570Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgi1002wu8jr58f1axkz","content":"<h2 id=\"下载新版本glibc\"><a href=\"#下载新版本glibc\" class=\"headerlink\" title=\"下载新版本glibc\"></a>下载新版本glibc</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone git://sourceware.org/git/glibc.git</div><div class=\"line\">cd glibc</div><div class=\"line\">git checkout --track -b local_glibc-2.24 origin/release/2.24/master</div></pre></td></tr></table></figure>\n<h2 id=\"更新glibc\"><a href=\"#更新glibc\" class=\"headerlink\" title=\"更新glibc\"></a>更新glibc</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">../configure --prefix=/opt/glibc-2.24</div></pre></td></tr></table></figure>\n<h2 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h2><h3 id=\"These-critical-programs-are-missing-or-too-old-as-ld\"><a href=\"#These-critical-programs-are-missing-or-too-old-as-ld\" class=\"headerlink\" title=\"These critical programs are missing or too old: as ld\"></a>These critical programs are missing or too old: as ld</h3><p>调用<code>ld -v</code>是2.20..</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi ../configure</div></pre></td></tr></table></figure>\n<p>在文件中寻找到<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">case $ac_prog_version in</div><div class=\"line\">&apos;&apos;) ac_prog_version=&quot;v. ?.??, bad&quot;; ac_verc_fail=yes;;</div><div class=\"line\">2.1[3-9]*|2.2[0-9]*)</div></pre></td></tr></table></figure></p>\n<p><strong>|2.2[0-9]*</strong>是之后添加的, 因为该机的版本为2.20…, 意即该正则表达式要将本机的版本包括进去.</p>\n<h3 id=\"checking-installed-Linux-kernel-header-files…-missing-or-too-old\"><a href=\"#checking-installed-Linux-kernel-header-files…-missing-or-too-old\" class=\"headerlink\" title=\"checking installed Linux kernel header files… missing or too old!\"></a>checking installed Linux kernel header files… missing or too old!</h3>","excerpt":"","more":"<h2 id=\"下载新版本glibc\"><a href=\"#下载新版本glibc\" class=\"headerlink\" title=\"下载新版本glibc\"></a>下载新版本glibc</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone git://sourceware.org/git/glibc.git</div><div class=\"line\">cd glibc</div><div class=\"line\">git checkout --track -b local_glibc-2.24 origin/release/2.24/master</div></pre></td></tr></table></figure>\n<h2 id=\"更新glibc\"><a href=\"#更新glibc\" class=\"headerlink\" title=\"更新glibc\"></a>更新glibc</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">../configure --prefix=/opt/glibc-2.24</div></pre></td></tr></table></figure>\n<h2 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h2><h3 id=\"These-critical-programs-are-missing-or-too-old-as-ld\"><a href=\"#These-critical-programs-are-missing-or-too-old-as-ld\" class=\"headerlink\" title=\"These critical programs are missing or too old: as ld\"></a>These critical programs are missing or too old: as ld</h3><p>调用<code>ld -v</code>是2.20..</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi ../configure</div></pre></td></tr></table></figure>\n<p>在文件中寻找到<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">case $ac_prog_version in</div><div class=\"line\">&apos;&apos;) ac_prog_version=&quot;v. ?.??, bad&quot;; ac_verc_fail=yes;;</div><div class=\"line\">2.1[3-9]*|2.2[0-9]*)</div></pre></td></tr></table></figure></p>\n<p><strong>|2.2[0-9]*</strong>是之后添加的, 因为该机的版本为2.20…, 意即该正则表达式要将本机的版本包括进去.</p>\n<h3 id=\"checking-installed-Linux-kernel-header-files…-missing-or-too-old\"><a href=\"#checking-installed-Linux-kernel-header-files…-missing-or-too-old\" class=\"headerlink\" title=\"checking installed Linux kernel header files… missing or too old!\"></a>checking installed Linux kernel header files… missing or too old!</h3>"},{"author":"ivyxjc","date":"2016-04-25T16:00:00.000Z","title":"数根","keywords":null,"description":"数根就是指将一个数num的各位数字相加之后得到一个数字,若该数大于等于10则继续该运算直到得到一个小于10的数, 这个数被称为num的树根.","mathjax":true,"_content":"\n## 简介\n\n数根就是指将一个数的各位数字相加之后得到一个数字，若该数大于等于10则继续该运算所得到的那个数。\n\n例如：\n158 --》 1+5+8=14 --》 1+4=5\n\n\n## O(n) 解法\n\n就是按照树根的定义来做。\n\n```java\npublic int addDigits(int num) {\n   while(num>=10){\n       int [] tmp=getDigits(num);\n       num=0;\n       for(int i=0;i<tmp.length;i++){\n           num+=tmp[i];\n       }\n   }\n   return num;\n}\n\n\npublic int[] getDigits(int num){\n   int tmp=num;\n   int [] digits=new int[(int)Math.log(num)];\n   int index=0;\n   while(tmp!=0){\n       digits[index]=tmp%10;\n       tmp=tmp/10;\n       index+=1;\n   }\n   return digits;\n}\n```\n\n## O(1)解法\n\n树根有一些很巧妙的数学规律，使得该题可以在O(1)时间内完成。\n\n例：\n\n$12345=1*10000+2*1000+3*100+4*10+5*1$\n\n$$=1*9999+2*999+3*99+4*9+5*0+(1+2+3+4+5)$$\n\n我们发现一个数的各位数字之和和该数和9同余。\n\n所以树根与原数也应该同余（当一个数为9的倍数时，树根即为9）、\n\n```java\npublic int addDigits(int num) {\n    if(num==0){\n        return 0;\n    }\n    if(num%9==0){\n        return 9;\n    }else{\n        return num%9;\n    }\n\n}\n```\n","source":"_posts/OJ/LeetCode/2016-04-26-easy-add-digits.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-26\ntitle: 数根\ncategory: OJ\ntags: [math]\nkeywords:\ndescription: 数根就是指将一个数num的各位数字相加之后得到一个数字,若该数大于等于10则继续该运算直到得到一个小于10的数, 这个数被称为num的树根.\nmathjax: true\n---\n\n## 简介\n\n数根就是指将一个数的各位数字相加之后得到一个数字，若该数大于等于10则继续该运算所得到的那个数。\n\n例如：\n158 --》 1+5+8=14 --》 1+4=5\n\n\n## O(n) 解法\n\n就是按照树根的定义来做。\n\n```java\npublic int addDigits(int num) {\n   while(num>=10){\n       int [] tmp=getDigits(num);\n       num=0;\n       for(int i=0;i<tmp.length;i++){\n           num+=tmp[i];\n       }\n   }\n   return num;\n}\n\n\npublic int[] getDigits(int num){\n   int tmp=num;\n   int [] digits=new int[(int)Math.log(num)];\n   int index=0;\n   while(tmp!=0){\n       digits[index]=tmp%10;\n       tmp=tmp/10;\n       index+=1;\n   }\n   return digits;\n}\n```\n\n## O(1)解法\n\n树根有一些很巧妙的数学规律，使得该题可以在O(1)时间内完成。\n\n例：\n\n$12345=1*10000+2*1000+3*100+4*10+5*1$\n\n$$=1*9999+2*999+3*99+4*9+5*0+(1+2+3+4+5)$$\n\n我们发现一个数的各位数字之和和该数和9同余。\n\n所以树根与原数也应该同余（当一个数为9的倍数时，树根即为9）、\n\n```java\npublic int addDigits(int num) {\n    if(num==0){\n        return 0;\n    }\n    if(num%9==0){\n        return 9;\n    }else{\n        return num%9;\n    }\n\n}\n```\n","slug":"OJ/LeetCode/2016-04-26-easy-add-digits","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgi3002xu8jrebrxdsh9","content":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>数根就是指将一个数的各位数字相加之后得到一个数字，若该数大于等于10则继续该运算所得到的那个数。</p>\n<p>例如：<br>158 –》 1+5+8=14 –》 1+4=5</p>\n<h2 id=\"O-n-解法\"><a href=\"#O-n-解法\" class=\"headerlink\" title=\"O(n) 解法\"></a>O(n) 解法</h2><p>就是按照树根的定义来做。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">addDigits</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">while</span>(num&gt;=<span class=\"number\">10</span>)&#123;</div><div class=\"line\">       <span class=\"keyword\">int</span> [] tmp=getDigits(num);</div><div class=\"line\">       num=<span class=\"number\">0</span>;</div><div class=\"line\">       <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;tmp.length;i++)&#123;</div><div class=\"line\">           num+=tmp[i];</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> num;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] getDigits(<span class=\"keyword\">int</span> num)&#123;</div><div class=\"line\">   <span class=\"keyword\">int</span> tmp=num;</div><div class=\"line\">   <span class=\"keyword\">int</span> [] digits=<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[(<span class=\"keyword\">int</span>)Math.log(num)];</div><div class=\"line\">   <span class=\"keyword\">int</span> index=<span class=\"number\">0</span>;</div><div class=\"line\">   <span class=\"keyword\">while</span>(tmp!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">       digits[index]=tmp%<span class=\"number\">10</span>;</div><div class=\"line\">       tmp=tmp/<span class=\"number\">10</span>;</div><div class=\"line\">       index+=<span class=\"number\">1</span>;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> digits;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"O-1-解法\"><a href=\"#O-1-解法\" class=\"headerlink\" title=\"O(1)解法\"></a>O(1)解法</h2><p>树根有一些很巧妙的数学规律，使得该题可以在O(1)时间内完成。</p>\n<p>例：</p>\n<p>$12345=1<em>10000+2</em>1000+3<em>100+4</em>10+5*1$</p>\n<p>$$=1<em>9999+2</em>999+3<em>99+4</em>9+5*0+(1+2+3+4+5)$$</p>\n<p>我们发现一个数的各位数字之和和该数和9同余。</p>\n<p>所以树根与原数也应该同余（当一个数为9的倍数时，树根即为9）、</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">addDigits</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(num==<span class=\"number\">0</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(num%<span class=\"number\">9</span>==<span class=\"number\">0</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">9</span>;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> num%<span class=\"number\">9</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>数根就是指将一个数的各位数字相加之后得到一个数字，若该数大于等于10则继续该运算所得到的那个数。</p>\n<p>例如：<br>158 –》 1+5+8=14 –》 1+4=5</p>\n<h2 id=\"O-n-解法\"><a href=\"#O-n-解法\" class=\"headerlink\" title=\"O(n) 解法\"></a>O(n) 解法</h2><p>就是按照树根的定义来做。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">addDigits</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">while</span>(num&gt;=<span class=\"number\">10</span>)&#123;</div><div class=\"line\">       <span class=\"keyword\">int</span> [] tmp=getDigits(num);</div><div class=\"line\">       num=<span class=\"number\">0</span>;</div><div class=\"line\">       <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;tmp.length;i++)&#123;</div><div class=\"line\">           num+=tmp[i];</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> num;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] getDigits(<span class=\"keyword\">int</span> num)&#123;</div><div class=\"line\">   <span class=\"keyword\">int</span> tmp=num;</div><div class=\"line\">   <span class=\"keyword\">int</span> [] digits=<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[(<span class=\"keyword\">int</span>)Math.log(num)];</div><div class=\"line\">   <span class=\"keyword\">int</span> index=<span class=\"number\">0</span>;</div><div class=\"line\">   <span class=\"keyword\">while</span>(tmp!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">       digits[index]=tmp%<span class=\"number\">10</span>;</div><div class=\"line\">       tmp=tmp/<span class=\"number\">10</span>;</div><div class=\"line\">       index+=<span class=\"number\">1</span>;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> digits;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"O-1-解法\"><a href=\"#O-1-解法\" class=\"headerlink\" title=\"O(1)解法\"></a>O(1)解法</h2><p>树根有一些很巧妙的数学规律，使得该题可以在O(1)时间内完成。</p>\n<p>例：</p>\n<p>$12345=1<em>10000+2</em>1000+3<em>100+4</em>10+5*1$</p>\n<p>$$=1<em>9999+2</em>999+3<em>99+4</em>9+5*0+(1+2+3+4+5)$$</p>\n<p>我们发现一个数的各位数字之和和该数和9同余。</p>\n<p>所以树根与原数也应该同余（当一个数为9的倍数时，树根即为9）、</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">addDigits</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(num==<span class=\"number\">0</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(num%<span class=\"number\">9</span>==<span class=\"number\">0</span>)&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">9</span>;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> num%<span class=\"number\">9</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-04-25T16:00:00.000Z","title":"Maximum Depth of Binary Tree","keywords":null,"description":"寻找二叉树最长路径","_content":"\n## 寻找二叉树最长路径\n\n\n### 递归的方法\n\n1.节点为`null`时，返回深度为0\n2.节点的左右子节点中有一个为`null`时，返回`1+maxDepth(root.left(or root.right))`\n3.若节点的左右子节点都不为`null`时，返回两者中大的那一个。\n\n```java\npublic int maxDepth(TreeNode root) {\n        if(root==null){\n            return 0;\n        }else if(root.left!=null&& root.right!=null){\n            return max(1+maxDepth(root.left),1+maxDepth(root.right));\n        }else if(root.left==null){\n            return 1+maxDepth(root.right);\n        }else{\n            return 1+maxDepth(root.left);\n        }\n    }\n\n    public int max(int a,int b){\n        return (a>b?a:b);\n    }\n```\n","source":"_posts/OJ/LeetCode/2016-04-26-easy-MaximunDepthofBinary.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-26\ntitle: Maximum Depth of Binary Tree\ncategory: OJ\ntags: [recursion]\nkeywords:\ndescription: 寻找二叉树最长路径\n---\n\n## 寻找二叉树最长路径\n\n\n### 递归的方法\n\n1.节点为`null`时，返回深度为0\n2.节点的左右子节点中有一个为`null`时，返回`1+maxDepth(root.left(or root.right))`\n3.若节点的左右子节点都不为`null`时，返回两者中大的那一个。\n\n```java\npublic int maxDepth(TreeNode root) {\n        if(root==null){\n            return 0;\n        }else if(root.left!=null&& root.right!=null){\n            return max(1+maxDepth(root.left),1+maxDepth(root.right));\n        }else if(root.left==null){\n            return 1+maxDepth(root.right);\n        }else{\n            return 1+maxDepth(root.left);\n        }\n    }\n\n    public int max(int a,int b){\n        return (a>b?a:b);\n    }\n```\n","slug":"OJ/LeetCode/2016-04-26-easy-MaximunDepthofBinary","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgi4002zu8jr00gqklja","content":"<h2 id=\"寻找二叉树最长路径\"><a href=\"#寻找二叉树最长路径\" class=\"headerlink\" title=\"寻找二叉树最长路径\"></a>寻找二叉树最长路径</h2><h3 id=\"递归的方法\"><a href=\"#递归的方法\" class=\"headerlink\" title=\"递归的方法\"></a>递归的方法</h3><p>1.节点为<code>null</code>时，返回深度为0<br>2.节点的左右子节点中有一个为<code>null</code>时，返回<code>1+maxDepth(root.left(or root.right))</code><br>3.若节点的左右子节点都不为<code>null</code>时，返回两者中大的那一个。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">maxDepth</span><span class=\"params\">(TreeNode root)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(root==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(root.left!=<span class=\"keyword\">null</span>&amp;&amp; root.right!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> max(<span class=\"number\">1</span>+maxDepth(root.left),<span class=\"number\">1</span>+maxDepth(root.right));</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(root.left==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>+maxDepth(root.right);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>+maxDepth(root.left);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">max</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> (a&gt;b?a:b);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"寻找二叉树最长路径\"><a href=\"#寻找二叉树最长路径\" class=\"headerlink\" title=\"寻找二叉树最长路径\"></a>寻找二叉树最长路径</h2><h3 id=\"递归的方法\"><a href=\"#递归的方法\" class=\"headerlink\" title=\"递归的方法\"></a>递归的方法</h3><p>1.节点为<code>null</code>时，返回深度为0<br>2.节点的左右子节点中有一个为<code>null</code>时，返回<code>1+maxDepth(root.left(or root.right))</code><br>3.若节点的左右子节点都不为<code>null</code>时，返回两者中大的那一个。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">maxDepth</span><span class=\"params\">(TreeNode root)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(root==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(root.left!=<span class=\"keyword\">null</span>&amp;&amp; root.right!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> max(<span class=\"number\">1</span>+maxDepth(root.left),<span class=\"number\">1</span>+maxDepth(root.right));</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(root.left==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>+maxDepth(root.right);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>+maxDepth(root.left);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">max</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> (a&gt;b?a:b);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-04-25T16:00:00.000Z","title":"283 将0移到数组末尾","keywords":null,"description":"将数组中的0移动数组尾部, 其它数字顺序不变. 必须就地完成.","_content":"\n将数组中的0移动数组尾部，其它数字顺序不变。\n必须就地完成\n\n## 解法I（用时34ms）\n\n就是遍历数组，当一个数为0时，将该0和后面每一个数字都替换\n\n用zeroFinalIndex作为一个flag,该数后面的数都为0，初始值为nums.length。每有一个数为0，zeroFinalIndex--\n\n注意点：当有连续的0时，两个0替换，替换完成时nums[i]==0，此时i不应该+1.\n\n```java\npublic void moveZeroes(int[] nums) {\n    int zeroFinalIndex=nums.length;\n    for(int i=0;i<nums.length;){\n        if(nums[i]==0&&i<zeroFinalIndex){\n            int j=i+1;\n            if(j<zeroFinalIndex&&nums[j]==0){\n                i--;\n            }\n            while(j<zeroFinalIndex){\n                exch(nums,j-1,j);\n                j++;\n            }\n            zeroFinalIndex--;\n        }\n        i++;\n\n    }\n}\n```\n\n\n\n## 解法II（用时1ms）\n\n即将不为0的数字和第一个0交换，关键在于找到第一个0的位置 `zeroIndex`。\n\n首先将`zeroIndex`设为0，即使该数不为0，也只是自己和自己交换，不影响结果。\n\n当遇到一个数为0，此时`zeroIndex`等于该数的秩（即第一个0的秩序），等到`numsIndex`增加到一个不为0的数，和它交换。\n\n`zeroIndex`再+1仍是第一个0所在的位置。\n因为若只有一个0，则`nusm[zeroIndex]`和`nums[numsIndex]`交换后，`zeroIndex`所在的数仍为0。\n\n若有连续多个0，第一0交换后，`zeroIndex++`后仍为交换后第一个0所在的位置。\n\n```java\npublic void moveZeroesII(int [] nums){\n    for(int zeroIndex=0,numIndex=0;numIndex<nums.length;numIndex++){\n        if(nums[numIndex]!=0){\n            exch(nums,zeroIndex++,numIndex);\n        }\n    }\n\n}\n```\n","source":"_posts/OJ/LeetCode/2016-04-26-easy-move-zeroes.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-26\ntitle: 283 将0移到数组末尾\ncategory: OJ\ntags: [array,twoPointer]\nkeywords:\ndescription: 将数组中的0移动数组尾部, 其它数字顺序不变. 必须就地完成.\n---\n\n将数组中的0移动数组尾部，其它数字顺序不变。\n必须就地完成\n\n## 解法I（用时34ms）\n\n就是遍历数组，当一个数为0时，将该0和后面每一个数字都替换\n\n用zeroFinalIndex作为一个flag,该数后面的数都为0，初始值为nums.length。每有一个数为0，zeroFinalIndex--\n\n注意点：当有连续的0时，两个0替换，替换完成时nums[i]==0，此时i不应该+1.\n\n```java\npublic void moveZeroes(int[] nums) {\n    int zeroFinalIndex=nums.length;\n    for(int i=0;i<nums.length;){\n        if(nums[i]==0&&i<zeroFinalIndex){\n            int j=i+1;\n            if(j<zeroFinalIndex&&nums[j]==0){\n                i--;\n            }\n            while(j<zeroFinalIndex){\n                exch(nums,j-1,j);\n                j++;\n            }\n            zeroFinalIndex--;\n        }\n        i++;\n\n    }\n}\n```\n\n\n\n## 解法II（用时1ms）\n\n即将不为0的数字和第一个0交换，关键在于找到第一个0的位置 `zeroIndex`。\n\n首先将`zeroIndex`设为0，即使该数不为0，也只是自己和自己交换，不影响结果。\n\n当遇到一个数为0，此时`zeroIndex`等于该数的秩（即第一个0的秩序），等到`numsIndex`增加到一个不为0的数，和它交换。\n\n`zeroIndex`再+1仍是第一个0所在的位置。\n因为若只有一个0，则`nusm[zeroIndex]`和`nums[numsIndex]`交换后，`zeroIndex`所在的数仍为0。\n\n若有连续多个0，第一0交换后，`zeroIndex++`后仍为交换后第一个0所在的位置。\n\n```java\npublic void moveZeroesII(int [] nums){\n    for(int zeroIndex=0,numIndex=0;numIndex<nums.length;numIndex++){\n        if(nums[numIndex]!=0){\n            exch(nums,zeroIndex++,numIndex);\n        }\n    }\n\n}\n```\n","slug":"OJ/LeetCode/2016-04-26-easy-move-zeroes","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgi60033u8jrsx3t03wg","content":"<p>将数组中的0移动数组尾部，其它数字顺序不变。<br>必须就地完成</p>\n<h2 id=\"解法I（用时34ms）\"><a href=\"#解法I（用时34ms）\" class=\"headerlink\" title=\"解法I（用时34ms）\"></a>解法I（用时34ms）</h2><p>就是遍历数组，当一个数为0时，将该0和后面每一个数字都替换</p>\n<p>用zeroFinalIndex作为一个flag,该数后面的数都为0，初始值为nums.length。每有一个数为0，zeroFinalIndex–</p>\n<p>注意点：当有连续的0时，两个0替换，替换完成时nums[i]==0，此时i不应该+1.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">moveZeroes</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> zeroFinalIndex=nums.length;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;nums.length;)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(nums[i]==<span class=\"number\">0</span>&amp;&amp;i&lt;zeroFinalIndex)&#123;</div><div class=\"line\">            <span class=\"keyword\">int</span> j=i+<span class=\"number\">1</span>;</div><div class=\"line\">            <span class=\"keyword\">if</span>(j&lt;zeroFinalIndex&amp;&amp;nums[j]==<span class=\"number\">0</span>)&#123;</div><div class=\"line\">                i--;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">while</span>(j&lt;zeroFinalIndex)&#123;</div><div class=\"line\">                exch(nums,j-<span class=\"number\">1</span>,j);</div><div class=\"line\">                j++;</div><div class=\"line\">            &#125;</div><div class=\"line\">            zeroFinalIndex--;</div><div class=\"line\">        &#125;</div><div class=\"line\">        i++;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"解法II（用时1ms）\"><a href=\"#解法II（用时1ms）\" class=\"headerlink\" title=\"解法II（用时1ms）\"></a>解法II（用时1ms）</h2><p>即将不为0的数字和第一个0交换，关键在于找到第一个0的位置 <code>zeroIndex</code>。</p>\n<p>首先将<code>zeroIndex</code>设为0，即使该数不为0，也只是自己和自己交换，不影响结果。</p>\n<p>当遇到一个数为0，此时<code>zeroIndex</code>等于该数的秩（即第一个0的秩序），等到<code>numsIndex</code>增加到一个不为0的数，和它交换。</p>\n<p><code>zeroIndex</code>再+1仍是第一个0所在的位置。<br>因为若只有一个0，则<code>nusm[zeroIndex]</code>和<code>nums[numsIndex]</code>交换后，<code>zeroIndex</code>所在的数仍为0。</p>\n<p>若有连续多个0，第一0交换后，<code>zeroIndex++</code>后仍为交换后第一个0所在的位置。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">moveZeroesII</span><span class=\"params\">(<span class=\"keyword\">int</span> [] nums)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> zeroIndex=<span class=\"number\">0</span>,numIndex=<span class=\"number\">0</span>;numIndex&lt;nums.length;numIndex++)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(nums[numIndex]!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">            exch(nums,zeroIndex++,numIndex);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>将数组中的0移动数组尾部，其它数字顺序不变。<br>必须就地完成</p>\n<h2 id=\"解法I（用时34ms）\"><a href=\"#解法I（用时34ms）\" class=\"headerlink\" title=\"解法I（用时34ms）\"></a>解法I（用时34ms）</h2><p>就是遍历数组，当一个数为0时，将该0和后面每一个数字都替换</p>\n<p>用zeroFinalIndex作为一个flag,该数后面的数都为0，初始值为nums.length。每有一个数为0，zeroFinalIndex–</p>\n<p>注意点：当有连续的0时，两个0替换，替换完成时nums[i]==0，此时i不应该+1.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">moveZeroes</span><span class=\"params\">(<span class=\"keyword\">int</span>[] nums)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> zeroFinalIndex=nums.length;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;nums.length;)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(nums[i]==<span class=\"number\">0</span>&amp;&amp;i&lt;zeroFinalIndex)&#123;</div><div class=\"line\">            <span class=\"keyword\">int</span> j=i+<span class=\"number\">1</span>;</div><div class=\"line\">            <span class=\"keyword\">if</span>(j&lt;zeroFinalIndex&amp;&amp;nums[j]==<span class=\"number\">0</span>)&#123;</div><div class=\"line\">                i--;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">while</span>(j&lt;zeroFinalIndex)&#123;</div><div class=\"line\">                exch(nums,j-<span class=\"number\">1</span>,j);</div><div class=\"line\">                j++;</div><div class=\"line\">            &#125;</div><div class=\"line\">            zeroFinalIndex--;</div><div class=\"line\">        &#125;</div><div class=\"line\">        i++;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"解法II（用时1ms）\"><a href=\"#解法II（用时1ms）\" class=\"headerlink\" title=\"解法II（用时1ms）\"></a>解法II（用时1ms）</h2><p>即将不为0的数字和第一个0交换，关键在于找到第一个0的位置 <code>zeroIndex</code>。</p>\n<p>首先将<code>zeroIndex</code>设为0，即使该数不为0，也只是自己和自己交换，不影响结果。</p>\n<p>当遇到一个数为0，此时<code>zeroIndex</code>等于该数的秩（即第一个0的秩序），等到<code>numsIndex</code>增加到一个不为0的数，和它交换。</p>\n<p><code>zeroIndex</code>再+1仍是第一个0所在的位置。<br>因为若只有一个0，则<code>nusm[zeroIndex]</code>和<code>nums[numsIndex]</code>交换后，<code>zeroIndex</code>所在的数仍为0。</p>\n<p>若有连续多个0，第一0交换后，<code>zeroIndex++</code>后仍为交换后第一个0所在的位置。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">moveZeroesII</span><span class=\"params\">(<span class=\"keyword\">int</span> [] nums)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> zeroIndex=<span class=\"number\">0</span>,numIndex=<span class=\"number\">0</span>;numIndex&lt;nums.length;numIndex++)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(nums[numIndex]!=<span class=\"number\">0</span>)&#123;</div><div class=\"line\">            exch(nums,zeroIndex++,numIndex);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-02-20T16:00:00.000Z","title":"PAT 1010 Radix 25","keywords":null,"description":null,"mathjax":true,"_content":"\n该题未全部完成，未通过全部测例 20/25\n\n这道题目是[PAT甲级习题](http://www.patest.cn/contests/pat-a-practise)中通过率最低的一道题，通过率只有$0.08$。我暂时也未能通过全部测例，还差4个测例。应该是边界条件未考虑充分。\n\n\n## 题目\nEach input file contains one test case. Each case occupies a line which contains 4 positive integers:<br>\n$N_1$ $N_2$ tag radix<br>\nHere $N_1$ and $N_2$ each has no more than 10 digits. A digit is less than its radix and is chosen from the set {0-9, a-z} where 0-9 represent the decimal numbers 0-9, and a-z represent the decimal numbers 10-35. The last number \"radix\" is the radix of N1 if \"tag\" is 1, or of N2 if \"tag\" is 2. <br>\n\n中文大意：\n输入4个数\n其中第四个数表示第三个数所指的那个数$N$的进制，现在来判断另一个数$M$在哪一种进制下回合$N$相同，若存在则输出进制，否则输出\"Impossible\"。<br>\n\n## 解法\n\n### String Convert to Long\n就是输入数据，由于数据中可能含有字母，仍存储为```String```格式。对已经给出进制的树先算出其对应的十进制数是多少：\n\n```java\n//已知字符串和进制，算出对应的十进制数\npublic static long strToLong(String str,long radix){\n    long res=0;\n    int tmp=0;\n    for(int i=str.length()-1;i>=0;i--){\n        res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);\n    }\n    return res;\n}\n\n```\n\n### 获得未知进制数中最大的字符所代表的十进制数\n\n因为进制数一定要大于最大的字符，所以可以通过这一步获得进制的下限\n\n```java\nString resNumStr = dataStr[resRadixNumPosi];\n    //获取未知进制数中最大的字符所代表的十进制数\n    int biggestCharInResNumStr = map.get(resNumStr.charAt(0));\n    for (int i = 0; i < resNumStr.length(); i++) {\n        if (map.get(resNumStr.charAt(i)) > biggestCharInResNumStr) {\n            biggestCharInResNumStr = map.get(resNumStr.charAt(i));\n        }\n    }\n```\n\n### 二分查找\n\n下限即上一步所求出的数+1\n上限即为已知进制的数\n\n退出条件:\n    若上下限相同，检查对应两个数在该进制是否相同\n    若下限大于上限，输出Impossible; return;\n\n```java\npublic static void findRadix(long num,String str,long radixBegin,long radixEnd){\n    if(radixBegin>radixEnd){\n        System.out.println(\"Impossible\");\n        return;\n    }\n    if(radixBegin==radixEnd){\n        if(strToLong(str,radixBegin)==num){\n            System.out.println(radixBegin);\n            return;\n        }else{\n            System.out.println(\"Impossible\");\n            return;\n        }\n    }\n    long radixMiddle=(radixBegin+radixEnd)>>1;\n    long middleRadixNum=strToLong(str,radixMiddle);\n    if(middleRadixNum>num){\n        findRadix(num,str,radixBegin,radixMiddle);\n    }else if(middleRadixNum==num){\n        System.out.println(radixMiddle);\n        return;\n    }else{\n        findRadix(num,str,radixMiddle+1,radixEnd);\n    }\n\n\n}\n\n```\n\n### 边界条件\n\n1. N1和N2一样时，应该输出其中最大字符所代表的数值再+1；\n\n\n### 代码实现\n\n\n```java\npackage PAT;\n\nimport java.util.HashMap;\nimport java.util.Scanner;\n\n/**\n * Created by xgh on 2016/2/21.\n */\npublic class _1010_Radix_25{\n    private static HashMap<Character,Integer> map=new HashMap<Character, Integer>();\n\n    public static void main(String[] args) {\n\n        Scanner in = new Scanner(System.in);\n        String[] dataStr = (in.nextLine()).split(\" \");\n        int charRepNum = 10;\n        for (char i = 'a'; i <= 'z'; i++) {\n            map.put(i, charRepNum++);\n        }\n        for (int i = 0; i < 9; i++) {\n            map.put((char) (i + 48), i);\n        }\n\n\n        int givenRadixNumPosi = Integer.parseInt(dataStr[2]);\n        long givenRadix = Integer.parseInt(dataStr[3]);\n\n        long aaa = 0;\n        long givenNum = 0;\n        String givenNumStr = dataStr[givenRadixNumPosi - 1];\n//        System.out.println(givenNumStr);\n//        System.out.println(givenRadixNumPosi-1);\n//        for(char e:map.keySet()){\n//            System.out.println(e+\" ==== \"+map.get(e));\n//        }\n        for (int i = givenNumStr.length() - 1; i >= 0; i--) {\n            givenNum += map.get(givenNumStr.charAt(i)) * Math.pow(givenRadix, aaa++);\n        }\n\n        int resRadixNumPosi = 0;\n        if (givenRadixNumPosi == 1) {\n            resRadixNumPosi = 1;\n        } else {\n            resRadixNumPosi = 0;\n        }\n\n        String resNumStr = dataStr[resRadixNumPosi];\n        int biggestCharInResNumStr = map.get(resNumStr.charAt(0));\n        for (int i = 0; i < resNumStr.length(); i++) {\n            if (map.get(resNumStr.charAt(i)) > biggestCharInResNumStr) {\n                biggestCharInResNumStr = map.get(resNumStr.charAt(i));\n            }\n        }\n\n\n        if(strToLong(resNumStr,biggestCharInResNumStr+1)==givenNum){\n            System.out.println(biggestCharInResNumStr+1);\n            return;\n        }\n\n//        System.out.println(Integer.parseInt(\"ab\"));\n//        System.out.println(givenNum);\n//        System.out.println(resNumStr);\n//        System.out.println(givenRadix+1);\n//        System.out.println(biggestCharInResNumStr+1);\n\n        findRadix(givenNum,resNumStr,biggestCharInResNumStr+1,givenNum+1);\n    }\n\n\n    public static void findRadix(long num,String str,long radixBegin,long radixEnd){\n        if(radixBegin>radixEnd){\n            System.out.println(\"Impossible\");\n            return;\n        }\n        if(radixBegin==radixEnd){\n            if(strToLong(str,radixBegin)==num){\n                System.out.println(radixBegin);\n                return;\n            }else{\n                System.out.println(\"Impossible\");\n                return;\n            }\n        }\n        long radixMiddle=(radixBegin+radixEnd)>>1;\n        long middleRadixNum=strToLong(str,radixMiddle);\n        if(middleRadixNum>num){\n            findRadix(num,str,radixBegin,radixMiddle);\n        }else if(middleRadixNum==num){\n            System.out.println(radixMiddle);\n            return;\n        }else{\n            findRadix(num,str,radixMiddle+1,radixEnd);\n        }\n\n\n    }\n\n    public static long strToLong(String str,long radix){\n        long res=0;\n        int tmp=0;\n        for(int i=str.length()-1;i>=0;i--){\n            res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);\n        }\n        return res;\n    }\n}\n```\n","source":"_posts/OJ/PAT/2016-02-21-1010题-Radix-25分.md","raw":"---\nauthor: ivyxjc\ndate: 2016-02-21\ntitle: PAT 1010 Radix 25\ncategory: OJ\ntags: [todo,onlinejudge,binarysearch]\nkeywords:\ndescription:\nmathjax: true\n---\n\n该题未全部完成，未通过全部测例 20/25\n\n这道题目是[PAT甲级习题](http://www.patest.cn/contests/pat-a-practise)中通过率最低的一道题，通过率只有$0.08$。我暂时也未能通过全部测例，还差4个测例。应该是边界条件未考虑充分。\n\n\n## 题目\nEach input file contains one test case. Each case occupies a line which contains 4 positive integers:<br>\n$N_1$ $N_2$ tag radix<br>\nHere $N_1$ and $N_2$ each has no more than 10 digits. A digit is less than its radix and is chosen from the set {0-9, a-z} where 0-9 represent the decimal numbers 0-9, and a-z represent the decimal numbers 10-35. The last number \"radix\" is the radix of N1 if \"tag\" is 1, or of N2 if \"tag\" is 2. <br>\n\n中文大意：\n输入4个数\n其中第四个数表示第三个数所指的那个数$N$的进制，现在来判断另一个数$M$在哪一种进制下回合$N$相同，若存在则输出进制，否则输出\"Impossible\"。<br>\n\n## 解法\n\n### String Convert to Long\n就是输入数据，由于数据中可能含有字母，仍存储为```String```格式。对已经给出进制的树先算出其对应的十进制数是多少：\n\n```java\n//已知字符串和进制，算出对应的十进制数\npublic static long strToLong(String str,long radix){\n    long res=0;\n    int tmp=0;\n    for(int i=str.length()-1;i>=0;i--){\n        res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);\n    }\n    return res;\n}\n\n```\n\n### 获得未知进制数中最大的字符所代表的十进制数\n\n因为进制数一定要大于最大的字符，所以可以通过这一步获得进制的下限\n\n```java\nString resNumStr = dataStr[resRadixNumPosi];\n    //获取未知进制数中最大的字符所代表的十进制数\n    int biggestCharInResNumStr = map.get(resNumStr.charAt(0));\n    for (int i = 0; i < resNumStr.length(); i++) {\n        if (map.get(resNumStr.charAt(i)) > biggestCharInResNumStr) {\n            biggestCharInResNumStr = map.get(resNumStr.charAt(i));\n        }\n    }\n```\n\n### 二分查找\n\n下限即上一步所求出的数+1\n上限即为已知进制的数\n\n退出条件:\n    若上下限相同，检查对应两个数在该进制是否相同\n    若下限大于上限，输出Impossible; return;\n\n```java\npublic static void findRadix(long num,String str,long radixBegin,long radixEnd){\n    if(radixBegin>radixEnd){\n        System.out.println(\"Impossible\");\n        return;\n    }\n    if(radixBegin==radixEnd){\n        if(strToLong(str,radixBegin)==num){\n            System.out.println(radixBegin);\n            return;\n        }else{\n            System.out.println(\"Impossible\");\n            return;\n        }\n    }\n    long radixMiddle=(radixBegin+radixEnd)>>1;\n    long middleRadixNum=strToLong(str,radixMiddle);\n    if(middleRadixNum>num){\n        findRadix(num,str,radixBegin,radixMiddle);\n    }else if(middleRadixNum==num){\n        System.out.println(radixMiddle);\n        return;\n    }else{\n        findRadix(num,str,radixMiddle+1,radixEnd);\n    }\n\n\n}\n\n```\n\n### 边界条件\n\n1. N1和N2一样时，应该输出其中最大字符所代表的数值再+1；\n\n\n### 代码实现\n\n\n```java\npackage PAT;\n\nimport java.util.HashMap;\nimport java.util.Scanner;\n\n/**\n * Created by xgh on 2016/2/21.\n */\npublic class _1010_Radix_25{\n    private static HashMap<Character,Integer> map=new HashMap<Character, Integer>();\n\n    public static void main(String[] args) {\n\n        Scanner in = new Scanner(System.in);\n        String[] dataStr = (in.nextLine()).split(\" \");\n        int charRepNum = 10;\n        for (char i = 'a'; i <= 'z'; i++) {\n            map.put(i, charRepNum++);\n        }\n        for (int i = 0; i < 9; i++) {\n            map.put((char) (i + 48), i);\n        }\n\n\n        int givenRadixNumPosi = Integer.parseInt(dataStr[2]);\n        long givenRadix = Integer.parseInt(dataStr[3]);\n\n        long aaa = 0;\n        long givenNum = 0;\n        String givenNumStr = dataStr[givenRadixNumPosi - 1];\n//        System.out.println(givenNumStr);\n//        System.out.println(givenRadixNumPosi-1);\n//        for(char e:map.keySet()){\n//            System.out.println(e+\" ==== \"+map.get(e));\n//        }\n        for (int i = givenNumStr.length() - 1; i >= 0; i--) {\n            givenNum += map.get(givenNumStr.charAt(i)) * Math.pow(givenRadix, aaa++);\n        }\n\n        int resRadixNumPosi = 0;\n        if (givenRadixNumPosi == 1) {\n            resRadixNumPosi = 1;\n        } else {\n            resRadixNumPosi = 0;\n        }\n\n        String resNumStr = dataStr[resRadixNumPosi];\n        int biggestCharInResNumStr = map.get(resNumStr.charAt(0));\n        for (int i = 0; i < resNumStr.length(); i++) {\n            if (map.get(resNumStr.charAt(i)) > biggestCharInResNumStr) {\n                biggestCharInResNumStr = map.get(resNumStr.charAt(i));\n            }\n        }\n\n\n        if(strToLong(resNumStr,biggestCharInResNumStr+1)==givenNum){\n            System.out.println(biggestCharInResNumStr+1);\n            return;\n        }\n\n//        System.out.println(Integer.parseInt(\"ab\"));\n//        System.out.println(givenNum);\n//        System.out.println(resNumStr);\n//        System.out.println(givenRadix+1);\n//        System.out.println(biggestCharInResNumStr+1);\n\n        findRadix(givenNum,resNumStr,biggestCharInResNumStr+1,givenNum+1);\n    }\n\n\n    public static void findRadix(long num,String str,long radixBegin,long radixEnd){\n        if(radixBegin>radixEnd){\n            System.out.println(\"Impossible\");\n            return;\n        }\n        if(radixBegin==radixEnd){\n            if(strToLong(str,radixBegin)==num){\n                System.out.println(radixBegin);\n                return;\n            }else{\n                System.out.println(\"Impossible\");\n                return;\n            }\n        }\n        long radixMiddle=(radixBegin+radixEnd)>>1;\n        long middleRadixNum=strToLong(str,radixMiddle);\n        if(middleRadixNum>num){\n            findRadix(num,str,radixBegin,radixMiddle);\n        }else if(middleRadixNum==num){\n            System.out.println(radixMiddle);\n            return;\n        }else{\n            findRadix(num,str,radixMiddle+1,radixEnd);\n        }\n\n\n    }\n\n    public static long strToLong(String str,long radix){\n        long res=0;\n        int tmp=0;\n        for(int i=str.length()-1;i>=0;i--){\n            res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);\n        }\n        return res;\n    }\n}\n```\n","slug":"OJ/PAT/2016-02-21-1010题-Radix-25分","published":1,"updated":"2016-10-25T09:03:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgi90035u8jr5x60qco7","content":"<p>该题未全部完成，未通过全部测例 20/25</p>\n<p>这道题目是<a href=\"http://www.patest.cn/contests/pat-a-practise\" target=\"_blank\" rel=\"external\">PAT甲级习题</a>中通过率最低的一道题，通过率只有$0.08$。我暂时也未能通过全部测例，还差4个测例。应该是边界条件未考虑充分。</p>\n<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><p>Each input file contains one test case. Each case occupies a line which contains 4 positive integers:<br><br>$N_1$ $N_2$ tag radix<br><br>Here $N_1$ and $N_2$ each has no more than 10 digits. A digit is less than its radix and is chosen from the set {0-9, a-z} where 0-9 represent the decimal numbers 0-9, and a-z represent the decimal numbers 10-35. The last number “radix” is the radix of N1 if “tag” is 1, or of N2 if “tag” is 2. <br></p>\n<p>中文大意：<br>输入4个数<br>其中第四个数表示第三个数所指的那个数$N$的进制，现在来判断另一个数$M$在哪一种进制下回合$N$相同，若存在则输出进制，否则输出”Impossible”。<br></p>\n<h2 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h2><h3 id=\"String-Convert-to-Long\"><a href=\"#String-Convert-to-Long\" class=\"headerlink\" title=\"String Convert to Long\"></a>String Convert to Long</h3><p>就是输入数据，由于数据中可能含有字母，仍存储为<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">//已知字符串和进制，算出对应的十进制数</div><div class=\"line\">public static long strToLong(String str,long radix)&#123;</div><div class=\"line\">    long res=0;</div><div class=\"line\">    int tmp=0;</div><div class=\"line\">    for(int i=str.length()-1;i&gt;=0;i--)&#123;</div><div class=\"line\">        res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);</div><div class=\"line\">    &#125;</div><div class=\"line\">    return res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"获得未知进制数中最大的字符所代表的十进制数\"><a href=\"#获得未知进制数中最大的字符所代表的十进制数\" class=\"headerlink\" title=\"获得未知进制数中最大的字符所代表的十进制数\"></a>获得未知进制数中最大的字符所代表的十进制数</h3><p>因为进制数一定要大于最大的字符，所以可以通过这一步获得进制的下限</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">String resNumStr = dataStr[resRadixNumPosi];</div><div class=\"line\">    <span class=\"comment\">//获取未知进制数中最大的字符所代表的十进制数</span></div><div class=\"line\">    <span class=\"keyword\">int</span> biggestCharInResNumStr = map.get(resNumStr.charAt(<span class=\"number\">0</span>));</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; resNumStr.length(); i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (map.get(resNumStr.charAt(i)) &gt; biggestCharInResNumStr) &#123;</div><div class=\"line\">            biggestCharInResNumStr = map.get(resNumStr.charAt(i));</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"二分查找\"><a href=\"#二分查找\" class=\"headerlink\" title=\"二分查找\"></a>二分查找</h3><p>下限即上一步所求出的数+1<br>上限即为已知进制的数</p>\n<p>退出条件:<br>    若上下限相同，检查对应两个数在该进制是否相同<br>    若下限大于上限，输出Impossible; return;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">findRadix</span><span class=\"params\">(<span class=\"keyword\">long</span> num,String str,<span class=\"keyword\">long</span> radixBegin,<span class=\"keyword\">long</span> radixEnd)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(radixBegin&gt;radixEnd)&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(radixBegin==radixEnd)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(strToLong(str,radixBegin)==num)&#123;</div><div class=\"line\">            System.out.println(radixBegin);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">long</span> radixMiddle=(radixBegin+radixEnd)&gt;&gt;<span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">long</span> middleRadixNum=strToLong(str,radixMiddle);</div><div class=\"line\">    <span class=\"keyword\">if</span>(middleRadixNum&gt;num)&#123;</div><div class=\"line\">        findRadix(num,str,radixBegin,radixMiddle);</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(middleRadixNum==num)&#123;</div><div class=\"line\">        System.out.println(radixMiddle);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        findRadix(num,str,radixMiddle+<span class=\"number\">1</span>,radixEnd);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"边界条件\"><a href=\"#边界条件\" class=\"headerlink\" title=\"边界条件\"></a>边界条件</h3><ol>\n<li>N1和N2一样时，应该输出其中最大字符所代表的数值再+1；</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> PAT;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by xgh on 2016/2/21.</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_1010_Radix_25</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> HashMap&lt;Character,Integer&gt; map=<span class=\"keyword\">new</span> HashMap&lt;Character, Integer&gt;();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</div><div class=\"line\">        String[] dataStr = (in.nextLine()).split(<span class=\"string\">\" \"</span>);</div><div class=\"line\">        <span class=\"keyword\">int</span> charRepNum = <span class=\"number\">10</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">char</span> i = <span class=\"string\">'a'</span>; i &lt;= <span class=\"string\">'z'</span>; i++) &#123;</div><div class=\"line\">            map.put(i, charRepNum++);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">9</span>; i++) &#123;</div><div class=\"line\">            map.put((<span class=\"keyword\">char</span>) (i + <span class=\"number\">48</span>), i);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> givenRadixNumPosi = Integer.parseInt(dataStr[<span class=\"number\">2</span>]);</div><div class=\"line\">        <span class=\"keyword\">long</span> givenRadix = Integer.parseInt(dataStr[<span class=\"number\">3</span>]);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">long</span> aaa = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">long</span> givenNum = <span class=\"number\">0</span>;</div><div class=\"line\">        String givenNumStr = dataStr[givenRadixNumPosi - <span class=\"number\">1</span>];</div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenNumStr);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenRadixNumPosi-1);</span></div><div class=\"line\"><span class=\"comment\">//        for(char e:map.keySet())&#123;</span></div><div class=\"line\"><span class=\"comment\">//            System.out.println(e+\" ==== \"+map.get(e));</span></div><div class=\"line\"><span class=\"comment\">//        &#125;</span></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = givenNumStr.length() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</div><div class=\"line\">            givenNum += map.get(givenNumStr.charAt(i)) * Math.pow(givenRadix, aaa++);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> resRadixNumPosi = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (givenRadixNumPosi == <span class=\"number\">1</span>) &#123;</div><div class=\"line\">            resRadixNumPosi = <span class=\"number\">1</span>;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            resRadixNumPosi = <span class=\"number\">0</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        String resNumStr = dataStr[resRadixNumPosi];</div><div class=\"line\">        <span class=\"keyword\">int</span> biggestCharInResNumStr = map.get(resNumStr.charAt(<span class=\"number\">0</span>));</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; resNumStr.length(); i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (map.get(resNumStr.charAt(i)) &gt; biggestCharInResNumStr) &#123;</div><div class=\"line\">                biggestCharInResNumStr = map.get(resNumStr.charAt(i));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span>(strToLong(resNumStr,biggestCharInResNumStr+<span class=\"number\">1</span>)==givenNum)&#123;</div><div class=\"line\">            System.out.println(biggestCharInResNumStr+<span class=\"number\">1</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//        System.out.println(Integer.parseInt(\"ab\"));</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenNum);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(resNumStr);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenRadix+1);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(biggestCharInResNumStr+1);</span></div><div class=\"line\"></div><div class=\"line\">        findRadix(givenNum,resNumStr,biggestCharInResNumStr+<span class=\"number\">1</span>,givenNum+<span class=\"number\">1</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">findRadix</span><span class=\"params\">(<span class=\"keyword\">long</span> num,String str,<span class=\"keyword\">long</span> radixBegin,<span class=\"keyword\">long</span> radixEnd)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(radixBegin&gt;radixEnd)&#123;</div><div class=\"line\">            System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(radixBegin==radixEnd)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(strToLong(str,radixBegin)==num)&#123;</div><div class=\"line\">                System.out.println(radixBegin);</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">                System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">long</span> radixMiddle=(radixBegin+radixEnd)&gt;&gt;<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">long</span> middleRadixNum=strToLong(str,radixMiddle);</div><div class=\"line\">        <span class=\"keyword\">if</span>(middleRadixNum&gt;num)&#123;</div><div class=\"line\">            findRadix(num,str,radixBegin,radixMiddle);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(middleRadixNum==num)&#123;</div><div class=\"line\">            System.out.println(radixMiddle);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            findRadix(num,str,radixMiddle+<span class=\"number\">1</span>,radixEnd);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">long</span> <span class=\"title\">strToLong</span><span class=\"params\">(String str,<span class=\"keyword\">long</span> radix)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">long</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> tmp=<span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=str.length()-<span class=\"number\">1</span>;i&gt;=<span class=\"number\">0</span>;i--)&#123;</div><div class=\"line\">            res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>该题未全部完成，未通过全部测例 20/25</p>\n<p>这道题目是<a href=\"http://www.patest.cn/contests/pat-a-practise\">PAT甲级习题</a>中通过率最低的一道题，通过率只有$0.08$。我暂时也未能通过全部测例，还差4个测例。应该是边界条件未考虑充分。</p>\n<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><p>Each input file contains one test case. Each case occupies a line which contains 4 positive integers:<br><br>$N_1$ $N_2$ tag radix<br><br>Here $N_1$ and $N_2$ each has no more than 10 digits. A digit is less than its radix and is chosen from the set {0-9, a-z} where 0-9 represent the decimal numbers 0-9, and a-z represent the decimal numbers 10-35. The last number “radix” is the radix of N1 if “tag” is 1, or of N2 if “tag” is 2. <br></p>\n<p>中文大意：<br>输入4个数<br>其中第四个数表示第三个数所指的那个数$N$的进制，现在来判断另一个数$M$在哪一种进制下回合$N$相同，若存在则输出进制，否则输出”Impossible”。<br></p>\n<h2 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h2><h3 id=\"String-Convert-to-Long\"><a href=\"#String-Convert-to-Long\" class=\"headerlink\" title=\"String Convert to Long\"></a>String Convert to Long</h3><p>就是输入数据，由于数据中可能含有字母，仍存储为<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">//已知字符串和进制，算出对应的十进制数</div><div class=\"line\">public static long strToLong(String str,long radix)&#123;</div><div class=\"line\">    long res=0;</div><div class=\"line\">    int tmp=0;</div><div class=\"line\">    for(int i=str.length()-1;i&gt;=0;i--)&#123;</div><div class=\"line\">        res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);</div><div class=\"line\">    &#125;</div><div class=\"line\">    return res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"获得未知进制数中最大的字符所代表的十进制数\"><a href=\"#获得未知进制数中最大的字符所代表的十进制数\" class=\"headerlink\" title=\"获得未知进制数中最大的字符所代表的十进制数\"></a>获得未知进制数中最大的字符所代表的十进制数</h3><p>因为进制数一定要大于最大的字符，所以可以通过这一步获得进制的下限</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">String resNumStr = dataStr[resRadixNumPosi];</div><div class=\"line\">    <span class=\"comment\">//获取未知进制数中最大的字符所代表的十进制数</span></div><div class=\"line\">    <span class=\"keyword\">int</span> biggestCharInResNumStr = map.get(resNumStr.charAt(<span class=\"number\">0</span>));</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; resNumStr.length(); i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (map.get(resNumStr.charAt(i)) &gt; biggestCharInResNumStr) &#123;</div><div class=\"line\">            biggestCharInResNumStr = map.get(resNumStr.charAt(i));</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"二分查找\"><a href=\"#二分查找\" class=\"headerlink\" title=\"二分查找\"></a>二分查找</h3><p>下限即上一步所求出的数+1<br>上限即为已知进制的数</p>\n<p>退出条件:<br>    若上下限相同，检查对应两个数在该进制是否相同<br>    若下限大于上限，输出Impossible; return;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">findRadix</span><span class=\"params\">(<span class=\"keyword\">long</span> num,String str,<span class=\"keyword\">long</span> radixBegin,<span class=\"keyword\">long</span> radixEnd)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(radixBegin&gt;radixEnd)&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(radixBegin==radixEnd)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(strToLong(str,radixBegin)==num)&#123;</div><div class=\"line\">            System.out.println(radixBegin);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">long</span> radixMiddle=(radixBegin+radixEnd)&gt;&gt;<span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">long</span> middleRadixNum=strToLong(str,radixMiddle);</div><div class=\"line\">    <span class=\"keyword\">if</span>(middleRadixNum&gt;num)&#123;</div><div class=\"line\">        findRadix(num,str,radixBegin,radixMiddle);</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(middleRadixNum==num)&#123;</div><div class=\"line\">        System.out.println(radixMiddle);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        findRadix(num,str,radixMiddle+<span class=\"number\">1</span>,radixEnd);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"边界条件\"><a href=\"#边界条件\" class=\"headerlink\" title=\"边界条件\"></a>边界条件</h3><ol>\n<li>N1和N2一样时，应该输出其中最大字符所代表的数值再+1；</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> PAT;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * Created by xgh on 2016/2/21.</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_1010_Radix_25</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> HashMap&lt;Character,Integer&gt; map=<span class=\"keyword\">new</span> HashMap&lt;Character, Integer&gt;();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</div><div class=\"line\">        String[] dataStr = (in.nextLine()).split(<span class=\"string\">\" \"</span>);</div><div class=\"line\">        <span class=\"keyword\">int</span> charRepNum = <span class=\"number\">10</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">char</span> i = <span class=\"string\">'a'</span>; i &lt;= <span class=\"string\">'z'</span>; i++) &#123;</div><div class=\"line\">            map.put(i, charRepNum++);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">9</span>; i++) &#123;</div><div class=\"line\">            map.put((<span class=\"keyword\">char</span>) (i + <span class=\"number\">48</span>), i);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> givenRadixNumPosi = Integer.parseInt(dataStr[<span class=\"number\">2</span>]);</div><div class=\"line\">        <span class=\"keyword\">long</span> givenRadix = Integer.parseInt(dataStr[<span class=\"number\">3</span>]);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">long</span> aaa = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">long</span> givenNum = <span class=\"number\">0</span>;</div><div class=\"line\">        String givenNumStr = dataStr[givenRadixNumPosi - <span class=\"number\">1</span>];</div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenNumStr);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenRadixNumPosi-1);</span></div><div class=\"line\"><span class=\"comment\">//        for(char e:map.keySet())&#123;</span></div><div class=\"line\"><span class=\"comment\">//            System.out.println(e+\" ==== \"+map.get(e));</span></div><div class=\"line\"><span class=\"comment\">//        &#125;</span></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = givenNumStr.length() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</div><div class=\"line\">            givenNum += map.get(givenNumStr.charAt(i)) * Math.pow(givenRadix, aaa++);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> resRadixNumPosi = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (givenRadixNumPosi == <span class=\"number\">1</span>) &#123;</div><div class=\"line\">            resRadixNumPosi = <span class=\"number\">1</span>;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            resRadixNumPosi = <span class=\"number\">0</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        String resNumStr = dataStr[resRadixNumPosi];</div><div class=\"line\">        <span class=\"keyword\">int</span> biggestCharInResNumStr = map.get(resNumStr.charAt(<span class=\"number\">0</span>));</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; resNumStr.length(); i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (map.get(resNumStr.charAt(i)) &gt; biggestCharInResNumStr) &#123;</div><div class=\"line\">                biggestCharInResNumStr = map.get(resNumStr.charAt(i));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span>(strToLong(resNumStr,biggestCharInResNumStr+<span class=\"number\">1</span>)==givenNum)&#123;</div><div class=\"line\">            System.out.println(biggestCharInResNumStr+<span class=\"number\">1</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//        System.out.println(Integer.parseInt(\"ab\"));</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenNum);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(resNumStr);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(givenRadix+1);</span></div><div class=\"line\"><span class=\"comment\">//        System.out.println(biggestCharInResNumStr+1);</span></div><div class=\"line\"></div><div class=\"line\">        findRadix(givenNum,resNumStr,biggestCharInResNumStr+<span class=\"number\">1</span>,givenNum+<span class=\"number\">1</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">findRadix</span><span class=\"params\">(<span class=\"keyword\">long</span> num,String str,<span class=\"keyword\">long</span> radixBegin,<span class=\"keyword\">long</span> radixEnd)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(radixBegin&gt;radixEnd)&#123;</div><div class=\"line\">            System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(radixBegin==radixEnd)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(strToLong(str,radixBegin)==num)&#123;</div><div class=\"line\">                System.out.println(radixBegin);</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">                System.out.println(<span class=\"string\">\"Impossible\"</span>);</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">long</span> radixMiddle=(radixBegin+radixEnd)&gt;&gt;<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">long</span> middleRadixNum=strToLong(str,radixMiddle);</div><div class=\"line\">        <span class=\"keyword\">if</span>(middleRadixNum&gt;num)&#123;</div><div class=\"line\">            findRadix(num,str,radixBegin,radixMiddle);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(middleRadixNum==num)&#123;</div><div class=\"line\">            System.out.println(radixMiddle);</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            findRadix(num,str,radixMiddle+<span class=\"number\">1</span>,radixEnd);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">long</span> <span class=\"title\">strToLong</span><span class=\"params\">(String str,<span class=\"keyword\">long</span> radix)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">long</span> res=<span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> tmp=<span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=str.length()-<span class=\"number\">1</span>;i&gt;=<span class=\"number\">0</span>;i--)&#123;</div><div class=\"line\">            res+=map.get(str.charAt(i))*Math.pow(radix,tmp++);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-09-17T16:00:00.000Z","title":"RecyclerView","keywords":null,"description":"如何使用RecyclerView","toc":true,"_content":"\n## RecyclerView 设置布局格式\n```java\nmRecyclerView = (RecyclerView) v.findViewById(R.id.main_rv);\n//类似ListView显示用\nmRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\n//类似GridView显示\nmRecyclerView.setLayoutManager(new GridLayoutManager(getActivity(), 3));\n\n```\n## RecyclerView 添加适配器 以及设置item点击监听\n\n```java\nMainFragment.java\n\nmRecyclerViewAdapter = new RecyclerViewAdapter(getActivity(), mItems, false);\nmRecyclerView.setAdapter(mRecyclerViewAdapter)\n\nmRecyclerViewAdapter.setOnItemClickListener(new RecyclerViewAdapter.OnItemClickListenerCustom() {\n            @Override\n            public void onItemClick(String id, String title) {\n                Log.i(LogKeys.MAIN_FRAGMENT, \"item is clicked \");\n                Intent intent = new Intent(getActivity(), MovieDetailActivity.class);\n                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_ID, id);\n                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_MOVIE_NAME, title);\n                startActivity(intent);\n                Log.i(LogKeys.MAIN_FRAGMENT, \"startactivity\");\n            }\n        });\n```\n\n```java\npublic class RecyclerViewAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {\n    private final Context mContext;\n    private List<MainItem> mData;\n    private OnItemClickListenerCustom mCallback;\n    private boolean mIsComingMovie;\n    private int mTotalCount;\n\n\n    public interface OnItemClickListenerCustom {\n        void onItemClick(String id,String title);\n    }\n\n    public RecyclerViewAdapter_Main(Context context, List<MainItem> data,\n                          boolean isComingMovie) {\n\n        this.mContext = context;\n        this.mData = data;\n        this.mIsComingMovie=isComingMovie;\n    }\n\n    public void refresh(ArrayList<MainItem> data){\n        mData.addAll(data);\n        notifyDataSetChanged();\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view=LayoutInflater.from(mContext)\n                                .inflate(R.layout.item_movie_main,parent,false);\n        return new ItemViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {\n        ((ItemViewHolder)holder).update();\n    }\n\n    @Override\n    public int getItemCount() {\n        return mData.size();\n    }\n\n    public void setOnItemClickListener(OnItemClickListenerCustom listener){\n        this.mCallback=listener;\n    }\n\n\n    class ItemViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n        TextView textTitle;\n        MainItem mMainItem;\n\n        public ItemViewHolder(View itemView) {\n            super(itemView);\n            //初始化控件\n            itemView.setOnClickListener(this);\n        }\n\n        public void update() {\n            //填充控件\n        }\n\n\n        @Override\n        public void onClick(View v) {\n            if(mCallback!=null){\n                mCallback.onItemClick(mMainItem.getMovieId(),mMainItem.getTitle());\n            }\n        }\n    }\n}\n\n```\n\n## RecyclerView上滑加载\n\n要使FetchItemTask顺序执行, 否则当下滑触发loadMoreData时,会出现多个线程, 若这几个线程同时\n进行,会导致数据重复加载, 这些Task顺序执行, 只需要在doInBackground执行时\n检查star<mRecyclerViewAdapter.getStart()\n若true, 则说明该线程为重复线程 return null\n否则, 执行之后的步骤\n\n```java\nMainFragmentBase.java\nmRecyclerView.addOnScrollListener(new RecyclerView.OnScrollListener()\n{\n    int lastVisibleItem;\n    @Override\n    public void onScrollStateChanged(RecyclerView recyclerView,\n                                     int newState) {\n        super.onScrollStateChanged(recyclerView, newState);\n        if (newState == SCROLL_STATE_IDLE\n                && lastVisibleItem + 1 >= mRecyclerViewAdapter.getItemCount()\n                && mRecyclerViewAdapter.getItemCount() < mRecyclerViewAdapter.getTotalDataCount()) {\n            loadMoreData(mRecyclerViewAdapter.getStart());\n        }\n    }\n\n    @Override\n    public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\n        super.onScrolled(recyclerView, dx, dy);\n        LinearLayoutManager layoutManager = (LinearLayoutManager) mRecyclerView.getLayoutManager();\n        lastVisibleItem = layoutManager.findLastVisibleItemPosition();\n\n    }\n});\n\nprotected abstract void loadMoreData(int start);\n\n\nMainFragment.java extentds MainFragmentBase.java\n\n\n\n@Override\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    new FetchItemTask(0).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);\n}\n\n@Override\nprotected void loadMoreData(int start) {\n    new FetchItemTask(start).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);\n}\n\nprivate class FetchItemTask extends AsyncTask<Void, Void, ArrayList<MainItem>> {\n    private int start=0;\n\n    public FetchItemTask(int s){\n        start=s;\n    }\n\n\n    @Override\n    protected ArrayList<MainItem> doInBackground(Void... params) {\n        if(start<mRecyclerViewAdapter.getStart()){\n            return null\n        }\n        DoubanFetchrMain df=new DoubanFetchrMain(0,start);\n        mRecyclerViewAdapter.setTotalCount(df.getTotalCount());\n        return df.fetchItems_SubjectInTheaters();\n    }\n\n    @Override\n    protected void onPostExecute(ArrayList<MainItem> galleryItems){\n        mItems = galleryItems;\n        if(mItems==null){\n            return;\n        }\n        mRecyclerViewAdapter.addMoreData(mItems,start);\n\n    }\n\n}\n```\n\n## 注意点\n\n点击图片进入电影详细页面时, 如果在详细页面图片未加载时返回, 应用会crash.<br>\n应该是此时ImageView已经被销毁了, 所以就造成NullPointerException.\n\n官方说已经解决这个问题, 但是下面这写法还是会crash.\n\n```java\nGlide.with(getActivity())\n     .load(url)\n     .diskCacheStrategy(DiskCacheStrategy.ALL)\n     .centerCrop()\n     .into(imageMovie);\n```\n\n更改为\n\n```java\nonCreate(...){\nmRequestManager=Glide.with(getActivity());\n}\n\n...\nmRequestManager\n           .load(url)\n           .diskCacheStrategy(DiskCacheStrategy.ALL)\n           .centerCrop()\n           .into(imageMovie);\n```\n\n这样就不会出问题.\n","source":"_posts/android/UI相关/2016-09-18-RecyclerView.md","raw":"---\nauthor: ivyxjc\ndate: 2016-09-18\ntitle: RecyclerView\ncategory: Android\ntags: [android,android_UI,android_RecyclerView]\nkeywords:\ndescription: 如何使用RecyclerView\ntoc: true\n---\n\n## RecyclerView 设置布局格式\n```java\nmRecyclerView = (RecyclerView) v.findViewById(R.id.main_rv);\n//类似ListView显示用\nmRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\n//类似GridView显示\nmRecyclerView.setLayoutManager(new GridLayoutManager(getActivity(), 3));\n\n```\n## RecyclerView 添加适配器 以及设置item点击监听\n\n```java\nMainFragment.java\n\nmRecyclerViewAdapter = new RecyclerViewAdapter(getActivity(), mItems, false);\nmRecyclerView.setAdapter(mRecyclerViewAdapter)\n\nmRecyclerViewAdapter.setOnItemClickListener(new RecyclerViewAdapter.OnItemClickListenerCustom() {\n            @Override\n            public void onItemClick(String id, String title) {\n                Log.i(LogKeys.MAIN_FRAGMENT, \"item is clicked \");\n                Intent intent = new Intent(getActivity(), MovieDetailActivity.class);\n                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_ID, id);\n                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_MOVIE_NAME, title);\n                startActivity(intent);\n                Log.i(LogKeys.MAIN_FRAGMENT, \"startactivity\");\n            }\n        });\n```\n\n```java\npublic class RecyclerViewAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {\n    private final Context mContext;\n    private List<MainItem> mData;\n    private OnItemClickListenerCustom mCallback;\n    private boolean mIsComingMovie;\n    private int mTotalCount;\n\n\n    public interface OnItemClickListenerCustom {\n        void onItemClick(String id,String title);\n    }\n\n    public RecyclerViewAdapter_Main(Context context, List<MainItem> data,\n                          boolean isComingMovie) {\n\n        this.mContext = context;\n        this.mData = data;\n        this.mIsComingMovie=isComingMovie;\n    }\n\n    public void refresh(ArrayList<MainItem> data){\n        mData.addAll(data);\n        notifyDataSetChanged();\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view=LayoutInflater.from(mContext)\n                                .inflate(R.layout.item_movie_main,parent,false);\n        return new ItemViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {\n        ((ItemViewHolder)holder).update();\n    }\n\n    @Override\n    public int getItemCount() {\n        return mData.size();\n    }\n\n    public void setOnItemClickListener(OnItemClickListenerCustom listener){\n        this.mCallback=listener;\n    }\n\n\n    class ItemViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n        TextView textTitle;\n        MainItem mMainItem;\n\n        public ItemViewHolder(View itemView) {\n            super(itemView);\n            //初始化控件\n            itemView.setOnClickListener(this);\n        }\n\n        public void update() {\n            //填充控件\n        }\n\n\n        @Override\n        public void onClick(View v) {\n            if(mCallback!=null){\n                mCallback.onItemClick(mMainItem.getMovieId(),mMainItem.getTitle());\n            }\n        }\n    }\n}\n\n```\n\n## RecyclerView上滑加载\n\n要使FetchItemTask顺序执行, 否则当下滑触发loadMoreData时,会出现多个线程, 若这几个线程同时\n进行,会导致数据重复加载, 这些Task顺序执行, 只需要在doInBackground执行时\n检查star<mRecyclerViewAdapter.getStart()\n若true, 则说明该线程为重复线程 return null\n否则, 执行之后的步骤\n\n```java\nMainFragmentBase.java\nmRecyclerView.addOnScrollListener(new RecyclerView.OnScrollListener()\n{\n    int lastVisibleItem;\n    @Override\n    public void onScrollStateChanged(RecyclerView recyclerView,\n                                     int newState) {\n        super.onScrollStateChanged(recyclerView, newState);\n        if (newState == SCROLL_STATE_IDLE\n                && lastVisibleItem + 1 >= mRecyclerViewAdapter.getItemCount()\n                && mRecyclerViewAdapter.getItemCount() < mRecyclerViewAdapter.getTotalDataCount()) {\n            loadMoreData(mRecyclerViewAdapter.getStart());\n        }\n    }\n\n    @Override\n    public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\n        super.onScrolled(recyclerView, dx, dy);\n        LinearLayoutManager layoutManager = (LinearLayoutManager) mRecyclerView.getLayoutManager();\n        lastVisibleItem = layoutManager.findLastVisibleItemPosition();\n\n    }\n});\n\nprotected abstract void loadMoreData(int start);\n\n\nMainFragment.java extentds MainFragmentBase.java\n\n\n\n@Override\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    new FetchItemTask(0).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);\n}\n\n@Override\nprotected void loadMoreData(int start) {\n    new FetchItemTask(start).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);\n}\n\nprivate class FetchItemTask extends AsyncTask<Void, Void, ArrayList<MainItem>> {\n    private int start=0;\n\n    public FetchItemTask(int s){\n        start=s;\n    }\n\n\n    @Override\n    protected ArrayList<MainItem> doInBackground(Void... params) {\n        if(start<mRecyclerViewAdapter.getStart()){\n            return null\n        }\n        DoubanFetchrMain df=new DoubanFetchrMain(0,start);\n        mRecyclerViewAdapter.setTotalCount(df.getTotalCount());\n        return df.fetchItems_SubjectInTheaters();\n    }\n\n    @Override\n    protected void onPostExecute(ArrayList<MainItem> galleryItems){\n        mItems = galleryItems;\n        if(mItems==null){\n            return;\n        }\n        mRecyclerViewAdapter.addMoreData(mItems,start);\n\n    }\n\n}\n```\n\n## 注意点\n\n点击图片进入电影详细页面时, 如果在详细页面图片未加载时返回, 应用会crash.<br>\n应该是此时ImageView已经被销毁了, 所以就造成NullPointerException.\n\n官方说已经解决这个问题, 但是下面这写法还是会crash.\n\n```java\nGlide.with(getActivity())\n     .load(url)\n     .diskCacheStrategy(DiskCacheStrategy.ALL)\n     .centerCrop()\n     .into(imageMovie);\n```\n\n更改为\n\n```java\nonCreate(...){\nmRequestManager=Glide.with(getActivity());\n}\n\n...\nmRequestManager\n           .load(url)\n           .diskCacheStrategy(DiskCacheStrategy.ALL)\n           .centerCrop()\n           .into(imageMovie);\n```\n\n这样就不会出问题.\n","slug":"android/UI相关/2016-09-18-RecyclerView","published":1,"updated":"2016-10-26T11:26:51.793Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgia0038u8jre30rh2r3","content":"<h2 id=\"RecyclerView-设置布局格式\"><a href=\"#RecyclerView-设置布局格式\" class=\"headerlink\" title=\"RecyclerView 设置布局格式\"></a>RecyclerView 设置布局格式</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mRecyclerView = (RecyclerView) v.findViewById(R.id.main_rv);</div><div class=\"line\"><span class=\"comment\">//类似ListView显示用</span></div><div class=\"line\">mRecyclerView.setLayoutManager(<span class=\"keyword\">new</span> LinearLayoutManager(getActivity()));</div><div class=\"line\"><span class=\"comment\">//类似GridView显示</span></div><div class=\"line\">mRecyclerView.setLayoutManager(<span class=\"keyword\">new</span> GridLayoutManager(getActivity(), <span class=\"number\">3</span>));</div></pre></td></tr></table></figure>\n<h2 id=\"RecyclerView-添加适配器-以及设置item点击监听\"><a href=\"#RecyclerView-添加适配器-以及设置item点击监听\" class=\"headerlink\" title=\"RecyclerView 添加适配器 以及设置item点击监听\"></a>RecyclerView 添加适配器 以及设置item点击监听</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainFragment.java</div><div class=\"line\"></div><div class=\"line\">mRecyclerViewAdapter = <span class=\"keyword\">new</span> RecyclerViewAdapter(getActivity(), mItems, <span class=\"keyword\">false</span>);</div><div class=\"line\">mRecyclerView.setAdapter(mRecyclerViewAdapter)</div><div class=\"line\"></div><div class=\"line\">mRecyclerViewAdapter.setOnItemClickListener(<span class=\"keyword\">new</span> RecyclerViewAdapter.OnItemClickListenerCustom() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(String id, String title)</span> </span>&#123;</div><div class=\"line\">                Log.i(LogKeys.MAIN_FRAGMENT, <span class=\"string\">\"item is clicked \"</span>);</div><div class=\"line\">                Intent intent = <span class=\"keyword\">new</span> Intent(getActivity(), MovieDetailActivity.class);</div><div class=\"line\">                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_ID, id);</div><div class=\"line\">                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_MOVIE_NAME, title);</div><div class=\"line\">                startActivity(intent);</div><div class=\"line\">                Log.i(LogKeys.MAIN_FRAGMENT, <span class=\"string\">\"startactivity\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecyclerViewAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span>&gt; </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Context mContext;</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;MainItem&gt; mData;</div><div class=\"line\">    <span class=\"keyword\">private</span> OnItemClickListenerCustom mCallback;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> mIsComingMovie;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mTotalCount;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnItemClickListenerCustom</span> </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(String id,String title)</span></span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RecyclerViewAdapter_Main</span><span class=\"params\">(Context context, List&lt;MainItem&gt; data,</span></span></div><div class=\"line\">                          <span class=\"keyword\">boolean</span> isComingMovie) &#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">this</span>.mContext = context;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mData = data;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mIsComingMovie=isComingMovie;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refresh</span><span class=\"params\">(ArrayList&lt;MainItem&gt; data)</span></span>&#123;</div><div class=\"line\">        mData.addAll(data);</div><div class=\"line\">        notifyDataSetChanged();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"keyword\">public</span> RecyclerView.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent, <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</div><div class=\"line\">        View view=LayoutInflater.from(mContext)</div><div class=\"line\">                                .inflate(R.layout.item_movie_main,parent,<span class=\"keyword\">false</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ItemViewHolder(view);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(RecyclerView.ViewHolder holder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</div><div class=\"line\">        ((ItemViewHolder)holder).update();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mData.size();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOnItemClickListener</span><span class=\"params\">(OnItemClickListenerCustom listener)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mCallback=listener;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ItemViewHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span> </span>&#123;</div><div class=\"line\">        TextView textTitle;</div><div class=\"line\">        MainItem mMainItem;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ItemViewHolder</span><span class=\"params\">(View itemView)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(itemView);</div><div class=\"line\">            <span class=\"comment\">//初始化控件</span></div><div class=\"line\">            itemView.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">            <span class=\"comment\">//填充控件</span></div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(mCallback!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                mCallback.onItemClick(mMainItem.getMovieId(),mMainItem.getTitle());</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"RecyclerView上滑加载\"><a href=\"#RecyclerView上滑加载\" class=\"headerlink\" title=\"RecyclerView上滑加载\"></a>RecyclerView上滑加载</h2><p>要使FetchItemTask顺序执行, 否则当下滑触发loadMoreData时,会出现多个线程, 若这几个线程同时<br>进行,会导致数据重复加载, 这些Task顺序执行, 只需要在doInBackground执行时<br>检查star&lt;mRecyclerViewAdapter.getStart()<br>若true, 则说明该线程为重复线程 return null<br>否则, 执行之后的步骤</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainFragmentBase.java</div><div class=\"line\">mRecyclerView.addOnScrollListener(<span class=\"keyword\">new</span> RecyclerView.OnScrollListener()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> lastVisibleItem;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onScrollStateChanged</span><span class=\"params\">(RecyclerView recyclerView,</span></span></div><div class=\"line\">                                     <span class=\"keyword\">int</span> newState) &#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onScrollStateChanged(recyclerView, newState);</div><div class=\"line\">        <span class=\"keyword\">if</span> (newState == SCROLL_STATE_IDLE</div><div class=\"line\">                &amp;&amp; lastVisibleItem + <span class=\"number\">1</span> &gt;= mRecyclerViewAdapter.getItemCount()</div><div class=\"line\">                &amp;&amp; mRecyclerViewAdapter.getItemCount() &lt; mRecyclerViewAdapter.getTotalDataCount()) &#123;</div><div class=\"line\">            loadMoreData(mRecyclerViewAdapter.getStart());</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onScrolled</span><span class=\"params\">(RecyclerView recyclerView, <span class=\"keyword\">int</span> dx, <span class=\"keyword\">int</span> dy)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onScrolled(recyclerView, dx, dy);</div><div class=\"line\">        LinearLayoutManager layoutManager = (LinearLayoutManager) mRecyclerView.getLayoutManager();</div><div class=\"line\">        lastVisibleItem = layoutManager.findLastVisibleItemPosition();</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">loadMoreData</span><span class=\"params\">(<span class=\"keyword\">int</span> start)</span></span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">MainFragment.java extentds MainFragmentBase.java</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> FetchItemTask(<span class=\"number\">0</span>).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">loadMoreData</span><span class=\"params\">(<span class=\"keyword\">int</span> start)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">new</span> FetchItemTask(start).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FetchItemTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTask</span>&lt;<span class=\"title\">Void</span>, <span class=\"title\">Void</span>, <span class=\"title\">ArrayList</span>&lt;<span class=\"title\">MainItem</span>&gt;&gt; </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> start=<span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FetchItemTask</span><span class=\"params\">(<span class=\"keyword\">int</span> s)</span></span>&#123;</div><div class=\"line\">        start=s;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> ArrayList&lt;MainItem&gt; <span class=\"title\">doInBackground</span><span class=\"params\">(Void... params)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(start&lt;mRecyclerViewAdapter.getStart())&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        DoubanFetchrMain df=<span class=\"keyword\">new</span> DoubanFetchrMain(<span class=\"number\">0</span>,start);</div><div class=\"line\">        mRecyclerViewAdapter.setTotalCount(df.getTotalCount());</div><div class=\"line\">        <span class=\"keyword\">return</span> df.fetchItems_SubjectInTheaters();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onPostExecute</span><span class=\"params\">(ArrayList&lt;MainItem&gt; galleryItems)</span></span>&#123;</div><div class=\"line\">        mItems = galleryItems;</div><div class=\"line\">        <span class=\"keyword\">if</span>(mItems==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        mRecyclerViewAdapter.addMoreData(mItems,start);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h2><p>点击图片进入电影详细页面时, 如果在详细页面图片未加载时返回, 应用会crash.<br><br>应该是此时ImageView已经被销毁了, 所以就造成NullPointerException.</p>\n<p>官方说已经解决这个问题, 但是下面这写法还是会crash.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Glide.with(getActivity())</div><div class=\"line\">     .load(url)</div><div class=\"line\">     .diskCacheStrategy(DiskCacheStrategy.ALL)</div><div class=\"line\">     .centerCrop()</div><div class=\"line\">     .into(imageMovie);</div></pre></td></tr></table></figure>\n<p>更改为</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">onCreate(...)&#123;</div><div class=\"line\">mRequestManager=Glide.with(getActivity());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\">mRequestManager</div><div class=\"line\">           .load(url)</div><div class=\"line\">           .diskCacheStrategy(DiskCacheStrategy.ALL)</div><div class=\"line\">           .centerCrop()</div><div class=\"line\">           .into(imageMovie);</div></pre></td></tr></table></figure>\n<p>这样就不会出问题.</p>\n","excerpt":"","more":"<h2 id=\"RecyclerView-设置布局格式\"><a href=\"#RecyclerView-设置布局格式\" class=\"headerlink\" title=\"RecyclerView 设置布局格式\"></a>RecyclerView 设置布局格式</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mRecyclerView = (RecyclerView) v.findViewById(R.id.main_rv);</div><div class=\"line\"><span class=\"comment\">//类似ListView显示用</span></div><div class=\"line\">mRecyclerView.setLayoutManager(<span class=\"keyword\">new</span> LinearLayoutManager(getActivity()));</div><div class=\"line\"><span class=\"comment\">//类似GridView显示</span></div><div class=\"line\">mRecyclerView.setLayoutManager(<span class=\"keyword\">new</span> GridLayoutManager(getActivity(), <span class=\"number\">3</span>));</div></pre></td></tr></table></figure>\n<h2 id=\"RecyclerView-添加适配器-以及设置item点击监听\"><a href=\"#RecyclerView-添加适配器-以及设置item点击监听\" class=\"headerlink\" title=\"RecyclerView 添加适配器 以及设置item点击监听\"></a>RecyclerView 添加适配器 以及设置item点击监听</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainFragment.java</div><div class=\"line\"></div><div class=\"line\">mRecyclerViewAdapter = <span class=\"keyword\">new</span> RecyclerViewAdapter(getActivity(), mItems, <span class=\"keyword\">false</span>);</div><div class=\"line\">mRecyclerView.setAdapter(mRecyclerViewAdapter)</div><div class=\"line\"></div><div class=\"line\">mRecyclerViewAdapter.setOnItemClickListener(<span class=\"keyword\">new</span> RecyclerViewAdapter.OnItemClickListenerCustom() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(String id, String title)</span> </span>&#123;</div><div class=\"line\">                Log.i(LogKeys.MAIN_FRAGMENT, <span class=\"string\">\"item is clicked \"</span>);</div><div class=\"line\">                Intent intent = <span class=\"keyword\">new</span> Intent(getActivity(), MovieDetailActivity.class);</div><div class=\"line\">                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_ID, id);</div><div class=\"line\">                intent.putExtra(TransferKeys.MAIN_MOVIE_DETAIL_MOVIE_NAME, title);</div><div class=\"line\">                startActivity(intent);</div><div class=\"line\">                Log.i(LogKeys.MAIN_FRAGMENT, <span class=\"string\">\"startactivity\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecyclerViewAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span>&gt; </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Context mContext;</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;MainItem&gt; mData;</div><div class=\"line\">    <span class=\"keyword\">private</span> OnItemClickListenerCustom mCallback;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> mIsComingMovie;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mTotalCount;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnItemClickListenerCustom</span> </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(String id,String title)</span></span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RecyclerViewAdapter_Main</span><span class=\"params\">(Context context, List&lt;MainItem&gt; data,</div><div class=\"line\">                          <span class=\"keyword\">boolean</span> isComingMovie)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">this</span>.mContext = context;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mData = data;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mIsComingMovie=isComingMovie;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refresh</span><span class=\"params\">(ArrayList&lt;MainItem&gt; data)</span></span>&#123;</div><div class=\"line\">        mData.addAll(data);</div><div class=\"line\">        notifyDataSetChanged();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"keyword\">public</span> RecyclerView.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent, <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</div><div class=\"line\">        View view=LayoutInflater.from(mContext)</div><div class=\"line\">                                .inflate(R.layout.item_movie_main,parent,<span class=\"keyword\">false</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ItemViewHolder(view);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(RecyclerView.ViewHolder holder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</div><div class=\"line\">        ((ItemViewHolder)holder).update();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mData.size();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOnItemClickListener</span><span class=\"params\">(OnItemClickListenerCustom listener)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mCallback=listener;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ItemViewHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span> </span>&#123;</div><div class=\"line\">        TextView textTitle;</div><div class=\"line\">        MainItem mMainItem;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ItemViewHolder</span><span class=\"params\">(View itemView)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(itemView);</div><div class=\"line\">            <span class=\"comment\">//初始化控件</span></div><div class=\"line\">            itemView.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">            <span class=\"comment\">//填充控件</span></div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(mCallback!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                mCallback.onItemClick(mMainItem.getMovieId(),mMainItem.getTitle());</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"RecyclerView上滑加载\"><a href=\"#RecyclerView上滑加载\" class=\"headerlink\" title=\"RecyclerView上滑加载\"></a>RecyclerView上滑加载</h2><p>要使FetchItemTask顺序执行, 否则当下滑触发loadMoreData时,会出现多个线程, 若这几个线程同时<br>进行,会导致数据重复加载, 这些Task顺序执行, 只需要在doInBackground执行时<br>检查star&lt;mRecyclerViewAdapter.getStart()<br>若true, 则说明该线程为重复线程 return null<br>否则, 执行之后的步骤</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainFragmentBase.java</div><div class=\"line\">mRecyclerView.addOnScrollListener(<span class=\"keyword\">new</span> RecyclerView.OnScrollListener()</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> lastVisibleItem;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onScrollStateChanged</span><span class=\"params\">(RecyclerView recyclerView,</div><div class=\"line\">                                     <span class=\"keyword\">int</span> newState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onScrollStateChanged(recyclerView, newState);</div><div class=\"line\">        <span class=\"keyword\">if</span> (newState == SCROLL_STATE_IDLE</div><div class=\"line\">                &amp;&amp; lastVisibleItem + <span class=\"number\">1</span> &gt;= mRecyclerViewAdapter.getItemCount()</div><div class=\"line\">                &amp;&amp; mRecyclerViewAdapter.getItemCount() &lt; mRecyclerViewAdapter.getTotalDataCount()) &#123;</div><div class=\"line\">            loadMoreData(mRecyclerViewAdapter.getStart());</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onScrolled</span><span class=\"params\">(RecyclerView recyclerView, <span class=\"keyword\">int</span> dx, <span class=\"keyword\">int</span> dy)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onScrolled(recyclerView, dx, dy);</div><div class=\"line\">        LinearLayoutManager layoutManager = (LinearLayoutManager) mRecyclerView.getLayoutManager();</div><div class=\"line\">        lastVisibleItem = layoutManager.findLastVisibleItemPosition();</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">loadMoreData</span><span class=\"params\">(<span class=\"keyword\">int</span> start)</span></span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">MainFragment.java extentds MainFragmentBase.java</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> FetchItemTask(<span class=\"number\">0</span>).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">loadMoreData</span><span class=\"params\">(<span class=\"keyword\">int</span> start)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">new</span> FetchItemTask(start).executeOnExecutor(AsyncTask.SERIAL_EXECUTOR);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FetchItemTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTask</span>&lt;<span class=\"title\">Void</span>, <span class=\"title\">Void</span>, <span class=\"title\">ArrayList</span>&lt;<span class=\"title\">MainItem</span>&gt;&gt; </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> start=<span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FetchItemTask</span><span class=\"params\">(<span class=\"keyword\">int</span> s)</span></span>&#123;</div><div class=\"line\">        start=s;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> ArrayList&lt;MainItem&gt; <span class=\"title\">doInBackground</span><span class=\"params\">(Void... params)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(start&lt;mRecyclerViewAdapter.getStart())&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        DoubanFetchrMain df=<span class=\"keyword\">new</span> DoubanFetchrMain(<span class=\"number\">0</span>,start);</div><div class=\"line\">        mRecyclerViewAdapter.setTotalCount(df.getTotalCount());</div><div class=\"line\">        <span class=\"keyword\">return</span> df.fetchItems_SubjectInTheaters();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onPostExecute</span><span class=\"params\">(ArrayList&lt;MainItem&gt; galleryItems)</span></span>&#123;</div><div class=\"line\">        mItems = galleryItems;</div><div class=\"line\">        <span class=\"keyword\">if</span>(mItems==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        mRecyclerViewAdapter.addMoreData(mItems,start);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h2><p>点击图片进入电影详细页面时, 如果在详细页面图片未加载时返回, 应用会crash.<br><br>应该是此时ImageView已经被销毁了, 所以就造成NullPointerException.</p>\n<p>官方说已经解决这个问题, 但是下面这写法还是会crash.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Glide.with(getActivity())</div><div class=\"line\">     .load(url)</div><div class=\"line\">     .diskCacheStrategy(DiskCacheStrategy.ALL)</div><div class=\"line\">     .centerCrop()</div><div class=\"line\">     .into(imageMovie);</div></pre></td></tr></table></figure>\n<p>更改为</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">onCreate(...)&#123;</div><div class=\"line\">mRequestManager=Glide.with(getActivity());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\">mRequestManager</div><div class=\"line\">           .load(url)</div><div class=\"line\">           .diskCacheStrategy(DiskCacheStrategy.ALL)</div><div class=\"line\">           .centerCrop()</div><div class=\"line\">           .into(imageMovie);</div></pre></td></tr></table></figure>\n<p>这样就不会出问题.</p>\n"},{"author":"ivyxjc","date":"2016-03-09T16:00:00.000Z","title":"adb常用命令","keywords":null,"description":"adb中常用的命令","_content":"\n## 设备相关\n**adb devices**:查看连接的设备<br>\n\n**adb -s  serial number shell** :serial number及上命令得到的设备编号\n\n## 录制屏幕相关\n<<<<<<< HEAD\n**adb screerecord /sdcard/test.mp4**：录制手机实况视频到test.mp4，按**ctrl+c**结束，否则录制320s。\n\n**adb screerecord --size 1280*720 /sdcard/test.mp4** :制定视频大小\n\n** adb shell screenrecord --bit-rate 6000000 /sdcard/test.mp4** :制定视频码率\n\n**adb shell screenrecord --rotate /sdcard/test.mp4** :旋转\n\n**adb pull /sdcard/test.mp4 E:/** :导出视频\n=======\n**adb screenrecord /sdcard/test.mp4**：录制手机实况视频到test.mp4，按**ctrl+c**结束，否则录制320s。\n","source":"_posts/android/adb/2016-03-10-adb-console.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-10\ntitle: adb常用命令\ncategory: Android\ntags: [android,android_adb]\nkeywords:\ndescription: adb中常用的命令\n---\n\n## 设备相关\n**adb devices**:查看连接的设备<br>\n\n**adb -s  serial number shell** :serial number及上命令得到的设备编号\n\n## 录制屏幕相关\n<<<<<<< HEAD\n**adb screerecord /sdcard/test.mp4**：录制手机实况视频到test.mp4，按**ctrl+c**结束，否则录制320s。\n\n**adb screerecord --size 1280*720 /sdcard/test.mp4** :制定视频大小\n\n** adb shell screenrecord --bit-rate 6000000 /sdcard/test.mp4** :制定视频码率\n\n**adb shell screenrecord --rotate /sdcard/test.mp4** :旋转\n\n**adb pull /sdcard/test.mp4 E:/** :导出视频\n=======\n**adb screenrecord /sdcard/test.mp4**：录制手机实况视频到test.mp4，按**ctrl+c**结束，否则录制320s。\n","slug":"android/adb/2016-03-10-adb-console","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgic003au8jrkmvgrx5t","content":"<h2 id=\"设备相关\"><a href=\"#设备相关\" class=\"headerlink\" title=\"设备相关\"></a>设备相关</h2><p><strong>adb devices</strong>:查看连接的设备<br></p>\n<p><strong>adb -s  serial number shell</strong> :serial number及上命令得到的设备编号</p>\n<h2 id=\"录制屏幕相关\"><a href=\"#录制屏幕相关\" class=\"headerlink\" title=\"录制屏幕相关\"></a>录制屏幕相关</h2><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br><strong>adb screerecord /sdcard/test.mp4</strong>：录制手机实况视频到test.mp4，按<strong>ctrl+c</strong>结束，否则录制320s。</p>\n<p><strong>adb screerecord –size 1280*720 /sdcard/test.mp4</strong> :制定视频大小</p>\n<p><strong> adb shell screenrecord –bit-rate 6000000 /sdcard/test.mp4</strong> :制定视频码率</p>\n<p><strong>adb shell screenrecord –rotate /sdcard/test.mp4</strong> :旋转</p>\n<h1 id=\"adb-pull-sdcard-test-mp4-E-导出视频\"><a href=\"#adb-pull-sdcard-test-mp4-E-导出视频\" class=\"headerlink\" title=\"adb pull /sdcard/test.mp4 E:/ :导出视频\"></a><strong>adb pull /sdcard/test.mp4 E:/</strong> :导出视频</h1><p><strong>adb screenrecord /sdcard/test.mp4</strong>：录制手机实况视频到test.mp4，按<strong>ctrl+c</strong>结束，否则录制320s。</p>\n","excerpt":"","more":"<h2 id=\"设备相关\"><a href=\"#设备相关\" class=\"headerlink\" title=\"设备相关\"></a>设备相关</h2><p><strong>adb devices</strong>:查看连接的设备<br></p>\n<p><strong>adb -s  serial number shell</strong> :serial number及上命令得到的设备编号</p>\n<h2 id=\"录制屏幕相关\"><a href=\"#录制屏幕相关\" class=\"headerlink\" title=\"录制屏幕相关\"></a>录制屏幕相关</h2><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br><strong>adb screerecord /sdcard/test.mp4</strong>：录制手机实况视频到test.mp4，按<strong>ctrl+c</strong>结束，否则录制320s。</p>\n<p><strong>adb screerecord –size 1280*720 /sdcard/test.mp4</strong> :制定视频大小</p>\n<p><strong> adb shell screenrecord –bit-rate 6000000 /sdcard/test.mp4</strong> :制定视频码率</p>\n<p><strong>adb shell screenrecord –rotate /sdcard/test.mp4</strong> :旋转</p>\n<h1 id=\"adb-pull-sdcard-test-mp4-E-导出视频\"><a href=\"#adb-pull-sdcard-test-mp4-E-导出视频\" class=\"headerlink\" title=\"adb pull /sdcard/test.mp4 E:/ :导出视频\"></a><strong>adb pull /sdcard/test.mp4 E:/</strong> :导出视频</h1><p><strong>adb screenrecord /sdcard/test.mp4</strong>：录制手机实况视频到test.mp4，按<strong>ctrl+c</strong>结束，否则录制320s。</p>\n"},{"date":"2016-06-01T16:00:00.000Z","title":"Activity的生命周期","keywords":null,"description":null,"_content":"\nAndroid中Activity的生命周期. <br>\n`onCreate()`-->`onStart()`-->`onResume()`-->`onPause()`-->`onPause()`-->`onDestory()`\n<!--more-->\n\n## 生命周期\n1. `onCreate()``\n2. `onStart()`\n3. `onResume()`\n4. `onPause()`\n5. `onPause()`\n6. `onDestory()`\n\n\n### `onCreate()`的作用\n\n1. 实例化组件并将组件放在屏幕上\n2. 引用已经实例化的组件\n3. 为组件设置监听器以处理用户交互\n4. 访问外部模型数据\n\n## 翻转屏幕对生命周期的影响\n翻转屏幕会导致`Activity`先会被销毁再重新创建，若不加以处理会导致很多意外的问题。顺序为`onPause()`,`onStop()`,`onDestory()`,`onCreate()`,`onStart()`,`onResume()`\n","source":"_posts/android/lifecycle/2016-06-02-lifecycle-basic.md","raw":"---\ndate: 2016-06-02\ntitle: Activity的生命周期\ncategory: Android\ntags: [android,android_lifecycle]\nkeywords:\ndescription:\n---\n\nAndroid中Activity的生命周期. <br>\n`onCreate()`-->`onStart()`-->`onResume()`-->`onPause()`-->`onPause()`-->`onDestory()`\n<!--more-->\n\n## 生命周期\n1. `onCreate()``\n2. `onStart()`\n3. `onResume()`\n4. `onPause()`\n5. `onPause()`\n6. `onDestory()`\n\n\n### `onCreate()`的作用\n\n1. 实例化组件并将组件放在屏幕上\n2. 引用已经实例化的组件\n3. 为组件设置监听器以处理用户交互\n4. 访问外部模型数据\n\n## 翻转屏幕对生命周期的影响\n翻转屏幕会导致`Activity`先会被销毁再重新创建，若不加以处理会导致很多意外的问题。顺序为`onPause()`,`onStop()`,`onDestory()`,`onCreate()`,`onStart()`,`onResume()`\n","slug":"android/lifecycle/2016-06-02-lifecycle-basic","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgif003du8jrmhwwf06y","content":"<p>Android中Activity的生命周期. <br><br><code>onCreate()</code>–&gt;<code>onStart()</code>–&gt;<code>onResume()</code>–&gt;<code>onPause()</code>–&gt;<code>onPause()</code>–&gt;<code>onDestory()</code><br><a id=\"more\"></a></p>\n<h2 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h2><ol>\n<li>`onCreate()``</li>\n<li><code>onStart()</code></li>\n<li><code>onResume()</code></li>\n<li><code>onPause()</code></li>\n<li><code>onPause()</code></li>\n<li><code>onDestory()</code></li>\n</ol>\n<h3 id=\"onCreate-的作用\"><a href=\"#onCreate-的作用\" class=\"headerlink\" title=\"onCreate()的作用\"></a><code>onCreate()</code>的作用</h3><ol>\n<li>实例化组件并将组件放在屏幕上</li>\n<li>引用已经实例化的组件</li>\n<li>为组件设置监听器以处理用户交互</li>\n<li>访问外部模型数据</li>\n</ol>\n<h2 id=\"翻转屏幕对生命周期的影响\"><a href=\"#翻转屏幕对生命周期的影响\" class=\"headerlink\" title=\"翻转屏幕对生命周期的影响\"></a>翻转屏幕对生命周期的影响</h2><p>翻转屏幕会导致<code>Activity</code>先会被销毁再重新创建，若不加以处理会导致很多意外的问题。顺序为<code>onPause()</code>,<code>onStop()</code>,<code>onDestory()</code>,<code>onCreate()</code>,<code>onStart()</code>,<code>onResume()</code></p>\n","excerpt":"<p>Android中Activity的生命周期. <br><br><code>onCreate()</code>–&gt;<code>onStart()</code>–&gt;<code>onResume()</code>–&gt;<code>onPause()</code>–&gt;<code>onPause()</code>–&gt;<code>onDestory()</code><br>","more":"</p>\n<h2 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h2><ol>\n<li>`onCreate()``</li>\n<li><code>onStart()</code></li>\n<li><code>onResume()</code></li>\n<li><code>onPause()</code></li>\n<li><code>onPause()</code></li>\n<li><code>onDestory()</code></li>\n</ol>\n<h3 id=\"onCreate-的作用\"><a href=\"#onCreate-的作用\" class=\"headerlink\" title=\"onCreate()的作用\"></a><code>onCreate()</code>的作用</h3><ol>\n<li>实例化组件并将组件放在屏幕上</li>\n<li>引用已经实例化的组件</li>\n<li>为组件设置监听器以处理用户交互</li>\n<li>访问外部模型数据</li>\n</ol>\n<h2 id=\"翻转屏幕对生命周期的影响\"><a href=\"#翻转屏幕对生命周期的影响\" class=\"headerlink\" title=\"翻转屏幕对生命周期的影响\"></a>翻转屏幕对生命周期的影响</h2><p>翻转屏幕会导致<code>Activity</code>先会被销毁再重新创建，若不加以处理会导致很多意外的问题。顺序为<code>onPause()</code>,<code>onStop()</code>,<code>onDestory()</code>,<code>onCreate()</code>,<code>onStart()</code>,<code>onResume()</code></p>"},{"author":"ivyxjc","date":"2016-03-19T16:00:00.000Z","title":"广播机制初步","keywords":null,"description":"广播分为有序广播( Ordered broadcasts)和标准广播( Normal broadcasts). 注册方式还分为动态注册和静态注册.","_content":"\n## 分类\n\n标准广播(Normal broadcasts)是一种完全异步执行的广播，在广播发出后，所有的广播接收器都在同一时刻受到这条广播消息，没有先后顺序。效率高，无法被截断。\n\n有序广播(Ordered broadcasts)是一种同步执行的广播，同一时刻，只有一个广播接收器能受到这条广播消息，当这个广播接收器中的逻辑执行完毕后，广播才会继续传递。\n有先后顺序，优先级高的会先收到广播消息，并且前面的广播接收器可以截断正在传递的广播。\n\n接受广播：广播接收器(Broadcast Receiver)\n\n## 系统广播\n\n\n## 注册广播\n\n动态注册的广播接收器一定要取消注册，一般是在`onDestroy()`方法中通过调用`unregisterReceiver()`方法来实现的。\n\n### 动态注册\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    private IntentFilter mIntentFilter;\n    // Whether there is a Wi-Fi connection.\n    private static boolean wifiConnected = false;\n    // Whether there is a mobile connection.\n    private static boolean mobileConnected = false;\n\n    private TextView mWifiTextView;\n    private TextView mMobileTextView;\n\n    private NetworkChangeReceiver mNetworkChangeReceiver;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        mWifiTextView=(TextView)findViewById(R.id.wifi);\n        mMobileTextView=(TextView)findViewById(R.id.mobile_network);\n        /*\n        注册广播接收器\n        当网络发生变化时，系统发出的是一条值为\"android.net.conn.CONNECTIVITY_CHANGE\"的广播消息\n         */\n        mIntentFilter=new IntentFilter();\n        mIntentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n        mNetworkChangeReceiver=new NetworkChangeReceiver();\n        registerReceiver(mNetworkChangeReceiver,mIntentFilter);\n\n    }\n\n\n    //注册的广播接收都需要解除注册\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        unregisterReceiver(mNetworkChangeReceiver);\n    }\n\n    class NetworkChangeReceiver extends BroadcastReceiver{\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n//            Toast.makeText(context,\"network change\",Toast.LENGTH_SHORT).show();\n            ConnectivityManager connMgr =\n                    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();\n\n            if (activeInfo != null && activeInfo.isConnected()) {\n                wifiConnected = activeInfo.getType() == ConnectivityManager.TYPE_WIFI;\n                mobileConnected = activeInfo.getType() == ConnectivityManager.TYPE_MOBILE;\n                if(wifiConnected) {\n//                    Toast.makeText(context,\"wifi is connected\",Toast.LENGTH_LONG).show();\n                    mWifiTextView.setText(\"Wifi is connected\");\n                    mMobileTextView.setText(\"mobile network is not connected\");\n                } else if (mobileConnected) {\n//                    Toast.makeText(context,\"mobile network is connected\",Toast.LENGTH_LONG).show();\n                    mWifiTextView.setText(\"Wifi is not connected\");\n                    mMobileTextView.setText(\"mobile network is connected\");\n                }\n            } else {\n//                Toast.makeText(context,\"no network\",Toast.LENGTH_LONG).show();\n                mWifiTextView.setText(\"Wifi is not connected\");\n                mMobileTextView.setText(\"mobile network is not connected\");\n            }\n        }\n    }\n}\n```\n\n另外还需在增加以下两个权限，否则会在打开的时候崩溃。\n\n```xml\n<uses-permission android:name=\"android.permission.INTERNET\" />\n<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n```\n\n#### 效果\n\n![](http://oezmbgg4j.bkt.clouddn.com/broadcast_network_connectivity.gif)\n\n\n### 静态注册\n\n```java\npublic class BootCompleteReceiver extends BroadcastReceiver{\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Toast.makeText(context,\"Boot Complete\",Toast.LENGTH_LONG).show();\n    }\n}\n```\n\n在AndroidManifest.xml中需要添加下列语句：\n\n```xml\n<user-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\"/>\n......\n<application\n\t...>\n\t.....\n\n    <receiver android:name=\".BootCompleteReceiver\">\n        <intent-filter>\n            <action android:name=\"android.intent.action.BOOT_COMPLETED\"/>\n        </intent-filter>\n    </receiver>\n\n</application>\n```\n\n\n## 自定义广播\n写一个自定义的广播接收器\n\n```java\npublic class MyBroadcastReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Toast.makeText(context,\"received in MyBroadcastReceiver\", Toast.LENGTH_LONG).show();\n    }\n}\n```\n发出一个广播\n\n```java\nIntent intent=new Intent(\"com.jc.broadcast_1.MY_BROADCAST\");\nsendBroadcast(intent);\n```\n\n在一个应用程序中发出的广播，也是可以被其它应用程序所接收到的。\n\n## 发送有序广播\n\n```java\nsendOrderedBroadcast(Intent intent,String receiverPermission);\n```\n\n这样可以截断广播，\n在`onReceiver(...)`方法里调用`abortBroadcast()`方法，就表示将这条广播截断。后面的广播就无法再接收到这条广播。\n\n## 本地广播\n\n只能在应用程序的内部进行传递，并且广播接收器也只能接受来自本应用发出的广播。\n\n\n```java\nmLocalBroadcastManager=LocalBroadcastManager.getInstance(this);\n\nbutton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        Intent intent=new Intent(\"com.jc.broadcast_2.LOCAL_BROADCAST\");\n        mLocalBroadcastManager.sendBroadcast(intent);\n    }\n});\n\nmIntentFilter=new IntentFilter();\nmIntentFilter.addAction(\"com.jc.broadcast_2.LOCAL_BROADCAST\");\nmLocalReceiver=new LocalReceiver();\nmLocalBroadcastManager.registerReceiver(mLocalReceiver,mIntentFilter);\n```\n","source":"_posts/android/四大组件/2016-03-20-broadcast-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-20\ntitle: 广播机制初步\ncategory: Android\ntags: [android,android_broadcast]\nkeywords:\ndescription: 广播分为有序广播( Ordered broadcasts)和标准广播( Normal broadcasts). 注册方式还分为动态注册和静态注册.\n---\n\n## 分类\n\n标准广播(Normal broadcasts)是一种完全异步执行的广播，在广播发出后，所有的广播接收器都在同一时刻受到这条广播消息，没有先后顺序。效率高，无法被截断。\n\n有序广播(Ordered broadcasts)是一种同步执行的广播，同一时刻，只有一个广播接收器能受到这条广播消息，当这个广播接收器中的逻辑执行完毕后，广播才会继续传递。\n有先后顺序，优先级高的会先收到广播消息，并且前面的广播接收器可以截断正在传递的广播。\n\n接受广播：广播接收器(Broadcast Receiver)\n\n## 系统广播\n\n\n## 注册广播\n\n动态注册的广播接收器一定要取消注册，一般是在`onDestroy()`方法中通过调用`unregisterReceiver()`方法来实现的。\n\n### 动态注册\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    private IntentFilter mIntentFilter;\n    // Whether there is a Wi-Fi connection.\n    private static boolean wifiConnected = false;\n    // Whether there is a mobile connection.\n    private static boolean mobileConnected = false;\n\n    private TextView mWifiTextView;\n    private TextView mMobileTextView;\n\n    private NetworkChangeReceiver mNetworkChangeReceiver;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        mWifiTextView=(TextView)findViewById(R.id.wifi);\n        mMobileTextView=(TextView)findViewById(R.id.mobile_network);\n        /*\n        注册广播接收器\n        当网络发生变化时，系统发出的是一条值为\"android.net.conn.CONNECTIVITY_CHANGE\"的广播消息\n         */\n        mIntentFilter=new IntentFilter();\n        mIntentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n        mNetworkChangeReceiver=new NetworkChangeReceiver();\n        registerReceiver(mNetworkChangeReceiver,mIntentFilter);\n\n    }\n\n\n    //注册的广播接收都需要解除注册\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        unregisterReceiver(mNetworkChangeReceiver);\n    }\n\n    class NetworkChangeReceiver extends BroadcastReceiver{\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n//            Toast.makeText(context,\"network change\",Toast.LENGTH_SHORT).show();\n            ConnectivityManager connMgr =\n                    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();\n\n            if (activeInfo != null && activeInfo.isConnected()) {\n                wifiConnected = activeInfo.getType() == ConnectivityManager.TYPE_WIFI;\n                mobileConnected = activeInfo.getType() == ConnectivityManager.TYPE_MOBILE;\n                if(wifiConnected) {\n//                    Toast.makeText(context,\"wifi is connected\",Toast.LENGTH_LONG).show();\n                    mWifiTextView.setText(\"Wifi is connected\");\n                    mMobileTextView.setText(\"mobile network is not connected\");\n                } else if (mobileConnected) {\n//                    Toast.makeText(context,\"mobile network is connected\",Toast.LENGTH_LONG).show();\n                    mWifiTextView.setText(\"Wifi is not connected\");\n                    mMobileTextView.setText(\"mobile network is connected\");\n                }\n            } else {\n//                Toast.makeText(context,\"no network\",Toast.LENGTH_LONG).show();\n                mWifiTextView.setText(\"Wifi is not connected\");\n                mMobileTextView.setText(\"mobile network is not connected\");\n            }\n        }\n    }\n}\n```\n\n另外还需在增加以下两个权限，否则会在打开的时候崩溃。\n\n```xml\n<uses-permission android:name=\"android.permission.INTERNET\" />\n<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n```\n\n#### 效果\n\n![](http://oezmbgg4j.bkt.clouddn.com/broadcast_network_connectivity.gif)\n\n\n### 静态注册\n\n```java\npublic class BootCompleteReceiver extends BroadcastReceiver{\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Toast.makeText(context,\"Boot Complete\",Toast.LENGTH_LONG).show();\n    }\n}\n```\n\n在AndroidManifest.xml中需要添加下列语句：\n\n```xml\n<user-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\"/>\n......\n<application\n\t...>\n\t.....\n\n    <receiver android:name=\".BootCompleteReceiver\">\n        <intent-filter>\n            <action android:name=\"android.intent.action.BOOT_COMPLETED\"/>\n        </intent-filter>\n    </receiver>\n\n</application>\n```\n\n\n## 自定义广播\n写一个自定义的广播接收器\n\n```java\npublic class MyBroadcastReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Toast.makeText(context,\"received in MyBroadcastReceiver\", Toast.LENGTH_LONG).show();\n    }\n}\n```\n发出一个广播\n\n```java\nIntent intent=new Intent(\"com.jc.broadcast_1.MY_BROADCAST\");\nsendBroadcast(intent);\n```\n\n在一个应用程序中发出的广播，也是可以被其它应用程序所接收到的。\n\n## 发送有序广播\n\n```java\nsendOrderedBroadcast(Intent intent,String receiverPermission);\n```\n\n这样可以截断广播，\n在`onReceiver(...)`方法里调用`abortBroadcast()`方法，就表示将这条广播截断。后面的广播就无法再接收到这条广播。\n\n## 本地广播\n\n只能在应用程序的内部进行传递，并且广播接收器也只能接受来自本应用发出的广播。\n\n\n```java\nmLocalBroadcastManager=LocalBroadcastManager.getInstance(this);\n\nbutton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        Intent intent=new Intent(\"com.jc.broadcast_2.LOCAL_BROADCAST\");\n        mLocalBroadcastManager.sendBroadcast(intent);\n    }\n});\n\nmIntentFilter=new IntentFilter();\nmIntentFilter.addAction(\"com.jc.broadcast_2.LOCAL_BROADCAST\");\nmLocalReceiver=new LocalReceiver();\nmLocalBroadcastManager.registerReceiver(mLocalReceiver,mIntentFilter);\n```\n","slug":"android/四大组件/2016-03-20-broadcast-basic","published":1,"updated":"2016-10-25T09:03:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgig003gu8jr6iw1ltql","content":"<h2 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h2><p>标准广播(Normal broadcasts)是一种完全异步执行的广播，在广播发出后，所有的广播接收器都在同一时刻受到这条广播消息，没有先后顺序。效率高，无法被截断。</p>\n<p>有序广播(Ordered broadcasts)是一种同步执行的广播，同一时刻，只有一个广播接收器能受到这条广播消息，当这个广播接收器中的逻辑执行完毕后，广播才会继续传递。<br>有先后顺序，优先级高的会先收到广播消息，并且前面的广播接收器可以截断正在传递的广播。</p>\n<p>接受广播：广播接收器(Broadcast Receiver)</p>\n<h2 id=\"系统广播\"><a href=\"#系统广播\" class=\"headerlink\" title=\"系统广播\"></a>系统广播</h2><h2 id=\"注册广播\"><a href=\"#注册广播\" class=\"headerlink\" title=\"注册广播\"></a>注册广播</h2><p>动态注册的广播接收器一定要取消注册，一般是在<code>onDestroy()</code>方法中通过调用<code>unregisterReceiver()</code>方法来实现的。</p>\n<h3 id=\"动态注册\"><a href=\"#动态注册\" class=\"headerlink\" title=\"动态注册\"></a>动态注册</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> IntentFilter mIntentFilter;</div><div class=\"line\">    <span class=\"comment\">// Whether there is a Wi-Fi connection.</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> wifiConnected = <span class=\"keyword\">false</span>;</div><div class=\"line\">    <span class=\"comment\">// Whether there is a mobile connection.</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> mobileConnected = <span class=\"keyword\">false</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> TextView mWifiTextView;</div><div class=\"line\">    <span class=\"keyword\">private</span> TextView mMobileTextView;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> NetworkChangeReceiver mNetworkChangeReceiver;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\"></div><div class=\"line\">        mWifiTextView=(TextView)findViewById(R.id.wifi);</div><div class=\"line\">        mMobileTextView=(TextView)findViewById(R.id.mobile_network);</div><div class=\"line\">        <span class=\"comment\">/*</span></div><div class=\"line\">        注册广播接收器</div><div class=\"line\">        当网络发生变化时，系统发出的是一条值为\"android.net.conn.CONNECTIVITY_CHANGE\"的广播消息</div><div class=\"line\">         */</div><div class=\"line\">        mIntentFilter=<span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">        mIntentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);</div><div class=\"line\">        mNetworkChangeReceiver=<span class=\"keyword\">new</span> NetworkChangeReceiver();</div><div class=\"line\">        registerReceiver(mNetworkChangeReceiver,mIntentFilter);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//注册的广播接收都需要解除注册</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        unregisterReceiver(mNetworkChangeReceiver);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NetworkChangeReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\"><span class=\"comment\">//            Toast.makeText(context,\"network change\",Toast.LENGTH_SHORT).show();</span></div><div class=\"line\">            ConnectivityManager connMgr =</div><div class=\"line\">                    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);</div><div class=\"line\">            NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">if</span> (activeInfo != <span class=\"keyword\">null</span> &amp;&amp; activeInfo.isConnected()) &#123;</div><div class=\"line\">                wifiConnected = activeInfo.getType() == ConnectivityManager.TYPE_WIFI;</div><div class=\"line\">                mobileConnected = activeInfo.getType() == ConnectivityManager.TYPE_MOBILE;</div><div class=\"line\">                <span class=\"keyword\">if</span>(wifiConnected) &#123;</div><div class=\"line\"><span class=\"comment\">//                    Toast.makeText(context,\"wifi is connected\",Toast.LENGTH_LONG).show();</span></div><div class=\"line\">                    mWifiTextView.setText(<span class=\"string\">\"Wifi is connected\"</span>);</div><div class=\"line\">                    mMobileTextView.setText(<span class=\"string\">\"mobile network is not connected\"</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mobileConnected) &#123;</div><div class=\"line\"><span class=\"comment\">//                    Toast.makeText(context,\"mobile network is connected\",Toast.LENGTH_LONG).show();</span></div><div class=\"line\">                    mWifiTextView.setText(<span class=\"string\">\"Wifi is not connected\"</span>);</div><div class=\"line\">                    mMobileTextView.setText(<span class=\"string\">\"mobile network is connected\"</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\"><span class=\"comment\">//                Toast.makeText(context,\"no network\",Toast.LENGTH_LONG).show();</span></div><div class=\"line\">                mWifiTextView.setText(<span class=\"string\">\"Wifi is not connected\"</span>);</div><div class=\"line\">                mMobileTextView.setText(<span class=\"string\">\"mobile network is not connected\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>另外还需在增加以下两个权限，否则会在打开的时候崩溃。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.INTERNET\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.ACCESS_NETWORK_STATE\"</span> /&gt;</span></div></pre></td></tr></table></figure>\n<h4 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h4><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/broadcast_network_connectivity.gif\" alt=\"\"></p>\n<h3 id=\"静态注册\"><a href=\"#静态注册\" class=\"headerlink\" title=\"静态注册\"></a>静态注册</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BootCompleteReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">        Toast.makeText(context,<span class=\"string\">\"Boot Complete\"</span>,Toast.LENGTH_LONG).show();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在AndroidManifest.xml中需要添加下列语句：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">user-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.RECEIVE_BOOT_COMPLETED\"</span>/&gt;</span></div><div class=\"line\">......</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">application</span></span></div><div class=\"line\">\t<span class=\"attr\">...</span>&gt;</div><div class=\"line\">\t.....</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">receiver</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\".BootCompleteReceiver\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">intent-filter</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.intent.action.BOOT_COMPLETED\"</span>/&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">intent-filter</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">receiver</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">application</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"自定义广播\"><a href=\"#自定义广播\" class=\"headerlink\" title=\"自定义广播\"></a>自定义广播</h2><p>写一个自定义的广播接收器</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBroadcastReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">        Toast.makeText(context,<span class=\"string\">\"received in MyBroadcastReceiver\"</span>, Toast.LENGTH_LONG).show();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>发出一个广播</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"string\">\"com.jc.broadcast_1.MY_BROADCAST\"</span>);</div><div class=\"line\">sendBroadcast(intent);</div></pre></td></tr></table></figure>\n<p>在一个应用程序中发出的广播，也是可以被其它应用程序所接收到的。</p>\n<h2 id=\"发送有序广播\"><a href=\"#发送有序广播\" class=\"headerlink\" title=\"发送有序广播\"></a>发送有序广播</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sendOrderedBroadcast(Intent intent,String receiverPermission);</div></pre></td></tr></table></figure>\n<p>这样可以截断广播，<br>在<code>onReceiver(...)</code>方法里调用<code>abortBroadcast()</code>方法，就表示将这条广播截断。后面的广播就无法再接收到这条广播。</p>\n<h2 id=\"本地广播\"><a href=\"#本地广播\" class=\"headerlink\" title=\"本地广播\"></a>本地广播</h2><p>只能在应用程序的内部进行传递，并且广播接收器也只能接受来自本应用发出的广播。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">mLocalBroadcastManager=LocalBroadcastManager.getInstance(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\">button.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">        Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"string\">\"com.jc.broadcast_2.LOCAL_BROADCAST\"</span>);</div><div class=\"line\">        mLocalBroadcastManager.sendBroadcast(intent);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">mIntentFilter=<span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">mIntentFilter.addAction(<span class=\"string\">\"com.jc.broadcast_2.LOCAL_BROADCAST\"</span>);</div><div class=\"line\">mLocalReceiver=<span class=\"keyword\">new</span> LocalReceiver();</div><div class=\"line\">mLocalBroadcastManager.registerReceiver(mLocalReceiver,mIntentFilter);</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h2><p>标准广播(Normal broadcasts)是一种完全异步执行的广播，在广播发出后，所有的广播接收器都在同一时刻受到这条广播消息，没有先后顺序。效率高，无法被截断。</p>\n<p>有序广播(Ordered broadcasts)是一种同步执行的广播，同一时刻，只有一个广播接收器能受到这条广播消息，当这个广播接收器中的逻辑执行完毕后，广播才会继续传递。<br>有先后顺序，优先级高的会先收到广播消息，并且前面的广播接收器可以截断正在传递的广播。</p>\n<p>接受广播：广播接收器(Broadcast Receiver)</p>\n<h2 id=\"系统广播\"><a href=\"#系统广播\" class=\"headerlink\" title=\"系统广播\"></a>系统广播</h2><h2 id=\"注册广播\"><a href=\"#注册广播\" class=\"headerlink\" title=\"注册广播\"></a>注册广播</h2><p>动态注册的广播接收器一定要取消注册，一般是在<code>onDestroy()</code>方法中通过调用<code>unregisterReceiver()</code>方法来实现的。</p>\n<h3 id=\"动态注册\"><a href=\"#动态注册\" class=\"headerlink\" title=\"动态注册\"></a>动态注册</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> IntentFilter mIntentFilter;</div><div class=\"line\">    <span class=\"comment\">// Whether there is a Wi-Fi connection.</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> wifiConnected = <span class=\"keyword\">false</span>;</div><div class=\"line\">    <span class=\"comment\">// Whether there is a mobile connection.</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> mobileConnected = <span class=\"keyword\">false</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> TextView mWifiTextView;</div><div class=\"line\">    <span class=\"keyword\">private</span> TextView mMobileTextView;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> NetworkChangeReceiver mNetworkChangeReceiver;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\"></div><div class=\"line\">        mWifiTextView=(TextView)findViewById(R.id.wifi);</div><div class=\"line\">        mMobileTextView=(TextView)findViewById(R.id.mobile_network);</div><div class=\"line\">        <span class=\"comment\">/*</div><div class=\"line\">        注册广播接收器</div><div class=\"line\">        当网络发生变化时，系统发出的是一条值为\"android.net.conn.CONNECTIVITY_CHANGE\"的广播消息</div><div class=\"line\">         */</span></div><div class=\"line\">        mIntentFilter=<span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">        mIntentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);</div><div class=\"line\">        mNetworkChangeReceiver=<span class=\"keyword\">new</span> NetworkChangeReceiver();</div><div class=\"line\">        registerReceiver(mNetworkChangeReceiver,mIntentFilter);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//注册的广播接收都需要解除注册</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        unregisterReceiver(mNetworkChangeReceiver);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NetworkChangeReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\"><span class=\"comment\">//            Toast.makeText(context,\"network change\",Toast.LENGTH_SHORT).show();</span></div><div class=\"line\">            ConnectivityManager connMgr =</div><div class=\"line\">                    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);</div><div class=\"line\">            NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">if</span> (activeInfo != <span class=\"keyword\">null</span> &amp;&amp; activeInfo.isConnected()) &#123;</div><div class=\"line\">                wifiConnected = activeInfo.getType() == ConnectivityManager.TYPE_WIFI;</div><div class=\"line\">                mobileConnected = activeInfo.getType() == ConnectivityManager.TYPE_MOBILE;</div><div class=\"line\">                <span class=\"keyword\">if</span>(wifiConnected) &#123;</div><div class=\"line\"><span class=\"comment\">//                    Toast.makeText(context,\"wifi is connected\",Toast.LENGTH_LONG).show();</span></div><div class=\"line\">                    mWifiTextView.setText(<span class=\"string\">\"Wifi is connected\"</span>);</div><div class=\"line\">                    mMobileTextView.setText(<span class=\"string\">\"mobile network is not connected\"</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mobileConnected) &#123;</div><div class=\"line\"><span class=\"comment\">//                    Toast.makeText(context,\"mobile network is connected\",Toast.LENGTH_LONG).show();</span></div><div class=\"line\">                    mWifiTextView.setText(<span class=\"string\">\"Wifi is not connected\"</span>);</div><div class=\"line\">                    mMobileTextView.setText(<span class=\"string\">\"mobile network is connected\"</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\"><span class=\"comment\">//                Toast.makeText(context,\"no network\",Toast.LENGTH_LONG).show();</span></div><div class=\"line\">                mWifiTextView.setText(<span class=\"string\">\"Wifi is not connected\"</span>);</div><div class=\"line\">                mMobileTextView.setText(<span class=\"string\">\"mobile network is not connected\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>另外还需在增加以下两个权限，否则会在打开的时候崩溃。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.INTERNET\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.ACCESS_NETWORK_STATE\"</span> /&gt;</span></div></pre></td></tr></table></figure>\n<h4 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h4><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/broadcast_network_connectivity.gif\" alt=\"\"></p>\n<h3 id=\"静态注册\"><a href=\"#静态注册\" class=\"headerlink\" title=\"静态注册\"></a>静态注册</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BootCompleteReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">        Toast.makeText(context,<span class=\"string\">\"Boot Complete\"</span>,Toast.LENGTH_LONG).show();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在AndroidManifest.xml中需要添加下列语句：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">user-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.RECEIVE_BOOT_COMPLETED\"</span>/&gt;</span></div><div class=\"line\">......</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">application</span></div><div class=\"line\">\t<span class=\"attr\">...</span>&gt;</span></div><div class=\"line\">\t.....</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">receiver</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\".BootCompleteReceiver\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">intent-filter</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.intent.action.BOOT_COMPLETED\"</span>/&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">intent-filter</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">receiver</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">application</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"自定义广播\"><a href=\"#自定义广播\" class=\"headerlink\" title=\"自定义广播\"></a>自定义广播</h2><p>写一个自定义的广播接收器</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBroadcastReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">        Toast.makeText(context,<span class=\"string\">\"received in MyBroadcastReceiver\"</span>, Toast.LENGTH_LONG).show();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>发出一个广播</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"string\">\"com.jc.broadcast_1.MY_BROADCAST\"</span>);</div><div class=\"line\">sendBroadcast(intent);</div></pre></td></tr></table></figure>\n<p>在一个应用程序中发出的广播，也是可以被其它应用程序所接收到的。</p>\n<h2 id=\"发送有序广播\"><a href=\"#发送有序广播\" class=\"headerlink\" title=\"发送有序广播\"></a>发送有序广播</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sendOrderedBroadcast(Intent intent,String receiverPermission);</div></pre></td></tr></table></figure>\n<p>这样可以截断广播，<br>在<code>onReceiver(...)</code>方法里调用<code>abortBroadcast()</code>方法，就表示将这条广播截断。后面的广播就无法再接收到这条广播。</p>\n<h2 id=\"本地广播\"><a href=\"#本地广播\" class=\"headerlink\" title=\"本地广播\"></a>本地广播</h2><p>只能在应用程序的内部进行传递，并且广播接收器也只能接受来自本应用发出的广播。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">mLocalBroadcastManager=LocalBroadcastManager.getInstance(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\">button.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">        Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"string\">\"com.jc.broadcast_2.LOCAL_BROADCAST\"</span>);</div><div class=\"line\">        mLocalBroadcastManager.sendBroadcast(intent);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">mIntentFilter=<span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">mIntentFilter.addAction(<span class=\"string\">\"com.jc.broadcast_2.LOCAL_BROADCAST\"</span>);</div><div class=\"line\">mLocalReceiver=<span class=\"keyword\">new</span> LocalReceiver();</div><div class=\"line\">mLocalBroadcastManager.registerReceiver(mLocalReceiver,mIntentFilter);</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-05-05T16:00:00.000Z","title":"Service","keywords":null,"description":"服务的生命周期以及如何调用服务.","_content":"\n## 服务的生命周期\n使用startService()<br>\n![](http://oezmbgg4j.bkt.clouddn.com/servicelifecycle.png)\n\n一旦调用`startService()`相应的服务就会启动, 并回调`onStartCommand()`方法. 如果该服务没有创建过, 那么`onCreate()`会先于`onStartCommand()`方法执行. 服务启动之后会一直保持运行状态,知道`stopService()`或`stopSelf()`方法被调用. 即使度从此调用`startService()`方法, 每个服务只会存在一个实例,所以只需要调用一次`stopService()`或`stopSelf()`方法, 服务就会停止下来.\n\n\n另一种方法，使用bindService()<br>\n![](http://oezmbgg4j.bkt.clouddn.com/servicelifecycle2.png)\n\n这会先回调服务中的`onBind()`方法,若该服务之前没有被创建过,那么`onCreate()`方法会先于`onBind()`方法执行.\n\n\n注意: 若一个服务既`startService()`又`bindService()`, 那么只要`stopService()`和`unbindService()`都被调用后,服务的`onDestroy()`方法才会执行.\n\n\n只能解绑定一次,不可以多次解绑定.\n\n\n## 两种方式的区别\n\nStart方式特点:\n1.服务与启动源没有任何关系\n2.无法得到服务对象\n\nBind方式特点:\n1.通过`IBinder`接口实例,返回一个`ServiceConnnection`对象给启动源.\n2.通过`ServiceConnection`对象的相关方法可以得到`Service`对象.\n","source":"_posts/android/四大组件/2016-05-06-service-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-05-06\ntitle: Service\ncategory: Android\ntags: [android , android_service]\nkeywords:\ndescription: 服务的生命周期以及如何调用服务.\n---\n\n## 服务的生命周期\n使用startService()<br>\n![](http://oezmbgg4j.bkt.clouddn.com/servicelifecycle.png)\n\n一旦调用`startService()`相应的服务就会启动, 并回调`onStartCommand()`方法. 如果该服务没有创建过, 那么`onCreate()`会先于`onStartCommand()`方法执行. 服务启动之后会一直保持运行状态,知道`stopService()`或`stopSelf()`方法被调用. 即使度从此调用`startService()`方法, 每个服务只会存在一个实例,所以只需要调用一次`stopService()`或`stopSelf()`方法, 服务就会停止下来.\n\n\n另一种方法，使用bindService()<br>\n![](http://oezmbgg4j.bkt.clouddn.com/servicelifecycle2.png)\n\n这会先回调服务中的`onBind()`方法,若该服务之前没有被创建过,那么`onCreate()`方法会先于`onBind()`方法执行.\n\n\n注意: 若一个服务既`startService()`又`bindService()`, 那么只要`stopService()`和`unbindService()`都被调用后,服务的`onDestroy()`方法才会执行.\n\n\n只能解绑定一次,不可以多次解绑定.\n\n\n## 两种方式的区别\n\nStart方式特点:\n1.服务与启动源没有任何关系\n2.无法得到服务对象\n\nBind方式特点:\n1.通过`IBinder`接口实例,返回一个`ServiceConnnection`对象给启动源.\n2.通过`ServiceConnection`对象的相关方法可以得到`Service`对象.\n","slug":"android/四大组件/2016-05-06-service-basic","published":1,"updated":"2016-10-25T09:03:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgii003ku8jr0dztof9t","content":"<h2 id=\"服务的生命周期\"><a href=\"#服务的生命周期\" class=\"headerlink\" title=\"服务的生命周期\"></a>服务的生命周期</h2><p>使用startService()<br><br><img src=\"http://oezmbgg4j.bkt.clouddn.com/servicelifecycle.png\" alt=\"\"></p>\n<p>一旦调用<code>startService()</code>相应的服务就会启动, 并回调<code>onStartCommand()</code>方法. 如果该服务没有创建过, 那么<code>onCreate()</code>会先于<code>onStartCommand()</code>方法执行. 服务启动之后会一直保持运行状态,知道<code>stopService()</code>或<code>stopSelf()</code>方法被调用. 即使度从此调用<code>startService()</code>方法, 每个服务只会存在一个实例,所以只需要调用一次<code>stopService()</code>或<code>stopSelf()</code>方法, 服务就会停止下来.</p>\n<p>另一种方法，使用bindService()<br><br><img src=\"http://oezmbgg4j.bkt.clouddn.com/servicelifecycle2.png\" alt=\"\"></p>\n<p>这会先回调服务中的<code>onBind()</code>方法,若该服务之前没有被创建过,那么<code>onCreate()</code>方法会先于<code>onBind()</code>方法执行.</p>\n<p>注意: 若一个服务既<code>startService()</code>又<code>bindService()</code>, 那么只要<code>stopService()</code>和<code>unbindService()</code>都被调用后,服务的<code>onDestroy()</code>方法才会执行.</p>\n<p>只能解绑定一次,不可以多次解绑定.</p>\n<h2 id=\"两种方式的区别\"><a href=\"#两种方式的区别\" class=\"headerlink\" title=\"两种方式的区别\"></a>两种方式的区别</h2><p>Start方式特点:<br>1.服务与启动源没有任何关系<br>2.无法得到服务对象</p>\n<p>Bind方式特点:<br>1.通过<code>IBinder</code>接口实例,返回一个<code>ServiceConnnection</code>对象给启动源.<br>2.通过<code>ServiceConnection</code>对象的相关方法可以得到<code>Service</code>对象.</p>\n","excerpt":"","more":"<h2 id=\"服务的生命周期\"><a href=\"#服务的生命周期\" class=\"headerlink\" title=\"服务的生命周期\"></a>服务的生命周期</h2><p>使用startService()<br><br><img src=\"http://oezmbgg4j.bkt.clouddn.com/servicelifecycle.png\" alt=\"\"></p>\n<p>一旦调用<code>startService()</code>相应的服务就会启动, 并回调<code>onStartCommand()</code>方法. 如果该服务没有创建过, 那么<code>onCreate()</code>会先于<code>onStartCommand()</code>方法执行. 服务启动之后会一直保持运行状态,知道<code>stopService()</code>或<code>stopSelf()</code>方法被调用. 即使度从此调用<code>startService()</code>方法, 每个服务只会存在一个实例,所以只需要调用一次<code>stopService()</code>或<code>stopSelf()</code>方法, 服务就会停止下来.</p>\n<p>另一种方法，使用bindService()<br><br><img src=\"http://oezmbgg4j.bkt.clouddn.com/servicelifecycle2.png\" alt=\"\"></p>\n<p>这会先回调服务中的<code>onBind()</code>方法,若该服务之前没有被创建过,那么<code>onCreate()</code>方法会先于<code>onBind()</code>方法执行.</p>\n<p>注意: 若一个服务既<code>startService()</code>又<code>bindService()</code>, 那么只要<code>stopService()</code>和<code>unbindService()</code>都被调用后,服务的<code>onDestroy()</code>方法才会执行.</p>\n<p>只能解绑定一次,不可以多次解绑定.</p>\n<h2 id=\"两种方式的区别\"><a href=\"#两种方式的区别\" class=\"headerlink\" title=\"两种方式的区别\"></a>两种方式的区别</h2><p>Start方式特点:<br>1.服务与启动源没有任何关系<br>2.无法得到服务对象</p>\n<p>Bind方式特点:<br>1.通过<code>IBinder</code>接口实例,返回一个<code>ServiceConnnection</code>对象给启动源.<br>2.通过<code>ServiceConnection</code>对象的相关方法可以得到<code>Service</code>对象.</p>\n"},{"author":"ivyxjc","date":"2016-05-14T16:00:00.000Z","title":"如何处理耗时操作(使用AsyncTask, AsyncAdapter)","keywords":null,"description":null,"_content":"\n使用`AsyncTask`虽然可以非常简单将耗时操作与`UI线程`分开, 但是仍是耗时操作和`Activity`的生命周期绑定在了一起, 那么可能翻转屏幕就会使得该操作中断. 所以使用`Service`是更好的方法, `google`也给出了专用的解决方案, 使用`AsyncAdapter`.\n<!--more-->\n\n![](http://oezmbgg4j.bkt.clouddn.com/async_1.png)\n","source":"_posts/android/并发编程/2016-05-15-async.md","raw":"---\nauthor: ivyxjc\ndate: 2016-05-15\ntitle: 如何处理耗时操作(使用AsyncTask, AsyncAdapter)\ncategory: Android\ntags: [android,concurrency]\nkeywords:\ndescription:\n---\n\n使用`AsyncTask`虽然可以非常简单将耗时操作与`UI线程`分开, 但是仍是耗时操作和`Activity`的生命周期绑定在了一起, 那么可能翻转屏幕就会使得该操作中断. 所以使用`Service`是更好的方法, `google`也给出了专用的解决方案, 使用`AsyncAdapter`.\n<!--more-->\n\n![](http://oezmbgg4j.bkt.clouddn.com/async_1.png)\n","slug":"android/并发编程/2016-05-15-async","published":1,"updated":"2016-10-26T11:26:51.806Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgij003nu8jro10gzxgl","content":"<p>使用<code>AsyncTask</code>虽然可以非常简单将耗时操作与<code>UI线程</code>分开, 但是仍是耗时操作和<code>Activity</code>的生命周期绑定在了一起, 那么可能翻转屏幕就会使得该操作中断. 所以使用<code>Service</code>是更好的方法, <code>google</code>也给出了专用的解决方案, 使用<code>AsyncAdapter</code>.<br><a id=\"more\"></a></p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/async_1.png\" alt=\"\"></p>\n","excerpt":"<p>使用<code>AsyncTask</code>虽然可以非常简单将耗时操作与<code>UI线程</code>分开, 但是仍是耗时操作和<code>Activity</code>的生命周期绑定在了一起, 那么可能翻转屏幕就会使得该操作中断. 所以使用<code>Service</code>是更好的方法, <code>google</code>也给出了专用的解决方案, 使用<code>AsyncAdapter</code>.<br>","more":"</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/async_1.png\" alt=\"\"></p>"},{"author":"ivyxjc","date":"2016-05-12T16:00:00.000Z","title":"Volley的介绍和一些相关用法","keywords":null,"description":"Volley库可以非常方便得进行网络操作.","_content":"\n## Use newRequestQueue和发送Request\n\n使用`RequestQueue`并向其中传递`Request`对象可以.`RequestQueue`管理和网络操作相关的一些线程,b\n\n```java\n// Instantiate the RequestQueue.\nRequestQueue queue = Volley.newRequestQueue(this);\nString url =\"http://www.google.com\";\n\n// Request a string response from the provided URL.\nStringRequest stringRequest = new StringRequest(Request.Method.GET, url,\n            new Response.Listener<String>() {\n    @Override\n    public void onResponse(String response) {\n        // Display the first 500 characters of the response string.\n        mTextView.setText(\"Response is: \"+ response.substring(0,500));\n    }\n}, new Response.ErrorListener() {\n    @Override\n    public void onErrorResponse(VolleyError error) {\n        mTextView.setText(\"That didn't work!\");\n    }\n});\n// Add the request to the RequestQueue.\nqueue.add(stringRequest);\n```\n\n## 取消一个Request\n\n可以使用`cacel`方法取消一个Request,防止其总是在连接网络.\n\n所以常在`onStop()`方法中调用`cancel`相关方法.\n\n```\nublic static final String TAG = \"MyTag\";\nStringRequest stringRequest; // Assume this exists.\nRequestQueue mRequestQueue;  // Assume this exists.\n\n// Set the tag on the request.\nstringRequest.setTag(TAG);\n\n// Add the request to the RequestQueue.\nmRequestQueue.add(stringRequest);\n```\n\n```java\n@Override\nprotected void onStop () {\n    super.onStop();\n    if (mRequestQueue != null) {\n        mRequestQueue.cancelAll(TAG);\n    }\n}\n```\n","source":"_posts/android/第三方库/2016-05-13-volley.md","raw":"---\nauthor: ivyxjc\ndate: 2016-05-13\ntitle: Volley的介绍和一些相关用法\ncategory: Android\ntags: [android,android_lib]\nkeywords:\ndescription: Volley库可以非常方便得进行网络操作.\n---\n\n## Use newRequestQueue和发送Request\n\n使用`RequestQueue`并向其中传递`Request`对象可以.`RequestQueue`管理和网络操作相关的一些线程,b\n\n```java\n// Instantiate the RequestQueue.\nRequestQueue queue = Volley.newRequestQueue(this);\nString url =\"http://www.google.com\";\n\n// Request a string response from the provided URL.\nStringRequest stringRequest = new StringRequest(Request.Method.GET, url,\n            new Response.Listener<String>() {\n    @Override\n    public void onResponse(String response) {\n        // Display the first 500 characters of the response string.\n        mTextView.setText(\"Response is: \"+ response.substring(0,500));\n    }\n}, new Response.ErrorListener() {\n    @Override\n    public void onErrorResponse(VolleyError error) {\n        mTextView.setText(\"That didn't work!\");\n    }\n});\n// Add the request to the RequestQueue.\nqueue.add(stringRequest);\n```\n\n## 取消一个Request\n\n可以使用`cacel`方法取消一个Request,防止其总是在连接网络.\n\n所以常在`onStop()`方法中调用`cancel`相关方法.\n\n```\nublic static final String TAG = \"MyTag\";\nStringRequest stringRequest; // Assume this exists.\nRequestQueue mRequestQueue;  // Assume this exists.\n\n// Set the tag on the request.\nstringRequest.setTag(TAG);\n\n// Add the request to the RequestQueue.\nmRequestQueue.add(stringRequest);\n```\n\n```java\n@Override\nprotected void onStop () {\n    super.onStop();\n    if (mRequestQueue != null) {\n        mRequestQueue.cancelAll(TAG);\n    }\n}\n```\n","slug":"android/第三方库/2016-05-13-volley","published":1,"updated":"2016-10-26T11:26:51.842Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgim003qu8jrn9zj864o","content":"<h2 id=\"Use-newRequestQueue和发送Request\"><a href=\"#Use-newRequestQueue和发送Request\" class=\"headerlink\" title=\"Use newRequestQueue和发送Request\"></a>Use newRequestQueue和发送Request</h2><p>使用<code>RequestQueue</code>并向其中传递<code>Request</code>对象可以.<code>RequestQueue</code>管理和网络操作相关的一些线程,b</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Instantiate the RequestQueue.</span></div><div class=\"line\">RequestQueue queue = Volley.newRequestQueue(<span class=\"keyword\">this</span>);</div><div class=\"line\">String url =<span class=\"string\">\"http://www.google.com\"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Request a string response from the provided URL.</span></div><div class=\"line\">StringRequest stringRequest = <span class=\"keyword\">new</span> StringRequest(Request.Method.GET, url,</div><div class=\"line\">            <span class=\"keyword\">new</span> Response.Listener&lt;String&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResponse</span><span class=\"params\">(String response)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// Display the first 500 characters of the response string.</span></div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"Response is: \"</span>+ response.substring(<span class=\"number\">0</span>,<span class=\"number\">500</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;, <span class=\"keyword\">new</span> Response.ErrorListener() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onErrorResponse</span><span class=\"params\">(VolleyError error)</span> </span>&#123;</div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"That didn't work!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// Add the request to the RequestQueue.</span></div><div class=\"line\">queue.add(stringRequest);</div></pre></td></tr></table></figure>\n<h2 id=\"取消一个Request\"><a href=\"#取消一个Request\" class=\"headerlink\" title=\"取消一个Request\"></a>取消一个Request</h2><p>可以使用<code>cacel</code>方法取消一个Request,防止其总是在连接网络.</p>\n<p>所以常在<code>onStop()</code>方法中调用<code>cancel</code>相关方法.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">ublic static final String TAG = &quot;MyTag&quot;;</div><div class=\"line\">StringRequest stringRequest; // Assume this exists.</div><div class=\"line\">RequestQueue mRequestQueue;  // Assume this exists.</div><div class=\"line\"></div><div class=\"line\">// Set the tag on the request.</div><div class=\"line\">stringRequest.setTag(TAG);</div><div class=\"line\"></div><div class=\"line\">// Add the request to the RequestQueue.</div><div class=\"line\">mRequestQueue.add(stringRequest);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onStop();</div><div class=\"line\">    <span class=\"keyword\">if</span> (mRequestQueue != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">        mRequestQueue.cancelAll(TAG);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"Use-newRequestQueue和发送Request\"><a href=\"#Use-newRequestQueue和发送Request\" class=\"headerlink\" title=\"Use newRequestQueue和发送Request\"></a>Use newRequestQueue和发送Request</h2><p>使用<code>RequestQueue</code>并向其中传递<code>Request</code>对象可以.<code>RequestQueue</code>管理和网络操作相关的一些线程,b</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Instantiate the RequestQueue.</span></div><div class=\"line\">RequestQueue queue = Volley.newRequestQueue(<span class=\"keyword\">this</span>);</div><div class=\"line\">String url =<span class=\"string\">\"http://www.google.com\"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Request a string response from the provided URL.</span></div><div class=\"line\">StringRequest stringRequest = <span class=\"keyword\">new</span> StringRequest(Request.Method.GET, url,</div><div class=\"line\">            <span class=\"keyword\">new</span> Response.Listener&lt;String&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResponse</span><span class=\"params\">(String response)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// Display the first 500 characters of the response string.</span></div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"Response is: \"</span>+ response.substring(<span class=\"number\">0</span>,<span class=\"number\">500</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;, <span class=\"keyword\">new</span> Response.ErrorListener() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onErrorResponse</span><span class=\"params\">(VolleyError error)</span> </span>&#123;</div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"That didn't work!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// Add the request to the RequestQueue.</span></div><div class=\"line\">queue.add(stringRequest);</div></pre></td></tr></table></figure>\n<h2 id=\"取消一个Request\"><a href=\"#取消一个Request\" class=\"headerlink\" title=\"取消一个Request\"></a>取消一个Request</h2><p>可以使用<code>cacel</code>方法取消一个Request,防止其总是在连接网络.</p>\n<p>所以常在<code>onStop()</code>方法中调用<code>cancel</code>相关方法.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">ublic static final String TAG = &quot;MyTag&quot;;</div><div class=\"line\">StringRequest stringRequest; // Assume this exists.</div><div class=\"line\">RequestQueue mRequestQueue;  // Assume this exists.</div><div class=\"line\"></div><div class=\"line\">// Set the tag on the request.</div><div class=\"line\">stringRequest.setTag(TAG);</div><div class=\"line\"></div><div class=\"line\">// Add the request to the RequestQueue.</div><div class=\"line\">mRequestQueue.add(stringRequest);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span> <span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onStop();</div><div class=\"line\">    <span class=\"keyword\">if</span> (mRequestQueue != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">        mRequestQueue.cancelAll(TAG);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-04-04T16:00:00.000Z","title":"Handler与多线程","status":"publish","description":"Handler是android中一套用来更新UI的机制，也是一套消息处理机制。在非UI线程中更新UI会报错，但是直接在OnCreate()方法中并不会报错，因为此时检查机制还未使用，但是不要这么做。必须在UI线程中更新UI。","_content":"\nHandler是android中一套用来更新UI的机制，也是一套消息处理机制。\n\n在非UI线程中更新UI会报错，但是直接在OnCreate()方法中并不会报错，因为此时检查机制还未使用，但是不要这么做。必须在UI线程中更新UI。\n\n```java\nmHandler.post(new Runnable() {\n    @Override\n    public void run() {\n        mTextView.setText(\"update thread\");\n    }\n});\n```\n\n## sendMessage()和removeCallbacks()\n\n\n```java\nprivate Handler mHandler=new Handler(){\n    @Override\n    public void handleMessage(Message msg) {\n        mTextView.setText(\"\"+msg.arg1+msg.obj);\n    }\n};\n\n```java\nnew Thread(){\n    @Override\n    public void run() {\n        try{\n            Thread.sleep(2000);\n//          Message message=new Message();\n            Message message=mHandler.obtainMessage();\n            Person person=new Person();\n            message.arg1=100;\n            person.age=10;\n            person.name=\"aaa\";\n            message.obj=person;\n            message.sendToTarget();\n        }catch (InterruptedException e){\n            e.printStackTrace();\n        }\n\n    }\n    }.start();\n```\n\n```java\nmHandler.removeCallbacks(mMyRunnable);\n```\n\n### 消息截获\n\n```java\nprivate Handler mHandler=new Handler(new Handler.Callback() {\n    @Override\n    public boolean handleMessage(Message msg) {\n        Toast.makeText(getApplicationContext(),\"\"+1,Toast.LENGTH_SHORT).show();\n        //若返回true，则下面的handleMessage不会执行，表示别截获\n        return false;\n    }\n}){\n    @Override\n    public void handleMessage(Message msg) {\n//            mTextView.setText(\"\"+msg.arg1+msg.obj);\n        Toast.makeText(getApplicationContext(),\"\"+2,Toast.LENGTH_SHORT).show();\n    }\n\n......\n};\n```\n\n## handler总结\n\n`handler`负责发送消息，`Looper`负责接收Handler发送的消息，并将消息发给`handler`自己。\n\n### 使用Handler更新UI的原因\n\n如果在一个`Activity`中有多个线程去更新UI，若都没有加锁会导致**界面更新混乱**。若都加锁，则会导致**性能下降**。\n","source":"_posts/android/并发编程/2016-04-05-handler-threads.md","raw":"---\nauthor: ivyxjc\ndate: 2016-04-05\ntitle: Handler与多线程\ncategory: Android\ntags: [android,concurrency]\nstatus: publish\ndescription: Handler是android中一套用来更新UI的机制，也是一套消息处理机制。在非UI线程中更新UI会报错，但是直接在OnCreate()方法中并不会报错，因为此时检查机制还未使用，但是不要这么做。必须在UI线程中更新UI。\n---\n\nHandler是android中一套用来更新UI的机制，也是一套消息处理机制。\n\n在非UI线程中更新UI会报错，但是直接在OnCreate()方法中并不会报错，因为此时检查机制还未使用，但是不要这么做。必须在UI线程中更新UI。\n\n```java\nmHandler.post(new Runnable() {\n    @Override\n    public void run() {\n        mTextView.setText(\"update thread\");\n    }\n});\n```\n\n## sendMessage()和removeCallbacks()\n\n\n```java\nprivate Handler mHandler=new Handler(){\n    @Override\n    public void handleMessage(Message msg) {\n        mTextView.setText(\"\"+msg.arg1+msg.obj);\n    }\n};\n\n```java\nnew Thread(){\n    @Override\n    public void run() {\n        try{\n            Thread.sleep(2000);\n//          Message message=new Message();\n            Message message=mHandler.obtainMessage();\n            Person person=new Person();\n            message.arg1=100;\n            person.age=10;\n            person.name=\"aaa\";\n            message.obj=person;\n            message.sendToTarget();\n        }catch (InterruptedException e){\n            e.printStackTrace();\n        }\n\n    }\n    }.start();\n```\n\n```java\nmHandler.removeCallbacks(mMyRunnable);\n```\n\n### 消息截获\n\n```java\nprivate Handler mHandler=new Handler(new Handler.Callback() {\n    @Override\n    public boolean handleMessage(Message msg) {\n        Toast.makeText(getApplicationContext(),\"\"+1,Toast.LENGTH_SHORT).show();\n        //若返回true，则下面的handleMessage不会执行，表示别截获\n        return false;\n    }\n}){\n    @Override\n    public void handleMessage(Message msg) {\n//            mTextView.setText(\"\"+msg.arg1+msg.obj);\n        Toast.makeText(getApplicationContext(),\"\"+2,Toast.LENGTH_SHORT).show();\n    }\n\n......\n};\n```\n\n## handler总结\n\n`handler`负责发送消息，`Looper`负责接收Handler发送的消息，并将消息发给`handler`自己。\n\n### 使用Handler更新UI的原因\n\n如果在一个`Activity`中有多个线程去更新UI，若都没有加锁会导致**界面更新混乱**。若都加锁，则会导致**性能下降**。\n","slug":"android/并发编程/2016-04-05-handler-threads","published":1,"updated":"2016-10-26T11:26:51.803Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgio003uu8jrpinqgz99","content":"<p>Handler是android中一套用来更新UI的机制，也是一套消息处理机制。</p>\n<p>在非UI线程中更新UI会报错，但是直接在OnCreate()方法中并不会报错，因为此时检查机制还未使用，但是不要这么做。必须在UI线程中更新UI。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"update thread\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2 id=\"sendMessage-和removeCallbacks\"><a href=\"#sendMessage-和removeCallbacks\" class=\"headerlink\" title=\"sendMessage()和removeCallbacks()\"></a>sendMessage()和removeCallbacks()</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> Handler mHandler=<span class=\"keyword\">new</span> Handler()&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"\"</span>+msg.arg1+msg.obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">```<span class=\"function\">java</span></div><div class=\"line\">new <span class=\"title\">Thread</span><span class=\"params\">()</span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">            Thread.sleep(<span class=\"number\">2000</span>);</div><div class=\"line\"><span class=\"comment\">//          Message message=new Message();</span></div><div class=\"line\">            Message message=mHandler.obtainMessage();</div><div class=\"line\">            Person person=<span class=\"keyword\">new</span> Person();</div><div class=\"line\">            message.arg1=<span class=\"number\">100</span>;</div><div class=\"line\">            person.age=<span class=\"number\">10</span>;</div><div class=\"line\">            person.name=<span class=\"string\">\"aaa\"</span>;</div><div class=\"line\">            message.obj=person;</div><div class=\"line\">            message.sendToTarget();</div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (InterruptedException e)&#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    &#125;.start();</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mHandler.removeCallbacks(mMyRunnable);</div></pre></td></tr></table></figure>\n<h3 id=\"消息截获\"><a href=\"#消息截获\" class=\"headerlink\" title=\"消息截获\"></a>消息截获</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> Handler mHandler=<span class=\"keyword\">new</span> Handler(<span class=\"keyword\">new</span> Handler.Callback() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">        Toast.makeText(getApplicationContext(),<span class=\"string\">\"\"</span>+<span class=\"number\">1</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">        <span class=\"comment\">//若返回true，则下面的handleMessage不会执行，表示别截获</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\"><span class=\"comment\">//            mTextView.setText(\"\"+msg.arg1+msg.obj);</span></div><div class=\"line\">        Toast.makeText(getApplicationContext(),<span class=\"string\">\"\"</span>+<span class=\"number\">2</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">......</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<h2 id=\"handler总结\"><a href=\"#handler总结\" class=\"headerlink\" title=\"handler总结\"></a>handler总结</h2><p><code>handler</code>负责发送消息，<code>Looper</code>负责接收Handler发送的消息，并将消息发给<code>handler</code>自己。</p>\n<h3 id=\"使用Handler更新UI的原因\"><a href=\"#使用Handler更新UI的原因\" class=\"headerlink\" title=\"使用Handler更新UI的原因\"></a>使用Handler更新UI的原因</h3><p>如果在一个<code>Activity</code>中有多个线程去更新UI，若都没有加锁会导致<strong>界面更新混乱</strong>。若都加锁，则会导致<strong>性能下降</strong>。</p>\n","excerpt":"","more":"<p>Handler是android中一套用来更新UI的机制，也是一套消息处理机制。</p>\n<p>在非UI线程中更新UI会报错，但是直接在OnCreate()方法中并不会报错，因为此时检查机制还未使用，但是不要这么做。必须在UI线程中更新UI。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"update thread\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2 id=\"sendMessage-和removeCallbacks\"><a href=\"#sendMessage-和removeCallbacks\" class=\"headerlink\" title=\"sendMessage()和removeCallbacks()\"></a>sendMessage()和removeCallbacks()</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> Handler mHandler=<span class=\"keyword\">new</span> Handler()&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">        mTextView.setText(<span class=\"string\">\"\"</span>+msg.arg1+msg.obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">```<span class=\"function\">java</div><div class=\"line\">new <span class=\"title\">Thread</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">            Thread.sleep(<span class=\"number\">2000</span>);</div><div class=\"line\"><span class=\"comment\">//          Message message=new Message();</span></div><div class=\"line\">            Message message=mHandler.obtainMessage();</div><div class=\"line\">            Person person=<span class=\"keyword\">new</span> Person();</div><div class=\"line\">            message.arg1=<span class=\"number\">100</span>;</div><div class=\"line\">            person.age=<span class=\"number\">10</span>;</div><div class=\"line\">            person.name=<span class=\"string\">\"aaa\"</span>;</div><div class=\"line\">            message.obj=person;</div><div class=\"line\">            message.sendToTarget();</div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (InterruptedException e)&#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    &#125;.start();</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mHandler.removeCallbacks(mMyRunnable);</div></pre></td></tr></table></figure>\n<h3 id=\"消息截获\"><a href=\"#消息截获\" class=\"headerlink\" title=\"消息截获\"></a>消息截获</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> Handler mHandler=<span class=\"keyword\">new</span> Handler(<span class=\"keyword\">new</span> Handler.Callback() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">        Toast.makeText(getApplicationContext(),<span class=\"string\">\"\"</span>+<span class=\"number\">1</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">        <span class=\"comment\">//若返回true，则下面的handleMessage不会执行，表示别截获</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\"><span class=\"comment\">//            mTextView.setText(\"\"+msg.arg1+msg.obj);</span></div><div class=\"line\">        Toast.makeText(getApplicationContext(),<span class=\"string\">\"\"</span>+<span class=\"number\">2</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">......</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<h2 id=\"handler总结\"><a href=\"#handler总结\" class=\"headerlink\" title=\"handler总结\"></a>handler总结</h2><p><code>handler</code>负责发送消息，<code>Looper</code>负责接收Handler发送的消息，并将消息发给<code>handler</code>自己。</p>\n<h3 id=\"使用Handler更新UI的原因\"><a href=\"#使用Handler更新UI的原因\" class=\"headerlink\" title=\"使用Handler更新UI的原因\"></a>使用Handler更新UI的原因</h3><p>如果在一个<code>Activity</code>中有多个线程去更新UI，若都没有加锁会导致<strong>界面更新混乱</strong>。若都加锁，则会导致<strong>性能下降</strong>。</p>\n"},{"author":"ivyxjc","date":"2016-03-25T16:00:00.000Z","title":"跨程序共享数据","keywords":null,"description":null,"_content":"\n可以利用`getContentResolver()`获取`ContentResolver`. `ContentResolver`中提供了一系列方法用于对数据进行CRUD操作.\n<!--more-->\n## ContentProvider\n\n通过`getContentResolver()`获取`ContentResolver`的实例，`ContentResolver`中提供了一系列方法用于对数据进行CRUD操作.\n其中\n 1.insert() 用于添加\n 2.update() 用于更新\n 3.delete() 用于删除\n 4.query()  用于查询\n\n### 内容URI及用法\n\n`ContentResolver`中的CRUD操作是不接受表名参数的，而是使用一个`Uri`参数代替。该参数被称为内容`URI`，由两部分组成：authority和path。\n内容`URI`标准写法：\n\n```\ncontent://com.example.app.provider/table1\n```\n\n需要将内容`URI`解析成`Uri`对象才可以作为参数传入\n\n```java\nUri uri=Uri.parse(\"content://com.example.app.provider/table1\");\n```\n\n### 查询操作\n\n```java\nCursor cursor=getContentResolver().query(uri,projection,selection,selectionArgs,orderBy);\n```\n\n其它操作与之类似，也和SQLite中的操作相像。\n![](/assets/img/posts/content_provider_query.png)\n\n## 自定义ContentProvider\n\n可以`extends ContentProvider`，需要覆盖父类的6个方法.\n\n 1.`public boolean onCreate()`:初始化ContentProvider时调用，完成对数据库的创建和升级，返回true则表示ContentProvider初始化成功，返回false表示失败。**注意：只有存在`ContentResolver`尝试访问该程序中的而数据时，ContentProvider才会初始化**。\n 2.`public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)`：从ContentProvider中查询数据。使用`uri`参数来确定查询哪一张表，`projection`用于确定查询哪些列，`selection`和`selectionArgs`用来约束查询内容，`sordOreder`参数用于对结果进行排序，查询结果放在`Cursor`中返回。\n 3.`public Uri insert(Uri uri, ContentValues values)`：向`ContentProvider`中添加一条数据。\n 4.`public int delete(Uri uri, String selection, String[] selectionArgs)`：从`ContentProvider`中删除数据。\n 5.`public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs)`：更新数据\n 6.`public String getType(Uri uri)`:根据传入的内容URI来返回相对应的MIME类型。\n\n一个内容URI对应的MIME字符串由三部分组成：\n 1.必须以vnd开头。\n 2.如果内容URI以路径结尾，则后街`androi.cursor.dir/`,如果内容URI以id结尾，则后接`android.cursor.item/`。\n 3.最后街上`vnd.<authority>.<path>`\n\n\n## 安全性保证\n\n因为所有的CRUD操作都一定要匹配到相应的内容URI格式才能进行，所以我们可以控制外部程序能够获得的存储内容。\n","source":"_posts/android/数据持久化/2016-03-26-content-provider.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-26\ntitle: 跨程序共享数据\ncategory: Android\ntags: [android,android_data]\nkeywords:\ndescription:\n---\n\n可以利用`getContentResolver()`获取`ContentResolver`. `ContentResolver`中提供了一系列方法用于对数据进行CRUD操作.\n<!--more-->\n## ContentProvider\n\n通过`getContentResolver()`获取`ContentResolver`的实例，`ContentResolver`中提供了一系列方法用于对数据进行CRUD操作.\n其中\n 1.insert() 用于添加\n 2.update() 用于更新\n 3.delete() 用于删除\n 4.query()  用于查询\n\n### 内容URI及用法\n\n`ContentResolver`中的CRUD操作是不接受表名参数的，而是使用一个`Uri`参数代替。该参数被称为内容`URI`，由两部分组成：authority和path。\n内容`URI`标准写法：\n\n```\ncontent://com.example.app.provider/table1\n```\n\n需要将内容`URI`解析成`Uri`对象才可以作为参数传入\n\n```java\nUri uri=Uri.parse(\"content://com.example.app.provider/table1\");\n```\n\n### 查询操作\n\n```java\nCursor cursor=getContentResolver().query(uri,projection,selection,selectionArgs,orderBy);\n```\n\n其它操作与之类似，也和SQLite中的操作相像。\n![](/assets/img/posts/content_provider_query.png)\n\n## 自定义ContentProvider\n\n可以`extends ContentProvider`，需要覆盖父类的6个方法.\n\n 1.`public boolean onCreate()`:初始化ContentProvider时调用，完成对数据库的创建和升级，返回true则表示ContentProvider初始化成功，返回false表示失败。**注意：只有存在`ContentResolver`尝试访问该程序中的而数据时，ContentProvider才会初始化**。\n 2.`public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)`：从ContentProvider中查询数据。使用`uri`参数来确定查询哪一张表，`projection`用于确定查询哪些列，`selection`和`selectionArgs`用来约束查询内容，`sordOreder`参数用于对结果进行排序，查询结果放在`Cursor`中返回。\n 3.`public Uri insert(Uri uri, ContentValues values)`：向`ContentProvider`中添加一条数据。\n 4.`public int delete(Uri uri, String selection, String[] selectionArgs)`：从`ContentProvider`中删除数据。\n 5.`public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs)`：更新数据\n 6.`public String getType(Uri uri)`:根据传入的内容URI来返回相对应的MIME类型。\n\n一个内容URI对应的MIME字符串由三部分组成：\n 1.必须以vnd开头。\n 2.如果内容URI以路径结尾，则后街`androi.cursor.dir/`,如果内容URI以id结尾，则后接`android.cursor.item/`。\n 3.最后街上`vnd.<authority>.<path>`\n\n\n## 安全性保证\n\n因为所有的CRUD操作都一定要匹配到相应的内容URI格式才能进行，所以我们可以控制外部程序能够获得的存储内容。\n","slug":"android/数据持久化/2016-03-26-content-provider","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgip003wu8jrjgm20kpu","content":"<p>可以利用<code>getContentResolver()</code>获取<code>ContentResolver</code>. <code>ContentResolver</code>中提供了一系列方法用于对数据进行CRUD操作.<br><a id=\"more\"></a></p>\n<h2 id=\"ContentProvider\"><a href=\"#ContentProvider\" class=\"headerlink\" title=\"ContentProvider\"></a>ContentProvider</h2><p>通过<code>getContentResolver()</code>获取<code>ContentResolver</code>的实例，<code>ContentResolver</code>中提供了一系列方法用于对数据进行CRUD操作.<br>其中<br> 1.insert() 用于添加<br> 2.update() 用于更新<br> 3.delete() 用于删除<br> 4.query()  用于查询</p>\n<h3 id=\"内容URI及用法\"><a href=\"#内容URI及用法\" class=\"headerlink\" title=\"内容URI及用法\"></a>内容URI及用法</h3><p><code>ContentResolver</code>中的CRUD操作是不接受表名参数的，而是使用一个<code>Uri</code>参数代替。该参数被称为内容<code>URI</code>，由两部分组成：authority和path。<br>内容<code>URI</code>标准写法：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">content://com.example.app.provider/table1</div></pre></td></tr></table></figure>\n<p>需要将内容<code>URI</code>解析成<code>Uri</code>对象才可以作为参数传入</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Uri uri=Uri.parse(<span class=\"string\">\"content://com.example.app.provider/table1\"</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"查询操作\"><a href=\"#查询操作\" class=\"headerlink\" title=\"查询操作\"></a>查询操作</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Cursor cursor=getContentResolver().query(uri,projection,selection,selectionArgs,orderBy);</div></pre></td></tr></table></figure>\n<p>其它操作与之类似，也和SQLite中的操作相像。<br><img src=\"/assets/img/posts/content_provider_query.png\" alt=\"\"></p>\n<h2 id=\"自定义ContentProvider\"><a href=\"#自定义ContentProvider\" class=\"headerlink\" title=\"自定义ContentProvider\"></a>自定义ContentProvider</h2><p>可以<code>extends ContentProvider</code>，需要覆盖父类的6个方法.</p>\n<p> 1.<code>public boolean onCreate()</code>:初始化ContentProvider时调用，完成对数据库的创建和升级，返回true则表示ContentProvider初始化成功，返回false表示失败。<strong>注意：只有存在<code>ContentResolver</code>尝试访问该程序中的而数据时，ContentProvider才会初始化</strong>。<br> 2.<code>public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)</code>：从ContentProvider中查询数据。使用<code>uri</code>参数来确定查询哪一张表，<code>projection</code>用于确定查询哪些列，<code>selection</code>和<code>selectionArgs</code>用来约束查询内容，<code>sordOreder</code>参数用于对结果进行排序，查询结果放在<code>Cursor</code>中返回。<br> 3.<code>public Uri insert(Uri uri, ContentValues values)</code>：向<code>ContentProvider</code>中添加一条数据。<br> 4.<code>public int delete(Uri uri, String selection, String[] selectionArgs)</code>：从<code>ContentProvider</code>中删除数据。<br> 5.<code>public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs)</code>：更新数据<br> 6.<code>public String getType(Uri uri)</code>:根据传入的内容URI来返回相对应的MIME类型。</p>\n<p>一个内容URI对应的MIME字符串由三部分组成：<br> 1.必须以vnd开头。<br> 2.如果内容URI以路径结尾，则后街<code>androi.cursor.dir/</code>,如果内容URI以id结尾，则后接<code>android.cursor.item/</code>。<br> 3.最后街上<code>vnd.&lt;authority&gt;.&lt;path&gt;</code></p>\n<h2 id=\"安全性保证\"><a href=\"#安全性保证\" class=\"headerlink\" title=\"安全性保证\"></a>安全性保证</h2><p>因为所有的CRUD操作都一定要匹配到相应的内容URI格式才能进行，所以我们可以控制外部程序能够获得的存储内容。</p>\n","excerpt":"<p>可以利用<code>getContentResolver()</code>获取<code>ContentResolver</code>. <code>ContentResolver</code>中提供了一系列方法用于对数据进行CRUD操作.<br>","more":"</p>\n<h2 id=\"ContentProvider\"><a href=\"#ContentProvider\" class=\"headerlink\" title=\"ContentProvider\"></a>ContentProvider</h2><p>通过<code>getContentResolver()</code>获取<code>ContentResolver</code>的实例，<code>ContentResolver</code>中提供了一系列方法用于对数据进行CRUD操作.<br>其中<br> 1.insert() 用于添加<br> 2.update() 用于更新<br> 3.delete() 用于删除<br> 4.query()  用于查询</p>\n<h3 id=\"内容URI及用法\"><a href=\"#内容URI及用法\" class=\"headerlink\" title=\"内容URI及用法\"></a>内容URI及用法</h3><p><code>ContentResolver</code>中的CRUD操作是不接受表名参数的，而是使用一个<code>Uri</code>参数代替。该参数被称为内容<code>URI</code>，由两部分组成：authority和path。<br>内容<code>URI</code>标准写法：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">content://com.example.app.provider/table1</div></pre></td></tr></table></figure>\n<p>需要将内容<code>URI</code>解析成<code>Uri</code>对象才可以作为参数传入</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Uri uri=Uri.parse(<span class=\"string\">\"content://com.example.app.provider/table1\"</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"查询操作\"><a href=\"#查询操作\" class=\"headerlink\" title=\"查询操作\"></a>查询操作</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Cursor cursor=getContentResolver().query(uri,projection,selection,selectionArgs,orderBy);</div></pre></td></tr></table></figure>\n<p>其它操作与之类似，也和SQLite中的操作相像。<br><img src=\"/assets/img/posts/content_provider_query.png\" alt=\"\"></p>\n<h2 id=\"自定义ContentProvider\"><a href=\"#自定义ContentProvider\" class=\"headerlink\" title=\"自定义ContentProvider\"></a>自定义ContentProvider</h2><p>可以<code>extends ContentProvider</code>，需要覆盖父类的6个方法.</p>\n<p> 1.<code>public boolean onCreate()</code>:初始化ContentProvider时调用，完成对数据库的创建和升级，返回true则表示ContentProvider初始化成功，返回false表示失败。<strong>注意：只有存在<code>ContentResolver</code>尝试访问该程序中的而数据时，ContentProvider才会初始化</strong>。<br> 2.<code>public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)</code>：从ContentProvider中查询数据。使用<code>uri</code>参数来确定查询哪一张表，<code>projection</code>用于确定查询哪些列，<code>selection</code>和<code>selectionArgs</code>用来约束查询内容，<code>sordOreder</code>参数用于对结果进行排序，查询结果放在<code>Cursor</code>中返回。<br> 3.<code>public Uri insert(Uri uri, ContentValues values)</code>：向<code>ContentProvider</code>中添加一条数据。<br> 4.<code>public int delete(Uri uri, String selection, String[] selectionArgs)</code>：从<code>ContentProvider</code>中删除数据。<br> 5.<code>public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs)</code>：更新数据<br> 6.<code>public String getType(Uri uri)</code>:根据传入的内容URI来返回相对应的MIME类型。</p>\n<p>一个内容URI对应的MIME字符串由三部分组成：<br> 1.必须以vnd开头。<br> 2.如果内容URI以路径结尾，则后街<code>androi.cursor.dir/</code>,如果内容URI以id结尾，则后接<code>android.cursor.item/</code>。<br> 3.最后街上<code>vnd.&lt;authority&gt;.&lt;path&gt;</code></p>\n<h2 id=\"安全性保证\"><a href=\"#安全性保证\" class=\"headerlink\" title=\"安全性保证\"></a>安全性保证</h2><p>因为所有的CRUD操作都一定要匹配到相应的内容URI格式才能进行，所以我们可以控制外部程序能够获得的存储内容。</p>"},{"author":"ivyxjc","date":"2016-03-24T16:00:00.000Z","title":"数据持久化","keywords":null,"description":"存储数据主要有三种方式:<br>1. 存储到文件<br>2. SharedPreferences存储<br>3. SQLite","_content":"\n## 数据存储到文件\n\n`Context`类提供了一个`openFileOutput()`方法，可以将数据存储到指定的文件中。接受两个参数，\n1. 第一个参数是文件名(无需包含路径)，默认存储 到`/data/data/<package name>/files/`目录下。\n2. 第二个参数是文件的操作模式，主要有两种：`MODE_PRIVATE`和`MODE_APPEND`。其中`MODE_PRIVATE`是默认的操作模式，表示当指定同样文件名的时候，所写入的内容将会覆盖原文件中的内容。`MODE_APPEND`则表示如果该文件已存在就往文件里面追加内容。还有另外两种模式：`MODE_WORLD_READABLE`和`MODE_WORLD_WRITEABLE`表示允许其它的应用程序对该程序中的文件进行读写操作，已被废弃。\n\n```java\npublic void save(String inputText){\n    FileOutputStream out=null;\n    BufferedWriter writer=null;\n    try{\n        out=openFileOutput(\"data\", Context.MODE_PRIVATE);\n        writer=new BufferedWriter(new OutputStreamWriter(out));\n        writer.write(inputText);\n    }catch (IOException e){\n        e.printStackTrace();\n    }finally {\n        try{\n            if(writer!=null){\n                writer.close();\n            }\n        }catch (IOException e){\n            e.printStackTrace();\n        }\n    }\n}\n\npublic String load(){\n    FileInputStream in=null;\n    BufferedReader reader=null;\n    StringBuilder content=new StringBuilder();\n\n    try{\n        in=openFileInput(\"data\");\n        reader=new BufferedReader(new InputStreamReader(in));\n        String line=\"\";\n        while ((line=reader.readLine())!=null){\n            content.append(line);\n        }\n    }catch (IOException e){\n        e.printStackTrace();\n    }finally {\n        if(reader!=null){\n            try{\n                reader.close();\n            }catch (IOException e){\n                e.printStackTrace();\n            }\n        }\n    }\n    return content.toString();\n}\n\n```\n\n## SharedPreferences存储\n\n```java\n//存储数据\nSharedPreferences.Editor editor=getSharedPreferences(\"data\",MODE_PRIVATE).edit();\neditor.putString(\"name\",\"Tom\");\neditor.putInt(\"age\", 28);\neditor.putBoolean(\"married\", false);\neditor.commit();\n\n//读取数据\n\nSharedPreferences preferences=getSharedPreferences(\"data\",MODE_PRIVATE);\nString name=preferences.getString(\"name\", \"\");\nboolean married=preferences.getBoolean(\"married\", false);\nint age=preferences.getInt(\"age\",0);\n```\n\n## SQLite\n\n安卓提供了一个`SQLiteOpenHelper`帮助类，可以借助这个类对数据库进行创建和升级。\n\n### 建表\n\n```sql\n//建表\ncreate table Book{\n\tid integer primary key autoincrement,\n    author text,\n    price real,\n    pages integer,\n    name text,\n}\n```\n\n1. `integer`:整型\n2. `real`：浮点型\n3. `text`：文本类型\n4. `blob`：二进制类型\n\n### 添加数据\n\n```java\nSQLiteDatabase db=dbHelper.getWritableDatabase();\nContentValues values=new ContentValues();\nvalues.put(\"author\",\"Dan Brown\");\nvalues.put(\"name\",\"The Da Vinci Code\");\nvalues.put(\"pages\",454);\nvalues.put(\"price\", 16.96);\ndb.insert(\"Book\",null,values);\nvalues.clear();\n```\n\n向数据库中添加数据\n\n### 更新数据\n\n可以使用\n`db.update(String Table,ContenValues values,String WhereClauses,String[] WhereArgs)`\n\n第三个参数对应SQL语句中的`where`，其中用`?`作占位符，第四个参数则表示`?`的内容。\n\n```java\n//表示将name为The Da Vinci Code 的价格改为10.99\nConteValues values=new ContentValues();\nvalues.put(\"price\",10.99);\ndb.update(\"Book\",values,\"name=?\",new String[]{\"The Da Vinci Code\"})；\n```\n\n### 删除数据\n\n可以使用`db.delete(String Table,String WhereClauses,String[] WhereArgs)`\n第二，三两个参数用来约束删除某一行或几行的数据，不指定的话就默认删除所有行。\n\n### 查询数据\n\nquery()方法参数 | 对应SQL部分|描述\n--------|--------|--------\ntable |   from table_name|  指定查询的表名\ncolumns  |   select column1,column2 |  指定查询的列名\nselection  |    where column=value| 指定where的约束条件\nselectionArgs |   -  |  为where中的占位符提供具体的数值\ngroupBy   |    group by column    |  指定需要group by的列\nhaving |   having column=value |对group by后的结果进一步约束\norderBy | order by column1, column2 |  指定查询结果的排序方式\n\n\n`Cursor cursor = db.query(\"Book\", null, null, null, null, null, null);`\n上式查询表中所有数据\n\n\n### 直接使用SQL语句\n\n除查询之外的所有方法可以条用`db.execSQL(...)`接执行SQL语句\n查询数据的方法时可调用它`db.rawQuery(...)`接执行SQL语句\n\n## 代码\n\n```java\npublic class MyDatabaseHelper extends SQLiteOpenHelper {\n    private Context mContext;\n\n    public static final String CREATE_BOOK=\"create table Book (\" +\n            \"id integer primary key autoincrement,\" +\n            \"author text,\" +\n            \"price real,\" +\n            \"pages integer,\" +\n            \"name text)\";\n\n    public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {\n        super(context, name, factory, version);\n        mContext=context;\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        db.execSQL(CREATE_BOOK);\n        //db.execSQL(CREATE_CATEGORY);\n        Toast.makeText(mContext,\"Create succeeded\", Toast.LENGTH_SHORT).show();\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        db.execSQL(\"drop table if exists Book\");\n        db.execSQL(\"drop table if exists Category\");\n        onCreate(db);\n    }\n}\n```\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    private MyDatabaseHelper dbHelper;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n//最后一个数是版本号，若版本号比原先高，则会调用  SQLiteOpenHelper中的onUpgrade()。\n        dbHelper=new MyDatabaseHelper(this,\"BookStore.db\",null,5);\n\n        Button button=(Button)findViewById(R.id.button);\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                dbHelper.getWritableDatabase();\n            }\n        });\n\n        Button addData=(Button)findViewById(R.id.add_data);\n        addData.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                SQLiteDatabase db=dbHelper.getWritableDatabase();\n\n                //向数据库中添加数据\n                ContentValues values=new ContentValues();\n                values.put(\"author\",\"Dan Brown\");\n                values.put(\"name\",\"The Da\");\n                values.put(\"pages\",454);\n                values.put(\"price\", 16.96);\n                db.insert(\"Book\",null,values);\n                values.clear();\n            }\n        });\n    }\n}\n```\n","source":"_posts/android/数据持久化/2016-03-25-data-persistence.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-25\ntitle: 数据持久化\ncategory: Android\ntags: [android,android_data]\nkeywords:\ndescription: 存储数据主要有三种方式:<br>1. 存储到文件<br>2. SharedPreferences存储<br>3. SQLite\n---\n\n## 数据存储到文件\n\n`Context`类提供了一个`openFileOutput()`方法，可以将数据存储到指定的文件中。接受两个参数，\n1. 第一个参数是文件名(无需包含路径)，默认存储 到`/data/data/<package name>/files/`目录下。\n2. 第二个参数是文件的操作模式，主要有两种：`MODE_PRIVATE`和`MODE_APPEND`。其中`MODE_PRIVATE`是默认的操作模式，表示当指定同样文件名的时候，所写入的内容将会覆盖原文件中的内容。`MODE_APPEND`则表示如果该文件已存在就往文件里面追加内容。还有另外两种模式：`MODE_WORLD_READABLE`和`MODE_WORLD_WRITEABLE`表示允许其它的应用程序对该程序中的文件进行读写操作，已被废弃。\n\n```java\npublic void save(String inputText){\n    FileOutputStream out=null;\n    BufferedWriter writer=null;\n    try{\n        out=openFileOutput(\"data\", Context.MODE_PRIVATE);\n        writer=new BufferedWriter(new OutputStreamWriter(out));\n        writer.write(inputText);\n    }catch (IOException e){\n        e.printStackTrace();\n    }finally {\n        try{\n            if(writer!=null){\n                writer.close();\n            }\n        }catch (IOException e){\n            e.printStackTrace();\n        }\n    }\n}\n\npublic String load(){\n    FileInputStream in=null;\n    BufferedReader reader=null;\n    StringBuilder content=new StringBuilder();\n\n    try{\n        in=openFileInput(\"data\");\n        reader=new BufferedReader(new InputStreamReader(in));\n        String line=\"\";\n        while ((line=reader.readLine())!=null){\n            content.append(line);\n        }\n    }catch (IOException e){\n        e.printStackTrace();\n    }finally {\n        if(reader!=null){\n            try{\n                reader.close();\n            }catch (IOException e){\n                e.printStackTrace();\n            }\n        }\n    }\n    return content.toString();\n}\n\n```\n\n## SharedPreferences存储\n\n```java\n//存储数据\nSharedPreferences.Editor editor=getSharedPreferences(\"data\",MODE_PRIVATE).edit();\neditor.putString(\"name\",\"Tom\");\neditor.putInt(\"age\", 28);\neditor.putBoolean(\"married\", false);\neditor.commit();\n\n//读取数据\n\nSharedPreferences preferences=getSharedPreferences(\"data\",MODE_PRIVATE);\nString name=preferences.getString(\"name\", \"\");\nboolean married=preferences.getBoolean(\"married\", false);\nint age=preferences.getInt(\"age\",0);\n```\n\n## SQLite\n\n安卓提供了一个`SQLiteOpenHelper`帮助类，可以借助这个类对数据库进行创建和升级。\n\n### 建表\n\n```sql\n//建表\ncreate table Book{\n\tid integer primary key autoincrement,\n    author text,\n    price real,\n    pages integer,\n    name text,\n}\n```\n\n1. `integer`:整型\n2. `real`：浮点型\n3. `text`：文本类型\n4. `blob`：二进制类型\n\n### 添加数据\n\n```java\nSQLiteDatabase db=dbHelper.getWritableDatabase();\nContentValues values=new ContentValues();\nvalues.put(\"author\",\"Dan Brown\");\nvalues.put(\"name\",\"The Da Vinci Code\");\nvalues.put(\"pages\",454);\nvalues.put(\"price\", 16.96);\ndb.insert(\"Book\",null,values);\nvalues.clear();\n```\n\n向数据库中添加数据\n\n### 更新数据\n\n可以使用\n`db.update(String Table,ContenValues values,String WhereClauses,String[] WhereArgs)`\n\n第三个参数对应SQL语句中的`where`，其中用`?`作占位符，第四个参数则表示`?`的内容。\n\n```java\n//表示将name为The Da Vinci Code 的价格改为10.99\nConteValues values=new ContentValues();\nvalues.put(\"price\",10.99);\ndb.update(\"Book\",values,\"name=?\",new String[]{\"The Da Vinci Code\"})；\n```\n\n### 删除数据\n\n可以使用`db.delete(String Table,String WhereClauses,String[] WhereArgs)`\n第二，三两个参数用来约束删除某一行或几行的数据，不指定的话就默认删除所有行。\n\n### 查询数据\n\nquery()方法参数 | 对应SQL部分|描述\n--------|--------|--------\ntable |   from table_name|  指定查询的表名\ncolumns  |   select column1,column2 |  指定查询的列名\nselection  |    where column=value| 指定where的约束条件\nselectionArgs |   -  |  为where中的占位符提供具体的数值\ngroupBy   |    group by column    |  指定需要group by的列\nhaving |   having column=value |对group by后的结果进一步约束\norderBy | order by column1, column2 |  指定查询结果的排序方式\n\n\n`Cursor cursor = db.query(\"Book\", null, null, null, null, null, null);`\n上式查询表中所有数据\n\n\n### 直接使用SQL语句\n\n除查询之外的所有方法可以条用`db.execSQL(...)`接执行SQL语句\n查询数据的方法时可调用它`db.rawQuery(...)`接执行SQL语句\n\n## 代码\n\n```java\npublic class MyDatabaseHelper extends SQLiteOpenHelper {\n    private Context mContext;\n\n    public static final String CREATE_BOOK=\"create table Book (\" +\n            \"id integer primary key autoincrement,\" +\n            \"author text,\" +\n            \"price real,\" +\n            \"pages integer,\" +\n            \"name text)\";\n\n    public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {\n        super(context, name, factory, version);\n        mContext=context;\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        db.execSQL(CREATE_BOOK);\n        //db.execSQL(CREATE_CATEGORY);\n        Toast.makeText(mContext,\"Create succeeded\", Toast.LENGTH_SHORT).show();\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        db.execSQL(\"drop table if exists Book\");\n        db.execSQL(\"drop table if exists Category\");\n        onCreate(db);\n    }\n}\n```\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    private MyDatabaseHelper dbHelper;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n//最后一个数是版本号，若版本号比原先高，则会调用  SQLiteOpenHelper中的onUpgrade()。\n        dbHelper=new MyDatabaseHelper(this,\"BookStore.db\",null,5);\n\n        Button button=(Button)findViewById(R.id.button);\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                dbHelper.getWritableDatabase();\n            }\n        });\n\n        Button addData=(Button)findViewById(R.id.add_data);\n        addData.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                SQLiteDatabase db=dbHelper.getWritableDatabase();\n\n                //向数据库中添加数据\n                ContentValues values=new ContentValues();\n                values.put(\"author\",\"Dan Brown\");\n                values.put(\"name\",\"The Da\");\n                values.put(\"pages\",454);\n                values.put(\"price\", 16.96);\n                db.insert(\"Book\",null,values);\n                values.clear();\n            }\n        });\n    }\n}\n```\n","slug":"android/数据持久化/2016-03-25-data-persistence","published":1,"updated":"2016-10-26T11:26:51.834Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgiq003zu8jrfcopyuu6","content":"<h2 id=\"数据存储到文件\"><a href=\"#数据存储到文件\" class=\"headerlink\" title=\"数据存储到文件\"></a>数据存储到文件</h2><p><code>Context</code>类提供了一个<code>openFileOutput()</code>方法，可以将数据存储到指定的文件中。接受两个参数，</p>\n<ol>\n<li>第一个参数是文件名(无需包含路径)，默认存储 到<code>/data/data/&lt;package name&gt;/files/</code>目录下。</li>\n<li>第二个参数是文件的操作模式，主要有两种：<code>MODE_PRIVATE</code>和<code>MODE_APPEND</code>。其中<code>MODE_PRIVATE</code>是默认的操作模式，表示当指定同样文件名的时候，所写入的内容将会覆盖原文件中的内容。<code>MODE_APPEND</code>则表示如果该文件已存在就往文件里面追加内容。还有另外两种模式：<code>MODE_WORLD_READABLE</code>和<code>MODE_WORLD_WRITEABLE</code>表示允许其它的应用程序对该程序中的文件进行读写操作，已被废弃。</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(String inputText)</span></span>&#123;</div><div class=\"line\">    FileOutputStream out=<span class=\"keyword\">null</span>;</div><div class=\"line\">    BufferedWriter writer=<span class=\"keyword\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">        out=openFileOutput(<span class=\"string\">\"data\"</span>, Context.MODE_PRIVATE);</div><div class=\"line\">        writer=<span class=\"keyword\">new</span> BufferedWriter(<span class=\"keyword\">new</span> OutputStreamWriter(out));</div><div class=\"line\">        writer.write(inputText);</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">        e.printStackTrace();</div><div class=\"line\">    &#125;<span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(writer!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                writer.close();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">load</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    FileInputStream in=<span class=\"keyword\">null</span>;</div><div class=\"line\">    BufferedReader reader=<span class=\"keyword\">null</span>;</div><div class=\"line\">    StringBuilder content=<span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">        in=openFileInput(<span class=\"string\">\"data\"</span>);</div><div class=\"line\">        reader=<span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(in));</div><div class=\"line\">        String line=<span class=\"string\">\"\"</span>;</div><div class=\"line\">        <span class=\"keyword\">while</span> ((line=reader.readLine())!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            content.append(line);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">        e.printStackTrace();</div><div class=\"line\">    &#125;<span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(reader!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">                reader.close();</div><div class=\"line\">            &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> content.toString();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"SharedPreferences存储\"><a href=\"#SharedPreferences存储\" class=\"headerlink\" title=\"SharedPreferences存储\"></a>SharedPreferences存储</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//存储数据</span></div><div class=\"line\">SharedPreferences.Editor editor=getSharedPreferences(<span class=\"string\">\"data\"</span>,MODE_PRIVATE).edit();</div><div class=\"line\">editor.putString(<span class=\"string\">\"name\"</span>,<span class=\"string\">\"Tom\"</span>);</div><div class=\"line\">editor.putInt(<span class=\"string\">\"age\"</span>, <span class=\"number\">28</span>);</div><div class=\"line\">editor.putBoolean(<span class=\"string\">\"married\"</span>, <span class=\"keyword\">false</span>);</div><div class=\"line\">editor.commit();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//读取数据</span></div><div class=\"line\"></div><div class=\"line\">SharedPreferences preferences=getSharedPreferences(<span class=\"string\">\"data\"</span>,MODE_PRIVATE);</div><div class=\"line\">String name=preferences.getString(<span class=\"string\">\"name\"</span>, <span class=\"string\">\"\"</span>);</div><div class=\"line\"><span class=\"keyword\">boolean</span> married=preferences.getBoolean(<span class=\"string\">\"married\"</span>, <span class=\"keyword\">false</span>);</div><div class=\"line\"><span class=\"keyword\">int</span> age=preferences.getInt(<span class=\"string\">\"age\"</span>,<span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<h2 id=\"SQLite\"><a href=\"#SQLite\" class=\"headerlink\" title=\"SQLite\"></a>SQLite</h2><p>安卓提供了一个<code>SQLiteOpenHelper</code>帮助类，可以借助这个类对数据库进行创建和升级。</p>\n<h3 id=\"建表\"><a href=\"#建表\" class=\"headerlink\" title=\"建表\"></a>建表</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">//建表</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> Book&#123;</div><div class=\"line\">\t<span class=\"keyword\">id</span> <span class=\"built_in\">integer</span> primary <span class=\"keyword\">key</span> autoincrement,</div><div class=\"line\">    author <span class=\"built_in\">text</span>,</div><div class=\"line\">    price <span class=\"built_in\">real</span>,</div><div class=\"line\">    pages <span class=\"built_in\">integer</span>,</div><div class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">text</span>,</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ol>\n<li><code>integer</code>:整型</li>\n<li><code>real</code>：浮点型</li>\n<li><code>text</code>：文本类型</li>\n<li><code>blob</code>：二进制类型</li>\n</ol>\n<h3 id=\"添加数据\"><a href=\"#添加数据\" class=\"headerlink\" title=\"添加数据\"></a>添加数据</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">SQLiteDatabase db=dbHelper.getWritableDatabase();</div><div class=\"line\">ContentValues values=<span class=\"keyword\">new</span> ContentValues();</div><div class=\"line\">values.put(<span class=\"string\">\"author\"</span>,<span class=\"string\">\"Dan Brown\"</span>);</div><div class=\"line\">values.put(<span class=\"string\">\"name\"</span>,<span class=\"string\">\"The Da Vinci Code\"</span>);</div><div class=\"line\">values.put(<span class=\"string\">\"pages\"</span>,<span class=\"number\">454</span>);</div><div class=\"line\">values.put(<span class=\"string\">\"price\"</span>, <span class=\"number\">16.96</span>);</div><div class=\"line\">db.insert(<span class=\"string\">\"Book\"</span>,<span class=\"keyword\">null</span>,values);</div><div class=\"line\">values.clear();</div></pre></td></tr></table></figure>\n<p>向数据库中添加数据</p>\n<h3 id=\"更新数据\"><a href=\"#更新数据\" class=\"headerlink\" title=\"更新数据\"></a>更新数据</h3><p>可以使用<br><code>db.update(String Table,ContenValues values,String WhereClauses,String[] WhereArgs)</code></p>\n<p>第三个参数对应SQL语句中的<code>where</code>，其中用<code>?</code>作占位符，第四个参数则表示<code>?</code>的内容。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//表示将name为The Da Vinci Code 的价格改为10.99</span></div><div class=\"line\">ConteValues values=<span class=\"keyword\">new</span> ContentValues();</div><div class=\"line\">values.put(<span class=\"string\">\"price\"</span>,<span class=\"number\">10.99</span>);</div><div class=\"line\">db.update(<span class=\"string\">\"Book\"</span>,values,<span class=\"string\">\"name=?\"</span>,<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"The Da Vinci Code\"</span>&#125;)；</div></pre></td></tr></table></figure>\n<h3 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h3><p>可以使用<code>db.delete(String Table,String WhereClauses,String[] WhereArgs)</code><br>第二，三两个参数用来约束删除某一行或几行的数据，不指定的话就默认删除所有行。</p>\n<h3 id=\"查询数据\"><a href=\"#查询数据\" class=\"headerlink\" title=\"查询数据\"></a>查询数据</h3><table>\n<thead>\n<tr>\n<th>query()方法参数</th>\n<th>对应SQL部分</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>table</td>\n<td>from table_name</td>\n<td>指定查询的表名</td>\n</tr>\n<tr>\n<td>columns</td>\n<td>select column1,column2</td>\n<td>指定查询的列名</td>\n</tr>\n<tr>\n<td>selection</td>\n<td>where column=value</td>\n<td>指定where的约束条件</td>\n</tr>\n<tr>\n<td>selectionArgs</td>\n<td>-</td>\n<td>为where中的占位符提供具体的数值</td>\n</tr>\n<tr>\n<td>groupBy</td>\n<td>group by column</td>\n<td>指定需要group by的列</td>\n</tr>\n<tr>\n<td>having</td>\n<td>having column=value</td>\n<td>对group by后的结果进一步约束</td>\n</tr>\n<tr>\n<td>orderBy</td>\n<td>order by column1, column2</td>\n<td>指定查询结果的排序方式</td>\n</tr>\n</tbody>\n</table>\n<p><code>Cursor cursor = db.query(&quot;Book&quot;, null, null, null, null, null, null);</code><br>上式查询表中所有数据</p>\n<h3 id=\"直接使用SQL语句\"><a href=\"#直接使用SQL语句\" class=\"headerlink\" title=\"直接使用SQL语句\"></a>直接使用SQL语句</h3><p>除查询之外的所有方法可以条用<code>db.execSQL(...)</code>接执行SQL语句<br>查询数据的方法时可调用它<code>db.rawQuery(...)</code>接执行SQL语句</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyDatabaseHelper</span> <span class=\"keyword\">extends</span> <span class=\"title\">SQLiteOpenHelper</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> Context mContext;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CREATE_BOOK=<span class=\"string\">\"create table Book (\"</span> +</div><div class=\"line\">            <span class=\"string\">\"id integer primary key autoincrement,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"author text,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"price real,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"pages integer,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"name text)\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyDatabaseHelper</span><span class=\"params\">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class=\"keyword\">int</span> version)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, name, factory, version);</div><div class=\"line\">        mContext=context;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(SQLiteDatabase db)</span> </span>&#123;</div><div class=\"line\">        db.execSQL(CREATE_BOOK);</div><div class=\"line\">        <span class=\"comment\">//db.execSQL(CREATE_CATEGORY);</span></div><div class=\"line\">        Toast.makeText(mContext,<span class=\"string\">\"Create succeeded\"</span>, Toast.LENGTH_SHORT).show();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUpgrade</span><span class=\"params\">(SQLiteDatabase db, <span class=\"keyword\">int</span> oldVersion, <span class=\"keyword\">int</span> newVersion)</span> </span>&#123;</div><div class=\"line\">        db.execSQL(<span class=\"string\">\"drop table if exists Book\"</span>);</div><div class=\"line\">        db.execSQL(<span class=\"string\">\"drop table if exists Category\"</span>);</div><div class=\"line\">        onCreate(db);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> MyDatabaseHelper dbHelper;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//最后一个数是版本号，若版本号比原先高，则会调用  SQLiteOpenHelper中的onUpgrade()。</span></div><div class=\"line\">        dbHelper=<span class=\"keyword\">new</span> MyDatabaseHelper(<span class=\"keyword\">this</span>,<span class=\"string\">\"BookStore.db\"</span>,<span class=\"keyword\">null</span>,<span class=\"number\">5</span>);</div><div class=\"line\"></div><div class=\"line\">        Button button=(Button)findViewById(R.id.button);</div><div class=\"line\"></div><div class=\"line\">        button.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">                dbHelper.getWritableDatabase();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">        Button addData=(Button)findViewById(R.id.add_data);</div><div class=\"line\">        addData.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">                SQLiteDatabase db=dbHelper.getWritableDatabase();</div><div class=\"line\"></div><div class=\"line\">                <span class=\"comment\">//向数据库中添加数据</span></div><div class=\"line\">                ContentValues values=<span class=\"keyword\">new</span> ContentValues();</div><div class=\"line\">                values.put(<span class=\"string\">\"author\"</span>,<span class=\"string\">\"Dan Brown\"</span>);</div><div class=\"line\">                values.put(<span class=\"string\">\"name\"</span>,<span class=\"string\">\"The Da\"</span>);</div><div class=\"line\">                values.put(<span class=\"string\">\"pages\"</span>,<span class=\"number\">454</span>);</div><div class=\"line\">                values.put(<span class=\"string\">\"price\"</span>, <span class=\"number\">16.96</span>);</div><div class=\"line\">                db.insert(<span class=\"string\">\"Book\"</span>,<span class=\"keyword\">null</span>,values);</div><div class=\"line\">                values.clear();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"数据存储到文件\"><a href=\"#数据存储到文件\" class=\"headerlink\" title=\"数据存储到文件\"></a>数据存储到文件</h2><p><code>Context</code>类提供了一个<code>openFileOutput()</code>方法，可以将数据存储到指定的文件中。接受两个参数，</p>\n<ol>\n<li>第一个参数是文件名(无需包含路径)，默认存储 到<code>/data/data/&lt;package name&gt;/files/</code>目录下。</li>\n<li>第二个参数是文件的操作模式，主要有两种：<code>MODE_PRIVATE</code>和<code>MODE_APPEND</code>。其中<code>MODE_PRIVATE</code>是默认的操作模式，表示当指定同样文件名的时候，所写入的内容将会覆盖原文件中的内容。<code>MODE_APPEND</code>则表示如果该文件已存在就往文件里面追加内容。还有另外两种模式：<code>MODE_WORLD_READABLE</code>和<code>MODE_WORLD_WRITEABLE</code>表示允许其它的应用程序对该程序中的文件进行读写操作，已被废弃。</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(String inputText)</span></span>&#123;</div><div class=\"line\">    FileOutputStream out=<span class=\"keyword\">null</span>;</div><div class=\"line\">    BufferedWriter writer=<span class=\"keyword\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">        out=openFileOutput(<span class=\"string\">\"data\"</span>, Context.MODE_PRIVATE);</div><div class=\"line\">        writer=<span class=\"keyword\">new</span> BufferedWriter(<span class=\"keyword\">new</span> OutputStreamWriter(out));</div><div class=\"line\">        writer.write(inputText);</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">        e.printStackTrace();</div><div class=\"line\">    &#125;<span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(writer!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                writer.close();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">load</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    FileInputStream in=<span class=\"keyword\">null</span>;</div><div class=\"line\">    BufferedReader reader=<span class=\"keyword\">null</span>;</div><div class=\"line\">    StringBuilder content=<span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">        in=openFileInput(<span class=\"string\">\"data\"</span>);</div><div class=\"line\">        reader=<span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(in));</div><div class=\"line\">        String line=<span class=\"string\">\"\"</span>;</div><div class=\"line\">        <span class=\"keyword\">while</span> ((line=reader.readLine())!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            content.append(line);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">        e.printStackTrace();</div><div class=\"line\">    &#125;<span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(reader!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">                reader.close();</div><div class=\"line\">            &#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> content.toString();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"SharedPreferences存储\"><a href=\"#SharedPreferences存储\" class=\"headerlink\" title=\"SharedPreferences存储\"></a>SharedPreferences存储</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//存储数据</span></div><div class=\"line\">SharedPreferences.Editor editor=getSharedPreferences(<span class=\"string\">\"data\"</span>,MODE_PRIVATE).edit();</div><div class=\"line\">editor.putString(<span class=\"string\">\"name\"</span>,<span class=\"string\">\"Tom\"</span>);</div><div class=\"line\">editor.putInt(<span class=\"string\">\"age\"</span>, <span class=\"number\">28</span>);</div><div class=\"line\">editor.putBoolean(<span class=\"string\">\"married\"</span>, <span class=\"keyword\">false</span>);</div><div class=\"line\">editor.commit();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//读取数据</span></div><div class=\"line\"></div><div class=\"line\">SharedPreferences preferences=getSharedPreferences(<span class=\"string\">\"data\"</span>,MODE_PRIVATE);</div><div class=\"line\">String name=preferences.getString(<span class=\"string\">\"name\"</span>, <span class=\"string\">\"\"</span>);</div><div class=\"line\"><span class=\"keyword\">boolean</span> married=preferences.getBoolean(<span class=\"string\">\"married\"</span>, <span class=\"keyword\">false</span>);</div><div class=\"line\"><span class=\"keyword\">int</span> age=preferences.getInt(<span class=\"string\">\"age\"</span>,<span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<h2 id=\"SQLite\"><a href=\"#SQLite\" class=\"headerlink\" title=\"SQLite\"></a>SQLite</h2><p>安卓提供了一个<code>SQLiteOpenHelper</code>帮助类，可以借助这个类对数据库进行创建和升级。</p>\n<h3 id=\"建表\"><a href=\"#建表\" class=\"headerlink\" title=\"建表\"></a>建表</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">//建表</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> Book&#123;</div><div class=\"line\">\t<span class=\"keyword\">id</span> <span class=\"built_in\">integer</span> primary <span class=\"keyword\">key</span> autoincrement,</div><div class=\"line\">    author <span class=\"built_in\">text</span>,</div><div class=\"line\">    price <span class=\"built_in\">real</span>,</div><div class=\"line\">    pages <span class=\"built_in\">integer</span>,</div><div class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">text</span>,</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ol>\n<li><code>integer</code>:整型</li>\n<li><code>real</code>：浮点型</li>\n<li><code>text</code>：文本类型</li>\n<li><code>blob</code>：二进制类型</li>\n</ol>\n<h3 id=\"添加数据\"><a href=\"#添加数据\" class=\"headerlink\" title=\"添加数据\"></a>添加数据</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">SQLiteDatabase db=dbHelper.getWritableDatabase();</div><div class=\"line\">ContentValues values=<span class=\"keyword\">new</span> ContentValues();</div><div class=\"line\">values.put(<span class=\"string\">\"author\"</span>,<span class=\"string\">\"Dan Brown\"</span>);</div><div class=\"line\">values.put(<span class=\"string\">\"name\"</span>,<span class=\"string\">\"The Da Vinci Code\"</span>);</div><div class=\"line\">values.put(<span class=\"string\">\"pages\"</span>,<span class=\"number\">454</span>);</div><div class=\"line\">values.put(<span class=\"string\">\"price\"</span>, <span class=\"number\">16.96</span>);</div><div class=\"line\">db.insert(<span class=\"string\">\"Book\"</span>,<span class=\"keyword\">null</span>,values);</div><div class=\"line\">values.clear();</div></pre></td></tr></table></figure>\n<p>向数据库中添加数据</p>\n<h3 id=\"更新数据\"><a href=\"#更新数据\" class=\"headerlink\" title=\"更新数据\"></a>更新数据</h3><p>可以使用<br><code>db.update(String Table,ContenValues values,String WhereClauses,String[] WhereArgs)</code></p>\n<p>第三个参数对应SQL语句中的<code>where</code>，其中用<code>?</code>作占位符，第四个参数则表示<code>?</code>的内容。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//表示将name为The Da Vinci Code 的价格改为10.99</span></div><div class=\"line\">ConteValues values=<span class=\"keyword\">new</span> ContentValues();</div><div class=\"line\">values.put(<span class=\"string\">\"price\"</span>,<span class=\"number\">10.99</span>);</div><div class=\"line\">db.update(<span class=\"string\">\"Book\"</span>,values,<span class=\"string\">\"name=?\"</span>,<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"The Da Vinci Code\"</span>&#125;)；</div></pre></td></tr></table></figure>\n<h3 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h3><p>可以使用<code>db.delete(String Table,String WhereClauses,String[] WhereArgs)</code><br>第二，三两个参数用来约束删除某一行或几行的数据，不指定的话就默认删除所有行。</p>\n<h3 id=\"查询数据\"><a href=\"#查询数据\" class=\"headerlink\" title=\"查询数据\"></a>查询数据</h3><table>\n<thead>\n<tr>\n<th>query()方法参数</th>\n<th>对应SQL部分</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>table</td>\n<td>from table_name</td>\n<td>指定查询的表名</td>\n</tr>\n<tr>\n<td>columns</td>\n<td>select column1,column2</td>\n<td>指定查询的列名</td>\n</tr>\n<tr>\n<td>selection</td>\n<td>where column=value</td>\n<td>指定where的约束条件</td>\n</tr>\n<tr>\n<td>selectionArgs</td>\n<td>-</td>\n<td>为where中的占位符提供具体的数值</td>\n</tr>\n<tr>\n<td>groupBy</td>\n<td>group by column</td>\n<td>指定需要group by的列</td>\n</tr>\n<tr>\n<td>having</td>\n<td>having column=value</td>\n<td>对group by后的结果进一步约束</td>\n</tr>\n<tr>\n<td>orderBy</td>\n<td>order by column1, column2</td>\n<td>指定查询结果的排序方式</td>\n</tr>\n</tbody>\n</table>\n<p><code>Cursor cursor = db.query(&quot;Book&quot;, null, null, null, null, null, null);</code><br>上式查询表中所有数据</p>\n<h3 id=\"直接使用SQL语句\"><a href=\"#直接使用SQL语句\" class=\"headerlink\" title=\"直接使用SQL语句\"></a>直接使用SQL语句</h3><p>除查询之外的所有方法可以条用<code>db.execSQL(...)</code>接执行SQL语句<br>查询数据的方法时可调用它<code>db.rawQuery(...)</code>接执行SQL语句</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyDatabaseHelper</span> <span class=\"keyword\">extends</span> <span class=\"title\">SQLiteOpenHelper</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> Context mContext;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CREATE_BOOK=<span class=\"string\">\"create table Book (\"</span> +</div><div class=\"line\">            <span class=\"string\">\"id integer primary key autoincrement,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"author text,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"price real,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"pages integer,\"</span> +</div><div class=\"line\">            <span class=\"string\">\"name text)\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyDatabaseHelper</span><span class=\"params\">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class=\"keyword\">int</span> version)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, name, factory, version);</div><div class=\"line\">        mContext=context;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(SQLiteDatabase db)</span> </span>&#123;</div><div class=\"line\">        db.execSQL(CREATE_BOOK);</div><div class=\"line\">        <span class=\"comment\">//db.execSQL(CREATE_CATEGORY);</span></div><div class=\"line\">        Toast.makeText(mContext,<span class=\"string\">\"Create succeeded\"</span>, Toast.LENGTH_SHORT).show();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUpgrade</span><span class=\"params\">(SQLiteDatabase db, <span class=\"keyword\">int</span> oldVersion, <span class=\"keyword\">int</span> newVersion)</span> </span>&#123;</div><div class=\"line\">        db.execSQL(<span class=\"string\">\"drop table if exists Book\"</span>);</div><div class=\"line\">        db.execSQL(<span class=\"string\">\"drop table if exists Category\"</span>);</div><div class=\"line\">        onCreate(db);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> MyDatabaseHelper dbHelper;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//最后一个数是版本号，若版本号比原先高，则会调用  SQLiteOpenHelper中的onUpgrade()。</span></div><div class=\"line\">        dbHelper=<span class=\"keyword\">new</span> MyDatabaseHelper(<span class=\"keyword\">this</span>,<span class=\"string\">\"BookStore.db\"</span>,<span class=\"keyword\">null</span>,<span class=\"number\">5</span>);</div><div class=\"line\"></div><div class=\"line\">        Button button=(Button)findViewById(R.id.button);</div><div class=\"line\"></div><div class=\"line\">        button.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">                dbHelper.getWritableDatabase();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">        Button addData=(Button)findViewById(R.id.add_data);</div><div class=\"line\">        addData.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">                SQLiteDatabase db=dbHelper.getWritableDatabase();</div><div class=\"line\"></div><div class=\"line\">                <span class=\"comment\">//向数据库中添加数据</span></div><div class=\"line\">                ContentValues values=<span class=\"keyword\">new</span> ContentValues();</div><div class=\"line\">                values.put(<span class=\"string\">\"author\"</span>,<span class=\"string\">\"Dan Brown\"</span>);</div><div class=\"line\">                values.put(<span class=\"string\">\"name\"</span>,<span class=\"string\">\"The Da\"</span>);</div><div class=\"line\">                values.put(<span class=\"string\">\"pages\"</span>,<span class=\"number\">454</span>);</div><div class=\"line\">                values.put(<span class=\"string\">\"price\"</span>, <span class=\"number\">16.96</span>);</div><div class=\"line\">                db.insert(<span class=\"string\">\"Book\"</span>,<span class=\"keyword\">null</span>,values);</div><div class=\"line\">                values.clear();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-10-25T16:00:00.000Z","title":"不同容器类是否线程安全","keywords":null,"description":null,"toc":true,"_content":"\n|非线程安全|线程安全|\n|---|---|\n|`ArrayList`<br> `LinkedList`|`Vector`|\n|`HashMap`|`HashTable`|\n|`StringBuilder`|`StringBuffer`|\n\n<!--more-->\n\n\n## 区别\n\n容器类线程安全, 非线程安全的区别可以用下面这个例子来表述:\n\n以`ArrayList`和`Vector`为例, 同时建立100个线程, 每个线程都向容器中添加100个元素,\n最后统计容器内元素的数量, 对于`ArrayList`来说, 最后的量并不一定是10000个, 甚至会出现`IndexOutofBoundsException`, 但是对于`Vector`来说, 最后的量一定是10000个, 且不会出现任何异常. 这便是线程安全与非线程安全的一个直观表现.\n\n### 非线程安全 != 多线程下不可使用\n\n非线程安全并不意味这不可以在多线程环境下不可使用, 上述问题出现在多个线程操作同一个`ArrayList`对象, 如果一个`ArrayList`只在一个线程下进行操作, 还是可以使用`ArrayList`的.\n\n### 如何使非线程安全容器类变得线程安全\n\n使用`List<Object> list = Collections.synchronizedList(new ArrayList<Object>());`可以使`list`变得线程安全.\n\n## 造成非线程安全的原因\n\n一般来说, 造成非线程安全主要有两个原因:\n1. 一个操作不是原子性操作\n2. 执行过程中可能被中断\n\n查看`ArrayList`关于`add(E e)`的相关源码:\n\n```java\npublic boolean add(E e) {\n    ensureCapacityInternal(size + 1);  // Increments modCount!!\n    elementData[size++] = e;\n    return true;\n}\n\nprivate void ensureCapacityInternal(int minCapacity) {\n    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n    }\n\n    ensureExplicitCapacity(minCapacity);\n}\n\nprivate void ensureExplicitCapacity(int minCapacity) {\n    modCount++;\n\n    // overflow-conscious code\n    if (minCapacity - elementData.length > 0)\n        grow(minCapacity);\n}\n\nprivate void grow(int minCapacity) {\n    // overflow-conscious code\n    int oldCapacity = elementData.length;\n    int newCapacity = oldCapacity + (oldCapacity >> 1);\n    if (newCapacity - minCapacity < 0)\n        newCapacity = minCapacity;\n    if (newCapacity - MAX_ARRAY_SIZE > 0)\n        newCapacity = hugeCapacity(minCapacity);\n    // minCapacity is usually close to size, so this is a win:\n    elementData = Arrays.copyOf(elementData, newCapacity);\n}\n```\n### list中含有null的原因\n\n即使不发生`IndexOutofBoundsException`异常, 最后的元素总数也不全都是100000个.\n问题出现在`add(E e)`中的`elementData[size++] = e;`, 这句代码大致会分成以下两步:\n\n1. `elementData[size] = e;`\n2. `size++``\n\n如果线程A执行完第1步中断, 线程B开执行add, 执行到第1步时候因为`size`还未+1, 所以线程B仍会将e赋值给`elementData[size]`, 之后线程B执行+1操作, 线程A也执行+1操作, 也就意味着,并没有对 `elementData[size+1]`进行赋值, 其值也就为null.\n\n### 元素总量不符合预期的原因\n\n根本原因在于自加操作不是原子性的\n\n线程B可能在线程A执行`size++`中间就开始同时执行`size++`, 这可能会使得线程A,B执行之初时size值相同, 导致元素总量小于预期.\n\n### IndexOutofBoundsException产生原因\nArrayList实际上也是一个数组, 只不过可以自动扩容, 出现`IndexOutofBoundsException`说明在某些情况下, 还未扩容, 就添加元素进去了.\n\n例如,线程A开始执行`add()`, 执行到`ensureExplicitCapacity(int minCapacity)`中的条件语句时, 如果此时添加的元素总数==数组的长度-1, 那么并不会执行扩容操作. 但是如果此时, 线程A中断, 线程B开始执行, 此时由于线程A还未添加元素, 元素总数仍==数组的长度-1, 添加元素, 此时若线程A恢复, 开始执行添加元素, 由于此时元素总数==数组的长度, 再向其中添加元素就会抛出`IndexOutofBoundsException`异常.\n\n### Vector\n\n`Vector`中关于`add(E e)`的相关源码\n\n```java\npublic synchronized boolean add(E e) {\n    modCount++;\n    ensureCapacityHelper(elementCount + 1);\n    elementData[elementCount++] = e;\n    return true;\n}\n```\n","source":"_posts/java/concurrency/2016-10-26-collections-thread-safety.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-26\ntitle: 不同容器类是否线程安全\ncategory: OO\ntags: [Java, oncurrency]\nkeywords:\ndescription:\ntoc: true\n---\n\n|非线程安全|线程安全|\n|---|---|\n|`ArrayList`<br> `LinkedList`|`Vector`|\n|`HashMap`|`HashTable`|\n|`StringBuilder`|`StringBuffer`|\n\n<!--more-->\n\n\n## 区别\n\n容器类线程安全, 非线程安全的区别可以用下面这个例子来表述:\n\n以`ArrayList`和`Vector`为例, 同时建立100个线程, 每个线程都向容器中添加100个元素,\n最后统计容器内元素的数量, 对于`ArrayList`来说, 最后的量并不一定是10000个, 甚至会出现`IndexOutofBoundsException`, 但是对于`Vector`来说, 最后的量一定是10000个, 且不会出现任何异常. 这便是线程安全与非线程安全的一个直观表现.\n\n### 非线程安全 != 多线程下不可使用\n\n非线程安全并不意味这不可以在多线程环境下不可使用, 上述问题出现在多个线程操作同一个`ArrayList`对象, 如果一个`ArrayList`只在一个线程下进行操作, 还是可以使用`ArrayList`的.\n\n### 如何使非线程安全容器类变得线程安全\n\n使用`List<Object> list = Collections.synchronizedList(new ArrayList<Object>());`可以使`list`变得线程安全.\n\n## 造成非线程安全的原因\n\n一般来说, 造成非线程安全主要有两个原因:\n1. 一个操作不是原子性操作\n2. 执行过程中可能被中断\n\n查看`ArrayList`关于`add(E e)`的相关源码:\n\n```java\npublic boolean add(E e) {\n    ensureCapacityInternal(size + 1);  // Increments modCount!!\n    elementData[size++] = e;\n    return true;\n}\n\nprivate void ensureCapacityInternal(int minCapacity) {\n    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n    }\n\n    ensureExplicitCapacity(minCapacity);\n}\n\nprivate void ensureExplicitCapacity(int minCapacity) {\n    modCount++;\n\n    // overflow-conscious code\n    if (minCapacity - elementData.length > 0)\n        grow(minCapacity);\n}\n\nprivate void grow(int minCapacity) {\n    // overflow-conscious code\n    int oldCapacity = elementData.length;\n    int newCapacity = oldCapacity + (oldCapacity >> 1);\n    if (newCapacity - minCapacity < 0)\n        newCapacity = minCapacity;\n    if (newCapacity - MAX_ARRAY_SIZE > 0)\n        newCapacity = hugeCapacity(minCapacity);\n    // minCapacity is usually close to size, so this is a win:\n    elementData = Arrays.copyOf(elementData, newCapacity);\n}\n```\n### list中含有null的原因\n\n即使不发生`IndexOutofBoundsException`异常, 最后的元素总数也不全都是100000个.\n问题出现在`add(E e)`中的`elementData[size++] = e;`, 这句代码大致会分成以下两步:\n\n1. `elementData[size] = e;`\n2. `size++``\n\n如果线程A执行完第1步中断, 线程B开执行add, 执行到第1步时候因为`size`还未+1, 所以线程B仍会将e赋值给`elementData[size]`, 之后线程B执行+1操作, 线程A也执行+1操作, 也就意味着,并没有对 `elementData[size+1]`进行赋值, 其值也就为null.\n\n### 元素总量不符合预期的原因\n\n根本原因在于自加操作不是原子性的\n\n线程B可能在线程A执行`size++`中间就开始同时执行`size++`, 这可能会使得线程A,B执行之初时size值相同, 导致元素总量小于预期.\n\n### IndexOutofBoundsException产生原因\nArrayList实际上也是一个数组, 只不过可以自动扩容, 出现`IndexOutofBoundsException`说明在某些情况下, 还未扩容, 就添加元素进去了.\n\n例如,线程A开始执行`add()`, 执行到`ensureExplicitCapacity(int minCapacity)`中的条件语句时, 如果此时添加的元素总数==数组的长度-1, 那么并不会执行扩容操作. 但是如果此时, 线程A中断, 线程B开始执行, 此时由于线程A还未添加元素, 元素总数仍==数组的长度-1, 添加元素, 此时若线程A恢复, 开始执行添加元素, 由于此时元素总数==数组的长度, 再向其中添加元素就会抛出`IndexOutofBoundsException`异常.\n\n### Vector\n\n`Vector`中关于`add(E e)`的相关源码\n\n```java\npublic synchronized boolean add(E e) {\n    modCount++;\n    ensureCapacityHelper(elementCount + 1);\n    elementData[elementCount++] = e;\n    return true;\n}\n```\n","slug":"java/concurrency/2016-10-26-collections-thread-safety","published":1,"updated":"2016-10-26T11:51:11.278Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgit0042u8jrr44ps1yi","content":"<table>\n<thead>\n<tr>\n<th>非线程安全</th>\n<th>线程安全</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>ArrayList</code><br> <code>LinkedList</code></td>\n<td><code>Vector</code></td>\n</tr>\n<tr>\n<td><code>HashMap</code></td>\n<td><code>HashTable</code></td>\n</tr>\n<tr>\n<td><code>StringBuilder</code></td>\n<td><code>StringBuffer</code></td>\n</tr>\n</tbody>\n</table>\n<a id=\"more\"></a>\n<h2 id=\"区别\"><a href=\"#区别\" class=\"headerlink\" title=\"区别\"></a>区别</h2><p>容器类线程安全, 非线程安全的区别可以用下面这个例子来表述:</p>\n<p>以<code>ArrayList</code>和<code>Vector</code>为例, 同时建立100个线程, 每个线程都向容器中添加100个元素,<br>最后统计容器内元素的数量, 对于<code>ArrayList</code>来说, 最后的量并不一定是10000个, 甚至会出现<code>IndexOutofBoundsException</code>, 但是对于<code>Vector</code>来说, 最后的量一定是10000个, 且不会出现任何异常. 这便是线程安全与非线程安全的一个直观表现.</p>\n<h3 id=\"非线程安全-多线程下不可使用\"><a href=\"#非线程安全-多线程下不可使用\" class=\"headerlink\" title=\"非线程安全 != 多线程下不可使用\"></a>非线程安全 != 多线程下不可使用</h3><p>非线程安全并不意味这不可以在多线程环境下不可使用, 上述问题出现在多个线程操作同一个<code>ArrayList</code>对象, 如果一个<code>ArrayList</code>只在一个线程下进行操作, 还是可以使用<code>ArrayList</code>的.</p>\n<h3 id=\"如何使非线程安全容器类变得线程安全\"><a href=\"#如何使非线程安全容器类变得线程安全\" class=\"headerlink\" title=\"如何使非线程安全容器类变得线程安全\"></a>如何使非线程安全容器类变得线程安全</h3><p>使用<code>List&lt;Object&gt; list = Collections.synchronizedList(new ArrayList&lt;Object&gt;());</code>可以使<code>list</code>变得线程安全.</p>\n<h2 id=\"造成非线程安全的原因\"><a href=\"#造成非线程安全的原因\" class=\"headerlink\" title=\"造成非线程安全的原因\"></a>造成非线程安全的原因</h2><p>一般来说, 造成非线程安全主要有两个原因:</p>\n<ol>\n<li>一个操作不是原子性操作</li>\n<li>执行过程中可能被中断</li>\n</ol>\n<p>查看<code>ArrayList</code>关于<code>add(E e)</code>的相关源码:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">    ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></div><div class=\"line\">    elementData[size++] = e;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureCapacityInternal</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</div><div class=\"line\">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    ensureExplicitCapacity(minCapacity);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureExplicitCapacity</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</div><div class=\"line\">    modCount++;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// overflow-conscious code</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; <span class=\"number\">0</span>)</div><div class=\"line\">        grow(minCapacity);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">grow</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// overflow-conscious code</span></div><div class=\"line\">    <span class=\"keyword\">int</span> oldCapacity = elementData.length;</div><div class=\"line\">    <span class=\"keyword\">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; <span class=\"number\">0</span>)</div><div class=\"line\">        newCapacity = minCapacity;</div><div class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class=\"number\">0</span>)</div><div class=\"line\">        newCapacity = hugeCapacity(minCapacity);</div><div class=\"line\">    <span class=\"comment\">// minCapacity is usually close to size, so this is a win:</span></div><div class=\"line\">    elementData = Arrays.copyOf(elementData, newCapacity);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"list中含有null的原因\"><a href=\"#list中含有null的原因\" class=\"headerlink\" title=\"list中含有null的原因\"></a>list中含有null的原因</h3><p>即使不发生<code>IndexOutofBoundsException</code>异常, 最后的元素总数也不全都是100000个.<br>问题出现在<code>add(E e)</code>中的<code>elementData[size++] = e;</code>, 这句代码大致会分成以下两步:</p>\n<ol>\n<li><code>elementData[size] = e;</code></li>\n<li>`size++``</li>\n</ol>\n<p>如果线程A执行完第1步中断, 线程B开执行add, 执行到第1步时候因为<code>size</code>还未+1, 所以线程B仍会将e赋值给<code>elementData[size]</code>, 之后线程B执行+1操作, 线程A也执行+1操作, 也就意味着,并没有对 <code>elementData[size+1]</code>进行赋值, 其值也就为null.</p>\n<h3 id=\"元素总量不符合预期的原因\"><a href=\"#元素总量不符合预期的原因\" class=\"headerlink\" title=\"元素总量不符合预期的原因\"></a>元素总量不符合预期的原因</h3><p>根本原因在于自加操作不是原子性的</p>\n<p>线程B可能在线程A执行<code>size++</code>中间就开始同时执行<code>size++</code>, 这可能会使得线程A,B执行之初时size值相同, 导致元素总量小于预期.</p>\n<h3 id=\"IndexOutofBoundsException产生原因\"><a href=\"#IndexOutofBoundsException产生原因\" class=\"headerlink\" title=\"IndexOutofBoundsException产生原因\"></a>IndexOutofBoundsException产生原因</h3><p>ArrayList实际上也是一个数组, 只不过可以自动扩容, 出现<code>IndexOutofBoundsException</code>说明在某些情况下, 还未扩容, 就添加元素进去了.</p>\n<p>例如,线程A开始执行<code>add()</code>, 执行到<code>ensureExplicitCapacity(int minCapacity)</code>中的条件语句时, 如果此时添加的元素总数==数组的长度-1, 那么并不会执行扩容操作. 但是如果此时, 线程A中断, 线程B开始执行, 此时由于线程A还未添加元素, 元素总数仍==数组的长度-1, 添加元素, 此时若线程A恢复, 开始执行添加元素, 由于此时元素总数==数组的长度, 再向其中添加元素就会抛出<code>IndexOutofBoundsException</code>异常.</p>\n<h3 id=\"Vector\"><a href=\"#Vector\" class=\"headerlink\" title=\"Vector\"></a>Vector</h3><p><code>Vector</code>中关于<code>add(E e)</code>的相关源码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">    modCount++;</div><div class=\"line\">    ensureCapacityHelper(elementCount + <span class=\"number\">1</span>);</div><div class=\"line\">    elementData[elementCount++] = e;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"<table>\n<thead>\n<tr>\n<th>非线程安全</th>\n<th>线程安全</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>ArrayList</code><br> <code>LinkedList</code></td>\n<td><code>Vector</code></td>\n</tr>\n<tr>\n<td><code>HashMap</code></td>\n<td><code>HashTable</code></td>\n</tr>\n<tr>\n<td><code>StringBuilder</code></td>\n<td><code>StringBuffer</code></td>\n</tr>\n</tbody>\n</table>","more":"<h2 id=\"区别\"><a href=\"#区别\" class=\"headerlink\" title=\"区别\"></a>区别</h2><p>容器类线程安全, 非线程安全的区别可以用下面这个例子来表述:</p>\n<p>以<code>ArrayList</code>和<code>Vector</code>为例, 同时建立100个线程, 每个线程都向容器中添加100个元素,<br>最后统计容器内元素的数量, 对于<code>ArrayList</code>来说, 最后的量并不一定是10000个, 甚至会出现<code>IndexOutofBoundsException</code>, 但是对于<code>Vector</code>来说, 最后的量一定是10000个, 且不会出现任何异常. 这便是线程安全与非线程安全的一个直观表现.</p>\n<h3 id=\"非线程安全-多线程下不可使用\"><a href=\"#非线程安全-多线程下不可使用\" class=\"headerlink\" title=\"非线程安全 != 多线程下不可使用\"></a>非线程安全 != 多线程下不可使用</h3><p>非线程安全并不意味这不可以在多线程环境下不可使用, 上述问题出现在多个线程操作同一个<code>ArrayList</code>对象, 如果一个<code>ArrayList</code>只在一个线程下进行操作, 还是可以使用<code>ArrayList</code>的.</p>\n<h3 id=\"如何使非线程安全容器类变得线程安全\"><a href=\"#如何使非线程安全容器类变得线程安全\" class=\"headerlink\" title=\"如何使非线程安全容器类变得线程安全\"></a>如何使非线程安全容器类变得线程安全</h3><p>使用<code>List&lt;Object&gt; list = Collections.synchronizedList(new ArrayList&lt;Object&gt;());</code>可以使<code>list</code>变得线程安全.</p>\n<h2 id=\"造成非线程安全的原因\"><a href=\"#造成非线程安全的原因\" class=\"headerlink\" title=\"造成非线程安全的原因\"></a>造成非线程安全的原因</h2><p>一般来说, 造成非线程安全主要有两个原因:</p>\n<ol>\n<li>一个操作不是原子性操作</li>\n<li>执行过程中可能被中断</li>\n</ol>\n<p>查看<code>ArrayList</code>关于<code>add(E e)</code>的相关源码:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">    ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></div><div class=\"line\">    elementData[size++] = e;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureCapacityInternal</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</div><div class=\"line\">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    ensureExplicitCapacity(minCapacity);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureExplicitCapacity</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</div><div class=\"line\">    modCount++;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// overflow-conscious code</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; <span class=\"number\">0</span>)</div><div class=\"line\">        grow(minCapacity);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">grow</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// overflow-conscious code</span></div><div class=\"line\">    <span class=\"keyword\">int</span> oldCapacity = elementData.length;</div><div class=\"line\">    <span class=\"keyword\">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; <span class=\"number\">0</span>)</div><div class=\"line\">        newCapacity = minCapacity;</div><div class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class=\"number\">0</span>)</div><div class=\"line\">        newCapacity = hugeCapacity(minCapacity);</div><div class=\"line\">    <span class=\"comment\">// minCapacity is usually close to size, so this is a win:</span></div><div class=\"line\">    elementData = Arrays.copyOf(elementData, newCapacity);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"list中含有null的原因\"><a href=\"#list中含有null的原因\" class=\"headerlink\" title=\"list中含有null的原因\"></a>list中含有null的原因</h3><p>即使不发生<code>IndexOutofBoundsException</code>异常, 最后的元素总数也不全都是100000个.<br>问题出现在<code>add(E e)</code>中的<code>elementData[size++] = e;</code>, 这句代码大致会分成以下两步:</p>\n<ol>\n<li><code>elementData[size] = e;</code></li>\n<li>`size++``</li>\n</ol>\n<p>如果线程A执行完第1步中断, 线程B开执行add, 执行到第1步时候因为<code>size</code>还未+1, 所以线程B仍会将e赋值给<code>elementData[size]</code>, 之后线程B执行+1操作, 线程A也执行+1操作, 也就意味着,并没有对 <code>elementData[size+1]</code>进行赋值, 其值也就为null.</p>\n<h3 id=\"元素总量不符合预期的原因\"><a href=\"#元素总量不符合预期的原因\" class=\"headerlink\" title=\"元素总量不符合预期的原因\"></a>元素总量不符合预期的原因</h3><p>根本原因在于自加操作不是原子性的</p>\n<p>线程B可能在线程A执行<code>size++</code>中间就开始同时执行<code>size++</code>, 这可能会使得线程A,B执行之初时size值相同, 导致元素总量小于预期.</p>\n<h3 id=\"IndexOutofBoundsException产生原因\"><a href=\"#IndexOutofBoundsException产生原因\" class=\"headerlink\" title=\"IndexOutofBoundsException产生原因\"></a>IndexOutofBoundsException产生原因</h3><p>ArrayList实际上也是一个数组, 只不过可以自动扩容, 出现<code>IndexOutofBoundsException</code>说明在某些情况下, 还未扩容, 就添加元素进去了.</p>\n<p>例如,线程A开始执行<code>add()</code>, 执行到<code>ensureExplicitCapacity(int minCapacity)</code>中的条件语句时, 如果此时添加的元素总数==数组的长度-1, 那么并不会执行扩容操作. 但是如果此时, 线程A中断, 线程B开始执行, 此时由于线程A还未添加元素, 元素总数仍==数组的长度-1, 添加元素, 此时若线程A恢复, 开始执行添加元素, 由于此时元素总数==数组的长度, 再向其中添加元素就会抛出<code>IndexOutofBoundsException</code>异常.</p>\n<h3 id=\"Vector\"><a href=\"#Vector\" class=\"headerlink\" title=\"Vector\"></a>Vector</h3><p><code>Vector</code>中关于<code>add(E e)</code>的相关源码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">    modCount++;</div><div class=\"line\">    ensureCapacityHelper(elementCount + <span class=\"number\">1</span>);</div><div class=\"line\">    elementData[elementCount++] = e;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"},{"author":"ivyxjc","date":"2016-10-03T16:00:00.000Z","title":"matplotlib绘制2D，3D散点图","keywords":null,"description":"matplotlib是一个常见的绘图库. 本文介绍如何使用matplotlib 绘制2d散点图, 3d散点图.","_content":"\n\n\n## 2d散点图\n\n```python\n#设置颜色\ncolors = ['#0000FF','#3CB371']\n#各点大小的list\nsizeLab=np.add(sizeLab,20)\n# print(sizeLab)\n\n#设置横轴上下限\nplt.xlim(0,25)\n\n#设置横轴标号\n# plt.xticks(np.linspace(0,15,5,endpoint=True))\n\n#设置记号的标签\nplt.xticks([2*np.pi, 4*np.pi, 0, np.pi/2, np.pi],\n       [r'$2\\pi$', r'$4\\pi$', r'$0$', r'$\\pi/2$', r'$\\pi$'])\n\n#设置横纵坐标label\nplt.xlabel(\"x 轴label\")\nplt.ylabel(\"y 轴label\")\n\n\nplt.scatter(datingDataMat[:,1],datingDataMat[:,2],s=sizeLab, c=colors)\nplt.show()\n```\n\n## 3d散点图\n\n```python\nfig=plt.figure()\nax=fig.add_subplot(111,projection='3d')\n\n#设置坐标\nax.set_xlabel(\"飞行里程数\")\nax.set_ylabel(\"游戏时间百分比\")\nax.set_zlabel(\"冰激凌消耗量\")\n\ntype1=ax.scatter(dataDidnlike[:,0], dataDidnlike[:,1], dataDidnlike[:,2], c='#3c345b')\ntype2=ax.scatter(dataSmallDoses[:,0], dataSmallDoses[:,1],dataSmallDoses[:,2],c=\"#4576f7\")\ntype3=ax.scatter(dataLargeDoses[:,0], dataLargeDoses[:,1], dataLargeDoses[:,2],c=\"#43ff1a\")\n\n#设置图例\nax.legend((type1, type2, type3), (u'不喜欢', u'魅力一般', u'极具魅力'), loc=2)\n\nplt.show()\n```\n","source":"_posts/python/matplotlib/2016-10-04-matplotlib-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-04\ntitle: matplotlib绘制2D，3D散点图\ncategory: Python\ntags: [python,matplotlib]\nkeywords:\ndescription: matplotlib是一个常见的绘图库. 本文介绍如何使用matplotlib 绘制2d散点图, 3d散点图.\n---\n\n\n\n## 2d散点图\n\n```python\n#设置颜色\ncolors = ['#0000FF','#3CB371']\n#各点大小的list\nsizeLab=np.add(sizeLab,20)\n# print(sizeLab)\n\n#设置横轴上下限\nplt.xlim(0,25)\n\n#设置横轴标号\n# plt.xticks(np.linspace(0,15,5,endpoint=True))\n\n#设置记号的标签\nplt.xticks([2*np.pi, 4*np.pi, 0, np.pi/2, np.pi],\n       [r'$2\\pi$', r'$4\\pi$', r'$0$', r'$\\pi/2$', r'$\\pi$'])\n\n#设置横纵坐标label\nplt.xlabel(\"x 轴label\")\nplt.ylabel(\"y 轴label\")\n\n\nplt.scatter(datingDataMat[:,1],datingDataMat[:,2],s=sizeLab, c=colors)\nplt.show()\n```\n\n## 3d散点图\n\n```python\nfig=plt.figure()\nax=fig.add_subplot(111,projection='3d')\n\n#设置坐标\nax.set_xlabel(\"飞行里程数\")\nax.set_ylabel(\"游戏时间百分比\")\nax.set_zlabel(\"冰激凌消耗量\")\n\ntype1=ax.scatter(dataDidnlike[:,0], dataDidnlike[:,1], dataDidnlike[:,2], c='#3c345b')\ntype2=ax.scatter(dataSmallDoses[:,0], dataSmallDoses[:,1],dataSmallDoses[:,2],c=\"#4576f7\")\ntype3=ax.scatter(dataLargeDoses[:,0], dataLargeDoses[:,1], dataLargeDoses[:,2],c=\"#43ff1a\")\n\n#设置图例\nax.legend((type1, type2, type3), (u'不喜欢', u'魅力一般', u'极具魅力'), loc=2)\n\nplt.show()\n```\n","slug":"python/matplotlib/2016-10-04-matplotlib-basic","published":1,"updated":"2016-10-25T09:03:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgiu0045u8jrsezv0azq","content":"<h2 id=\"2d散点图\"><a href=\"#2d散点图\" class=\"headerlink\" title=\"2d散点图\"></a>2d散点图</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#设置颜色</span></div><div class=\"line\">colors = [<span class=\"string\">'#0000FF'</span>,<span class=\"string\">'#3CB371'</span>]</div><div class=\"line\"><span class=\"comment\">#各点大小的list</span></div><div class=\"line\">sizeLab=np.add(sizeLab,<span class=\"number\">20</span>)</div><div class=\"line\"><span class=\"comment\"># print(sizeLab)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置横轴上下限</span></div><div class=\"line\">plt.xlim(<span class=\"number\">0</span>,<span class=\"number\">25</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置横轴标号</span></div><div class=\"line\"><span class=\"comment\"># plt.xticks(np.linspace(0,15,5,endpoint=True))</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置记号的标签</span></div><div class=\"line\">plt.xticks([<span class=\"number\">2</span>*np.pi, <span class=\"number\">4</span>*np.pi, <span class=\"number\">0</span>, np.pi/<span class=\"number\">2</span>, np.pi],</div><div class=\"line\">       [<span class=\"string\">r'$2\\pi$'</span>, <span class=\"string\">r'$4\\pi$'</span>, <span class=\"string\">r'$0$'</span>, <span class=\"string\">r'$\\pi/2$'</span>, <span class=\"string\">r'$\\pi$'</span>])</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置横纵坐标label</span></div><div class=\"line\">plt.xlabel(<span class=\"string\">\"x 轴label\"</span>)</div><div class=\"line\">plt.ylabel(<span class=\"string\">\"y 轴label\"</span>)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">plt.scatter(datingDataMat[:,<span class=\"number\">1</span>],datingDataMat[:,<span class=\"number\">2</span>],s=sizeLab, c=colors)</div><div class=\"line\">plt.show()</div></pre></td></tr></table></figure>\n<h2 id=\"3d散点图\"><a href=\"#3d散点图\" class=\"headerlink\" title=\"3d散点图\"></a>3d散点图</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">fig=plt.figure()</div><div class=\"line\">ax=fig.add_subplot(<span class=\"number\">111</span>,projection=<span class=\"string\">'3d'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置坐标</span></div><div class=\"line\">ax.set_xlabel(<span class=\"string\">\"飞行里程数\"</span>)</div><div class=\"line\">ax.set_ylabel(<span class=\"string\">\"游戏时间百分比\"</span>)</div><div class=\"line\">ax.set_zlabel(<span class=\"string\">\"冰激凌消耗量\"</span>)</div><div class=\"line\"></div><div class=\"line\">type1=ax.scatter(dataDidnlike[:,<span class=\"number\">0</span>], dataDidnlike[:,<span class=\"number\">1</span>], dataDidnlike[:,<span class=\"number\">2</span>], c=<span class=\"string\">'#3c345b'</span>)</div><div class=\"line\">type2=ax.scatter(dataSmallDoses[:,<span class=\"number\">0</span>], dataSmallDoses[:,<span class=\"number\">1</span>],dataSmallDoses[:,<span class=\"number\">2</span>],c=<span class=\"string\">\"#4576f7\"</span>)</div><div class=\"line\">type3=ax.scatter(dataLargeDoses[:,<span class=\"number\">0</span>], dataLargeDoses[:,<span class=\"number\">1</span>], dataLargeDoses[:,<span class=\"number\">2</span>],c=<span class=\"string\">\"#43ff1a\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置图例</span></div><div class=\"line\">ax.legend((type1, type2, type3), (<span class=\"string\">u'不喜欢'</span>, <span class=\"string\">u'魅力一般'</span>, <span class=\"string\">u'极具魅力'</span>), loc=<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\">plt.show()</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"2d散点图\"><a href=\"#2d散点图\" class=\"headerlink\" title=\"2d散点图\"></a>2d散点图</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#设置颜色</span></div><div class=\"line\">colors = [<span class=\"string\">'#0000FF'</span>,<span class=\"string\">'#3CB371'</span>]</div><div class=\"line\"><span class=\"comment\">#各点大小的list</span></div><div class=\"line\">sizeLab=np.add(sizeLab,<span class=\"number\">20</span>)</div><div class=\"line\"><span class=\"comment\"># print(sizeLab)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置横轴上下限</span></div><div class=\"line\">plt.xlim(<span class=\"number\">0</span>,<span class=\"number\">25</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置横轴标号</span></div><div class=\"line\"><span class=\"comment\"># plt.xticks(np.linspace(0,15,5,endpoint=True))</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置记号的标签</span></div><div class=\"line\">plt.xticks([<span class=\"number\">2</span>*np.pi, <span class=\"number\">4</span>*np.pi, <span class=\"number\">0</span>, np.pi/<span class=\"number\">2</span>, np.pi],</div><div class=\"line\">       [<span class=\"string\">r'$2\\pi$'</span>, <span class=\"string\">r'$4\\pi$'</span>, <span class=\"string\">r'$0$'</span>, <span class=\"string\">r'$\\pi/2$'</span>, <span class=\"string\">r'$\\pi$'</span>])</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置横纵坐标label</span></div><div class=\"line\">plt.xlabel(<span class=\"string\">\"x 轴label\"</span>)</div><div class=\"line\">plt.ylabel(<span class=\"string\">\"y 轴label\"</span>)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">plt.scatter(datingDataMat[:,<span class=\"number\">1</span>],datingDataMat[:,<span class=\"number\">2</span>],s=sizeLab, c=colors)</div><div class=\"line\">plt.show()</div></pre></td></tr></table></figure>\n<h2 id=\"3d散点图\"><a href=\"#3d散点图\" class=\"headerlink\" title=\"3d散点图\"></a>3d散点图</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">fig=plt.figure()</div><div class=\"line\">ax=fig.add_subplot(<span class=\"number\">111</span>,projection=<span class=\"string\">'3d'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置坐标</span></div><div class=\"line\">ax.set_xlabel(<span class=\"string\">\"飞行里程数\"</span>)</div><div class=\"line\">ax.set_ylabel(<span class=\"string\">\"游戏时间百分比\"</span>)</div><div class=\"line\">ax.set_zlabel(<span class=\"string\">\"冰激凌消耗量\"</span>)</div><div class=\"line\"></div><div class=\"line\">type1=ax.scatter(dataDidnlike[:,<span class=\"number\">0</span>], dataDidnlike[:,<span class=\"number\">1</span>], dataDidnlike[:,<span class=\"number\">2</span>], c=<span class=\"string\">'#3c345b'</span>)</div><div class=\"line\">type2=ax.scatter(dataSmallDoses[:,<span class=\"number\">0</span>], dataSmallDoses[:,<span class=\"number\">1</span>],dataSmallDoses[:,<span class=\"number\">2</span>],c=<span class=\"string\">\"#4576f7\"</span>)</div><div class=\"line\">type3=ax.scatter(dataLargeDoses[:,<span class=\"number\">0</span>], dataLargeDoses[:,<span class=\"number\">1</span>], dataLargeDoses[:,<span class=\"number\">2</span>],c=<span class=\"string\">\"#43ff1a\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#设置图例</span></div><div class=\"line\">ax.legend((type1, type2, type3), (<span class=\"string\">u'不喜欢'</span>, <span class=\"string\">u'魅力一般'</span>, <span class=\"string\">u'极具魅力'</span>), loc=<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\">plt.show()</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-11-24T16:00:00.000Z","title":"利用Retrofit, RxJava获取网络内容","keywords":null,"description":"Retrofit","_content":"\n\n## Retrofit & RxJava\n关于如何使用Retrofit和RxJava请阅读参考中的两篇文章.\n\n## Retrofit处理数据\n\nRetrofit是在什么时候处理从网络中获取到的json数据的呢? 我从几个使用了Retrofit的项目源代码寻找了半天, 也没有找到处理json的相关代码. 后来才发现, Retrofit中使用`.addConverterFactory(GsonConverterFactory.create())`其实就是自动添加了json解析, 它会将json数据直接转换为java类(即Pojo).\n\n[convertToPojo](http://pojo.sodhanalibrary.com/)可以根据json的内容自动生成Pojo类.\n\n\n### 以豆瓣api为例\n\n#### json数据格式\n豆瓣正在热映的json数据格式大致如下:\n\n![](http://oezmbgg4j.bkt.clouddn.com/douban_json.png)\n\n```java\nDoubanService.java\n\ninterface DoubanService {\n    @GET(\"/v2/movie/in_theaters\")\n    Call<Douban> getList();\n}\n```\n\n#### pojo类\n\n```java\npublic class Douban {\n    @SerializedName(value = \"subjects\")\n    private List<Subjects> subjects;\n\n    ...Getter and Setter..\n}\n```\n\n```java\n\npublic class Subjects {\n    private String id;\n    private String title;\n    private Rating rating;\n}\n```\n\n```java\npublic class Rating {\n    private String min;\n    private String max;\n    private String stars;\n\n    ...Getter and Setter..\n}\n```\n\n#### 处理并显示数据\n\n```java\npublic class DoubanRun extends Thread {\n    @Override\n    public void run() {\n        super.run();\n        Retrofit retrofit=new Retrofit.Builder()\n                .baseUrl(\"https://api.douban.com\")\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n        DoubanService douban=retrofit.create(DoubanService.class);\n        Call<Douban> call=douban.getList();\n\n        try {\n            Douban d=call.execute().body();\n            for (Subjects l:d.getSubjects()){\n                 Log.i(\"TAGGGG\",l.getId()+\" \"+l.getTitle());\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n            Log.i(\"TAGGGG\",\"ff\");\n        }\n    }\n}\n```\n\n结果\n\n```\n26630781 我不是潘金莲\n25726614 神奇动物在哪里\n25793398 海洋奇缘\n26365631 冲天火\n26596486 名侦探柯南：纯黑的恶梦\n3025375 奇异博士\n26370431 夏威夷之恋\n26673217 我是处女座\n26696875 最萌身高差\n25983044 比利·林恩的中场战事\n22266320 深海浩劫\n26876505 怨灵地下室\n25921812 驴得水\n26598021 航海王之黄\n...\n```\n\n#### 配合RxJava\n\n`DoubanService.java`改为:\n\n```java\ninterface DoubanService {\n    @GET(\"/v2/movie/in_theaters\")\n    Observable<Douban> getList();\n}\n```\n\n`DoubanRun`改为:\n\n```java\npublic class DoubanRun extends Thread {\n\n    @Override\n    public void run() {\n        super.run();\n\n        Retrofit retrofit=new Retrofit.Builder()\n                .baseUrl(\"https://api.douban.com\")\n                .addConverterFactory(GsonConverterFactory.create())\n                //\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n\n                .build();\n\n        DoubanService doubanService=retrofit.create(DoubanService.class);\n\n        doubanService.getList()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Subscriber<Douban>() {\n                    @Override\n                    public void onCompleted() {\n\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(Douban douban) {\n                        for (Subjects l:douban.getSubjects()){\n                            Log.i(\"TAGGGG\",l.getId()+\" \"+l.getTitle());\n\n                        }\n                    }\n                });\n    }\n}\n\n```\n\n#### 注意点\n\n1. 出现`Expected BEGIN_ARRAY but was BEGIN_OBJECT at`或者pojo类中对应的变量的类型不对. 比如 如果在`Subjects`类中将rating设为String. 就会有`Expected String but was BEGIN_OBJECT at...`错误.\n\n\n\n## 参考文章\n1. [给 Android 开发者的 RxJava 详解](https://gank.io/post/560e15be2dca930e00da1083)<br>[archive.org备份页面](https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083)\n2. [RxJava 与 Retrofit 结合的最佳实践](https://gank.io/post/56e80c2c677659311bed9841)<br>[archive.org备份页面](https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841)\n","source":"_posts/android/第三方库/2016-11-25-retrofit-rxjava.md","raw":"---\nauthor: ivyxjc\ndate: 2016-11-25\ntitle: 利用Retrofit, RxJava获取网络内容\ncategory: Android\ntags: [android,android_lib]\nkeywords:\ndescription: Retrofit\n---\n\n\n## Retrofit & RxJava\n关于如何使用Retrofit和RxJava请阅读参考中的两篇文章.\n\n## Retrofit处理数据\n\nRetrofit是在什么时候处理从网络中获取到的json数据的呢? 我从几个使用了Retrofit的项目源代码寻找了半天, 也没有找到处理json的相关代码. 后来才发现, Retrofit中使用`.addConverterFactory(GsonConverterFactory.create())`其实就是自动添加了json解析, 它会将json数据直接转换为java类(即Pojo).\n\n[convertToPojo](http://pojo.sodhanalibrary.com/)可以根据json的内容自动生成Pojo类.\n\n\n### 以豆瓣api为例\n\n#### json数据格式\n豆瓣正在热映的json数据格式大致如下:\n\n![](http://oezmbgg4j.bkt.clouddn.com/douban_json.png)\n\n```java\nDoubanService.java\n\ninterface DoubanService {\n    @GET(\"/v2/movie/in_theaters\")\n    Call<Douban> getList();\n}\n```\n\n#### pojo类\n\n```java\npublic class Douban {\n    @SerializedName(value = \"subjects\")\n    private List<Subjects> subjects;\n\n    ...Getter and Setter..\n}\n```\n\n```java\n\npublic class Subjects {\n    private String id;\n    private String title;\n    private Rating rating;\n}\n```\n\n```java\npublic class Rating {\n    private String min;\n    private String max;\n    private String stars;\n\n    ...Getter and Setter..\n}\n```\n\n#### 处理并显示数据\n\n```java\npublic class DoubanRun extends Thread {\n    @Override\n    public void run() {\n        super.run();\n        Retrofit retrofit=new Retrofit.Builder()\n                .baseUrl(\"https://api.douban.com\")\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n        DoubanService douban=retrofit.create(DoubanService.class);\n        Call<Douban> call=douban.getList();\n\n        try {\n            Douban d=call.execute().body();\n            for (Subjects l:d.getSubjects()){\n                 Log.i(\"TAGGGG\",l.getId()+\" \"+l.getTitle());\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n            Log.i(\"TAGGGG\",\"ff\");\n        }\n    }\n}\n```\n\n结果\n\n```\n26630781 我不是潘金莲\n25726614 神奇动物在哪里\n25793398 海洋奇缘\n26365631 冲天火\n26596486 名侦探柯南：纯黑的恶梦\n3025375 奇异博士\n26370431 夏威夷之恋\n26673217 我是处女座\n26696875 最萌身高差\n25983044 比利·林恩的中场战事\n22266320 深海浩劫\n26876505 怨灵地下室\n25921812 驴得水\n26598021 航海王之黄\n...\n```\n\n#### 配合RxJava\n\n`DoubanService.java`改为:\n\n```java\ninterface DoubanService {\n    @GET(\"/v2/movie/in_theaters\")\n    Observable<Douban> getList();\n}\n```\n\n`DoubanRun`改为:\n\n```java\npublic class DoubanRun extends Thread {\n\n    @Override\n    public void run() {\n        super.run();\n\n        Retrofit retrofit=new Retrofit.Builder()\n                .baseUrl(\"https://api.douban.com\")\n                .addConverterFactory(GsonConverterFactory.create())\n                //\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n\n                .build();\n\n        DoubanService doubanService=retrofit.create(DoubanService.class);\n\n        doubanService.getList()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Subscriber<Douban>() {\n                    @Override\n                    public void onCompleted() {\n\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(Douban douban) {\n                        for (Subjects l:douban.getSubjects()){\n                            Log.i(\"TAGGGG\",l.getId()+\" \"+l.getTitle());\n\n                        }\n                    }\n                });\n    }\n}\n\n```\n\n#### 注意点\n\n1. 出现`Expected BEGIN_ARRAY but was BEGIN_OBJECT at`或者pojo类中对应的变量的类型不对. 比如 如果在`Subjects`类中将rating设为String. 就会有`Expected String but was BEGIN_OBJECT at...`错误.\n\n\n\n## 参考文章\n1. [给 Android 开发者的 RxJava 详解](https://gank.io/post/560e15be2dca930e00da1083)<br>[archive.org备份页面](https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083)\n2. [RxJava 与 Retrofit 结合的最佳实践](https://gank.io/post/56e80c2c677659311bed9841)<br>[archive.org备份页面](https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841)\n","slug":"android/第三方库/2016-11-25-retrofit-rxjava","published":1,"updated":"2016-11-25T12:52:07.367Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgiw0047u8jrtsxqv9k6","content":"<h2 id=\"Retrofit-amp-RxJava\"><a href=\"#Retrofit-amp-RxJava\" class=\"headerlink\" title=\"Retrofit &amp; RxJava\"></a>Retrofit &amp; RxJava</h2><p>关于如何使用Retrofit和RxJava请阅读参考中的两篇文章.</p>\n<h2 id=\"Retrofit处理数据\"><a href=\"#Retrofit处理数据\" class=\"headerlink\" title=\"Retrofit处理数据\"></a>Retrofit处理数据</h2><p>Retrofit是在什么时候处理从网络中获取到的json数据的呢? 我从几个使用了Retrofit的项目源代码寻找了半天, 也没有找到处理json的相关代码. 后来才发现, Retrofit中使用<code>.addConverterFactory(GsonConverterFactory.create())</code>其实就是自动添加了json解析, 它会将json数据直接转换为java类(即Pojo).</p>\n<p><a href=\"http://pojo.sodhanalibrary.com/\" target=\"_blank\" rel=\"external\">convertToPojo</a>可以根据json的内容自动生成Pojo类.</p>\n<h3 id=\"以豆瓣api为例\"><a href=\"#以豆瓣api为例\" class=\"headerlink\" title=\"以豆瓣api为例\"></a>以豆瓣api为例</h3><h4 id=\"json数据格式\"><a href=\"#json数据格式\" class=\"headerlink\" title=\"json数据格式\"></a>json数据格式</h4><p>豆瓣正在热映的json数据格式大致如下:</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/douban_json.png\" alt=\"\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DoubanService.java</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DoubanService</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/v2/movie/in_theaters\"</span>)</div><div class=\"line\">    <span class=\"function\">Call&lt;Douban&gt; <span class=\"title\">getList</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"pojo类\"><a href=\"#pojo类\" class=\"headerlink\" title=\"pojo类\"></a>pojo类</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Douban</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@SerializedName</span>(value = <span class=\"string\">\"subjects\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;Subjects&gt; subjects;</div><div class=\"line\"></div><div class=\"line\">    ...Getter and Setter..</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Subjects</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String id;</div><div class=\"line\">    <span class=\"keyword\">private</span> String title;</div><div class=\"line\">    <span class=\"keyword\">private</span> Rating rating;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Rating</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String min;</div><div class=\"line\">    <span class=\"keyword\">private</span> String max;</div><div class=\"line\">    <span class=\"keyword\">private</span> String stars;</div><div class=\"line\"></div><div class=\"line\">    ...Getter and Setter..</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"处理并显示数据\"><a href=\"#处理并显示数据\" class=\"headerlink\" title=\"处理并显示数据\"></a>处理并显示数据</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DoubanRun</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.run();</div><div class=\"line\">        Retrofit retrofit=<span class=\"keyword\">new</span> Retrofit.Builder()</div><div class=\"line\">                .baseUrl(<span class=\"string\">\"https://api.douban.com\"</span>)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\">        DoubanService douban=retrofit.create(DoubanService.class);</div><div class=\"line\">        Call&lt;Douban&gt; call=douban.getList();</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            Douban d=call.execute().body();</div><div class=\"line\">            <span class=\"keyword\">for</span> (Subjects l:d.getSubjects())&#123;</div><div class=\"line\">                 Log.i(<span class=\"string\">\"TAGGGG\"</span>,l.getId()+<span class=\"string\">\" \"</span>+l.getTitle());</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">            Log.i(<span class=\"string\">\"TAGGGG\"</span>,<span class=\"string\">\"ff\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">26630781 我不是潘金莲</div><div class=\"line\">25726614 神奇动物在哪里</div><div class=\"line\">25793398 海洋奇缘</div><div class=\"line\">26365631 冲天火</div><div class=\"line\">26596486 名侦探柯南：纯黑的恶梦</div><div class=\"line\">3025375 奇异博士</div><div class=\"line\">26370431 夏威夷之恋</div><div class=\"line\">26673217 我是处女座</div><div class=\"line\">26696875 最萌身高差</div><div class=\"line\">25983044 比利·林恩的中场战事</div><div class=\"line\">22266320 深海浩劫</div><div class=\"line\">26876505 怨灵地下室</div><div class=\"line\">25921812 驴得水</div><div class=\"line\">26598021 航海王之黄</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<h4 id=\"配合RxJava\"><a href=\"#配合RxJava\" class=\"headerlink\" title=\"配合RxJava\"></a>配合RxJava</h4><p><code>DoubanService.java</code>改为:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DoubanService</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/v2/movie/in_theaters\"</span>)</div><div class=\"line\">    <span class=\"function\">Observable&lt;Douban&gt; <span class=\"title\">getList</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>DoubanRun</code>改为:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DoubanRun</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.run();</div><div class=\"line\"></div><div class=\"line\">        Retrofit retrofit=<span class=\"keyword\">new</span> Retrofit.Builder()</div><div class=\"line\">                .baseUrl(<span class=\"string\">\"https://api.douban.com\"</span>)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                <span class=\"comment\">//</span></div><div class=\"line\">                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())</div><div class=\"line\"></div><div class=\"line\">                .build();</div><div class=\"line\"></div><div class=\"line\">        DoubanService doubanService=retrofit.create(DoubanService.class);</div><div class=\"line\"></div><div class=\"line\">        doubanService.getList()</div><div class=\"line\">                .subscribeOn(Schedulers.io())</div><div class=\"line\">                .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">                .subscribe(<span class=\"keyword\">new</span> Subscriber&lt;Douban&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(Douban douban)</span> </span>&#123;</div><div class=\"line\">                        <span class=\"keyword\">for</span> (Subjects l:douban.getSubjects())&#123;</div><div class=\"line\">                            Log.i(<span class=\"string\">\"TAGGGG\"</span>,l.getId()+<span class=\"string\">\" \"</span>+l.getTitle());</div><div class=\"line\"></div><div class=\"line\">                        &#125;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h4><ol>\n<li>出现<code>Expected BEGIN_ARRAY but was BEGIN_OBJECT at</code>或者pojo类中对应的变量的类型不对. 比如 如果在<code>Subjects</code>类中将rating设为String. 就会有<code>Expected String but was BEGIN_OBJECT at...</code>错误.</li>\n</ol>\n<h2 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h2><ol>\n<li><a href=\"https://gank.io/post/560e15be2dca930e00da1083\" target=\"_blank\" rel=\"external\">给 Android 开发者的 RxJava 详解</a><br><a href=\"https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n<li><a href=\"https://gank.io/post/56e80c2c677659311bed9841\" target=\"_blank\" rel=\"external\">RxJava 与 Retrofit 结合的最佳实践</a><br><a href=\"https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841\" target=\"_blank\" rel=\"external\">archive.org备份页面</a></li>\n</ol>\n","excerpt":"","more":"<h2 id=\"Retrofit-amp-RxJava\"><a href=\"#Retrofit-amp-RxJava\" class=\"headerlink\" title=\"Retrofit &amp; RxJava\"></a>Retrofit &amp; RxJava</h2><p>关于如何使用Retrofit和RxJava请阅读参考中的两篇文章.</p>\n<h2 id=\"Retrofit处理数据\"><a href=\"#Retrofit处理数据\" class=\"headerlink\" title=\"Retrofit处理数据\"></a>Retrofit处理数据</h2><p>Retrofit是在什么时候处理从网络中获取到的json数据的呢? 我从几个使用了Retrofit的项目源代码寻找了半天, 也没有找到处理json的相关代码. 后来才发现, Retrofit中使用<code>.addConverterFactory(GsonConverterFactory.create())</code>其实就是自动添加了json解析, 它会将json数据直接转换为java类(即Pojo).</p>\n<p><a href=\"http://pojo.sodhanalibrary.com/\">convertToPojo</a>可以根据json的内容自动生成Pojo类.</p>\n<h3 id=\"以豆瓣api为例\"><a href=\"#以豆瓣api为例\" class=\"headerlink\" title=\"以豆瓣api为例\"></a>以豆瓣api为例</h3><h4 id=\"json数据格式\"><a href=\"#json数据格式\" class=\"headerlink\" title=\"json数据格式\"></a>json数据格式</h4><p>豆瓣正在热映的json数据格式大致如下:</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/douban_json.png\" alt=\"\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DoubanService.java</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DoubanService</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/v2/movie/in_theaters\"</span>)</div><div class=\"line\">    <span class=\"function\">Call&lt;Douban&gt; <span class=\"title\">getList</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"pojo类\"><a href=\"#pojo类\" class=\"headerlink\" title=\"pojo类\"></a>pojo类</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Douban</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@SerializedName</span>(value = <span class=\"string\">\"subjects\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;Subjects&gt; subjects;</div><div class=\"line\"></div><div class=\"line\">    ...Getter and Setter..</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Subjects</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String id;</div><div class=\"line\">    <span class=\"keyword\">private</span> String title;</div><div class=\"line\">    <span class=\"keyword\">private</span> Rating rating;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Rating</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String min;</div><div class=\"line\">    <span class=\"keyword\">private</span> String max;</div><div class=\"line\">    <span class=\"keyword\">private</span> String stars;</div><div class=\"line\"></div><div class=\"line\">    ...Getter and Setter..</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"处理并显示数据\"><a href=\"#处理并显示数据\" class=\"headerlink\" title=\"处理并显示数据\"></a>处理并显示数据</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DoubanRun</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.run();</div><div class=\"line\">        Retrofit retrofit=<span class=\"keyword\">new</span> Retrofit.Builder()</div><div class=\"line\">                .baseUrl(<span class=\"string\">\"https://api.douban.com\"</span>)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\">        DoubanService douban=retrofit.create(DoubanService.class);</div><div class=\"line\">        Call&lt;Douban&gt; call=douban.getList();</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            Douban d=call.execute().body();</div><div class=\"line\">            <span class=\"keyword\">for</span> (Subjects l:d.getSubjects())&#123;</div><div class=\"line\">                 Log.i(<span class=\"string\">\"TAGGGG\"</span>,l.getId()+<span class=\"string\">\" \"</span>+l.getTitle());</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">            Log.i(<span class=\"string\">\"TAGGGG\"</span>,<span class=\"string\">\"ff\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>结果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">26630781 我不是潘金莲</div><div class=\"line\">25726614 神奇动物在哪里</div><div class=\"line\">25793398 海洋奇缘</div><div class=\"line\">26365631 冲天火</div><div class=\"line\">26596486 名侦探柯南：纯黑的恶梦</div><div class=\"line\">3025375 奇异博士</div><div class=\"line\">26370431 夏威夷之恋</div><div class=\"line\">26673217 我是处女座</div><div class=\"line\">26696875 最萌身高差</div><div class=\"line\">25983044 比利·林恩的中场战事</div><div class=\"line\">22266320 深海浩劫</div><div class=\"line\">26876505 怨灵地下室</div><div class=\"line\">25921812 驴得水</div><div class=\"line\">26598021 航海王之黄</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<h4 id=\"配合RxJava\"><a href=\"#配合RxJava\" class=\"headerlink\" title=\"配合RxJava\"></a>配合RxJava</h4><p><code>DoubanService.java</code>改为:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DoubanService</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/v2/movie/in_theaters\"</span>)</div><div class=\"line\">    <span class=\"function\">Observable&lt;Douban&gt; <span class=\"title\">getList</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>DoubanRun</code>改为:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DoubanRun</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.run();</div><div class=\"line\"></div><div class=\"line\">        Retrofit retrofit=<span class=\"keyword\">new</span> Retrofit.Builder()</div><div class=\"line\">                .baseUrl(<span class=\"string\">\"https://api.douban.com\"</span>)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                <span class=\"comment\">//</span></div><div class=\"line\">                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())</div><div class=\"line\"></div><div class=\"line\">                .build();</div><div class=\"line\"></div><div class=\"line\">        DoubanService doubanService=retrofit.create(DoubanService.class);</div><div class=\"line\"></div><div class=\"line\">        doubanService.getList()</div><div class=\"line\">                .subscribeOn(Schedulers.io())</div><div class=\"line\">                .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">                .subscribe(<span class=\"keyword\">new</span> Subscriber&lt;Douban&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(Douban douban)</span> </span>&#123;</div><div class=\"line\">                        <span class=\"keyword\">for</span> (Subjects l:douban.getSubjects())&#123;</div><div class=\"line\">                            Log.i(<span class=\"string\">\"TAGGGG\"</span>,l.getId()+<span class=\"string\">\" \"</span>+l.getTitle());</div><div class=\"line\"></div><div class=\"line\">                        &#125;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h4><ol>\n<li>出现<code>Expected BEGIN_ARRAY but was BEGIN_OBJECT at</code>或者pojo类中对应的变量的类型不对. 比如 如果在<code>Subjects</code>类中将rating设为String. 就会有<code>Expected String but was BEGIN_OBJECT at...</code>错误.</li>\n</ol>\n<h2 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h2><ol>\n<li><a href=\"https://gank.io/post/560e15be2dca930e00da1083\">给 Android 开发者的 RxJava 详解</a><br><a href=\"https://web.archive.org/web/20161023043938/http://gank.io/post/560e15be2dca930e00da1083\">archive.org备份页面</a></li>\n<li><a href=\"https://gank.io/post/56e80c2c677659311bed9841\">RxJava 与 Retrofit 结合的最佳实践</a><br><a href=\"https://web.archive.org/web/20161022232218/http://gank.io/post/56e80c2c677659311bed9841\">archive.org备份页面</a></li>\n</ol>\n"},{"author":"ivyxjc","date":"2016-10-03T16:00:00.000Z","title":"numpy user guide","keywords":null,"description":"numpy是常见的科学计算库. 本文介绍numpy库的一些常见操作,例如numpy.tile(A, reprs), numpy.sum(), axis,  dtye等相关知识.","_content":"\n## numpy.tile(A,reprs)\n[numpy.tile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html)\n\n` numpy.tile(A, reps)`\n\nThis method will return a `max( d, A.ndim) ` dimension array( `d= len( reprs) `).\n\nif`d> A.ndim`, it will return a d-dimension array by prepending new axes;<br>\netc.\n\n```python\n>>>a = np.array([[1,2,3],[1,2,3]])\n>>>np.tile(a,(2,3,2))\n\n[[[1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]]\n\n [[1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]]]\n```\n\nif `d< A.ndim`, it will return an A.ndim-dimension array by prepending 1's to it .\nFor example, for an shape of(1,2,2,3), a reps of (2,3) will be treated as (1,1,2,3)\n\n```python\n>>>a = np.array([[[[1,2,3],[1,2,3]]]])\n>>>np.tile(a,(2,2))\n\n[[[[1 2 3 1 2 3]\n   [1 2 3 1 2 3]\n   [1 2 3 1 2 3]\n   [1 2 3 1 2 3]]]]\n\n>>>a = np.array([[[[1,2,3],[1,2,3]]]])\n>>>np.tile(a,(2,1,3))\n\n[[[[1 2 3 1 2 3 1 2 3]\n   [1 2 3 1 2 3 1 2 3]]\n\n  [[1 2 3 1 2 3 1 2 3]\n   [1 2 3 1 2 3 1 2 3]]]]\n```\n\n## numpy.sum()\n[numpy.sum()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html)\n\n`numpy.sum(a, axis=None, dtype=None, out=None, keepdims=False)`\n\n## axis\nThis is a litte complex. `abs(axis)` must be less than `a.ndim`.\n\n![](http://oezmbgg4j.bkt.clouddn.com/numpy_sum_1.jpg)\n![](http://oezmbgg4j.bkt.clouddn.com/numpy_sum_2.jpg)\n\n### dtype\n\n```python\n>>>b=np.array([0.3,0.4,0.9,1.5,1.9])\n>>>print(b.sum(dtype=np.int32))\n\n2\n```\n\n\n### keepdims\n\nIf this parameter is assigned to True, the it will return an array as dimension with the size that input array is\n\n\n```python\n>>>b=np.array([[[0.3,0.4,0.9,1.5,1.9]]])\n>>>print(b.sum())\n\n5.0\n\n\n>>>b=np.array([[[0.3,0.4,0.9,1.5,1.9]]])\n>>>print(b.sum(keepdims=True))\n\n[[[ 5.]]]\n```\n","source":"_posts/python/numpy/2016-10-04-numpy-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-04\ntitle: numpy user guide\ncategory: Python\ntags: [python,numpy]\nkeywords:\ndescription: numpy是常见的科学计算库. 本文介绍numpy库的一些常见操作,例如numpy.tile(A, reprs), numpy.sum(), axis,  dtye等相关知识.\n---\n\n## numpy.tile(A,reprs)\n[numpy.tile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html)\n\n` numpy.tile(A, reps)`\n\nThis method will return a `max( d, A.ndim) ` dimension array( `d= len( reprs) `).\n\nif`d> A.ndim`, it will return a d-dimension array by prepending new axes;<br>\netc.\n\n```python\n>>>a = np.array([[1,2,3],[1,2,3]])\n>>>np.tile(a,(2,3,2))\n\n[[[1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]]\n\n [[1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]\n  [1 2 3 1 2 3]]]\n```\n\nif `d< A.ndim`, it will return an A.ndim-dimension array by prepending 1's to it .\nFor example, for an shape of(1,2,2,3), a reps of (2,3) will be treated as (1,1,2,3)\n\n```python\n>>>a = np.array([[[[1,2,3],[1,2,3]]]])\n>>>np.tile(a,(2,2))\n\n[[[[1 2 3 1 2 3]\n   [1 2 3 1 2 3]\n   [1 2 3 1 2 3]\n   [1 2 3 1 2 3]]]]\n\n>>>a = np.array([[[[1,2,3],[1,2,3]]]])\n>>>np.tile(a,(2,1,3))\n\n[[[[1 2 3 1 2 3 1 2 3]\n   [1 2 3 1 2 3 1 2 3]]\n\n  [[1 2 3 1 2 3 1 2 3]\n   [1 2 3 1 2 3 1 2 3]]]]\n```\n\n## numpy.sum()\n[numpy.sum()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html)\n\n`numpy.sum(a, axis=None, dtype=None, out=None, keepdims=False)`\n\n## axis\nThis is a litte complex. `abs(axis)` must be less than `a.ndim`.\n\n![](http://oezmbgg4j.bkt.clouddn.com/numpy_sum_1.jpg)\n![](http://oezmbgg4j.bkt.clouddn.com/numpy_sum_2.jpg)\n\n### dtype\n\n```python\n>>>b=np.array([0.3,0.4,0.9,1.5,1.9])\n>>>print(b.sum(dtype=np.int32))\n\n2\n```\n\n\n### keepdims\n\nIf this parameter is assigned to True, the it will return an array as dimension with the size that input array is\n\n\n```python\n>>>b=np.array([[[0.3,0.4,0.9,1.5,1.9]]])\n>>>print(b.sum())\n\n5.0\n\n\n>>>b=np.array([[[0.3,0.4,0.9,1.5,1.9]]])\n>>>print(b.sum(keepdims=True))\n\n[[[ 5.]]]\n```\n","slug":"python/numpy/2016-10-04-numpy-basic","published":1,"updated":"2016-10-25T09:03:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgj9005ru8jrtj04i1k2","content":"<h2 id=\"numpy-tile-A-reprs\"><a href=\"#numpy-tile-A-reprs\" class=\"headerlink\" title=\"numpy.tile(A,reprs)\"></a>numpy.tile(A,reprs)</h2><p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html\" target=\"_blank\" rel=\"external\">numpy.tile</a></p>\n<p><code>numpy.tile(A, reps)</code></p>\n<p>This method will return a <code>max( d, A.ndim)</code> dimension array( <code>d= len( reprs)</code>).</p>\n<p>if<code>d&gt; A.ndim</code>, it will return a d-dimension array by prepending new axes;<br><br>etc.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;a = np.array([[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]])</div><div class=\"line\">&gt;&gt;&gt;np.tile(a,(<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>))</div><div class=\"line\"></div><div class=\"line\">[[[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]</div><div class=\"line\"></div><div class=\"line\"> [[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]]</div></pre></td></tr></table></figure>\n<p>if <code>d&lt; A.ndim</code>, it will return an A.ndim-dimension array by prepending 1’s to it .<br>For example, for an shape of(1,2,2,3), a reps of (2,3) will be treated as (1,1,2,3)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;a = np.array([[[[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]]]])</div><div class=\"line\">&gt;&gt;&gt;np.tile(a,(<span class=\"number\">2</span>,<span class=\"number\">2</span>))</div><div class=\"line\"></div><div class=\"line\">[[[[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]]]</div><div class=\"line\"></div><div class=\"line\">&gt;&gt;&gt;a = np.array([[[[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]]]])</div><div class=\"line\">&gt;&gt;&gt;np.tile(a,(<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">3</span>))</div><div class=\"line\"></div><div class=\"line\">[[[[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]</div><div class=\"line\"></div><div class=\"line\">  [[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]]]</div></pre></td></tr></table></figure>\n<h2 id=\"numpy-sum\"><a href=\"#numpy-sum\" class=\"headerlink\" title=\"numpy.sum()\"></a>numpy.sum()</h2><p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html\" target=\"_blank\" rel=\"external\">numpy.sum()</a></p>\n<p><code>numpy.sum(a, axis=None, dtype=None, out=None, keepdims=False)</code></p>\n<h2 id=\"axis\"><a href=\"#axis\" class=\"headerlink\" title=\"axis\"></a>axis</h2><p>This is a litte complex. <code>abs(axis)</code> must be less than <code>a.ndim</code>.</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/numpy_sum_1.jpg\" alt=\"\"><br><img src=\"http://oezmbgg4j.bkt.clouddn.com/numpy_sum_2.jpg\" alt=\"\"></p>\n<h3 id=\"dtype\"><a href=\"#dtype\" class=\"headerlink\" title=\"dtype\"></a>dtype</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;b=np.array([<span class=\"number\">0.3</span>,<span class=\"number\">0.4</span>,<span class=\"number\">0.9</span>,<span class=\"number\">1.5</span>,<span class=\"number\">1.9</span>])</div><div class=\"line\">&gt;&gt;&gt;print(b.sum(dtype=np.int32))</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2</span></div></pre></td></tr></table></figure>\n<h3 id=\"keepdims\"><a href=\"#keepdims\" class=\"headerlink\" title=\"keepdims\"></a>keepdims</h3><p>If this parameter is assigned to True, the it will return an array as dimension with the size that input array is</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;b=np.array([[[<span class=\"number\">0.3</span>,<span class=\"number\">0.4</span>,<span class=\"number\">0.9</span>,<span class=\"number\">1.5</span>,<span class=\"number\">1.9</span>]]])</div><div class=\"line\">&gt;&gt;&gt;print(b.sum())</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">5.0</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&gt;&gt;&gt;b=np.array([[[<span class=\"number\">0.3</span>,<span class=\"number\">0.4</span>,<span class=\"number\">0.9</span>,<span class=\"number\">1.5</span>,<span class=\"number\">1.9</span>]]])</div><div class=\"line\">&gt;&gt;&gt;print(b.sum(keepdims=<span class=\"keyword\">True</span>))</div><div class=\"line\"></div><div class=\"line\">[[[ <span class=\"number\">5.</span>]]]</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"numpy-tile-A-reprs\"><a href=\"#numpy-tile-A-reprs\" class=\"headerlink\" title=\"numpy.tile(A,reprs)\"></a>numpy.tile(A,reprs)</h2><p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html\">numpy.tile</a></p>\n<p><code>numpy.tile(A, reps)</code></p>\n<p>This method will return a <code>max( d, A.ndim)</code> dimension array( <code>d= len( reprs)</code>).</p>\n<p>if<code>d&gt; A.ndim</code>, it will return a d-dimension array by prepending new axes;<br><br>etc.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;a = np.array([[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]])</div><div class=\"line\">&gt;&gt;&gt;np.tile(a,(<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>))</div><div class=\"line\"></div><div class=\"line\">[[[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]</div><div class=\"line\"></div><div class=\"line\"> [[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">  [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]]</div></pre></td></tr></table></figure>\n<p>if <code>d&lt; A.ndim</code>, it will return an A.ndim-dimension array by prepending 1’s to it .<br>For example, for an shape of(1,2,2,3), a reps of (2,3) will be treated as (1,1,2,3)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;a = np.array([[[[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]]]])</div><div class=\"line\">&gt;&gt;&gt;np.tile(a,(<span class=\"number\">2</span>,<span class=\"number\">2</span>))</div><div class=\"line\"></div><div class=\"line\">[[[[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]]]</div><div class=\"line\"></div><div class=\"line\">&gt;&gt;&gt;a = np.array([[[[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]]]])</div><div class=\"line\">&gt;&gt;&gt;np.tile(a,(<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">3</span>))</div><div class=\"line\"></div><div class=\"line\">[[[[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]</div><div class=\"line\"></div><div class=\"line\">  [[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]</div><div class=\"line\">   [<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span>]]]]</div></pre></td></tr></table></figure>\n<h2 id=\"numpy-sum\"><a href=\"#numpy-sum\" class=\"headerlink\" title=\"numpy.sum()\"></a>numpy.sum()</h2><p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html\">numpy.sum()</a></p>\n<p><code>numpy.sum(a, axis=None, dtype=None, out=None, keepdims=False)</code></p>\n<h2 id=\"axis\"><a href=\"#axis\" class=\"headerlink\" title=\"axis\"></a>axis</h2><p>This is a litte complex. <code>abs(axis)</code> must be less than <code>a.ndim</code>.</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/numpy_sum_1.jpg\" alt=\"\"><br><img src=\"http://oezmbgg4j.bkt.clouddn.com/numpy_sum_2.jpg\" alt=\"\"></p>\n<h3 id=\"dtype\"><a href=\"#dtype\" class=\"headerlink\" title=\"dtype\"></a>dtype</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;b=np.array([<span class=\"number\">0.3</span>,<span class=\"number\">0.4</span>,<span class=\"number\">0.9</span>,<span class=\"number\">1.5</span>,<span class=\"number\">1.9</span>])</div><div class=\"line\">&gt;&gt;&gt;print(b.sum(dtype=np.int32))</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2</span></div></pre></td></tr></table></figure>\n<h3 id=\"keepdims\"><a href=\"#keepdims\" class=\"headerlink\" title=\"keepdims\"></a>keepdims</h3><p>If this parameter is assigned to True, the it will return an array as dimension with the size that input array is</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt;b=np.array([[[<span class=\"number\">0.3</span>,<span class=\"number\">0.4</span>,<span class=\"number\">0.9</span>,<span class=\"number\">1.5</span>,<span class=\"number\">1.9</span>]]])</div><div class=\"line\">&gt;&gt;&gt;print(b.sum())</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">5.0</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&gt;&gt;&gt;b=np.array([[[<span class=\"number\">0.3</span>,<span class=\"number\">0.4</span>,<span class=\"number\">0.9</span>,<span class=\"number\">1.5</span>,<span class=\"number\">1.9</span>]]])</div><div class=\"line\">&gt;&gt;&gt;print(b.sum(keepdims=<span class=\"keyword\">True</span>))</div><div class=\"line\"></div><div class=\"line\">[[[ <span class=\"number\">5.</span>]]]</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-03-28T16:00:00.000Z","title":"python文件处理","keywords":null,"description":"python os模块的学习","_content":"\n## 遍历文件夹下所有的文件\n\n```python\nos.listdir(path)\n```\n","source":"_posts/python/os/2016-03-29-python-os.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-29\ntitle: python文件处理\ncategory: Python\ntags: [python,regex]\nkeywords:\ndescription: python os模块的学习\n---\n\n## 遍历文件夹下所有的文件\n\n```python\nos.listdir(path)\n```\n","slug":"python/os/2016-03-29-python-os","published":1,"updated":"2016-10-25T09:03:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjl005wu8jrwqef0al0","content":"<h2 id=\"遍历文件夹下所有的文件\"><a href=\"#遍历文件夹下所有的文件\" class=\"headerlink\" title=\"遍历文件夹下所有的文件\"></a>遍历文件夹下所有的文件</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">os.listdir(path)</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"遍历文件夹下所有的文件\"><a href=\"#遍历文件夹下所有的文件\" class=\"headerlink\" title=\"遍历文件夹下所有的文件\"></a>遍历文件夹下所有的文件</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">os.listdir(path)</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-03-08T16:00:00.000Z","title":"Fragment初步","keywords":null,"description":"如何在应用中使用Fragment","_content":"\n## Fragment概要\n![](http://oezmbgg4j.bkt.clouddn.com/fragmentIntro.png)\n\n## **onCreateView()**方法\n\nFragment第一次绘制它的用户界面时，系统会调用此方法。为了方便绘制Fragment的UI，此方法必须返回一个View，如果不显示UI，返回null。\n\n\n### 标识Fragment方法\n\nandroid:id 提供一个唯一的ID 或\nandroid:tag 提供一个唯一的字符串tag\n\n## 静态加载\n\n在**Activity**的layout文件中声明**Fragment**，其中**android:name**属性制定了在layout中实例化的Fragment类。\n\n静态加载Fragment必须要给Fragment一个唯一的标识。\n\n文件目录：<br>\n——src<br>\n————Fragment_1.java (extends Fragment)<br>\n————Fragment_2.java   (extends Activity)<br>\n————MainActivity.java\t(extends Activity)<br>\n<br>\n——layout<br>\n————fragment_1.xml<br>\n————fragment_2.xml<br>\n————activity_main.xml<br>\n\n**Fragment1.java**利用**fragment_1.xml**返回一个**view**，**activity.xml**中的**android:name=\"com.jc.fragmentbasic.FragmentFirst\"**，然后**MainActivity**调用`setContentView(R.layout.activity_main);``\n\n\n### fragment_1和fragment_2.xml和activity_main.xml\n\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:orientation=\"vertical\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\">\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"This is fragment 1\"\n        android:textColor=\"#0000FF\"\n        android:textSize=\"25sp\"\n        android:background=\"#00FF00\"/>\n\n</LinearLayout>\n```\n\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:orientation=\"vertical\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\">\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"This is fragment 2\"\n        android:textColor=\"#FF0000\"\n        android:background=\"#00F0F0\"\n        android:textSize=\"25sp\" />\n\n</LinearLayout>\n```\n\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      android:baselineAligned=\"false\"\n      android:orientation=\"horizontal\">\n\n    <fragment\n        android:id=\"@+id/fragment1\"\n        android:name=\"com.jc.fragment_1.Fragment_1\"\n        android:layout_width=\"0dip\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\" />\n\n    <fragment\n        android:id=\"@+id/fragment2\"\n        android:name=\"com.jc.fragment_1.Fragment_2\"\n        android:layout_width=\"0dip\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\" />\n\n</LinearLayout>\n```\n\n### Fragment_1.java和Fragment_2.java和MainActivity.java\n\n```java\npublic class Fragment_1 extends Fragment {\n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_1,container,false);\n    }\n}\n```\n\n```java\npublic class Fragment_2 extends Fragment{\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_2,container,false);\n    }\n}\n```\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n}\n```\n\n### 加载过程的代码\n\n```java\ncase R.id.first:{\n    Intent intent=new Intent(this,MainActivity.class);\n    startActivity(intent);\n    break;\n}\n```\n\n### 效果\n\n![](http://oezmbgg4j.bkt.clouddn.com/fragment_basic_1.png)\n\n\n## 动态加载\n\n根据用户的交互情况，对Fragment进行添加，移除，替换，以及执行其他动作，提交Activity的每一套变化被称作一个**事务**。\n\n每一事务都是同时执行一套变化，可以在一个事务中设置你所有执行的变化，包括add(),remove(),replace()，然后提交个Activity，必须调用commit()方法。\n\n如果允许使用Back键返回前一Fragment的状态，调用commit()之前可以加入addToBackStack()方法。\n\n1.获取到FragmentManager，在Activity中可以直接通过getFragmentManager得到。\n\n2.调用beginTransaction方法开启一个事务。\n\n3.向容器内加入Fragment，一般使用replace方法实现，需要传入容器的id和Fragment的实例。\n\n4.提交事务，调用commit方法提交。\n\n\n### 加载过程代码\n\n```java\ncase R.id.dynamic:{\n    FragmentDynamic fragmentDynamic=new FragmentDynamic();\n    FragmentManager fragmentManager=getFragmentManager();\n    FragmentTransaction beginTransaction=fragmentManager.beginTransaction();\n    beginTransaction.add(R.id.frame,fragmentDynamic);\n    beginTransaction.commit();\n    break;\n}\n```\n\n## fragment生命周期\n\n关键方法：**onAttach()**,**onCreateView()**\n\n```java\n\npublic class FragmentThird extends Fragment {\n    @Nullable\n    @Override\n\n    /**\n     * 每次创建会绘制Fragment的View组件时回调该方法。\n     */\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View v=inflater.inflate(R.layout.fragment_third,container,false);\n//        Log.i(\"Main\",\"Fragment third--onCreateView()\");\n        TextView textView=(TextView)v.findViewById(R.id.textview_third);\n        textView.setText(\"第三个Fragment\");\n        Log.i(\"Main\",\"Fragment third--onCreateView()\");\n        return v;\n    }\n\n\n    /**\n     * 当Fragment被添加到Activity时候会回调这个方法，并且只调用一次\n     * @param context\n     */\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        Log.i(\"Main\",\"Fragment third--on attach()\");\n    }\n\n    /**\n     * 创建Fragment时会回调，只会调用一次\n     */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        Log.i(\"Main\",\"Fragment third--onCreate()\");\n    }\n\n\n    /**\n     *当Fragment所在的Activity启动完成后调用\n     */\n    @Override\n    public void onActivityCreated(Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n        Log.i(\"Main\", \"Fragment third--onActivityCreated()\");\n    }\n\n    /**\n     * 启动Fragment\n     */\n    @Override\n    public void onStart() {\n        super.onStart();\n        Log.i(\"Main\", \"Fragment third--onStart()\");\n    }\n\n\n    /**\n     * 回复Fragment时会被回调，调用onStart()方法后面一定会调用\n     * onResume方法\n     */\n    @Override\n    public void onResume() {\n        super.onResume();\n        Log.i(\"Main\", \"Fragment third--onResume()\");\n    }\n\n    /**\n     * 暂停Fragment\n     */\n\n    @Override\n    public void onPause() {\n        super.onPause();\n        Log.i(\"Main\",\"Fragment third--onPause()\");\n    }\n\n    /**\n     * 停止Fragment\n     */\n    @Override\n    public void onStop() {\n        super.onStop();\n        Log.i(\"Main\",\"Fragment third--onStop()\");\n    }\n\n    /**\n     * 销毁Fragment所包含的View组件时调用\n     */\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        Log.i(\"Main\", \"Fragment third--onDestroyView()\");\n    }\n\n    /**\n     * 销毁Framgent时会被调用\n     */\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        Log.i(\"Main\", \"Fragment third--onDestroy()\");\n    }\n\n\n    /**\n     * 与onAttach()方法对应\n     * Fragment从Activity中删除时会回调该方法，并且只会调用一次\n     */\n    @Override\n    public void onDetach() {\n        super.onDetach();\n        Log.i(\"Main\", \"Fragment third--onDetach()\");\n    }\n}\n```\n\n```java\nLog结果：\n启动应用：null\n\n启动Fragment：\nI/Main(8163): Fragment third--on attach()\nI/Main(8163): Fragment third--onCreate()\nI/Main(8163): Fragment third--onCreateView()\nI/Main(8163): Fragment third--onActivityCreated()\nI/Main(8163): Fragment third--onStart()\nI/Main(8163): Fragment third--onResume()\n\n屏幕锁屏：\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\n\n\n解锁：\nI/Main(8163): Fragment third--onStart()\nI/Main(8163): Fragment third--onResume()\n\n切换到其它的Fragment:\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\nI/Main(8163): Fragment third--onDestroyView()\nI/Main(8163): Fragment third--onDestroy()\nI/Main(8163): Fragment third--onDetach()\n\n回到桌面:\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\n\n\n回到Fragment:\nI/Main(8163): Fragment third--onStart()\nI/Main(8163): Fragment third--onResume()\n\n\n退出Fragment：\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\nI/Main(8163): Fragment third--onDestroyView()\nI/Main(8163): Fragment third--onDestroy()\nI/Main(8163): Fragment third--onDetach()\n```\n\n## Activity和Fragment通信\n\nActivity ---> Fragment:在Activity中创建Bundle数据包，并调用Fragment的setArguments(Bundle bundle)方法。\n\nFragment ---> Activity：需要在Fragment中定义一个内部回调接口，让包含该Fragment的Activity实现该回调接口。这样Fragment可调用回调方法将数据传递给Activity。\n\n## 相关博客网址\n[Android Fragment完全解析，关于碎片你所需知道的一切](http://blog.csdn.net/guolin_blog/article/details/8881711)\n","source":"_posts/android/UI相关/Fragment/2016-03-09-Fragment-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-09\ntitle: Fragment初步\ncategory: Android\ntags: [android,android_fragment,android_UI]\nkeywords:\ndescription: 如何在应用中使用Fragment\n---\n\n## Fragment概要\n![](http://oezmbgg4j.bkt.clouddn.com/fragmentIntro.png)\n\n## **onCreateView()**方法\n\nFragment第一次绘制它的用户界面时，系统会调用此方法。为了方便绘制Fragment的UI，此方法必须返回一个View，如果不显示UI，返回null。\n\n\n### 标识Fragment方法\n\nandroid:id 提供一个唯一的ID 或\nandroid:tag 提供一个唯一的字符串tag\n\n## 静态加载\n\n在**Activity**的layout文件中声明**Fragment**，其中**android:name**属性制定了在layout中实例化的Fragment类。\n\n静态加载Fragment必须要给Fragment一个唯一的标识。\n\n文件目录：<br>\n——src<br>\n————Fragment_1.java (extends Fragment)<br>\n————Fragment_2.java   (extends Activity)<br>\n————MainActivity.java\t(extends Activity)<br>\n<br>\n——layout<br>\n————fragment_1.xml<br>\n————fragment_2.xml<br>\n————activity_main.xml<br>\n\n**Fragment1.java**利用**fragment_1.xml**返回一个**view**，**activity.xml**中的**android:name=\"com.jc.fragmentbasic.FragmentFirst\"**，然后**MainActivity**调用`setContentView(R.layout.activity_main);``\n\n\n### fragment_1和fragment_2.xml和activity_main.xml\n\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:orientation=\"vertical\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\">\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"This is fragment 1\"\n        android:textColor=\"#0000FF\"\n        android:textSize=\"25sp\"\n        android:background=\"#00FF00\"/>\n\n</LinearLayout>\n```\n\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:orientation=\"vertical\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\">\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"This is fragment 2\"\n        android:textColor=\"#FF0000\"\n        android:background=\"#00F0F0\"\n        android:textSize=\"25sp\" />\n\n</LinearLayout>\n```\n\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      android:baselineAligned=\"false\"\n      android:orientation=\"horizontal\">\n\n    <fragment\n        android:id=\"@+id/fragment1\"\n        android:name=\"com.jc.fragment_1.Fragment_1\"\n        android:layout_width=\"0dip\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\" />\n\n    <fragment\n        android:id=\"@+id/fragment2\"\n        android:name=\"com.jc.fragment_1.Fragment_2\"\n        android:layout_width=\"0dip\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\" />\n\n</LinearLayout>\n```\n\n### Fragment_1.java和Fragment_2.java和MainActivity.java\n\n```java\npublic class Fragment_1 extends Fragment {\n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_1,container,false);\n    }\n}\n```\n\n```java\npublic class Fragment_2 extends Fragment{\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_2,container,false);\n    }\n}\n```\n\n```java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n}\n```\n\n### 加载过程的代码\n\n```java\ncase R.id.first:{\n    Intent intent=new Intent(this,MainActivity.class);\n    startActivity(intent);\n    break;\n}\n```\n\n### 效果\n\n![](http://oezmbgg4j.bkt.clouddn.com/fragment_basic_1.png)\n\n\n## 动态加载\n\n根据用户的交互情况，对Fragment进行添加，移除，替换，以及执行其他动作，提交Activity的每一套变化被称作一个**事务**。\n\n每一事务都是同时执行一套变化，可以在一个事务中设置你所有执行的变化，包括add(),remove(),replace()，然后提交个Activity，必须调用commit()方法。\n\n如果允许使用Back键返回前一Fragment的状态，调用commit()之前可以加入addToBackStack()方法。\n\n1.获取到FragmentManager，在Activity中可以直接通过getFragmentManager得到。\n\n2.调用beginTransaction方法开启一个事务。\n\n3.向容器内加入Fragment，一般使用replace方法实现，需要传入容器的id和Fragment的实例。\n\n4.提交事务，调用commit方法提交。\n\n\n### 加载过程代码\n\n```java\ncase R.id.dynamic:{\n    FragmentDynamic fragmentDynamic=new FragmentDynamic();\n    FragmentManager fragmentManager=getFragmentManager();\n    FragmentTransaction beginTransaction=fragmentManager.beginTransaction();\n    beginTransaction.add(R.id.frame,fragmentDynamic);\n    beginTransaction.commit();\n    break;\n}\n```\n\n## fragment生命周期\n\n关键方法：**onAttach()**,**onCreateView()**\n\n```java\n\npublic class FragmentThird extends Fragment {\n    @Nullable\n    @Override\n\n    /**\n     * 每次创建会绘制Fragment的View组件时回调该方法。\n     */\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View v=inflater.inflate(R.layout.fragment_third,container,false);\n//        Log.i(\"Main\",\"Fragment third--onCreateView()\");\n        TextView textView=(TextView)v.findViewById(R.id.textview_third);\n        textView.setText(\"第三个Fragment\");\n        Log.i(\"Main\",\"Fragment third--onCreateView()\");\n        return v;\n    }\n\n\n    /**\n     * 当Fragment被添加到Activity时候会回调这个方法，并且只调用一次\n     * @param context\n     */\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        Log.i(\"Main\",\"Fragment third--on attach()\");\n    }\n\n    /**\n     * 创建Fragment时会回调，只会调用一次\n     */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        Log.i(\"Main\",\"Fragment third--onCreate()\");\n    }\n\n\n    /**\n     *当Fragment所在的Activity启动完成后调用\n     */\n    @Override\n    public void onActivityCreated(Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n        Log.i(\"Main\", \"Fragment third--onActivityCreated()\");\n    }\n\n    /**\n     * 启动Fragment\n     */\n    @Override\n    public void onStart() {\n        super.onStart();\n        Log.i(\"Main\", \"Fragment third--onStart()\");\n    }\n\n\n    /**\n     * 回复Fragment时会被回调，调用onStart()方法后面一定会调用\n     * onResume方法\n     */\n    @Override\n    public void onResume() {\n        super.onResume();\n        Log.i(\"Main\", \"Fragment third--onResume()\");\n    }\n\n    /**\n     * 暂停Fragment\n     */\n\n    @Override\n    public void onPause() {\n        super.onPause();\n        Log.i(\"Main\",\"Fragment third--onPause()\");\n    }\n\n    /**\n     * 停止Fragment\n     */\n    @Override\n    public void onStop() {\n        super.onStop();\n        Log.i(\"Main\",\"Fragment third--onStop()\");\n    }\n\n    /**\n     * 销毁Fragment所包含的View组件时调用\n     */\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        Log.i(\"Main\", \"Fragment third--onDestroyView()\");\n    }\n\n    /**\n     * 销毁Framgent时会被调用\n     */\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        Log.i(\"Main\", \"Fragment third--onDestroy()\");\n    }\n\n\n    /**\n     * 与onAttach()方法对应\n     * Fragment从Activity中删除时会回调该方法，并且只会调用一次\n     */\n    @Override\n    public void onDetach() {\n        super.onDetach();\n        Log.i(\"Main\", \"Fragment third--onDetach()\");\n    }\n}\n```\n\n```java\nLog结果：\n启动应用：null\n\n启动Fragment：\nI/Main(8163): Fragment third--on attach()\nI/Main(8163): Fragment third--onCreate()\nI/Main(8163): Fragment third--onCreateView()\nI/Main(8163): Fragment third--onActivityCreated()\nI/Main(8163): Fragment third--onStart()\nI/Main(8163): Fragment third--onResume()\n\n屏幕锁屏：\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\n\n\n解锁：\nI/Main(8163): Fragment third--onStart()\nI/Main(8163): Fragment third--onResume()\n\n切换到其它的Fragment:\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\nI/Main(8163): Fragment third--onDestroyView()\nI/Main(8163): Fragment third--onDestroy()\nI/Main(8163): Fragment third--onDetach()\n\n回到桌面:\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\n\n\n回到Fragment:\nI/Main(8163): Fragment third--onStart()\nI/Main(8163): Fragment third--onResume()\n\n\n退出Fragment：\nI/Main(8163): Fragment third--onPause()\nI/Main(8163): Fragment third--onStop()\nI/Main(8163): Fragment third--onDestroyView()\nI/Main(8163): Fragment third--onDestroy()\nI/Main(8163): Fragment third--onDetach()\n```\n\n## Activity和Fragment通信\n\nActivity ---> Fragment:在Activity中创建Bundle数据包，并调用Fragment的setArguments(Bundle bundle)方法。\n\nFragment ---> Activity：需要在Fragment中定义一个内部回调接口，让包含该Fragment的Activity实现该回调接口。这样Fragment可调用回调方法将数据传递给Activity。\n\n## 相关博客网址\n[Android Fragment完全解析，关于碎片你所需知道的一切](http://blog.csdn.net/guolin_blog/article/details/8881711)\n","slug":"android/UI相关/Fragment/2016-03-09-Fragment-basic","published":1,"updated":"2016-10-25T09:03:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjm005xu8jrfqlymhwr","content":"<h2 id=\"Fragment概要\"><a href=\"#Fragment概要\" class=\"headerlink\" title=\"Fragment概要\"></a>Fragment概要</h2><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/fragmentIntro.png\" alt=\"\"></p>\n<h2 id=\"onCreateView-方法\"><a href=\"#onCreateView-方法\" class=\"headerlink\" title=\"onCreateView()方法\"></a><strong>onCreateView()</strong>方法</h2><p>Fragment第一次绘制它的用户界面时，系统会调用此方法。为了方便绘制Fragment的UI，此方法必须返回一个View，如果不显示UI，返回null。</p>\n<h3 id=\"标识Fragment方法\"><a href=\"#标识Fragment方法\" class=\"headerlink\" title=\"标识Fragment方法\"></a>标识Fragment方法</h3><p>android:id 提供一个唯一的ID 或<br>android:tag 提供一个唯一的字符串tag</p>\n<h2 id=\"静态加载\"><a href=\"#静态加载\" class=\"headerlink\" title=\"静态加载\"></a>静态加载</h2><p>在<strong>Activity</strong>的layout文件中声明<strong>Fragment</strong>，其中<strong>android:name</strong>属性制定了在layout中实例化的Fragment类。</p>\n<p>静态加载Fragment必须要给Fragment一个唯一的标识。</p>\n<p>文件目录：<br><br>——src<br><br>————Fragment_1.java (extends Fragment)<br><br>————Fragment_2.java   (extends Activity)<br><br>————MainActivity.java    (extends Activity)<br><br><br><br>——layout<br><br>————fragment_1.xml<br><br>————fragment_2.xml<br><br>————activity_main.xml<br></p>\n<p><strong>Fragment1.java</strong>利用<strong>fragment_1.xml</strong>返回一个<strong>view</strong>，<strong>activity.xml</strong>中的<strong>android:name=”com.jc.fragmentbasic.FragmentFirst”</strong>，然后<strong>MainActivity</strong>调用`setContentView(R.layout.activity_main);``</p>\n<h3 id=\"fragment-1和fragment-2-xml和activity-main-xml\"><a href=\"#fragment-1和fragment-2-xml和activity-main-xml\" class=\"headerlink\" title=\"fragment_1和fragment_2.xml和activity_main.xml\"></a>fragment_1和fragment_2.xml和activity_main.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">              <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"This is fragment 1\"</span></div><div class=\"line\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">\"#0000FF\"</span></div><div class=\"line\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"25sp\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"#00FF00\"</span>/&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">              <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"This is fragment 2\"</span></div><div class=\"line\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">\"#FF0000\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"#00F0F0\"</span></div><div class=\"line\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"25sp\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">      <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">      <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">      <span class=\"attr\">android:baselineAligned</span>=<span class=\"string\">\"false\"</span></div><div class=\"line\">      <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"horizontal\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fragment</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment1\"</span></div><div class=\"line\">        <span class=\"attr\">android:name</span>=<span class=\"string\">\"com.jc.fragment_1.Fragment_1\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dip\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fragment</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment2\"</span></div><div class=\"line\">        <span class=\"attr\">android:name</span>=<span class=\"string\">\"com.jc.fragment_1.Fragment_2\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dip\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Fragment-1-java和Fragment-2-java和MainActivity-java\"><a href=\"#Fragment-1-java和Fragment-2-java和MainActivity-java\" class=\"headerlink\" title=\"Fragment_1.java和Fragment_2.java和MainActivity.java\"></a>Fragment_1.java和Fragment_2.java和MainActivity.java</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Fragment_1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inflater.inflate(R.layout.fragment_1,container,<span class=\"keyword\">false</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Fragment_2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inflater.inflate(R.layout.fragment_2,container,<span class=\"keyword\">false</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"加载过程的代码\"><a href=\"#加载过程的代码\" class=\"headerlink\" title=\"加载过程的代码\"></a>加载过程的代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> R.id.first:&#123;</div><div class=\"line\">    Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"keyword\">this</span>,MainActivity.class);</div><div class=\"line\">    startActivity(intent);</div><div class=\"line\">    <span class=\"keyword\">break</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/fragment_basic_1.png\" alt=\"\"></p>\n<h2 id=\"动态加载\"><a href=\"#动态加载\" class=\"headerlink\" title=\"动态加载\"></a>动态加载</h2><p>根据用户的交互情况，对Fragment进行添加，移除，替换，以及执行其他动作，提交Activity的每一套变化被称作一个<strong>事务</strong>。</p>\n<p>每一事务都是同时执行一套变化，可以在一个事务中设置你所有执行的变化，包括add(),remove(),replace()，然后提交个Activity，必须调用commit()方法。</p>\n<p>如果允许使用Back键返回前一Fragment的状态，调用commit()之前可以加入addToBackStack()方法。</p>\n<p>1.获取到FragmentManager，在Activity中可以直接通过getFragmentManager得到。</p>\n<p>2.调用beginTransaction方法开启一个事务。</p>\n<p>3.向容器内加入Fragment，一般使用replace方法实现，需要传入容器的id和Fragment的实例。</p>\n<p>4.提交事务，调用commit方法提交。</p>\n<h3 id=\"加载过程代码\"><a href=\"#加载过程代码\" class=\"headerlink\" title=\"加载过程代码\"></a>加载过程代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> R.id.dynamic:&#123;</div><div class=\"line\">    FragmentDynamic fragmentDynamic=<span class=\"keyword\">new</span> FragmentDynamic();</div><div class=\"line\">    FragmentManager fragmentManager=getFragmentManager();</div><div class=\"line\">    FragmentTransaction beginTransaction=fragmentManager.beginTransaction();</div><div class=\"line\">    beginTransaction.add(R.id.frame,fragmentDynamic);</div><div class=\"line\">    beginTransaction.commit();</div><div class=\"line\">    <span class=\"keyword\">break</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"fragment生命周期\"><a href=\"#fragment生命周期\" class=\"headerlink\" title=\"fragment生命周期\"></a>fragment生命周期</h2><p>关键方法：<strong>onAttach()</strong>,<strong>onCreateView()</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FragmentThird</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 每次创建会绘制Fragment的View组件时回调该方法。</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        View v=inflater.inflate(R.layout.fragment_third,container,<span class=\"keyword\">false</span>);</div><div class=\"line\"><span class=\"comment\">//        Log.i(\"Main\",\"Fragment third--onCreateView()\");</span></div><div class=\"line\">        TextView textView=(TextView)v.findViewById(R.id.textview_third);</div><div class=\"line\">        textView.setText(<span class=\"string\">\"第三个Fragment\"</span>);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onCreateView()\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> v;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 当Fragment被添加到Activity时候会回调这个方法，并且只调用一次</div><div class=\"line\">     * <span class=\"doctag\">@param</span> context</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAttach</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onAttach(context);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--on attach()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 创建Fragment时会回调，只会调用一次</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onCreate()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     *当Fragment所在的Activity启动完成后调用</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityCreated</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onActivityCreated(savedInstanceState);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onActivityCreated()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 启动Fragment</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStart</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onStart();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onStart()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 回复Fragment时会被回调，调用onStart()方法后面一定会调用</div><div class=\"line\">     * onResume方法</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onResume();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onResume()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 暂停Fragment</div><div class=\"line\">     */</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPause</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onPause();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onPause()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 停止Fragment</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onStop();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onStop()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 销毁Fragment所包含的View组件时调用</div><div class=\"line\">     */</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onDestroyView()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 销毁Framgent时会被调用</div><div class=\"line\">     */</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onDestroy()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 与onAttach()方法对应</div><div class=\"line\">     * Fragment从Activity中删除时会回调该方法，并且只会调用一次</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDetach</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDetach();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onDetach()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\">Log结果：</div><div class=\"line\">启动应用：<span class=\"keyword\">null</span></div><div class=\"line\"></div><div class=\"line\">启动Fragment：</div><div class=\"line\">I/Main(<span class=\"number\">8163</span>): Fragment third--<span class=\"function\">on <span class=\"title\">attach</span><span class=\"params\">()</span></span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onCreate</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onCreateView</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onActivityCreated</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStart</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onResume</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\">屏幕锁屏：</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">解锁：</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStart</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onResume</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\">切换到其它的Fragment:</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroyView</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroy</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDetach</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\">回到桌面:</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">回到Fragment:</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStart</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onResume</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">退出Fragment：</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroyView</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroy</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDetach</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n<h2 id=\"Activity和Fragment通信\"><a href=\"#Activity和Fragment通信\" class=\"headerlink\" title=\"Activity和Fragment通信\"></a>Activity和Fragment通信</h2><p>Activity —&gt; Fragment:在Activity中创建Bundle数据包，并调用Fragment的setArguments(Bundle bundle)方法。</p>\n<p>Fragment —&gt; Activity：需要在Fragment中定义一个内部回调接口，让包含该Fragment的Activity实现该回调接口。这样Fragment可调用回调方法将数据传递给Activity。</p>\n<h2 id=\"相关博客网址\"><a href=\"#相关博客网址\" class=\"headerlink\" title=\"相关博客网址\"></a>相关博客网址</h2><p><a href=\"http://blog.csdn.net/guolin_blog/article/details/8881711\" target=\"_blank\" rel=\"external\">Android Fragment完全解析，关于碎片你所需知道的一切</a></p>\n","excerpt":"","more":"<h2 id=\"Fragment概要\"><a href=\"#Fragment概要\" class=\"headerlink\" title=\"Fragment概要\"></a>Fragment概要</h2><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/fragmentIntro.png\" alt=\"\"></p>\n<h2 id=\"onCreateView-方法\"><a href=\"#onCreateView-方法\" class=\"headerlink\" title=\"onCreateView()方法\"></a><strong>onCreateView()</strong>方法</h2><p>Fragment第一次绘制它的用户界面时，系统会调用此方法。为了方便绘制Fragment的UI，此方法必须返回一个View，如果不显示UI，返回null。</p>\n<h3 id=\"标识Fragment方法\"><a href=\"#标识Fragment方法\" class=\"headerlink\" title=\"标识Fragment方法\"></a>标识Fragment方法</h3><p>android:id 提供一个唯一的ID 或<br>android:tag 提供一个唯一的字符串tag</p>\n<h2 id=\"静态加载\"><a href=\"#静态加载\" class=\"headerlink\" title=\"静态加载\"></a>静态加载</h2><p>在<strong>Activity</strong>的layout文件中声明<strong>Fragment</strong>，其中<strong>android:name</strong>属性制定了在layout中实例化的Fragment类。</p>\n<p>静态加载Fragment必须要给Fragment一个唯一的标识。</p>\n<p>文件目录：<br><br>——src<br><br>————Fragment_1.java (extends Fragment)<br><br>————Fragment_2.java   (extends Activity)<br><br>————MainActivity.java    (extends Activity)<br><br><br><br>——layout<br><br>————fragment_1.xml<br><br>————fragment_2.xml<br><br>————activity_main.xml<br></p>\n<p><strong>Fragment1.java</strong>利用<strong>fragment_1.xml</strong>返回一个<strong>view</strong>，<strong>activity.xml</strong>中的<strong>android:name=”com.jc.fragmentbasic.FragmentFirst”</strong>，然后<strong>MainActivity</strong>调用`setContentView(R.layout.activity_main);``</p>\n<h3 id=\"fragment-1和fragment-2-xml和activity-main-xml\"><a href=\"#fragment-1和fragment-2-xml和activity-main-xml\" class=\"headerlink\" title=\"fragment_1和fragment_2.xml和activity_main.xml\"></a>fragment_1和fragment_2.xml和activity_main.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">              <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"This is fragment 1\"</span></div><div class=\"line\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">\"#0000FF\"</span></div><div class=\"line\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"25sp\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"#00FF00\"</span>/&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">              <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"This is fragment 2\"</span></div><div class=\"line\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">\"#FF0000\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"#00F0F0\"</span></div><div class=\"line\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"25sp\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">      <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">      <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">      <span class=\"attr\">android:baselineAligned</span>=<span class=\"string\">\"false\"</span></div><div class=\"line\">      <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"horizontal\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fragment</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment1\"</span></div><div class=\"line\">        <span class=\"attr\">android:name</span>=<span class=\"string\">\"com.jc.fragment_1.Fragment_1\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dip\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fragment</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment2\"</span></div><div class=\"line\">        <span class=\"attr\">android:name</span>=<span class=\"string\">\"com.jc.fragment_1.Fragment_2\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dip\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Fragment-1-java和Fragment-2-java和MainActivity-java\"><a href=\"#Fragment-1-java和Fragment-2-java和MainActivity-java\" class=\"headerlink\" title=\"Fragment_1.java和Fragment_2.java和MainActivity.java\"></a>Fragment_1.java和Fragment_2.java和MainActivity.java</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Fragment_1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inflater.inflate(R.layout.fragment_1,container,<span class=\"keyword\">false</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Fragment_2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inflater.inflate(R.layout.fragment_2,container,<span class=\"keyword\">false</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"加载过程的代码\"><a href=\"#加载过程的代码\" class=\"headerlink\" title=\"加载过程的代码\"></a>加载过程的代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> R.id.first:&#123;</div><div class=\"line\">    Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"keyword\">this</span>,MainActivity.class);</div><div class=\"line\">    startActivity(intent);</div><div class=\"line\">    <span class=\"keyword\">break</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><p><img src=\"http://oezmbgg4j.bkt.clouddn.com/fragment_basic_1.png\" alt=\"\"></p>\n<h2 id=\"动态加载\"><a href=\"#动态加载\" class=\"headerlink\" title=\"动态加载\"></a>动态加载</h2><p>根据用户的交互情况，对Fragment进行添加，移除，替换，以及执行其他动作，提交Activity的每一套变化被称作一个<strong>事务</strong>。</p>\n<p>每一事务都是同时执行一套变化，可以在一个事务中设置你所有执行的变化，包括add(),remove(),replace()，然后提交个Activity，必须调用commit()方法。</p>\n<p>如果允许使用Back键返回前一Fragment的状态，调用commit()之前可以加入addToBackStack()方法。</p>\n<p>1.获取到FragmentManager，在Activity中可以直接通过getFragmentManager得到。</p>\n<p>2.调用beginTransaction方法开启一个事务。</p>\n<p>3.向容器内加入Fragment，一般使用replace方法实现，需要传入容器的id和Fragment的实例。</p>\n<p>4.提交事务，调用commit方法提交。</p>\n<h3 id=\"加载过程代码\"><a href=\"#加载过程代码\" class=\"headerlink\" title=\"加载过程代码\"></a>加载过程代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> R.id.dynamic:&#123;</div><div class=\"line\">    FragmentDynamic fragmentDynamic=<span class=\"keyword\">new</span> FragmentDynamic();</div><div class=\"line\">    FragmentManager fragmentManager=getFragmentManager();</div><div class=\"line\">    FragmentTransaction beginTransaction=fragmentManager.beginTransaction();</div><div class=\"line\">    beginTransaction.add(R.id.frame,fragmentDynamic);</div><div class=\"line\">    beginTransaction.commit();</div><div class=\"line\">    <span class=\"keyword\">break</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"fragment生命周期\"><a href=\"#fragment生命周期\" class=\"headerlink\" title=\"fragment生命周期\"></a>fragment生命周期</h2><p>关键方法：<strong>onAttach()</strong>,<strong>onCreateView()</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FragmentThird</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 每次创建会绘制Fragment的View组件时回调该方法。</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        View v=inflater.inflate(R.layout.fragment_third,container,<span class=\"keyword\">false</span>);</div><div class=\"line\"><span class=\"comment\">//        Log.i(\"Main\",\"Fragment third--onCreateView()\");</span></div><div class=\"line\">        TextView textView=(TextView)v.findViewById(R.id.textview_third);</div><div class=\"line\">        textView.setText(<span class=\"string\">\"第三个Fragment\"</span>);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onCreateView()\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> v;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 当Fragment被添加到Activity时候会回调这个方法，并且只调用一次</div><div class=\"line\">     * <span class=\"doctag\">@param</span> context</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAttach</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onAttach(context);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--on attach()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 创建Fragment时会回调，只会调用一次</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onCreate()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     *当Fragment所在的Activity启动完成后调用</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityCreated</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onActivityCreated(savedInstanceState);</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onActivityCreated()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 启动Fragment</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStart</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onStart();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onStart()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 回复Fragment时会被回调，调用onStart()方法后面一定会调用</div><div class=\"line\">     * onResume方法</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onResume();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onResume()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 暂停Fragment</div><div class=\"line\">     */</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPause</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onPause();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onPause()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 停止Fragment</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onStop();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>,<span class=\"string\">\"Fragment third--onStop()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 销毁Fragment所包含的View组件时调用</div><div class=\"line\">     */</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onDestroyView()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 销毁Framgent时会被调用</div><div class=\"line\">     */</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onDestroy()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 与onAttach()方法对应</div><div class=\"line\">     * Fragment从Activity中删除时会回调该方法，并且只会调用一次</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDetach</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDetach();</div><div class=\"line\">        Log.i(<span class=\"string\">\"Main\"</span>, <span class=\"string\">\"Fragment third--onDetach()\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\">Log结果：</div><div class=\"line\">启动应用：<span class=\"keyword\">null</span></div><div class=\"line\"></div><div class=\"line\">启动Fragment：</div><div class=\"line\">I/Main(<span class=\"number\">8163</span>): Fragment third--<span class=\"function\">on <span class=\"title\">attach</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onCreate</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onCreateView</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onActivityCreated</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStart</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onResume</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\">屏幕锁屏：</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">解锁：</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStart</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onResume</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\">切换到其它的Fragment:</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroyView</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroy</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDetach</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\">回到桌面:</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">回到Fragment:</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStart</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onResume</span><span class=\"params\">()</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">退出Fragment：</div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onPause</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onStop</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroyView</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDestroy</span><span class=\"params\">()</span></div><div class=\"line\">I/<span class=\"title\">Main</span><span class=\"params\">(<span class=\"number\">8163</span>)</span>: Fragment third--<span class=\"title\">onDetach</span><span class=\"params\">()</span></span></div></pre></td></tr></table></figure>\n<h2 id=\"Activity和Fragment通信\"><a href=\"#Activity和Fragment通信\" class=\"headerlink\" title=\"Activity和Fragment通信\"></a>Activity和Fragment通信</h2><p>Activity —&gt; Fragment:在Activity中创建Bundle数据包，并调用Fragment的setArguments(Bundle bundle)方法。</p>\n<p>Fragment —&gt; Activity：需要在Fragment中定义一个内部回调接口，让包含该Fragment的Activity实现该回调接口。这样Fragment可调用回调方法将数据传递给Activity。</p>\n<h2 id=\"相关博客网址\"><a href=\"#相关博客网址\" class=\"headerlink\" title=\"相关博客网址\"></a>相关博客网址</h2><p><a href=\"http://blog.csdn.net/guolin_blog/article/details/8881711\">Android Fragment完全解析，关于碎片你所需知道的一切</a></p>\n"},{"author":"ivyxjc","date":"2016-02-17T16:00:00.000Z","title":"Codeforces Education Round7","keywords":null,"description":"Codeforces Education Round7几道题目的解答","_content":"\n[题目网址](http://codeforces.com/contest/622/)\n\n## A:Infinite Sequence\n\n\nA题比较简单,主要就利用公式$ \\sum_{k=1}^n k=\\frac {(1+n)* n}{2} $来确定距离所要求的数字最近的一个1所在的位置。然后就可得到该数值了。<br>\n代码如下：\n\n### 代码\n\n```java\npublic class Round7_A{\n    public static void main(String[] args){\n        Scanner in=new Scanner(System.in);\n        long  a=in.nextLong();\n        long a_one=count(a);\n\n        if(a_one*a_one+a_one==2*a){\n            System.out.println(a_one);\n        }else{\n            long tmp=(long)a-(a_one*a_one+a_one)/2;\n            System.out.println(tmp);\n        }\n        return;\n    }\n\n    public static long count(long  num) {\n        long num_two = 2 * num;\n        long i = (long) Math.sqrt(num_two) - 1;\n        //System.out.println(i);\n        if (i <= 0) {\n            i = 0;\n        }\n        for (; i <= num; i++) {\n            //System.out.println(i);\n            if (i * i + i == num_two) {\n                return i;\n            }\n            if (i * i + i > num_two) {\n                return i - 1;\n            }\n        }\n        return 0;\n    }\n}\n```\n\n## B. The Time\nB题也比较简单，主要就注意几个边界条件即可以及格式化输出即可。\n\n```java\n//num只有个位时，会自动在十位补0\nDecimalFormat df=new DecimalFormat(\"00\");\ndf.format(num);\n```\n\n\n## C. Not Equal on a Segment\n\n### 题目\n题意为查询一个数组的某一区间是否存在指定的$$$x$$$不相同的数，若不存在输出-1，否则输出任意一个不相同的树的秩。<br>\n\n### 解法介绍\n1.暴力解法就是遍历整个区间，但时间肯定不够。<br>\n\n2.线段树法：线段树广泛用于区间查询，但是该题仅需输出任意一个不相同的树的位置即可，所以可以不用该法。(其实我还没有特别熟线段树)\n\n3.解法：设输入数据的数组为```array[]```<br>\n创建一个数组```diff[]=new int[arrayLength]```使其任意秩```diff[i]```值为满足$$$ a_j \\ne a_i (j>i) $$$的第一个j的值。这也是官方答案所给的解法。代码如下：<br>\n\n### 边界条件\n该代码需要考虑到的边界条件有：<br>\n\n```\n1.数组内容全部相同\n2.数组内容出现连续相同的项\n3.数组内容全部不相同\n4.diff数组的最后一项是否有值(统一将diff数组的最后一项设为数组长度)\n\n```\n\n### 代码\n\n```java\nint tmpI=0;\nfor(int j=tmpI+1;j<arrayLength;){\n    if(array[j]==array[tmpI]) {\n        j++;\n        continue;\n    }\n    for(;tmpI<j;tmpI++){\n        diff[tmpI]=j;\n    }\n}\n//若数组中最后出现连续相同的项，上述代码不能将这些项赋值为arrayLength\n//所以需要下面的代码\nfor(int i=tmpI;i<arrayLength;i++){\n    diff[i]=arrayLength;\n}\n\ndiff[arrayLength-1]=arrayLength;\n```\n\n查询时使用的代码:<br>\n\n```java\ntry{\n    for(int i=0;i<queryTimes;i++){\n        int left=getInt()-1;\n        int right=getInt()-1;\n        int x=getInt();\n        if(array[left]!=x){\n            writer.write((left+1)+\"\\n\");\n            continue;\n        }\n        if(diff[left]>right){\n            writer.write((-1)+\"\\n\");\n        }else{\n            writer.write((diff[left]+1)+\"\\n\");\n        }\n    }\n    writer.flush();\n}catch (IOException e){\n    e.printStackTrace();\n}\n```\n\n### IO问题\n这一题以及下面的e题还有一个问题就是如果使用```Scanner```和```System.out.println()```，无论如何都不会通过测试，因为io就基本上快超时了。\n\n我使用了[ java_acm快速输入和输出 ][1]中提供的一个输入输出方法，代码如下\n#### 解决代码\n\n```java\npublic class Main {  \n    private static Reader reader = null;  \n    private static Writer writer = null;  \n\n    public static void main(String[] args) {  \n        reader = new InputStreamReader(System.in);  \n        writer = new OutputStreamWriter(System.out);  \n        try {  \n                m = getInt();  \n                writer.write(\"something\");  \n                writer.flush();  \n            }  \n        } catch (Exception e) {  \n            e.printStackTrace();  \n        }  \n    }  \n\n    /**\n     * 获取键盘输入的整数\n     *  \n     * @return 输入的整数\n     */  \n    public static int getInt() {  \n        int read;  \n        int res = 0;  \n        boolean isNegative = false;// 是不是负数  \n        try {  \n            while ((read = reader.read()) != -1) {  \n                if ((char) read == '-') {  \n                    res = 0;  \n                    isNegative = true;  \n                    break;  \n                } else if (isNumber((char) read)) {  \n                    res = read - '0';  \n                    break;  \n                }  \n            }  \n            while ((read = reader.read()) != -1) {  \n                char ch = (char) read;  \n                if (isNumber(ch)) {  \n                    res = res * 10 + (read - '0');  \n                } else {  \n                    break;  \n                }  \n            }  \n        } catch (IOException e) {  \n            // TODO Auto-generated catch block  \n            e.printStackTrace();  \n        }  \n        if (isNegative == true) {  \n            res = -1 * res;  \n        }  \n        return res;  \n    }  \n\n    /**\n     * 判断字符是否空白\n     *  \n     * @param ch\n     *            字符\n     * @return 判断结果\n     */  \n    public static boolean isBlank(char ch) {  \n        if (ch == '\\r' || ch == '\\n' || ch == ' ') {  \n            return true;  \n        }  \n        return false;  \n    }  \n\n    /**\n     * 判断字符是不是数字\n     *  \n     * @param ch\n     *            字符\n     * @return 判断结果\n     */  \n    public static boolean isNumber(char ch) {  \n        if (ch <= '9' && ch >= '0') {  \n            return true;  \n        }  \n        return false;  \n    }  \n}  \n\n```\n\n## E. Ants in Leaves\n\n### 题目\nYou are given a tree with n vertices and a root in the vertex 1. There is an ant in each leaf of the tree. In one second some ants can simultaneously go to the parent vertex from the vertex they were in. No two ants can be in the same vertex simultaneously except for the root of the tree.<br>\n\nFind the minimal time required for all ants to be in the root of the tree.<br>\n\n题意：n只蚂蚁从树的叶节点向根节点爬，每秒只能爬到它的父节点处，但是除了根节点，其它所有节点都只能同时存在一只蚂蚁。<br>\n\n### 解法\n\nThis problem was suggested by Aleksa Plavsic allllekssssa.\n\nLet z be the array of the depths of all leaves in the subtree of the vertex v. Let's sort z.\n\nStatement 1: it's profitable to lift the leaves in order of their appearing in z.\n\nStatement 2: denote ax — the time of appearing the x-th leaf in the vertex v, let's consider the leaves $$$z_i$$$ and $$$z_{i+1}$$$ then  $$$a_{z_i+1} \\geq  a_{z_i}+1$$$.\n\nStatement 3: $$$a_{z_i+1}=max(d_{z_i}+1,a_{z_i}+1)$$$, where $$$d_x$$$ is the depth of the x-th leaf in the subtree of the vertex v. The last statement gives us the solution for the problem: we should simply iterate over z from left to right and recalculate the array a by formula from the third statement. All statements can be easily proved and it's recommended to do by yourself to understand better the idea of the solution.\n\n#### 代码实现\n\n##### 建图\n\n```java\nint V=getInt();\n    Graph G=new Graph(V,V-1);\n    for(int i=0;i<V-1;i++){\n        G.addEdge(getInt(),getInt());\n    }\n    G.dfs();\n    G.solve();\n```\n\n##### dfs()详细代码\n\n```dfs()```的目的是将根节点的每个直接子节点的所有叶子节点的深度存储在一个```ArrayList```中组成一个数组depthArray中。\n\n```java\npublic void dfs(int v){\n//从根节点出发\n    if(v==1){\n        int rootSonsNum=adj[v].getConnectedvertexs().size();\n        depthArray=new ArrayList[rootSonsNum];\n        for(int i=0;i<rootSonsNum;i++){\n            depthArray[i]=new ArrayList<>();\n        }\n    }\n    marked[v]=true;\n    adj[v].setDepth(depth);\n    if(adj[v].getDegree()==1)\n        depthArray[count].add(adj[v].getDepth());\n    depth++;\n    for(Integer i:adj[v].getConnectedvertexs()){\n        if(!marked[i]){\n            dfs(i);\n            depth--;\n        }\n        if(v==1){\n            count++;\n        }\n    }\n}\n\npublic void dfs(){\n    dfs(1);\n}\n```\n\n##### solve()代码\n\n```solve()```代码的作用就是先将```depthArray```中的每一```个ArrayList```按从小到大排序，再对每一个ArrayList中的数据进行$$$max(d_{z_i}+1,a_{z_i}+1)$$$比较，最后```depthArray```数组中每一个```ArrayList```的resMax比较取最大的值。\n\n```java\npublic int solve(){\n    for(ArrayList<Integer> i:depthArray) {\n        Collections.sort(i);\n//            i.sort(new Comparator<Integer>() {\n//                @Override\n//                public int compare(Integer o1, Integer o2) {\n//                    if (o1 > o2)\n//                        return 1;\n//                    else if (o1 == o2)\n//                        return 0;\n//                    else\n//                        return -1;\n//                }\n//            });\n\n/*\n注释掉的代码在有些时候会出现\njava.lang.IllegalArgumentException: Comparison method violates its general contract!。可见16057179提交的错误提示\n*/\n\n    int res=0;\n    for(ArrayList<Integer> i:depthArray){\n        //System.out.println(i);\n        int tmpres=i.get(0);\n        int tmpIndex=1;\n        while(tmpIndex<i.size()){\n            tmpres=max(tmpres+1,i.get(tmpIndex));\n            tmpIndex++;\n        }\n        res=max(tmpres,res);\n    }\n    System.out.println(res);\n    return res;\n}\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  [1]: http://blog.csdn.net/a601025382s/article/details/46999711\n","source":"_posts/OJ/Codeforces/eduRound/2016-02-18-Codeforces-Edu-Round7总结.md","raw":"---\nauthor: ivyxjc\ndate: 2016-02-18\ntitle: Codeforces Education Round7\ncategory: OJ\ntags: [格式化输出,onlinejudge,io,线段树,区间查询]\nkeywords:\ndescription: Codeforces Education Round7几道题目的解答\n---\n\n[题目网址](http://codeforces.com/contest/622/)\n\n## A:Infinite Sequence\n\n\nA题比较简单,主要就利用公式$ \\sum_{k=1}^n k=\\frac {(1+n)* n}{2} $来确定距离所要求的数字最近的一个1所在的位置。然后就可得到该数值了。<br>\n代码如下：\n\n### 代码\n\n```java\npublic class Round7_A{\n    public static void main(String[] args){\n        Scanner in=new Scanner(System.in);\n        long  a=in.nextLong();\n        long a_one=count(a);\n\n        if(a_one*a_one+a_one==2*a){\n            System.out.println(a_one);\n        }else{\n            long tmp=(long)a-(a_one*a_one+a_one)/2;\n            System.out.println(tmp);\n        }\n        return;\n    }\n\n    public static long count(long  num) {\n        long num_two = 2 * num;\n        long i = (long) Math.sqrt(num_two) - 1;\n        //System.out.println(i);\n        if (i <= 0) {\n            i = 0;\n        }\n        for (; i <= num; i++) {\n            //System.out.println(i);\n            if (i * i + i == num_two) {\n                return i;\n            }\n            if (i * i + i > num_two) {\n                return i - 1;\n            }\n        }\n        return 0;\n    }\n}\n```\n\n## B. The Time\nB题也比较简单，主要就注意几个边界条件即可以及格式化输出即可。\n\n```java\n//num只有个位时，会自动在十位补0\nDecimalFormat df=new DecimalFormat(\"00\");\ndf.format(num);\n```\n\n\n## C. Not Equal on a Segment\n\n### 题目\n题意为查询一个数组的某一区间是否存在指定的$$$x$$$不相同的数，若不存在输出-1，否则输出任意一个不相同的树的秩。<br>\n\n### 解法介绍\n1.暴力解法就是遍历整个区间，但时间肯定不够。<br>\n\n2.线段树法：线段树广泛用于区间查询，但是该题仅需输出任意一个不相同的树的位置即可，所以可以不用该法。(其实我还没有特别熟线段树)\n\n3.解法：设输入数据的数组为```array[]```<br>\n创建一个数组```diff[]=new int[arrayLength]```使其任意秩```diff[i]```值为满足$$$ a_j \\ne a_i (j>i) $$$的第一个j的值。这也是官方答案所给的解法。代码如下：<br>\n\n### 边界条件\n该代码需要考虑到的边界条件有：<br>\n\n```\n1.数组内容全部相同\n2.数组内容出现连续相同的项\n3.数组内容全部不相同\n4.diff数组的最后一项是否有值(统一将diff数组的最后一项设为数组长度)\n\n```\n\n### 代码\n\n```java\nint tmpI=0;\nfor(int j=tmpI+1;j<arrayLength;){\n    if(array[j]==array[tmpI]) {\n        j++;\n        continue;\n    }\n    for(;tmpI<j;tmpI++){\n        diff[tmpI]=j;\n    }\n}\n//若数组中最后出现连续相同的项，上述代码不能将这些项赋值为arrayLength\n//所以需要下面的代码\nfor(int i=tmpI;i<arrayLength;i++){\n    diff[i]=arrayLength;\n}\n\ndiff[arrayLength-1]=arrayLength;\n```\n\n查询时使用的代码:<br>\n\n```java\ntry{\n    for(int i=0;i<queryTimes;i++){\n        int left=getInt()-1;\n        int right=getInt()-1;\n        int x=getInt();\n        if(array[left]!=x){\n            writer.write((left+1)+\"\\n\");\n            continue;\n        }\n        if(diff[left]>right){\n            writer.write((-1)+\"\\n\");\n        }else{\n            writer.write((diff[left]+1)+\"\\n\");\n        }\n    }\n    writer.flush();\n}catch (IOException e){\n    e.printStackTrace();\n}\n```\n\n### IO问题\n这一题以及下面的e题还有一个问题就是如果使用```Scanner```和```System.out.println()```，无论如何都不会通过测试，因为io就基本上快超时了。\n\n我使用了[ java_acm快速输入和输出 ][1]中提供的一个输入输出方法，代码如下\n#### 解决代码\n\n```java\npublic class Main {  \n    private static Reader reader = null;  \n    private static Writer writer = null;  \n\n    public static void main(String[] args) {  \n        reader = new InputStreamReader(System.in);  \n        writer = new OutputStreamWriter(System.out);  \n        try {  \n                m = getInt();  \n                writer.write(\"something\");  \n                writer.flush();  \n            }  \n        } catch (Exception e) {  \n            e.printStackTrace();  \n        }  \n    }  \n\n    /**\n     * 获取键盘输入的整数\n     *  \n     * @return 输入的整数\n     */  \n    public static int getInt() {  \n        int read;  \n        int res = 0;  \n        boolean isNegative = false;// 是不是负数  \n        try {  \n            while ((read = reader.read()) != -1) {  \n                if ((char) read == '-') {  \n                    res = 0;  \n                    isNegative = true;  \n                    break;  \n                } else if (isNumber((char) read)) {  \n                    res = read - '0';  \n                    break;  \n                }  \n            }  \n            while ((read = reader.read()) != -1) {  \n                char ch = (char) read;  \n                if (isNumber(ch)) {  \n                    res = res * 10 + (read - '0');  \n                } else {  \n                    break;  \n                }  \n            }  \n        } catch (IOException e) {  \n            // TODO Auto-generated catch block  \n            e.printStackTrace();  \n        }  \n        if (isNegative == true) {  \n            res = -1 * res;  \n        }  \n        return res;  \n    }  \n\n    /**\n     * 判断字符是否空白\n     *  \n     * @param ch\n     *            字符\n     * @return 判断结果\n     */  \n    public static boolean isBlank(char ch) {  \n        if (ch == '\\r' || ch == '\\n' || ch == ' ') {  \n            return true;  \n        }  \n        return false;  \n    }  \n\n    /**\n     * 判断字符是不是数字\n     *  \n     * @param ch\n     *            字符\n     * @return 判断结果\n     */  \n    public static boolean isNumber(char ch) {  \n        if (ch <= '9' && ch >= '0') {  \n            return true;  \n        }  \n        return false;  \n    }  \n}  \n\n```\n\n## E. Ants in Leaves\n\n### 题目\nYou are given a tree with n vertices and a root in the vertex 1. There is an ant in each leaf of the tree. In one second some ants can simultaneously go to the parent vertex from the vertex they were in. No two ants can be in the same vertex simultaneously except for the root of the tree.<br>\n\nFind the minimal time required for all ants to be in the root of the tree.<br>\n\n题意：n只蚂蚁从树的叶节点向根节点爬，每秒只能爬到它的父节点处，但是除了根节点，其它所有节点都只能同时存在一只蚂蚁。<br>\n\n### 解法\n\nThis problem was suggested by Aleksa Plavsic allllekssssa.\n\nLet z be the array of the depths of all leaves in the subtree of the vertex v. Let's sort z.\n\nStatement 1: it's profitable to lift the leaves in order of their appearing in z.\n\nStatement 2: denote ax — the time of appearing the x-th leaf in the vertex v, let's consider the leaves $$$z_i$$$ and $$$z_{i+1}$$$ then  $$$a_{z_i+1} \\geq  a_{z_i}+1$$$.\n\nStatement 3: $$$a_{z_i+1}=max(d_{z_i}+1,a_{z_i}+1)$$$, where $$$d_x$$$ is the depth of the x-th leaf in the subtree of the vertex v. The last statement gives us the solution for the problem: we should simply iterate over z from left to right and recalculate the array a by formula from the third statement. All statements can be easily proved and it's recommended to do by yourself to understand better the idea of the solution.\n\n#### 代码实现\n\n##### 建图\n\n```java\nint V=getInt();\n    Graph G=new Graph(V,V-1);\n    for(int i=0;i<V-1;i++){\n        G.addEdge(getInt(),getInt());\n    }\n    G.dfs();\n    G.solve();\n```\n\n##### dfs()详细代码\n\n```dfs()```的目的是将根节点的每个直接子节点的所有叶子节点的深度存储在一个```ArrayList```中组成一个数组depthArray中。\n\n```java\npublic void dfs(int v){\n//从根节点出发\n    if(v==1){\n        int rootSonsNum=adj[v].getConnectedvertexs().size();\n        depthArray=new ArrayList[rootSonsNum];\n        for(int i=0;i<rootSonsNum;i++){\n            depthArray[i]=new ArrayList<>();\n        }\n    }\n    marked[v]=true;\n    adj[v].setDepth(depth);\n    if(adj[v].getDegree()==1)\n        depthArray[count].add(adj[v].getDepth());\n    depth++;\n    for(Integer i:adj[v].getConnectedvertexs()){\n        if(!marked[i]){\n            dfs(i);\n            depth--;\n        }\n        if(v==1){\n            count++;\n        }\n    }\n}\n\npublic void dfs(){\n    dfs(1);\n}\n```\n\n##### solve()代码\n\n```solve()```代码的作用就是先将```depthArray```中的每一```个ArrayList```按从小到大排序，再对每一个ArrayList中的数据进行$$$max(d_{z_i}+1,a_{z_i}+1)$$$比较，最后```depthArray```数组中每一个```ArrayList```的resMax比较取最大的值。\n\n```java\npublic int solve(){\n    for(ArrayList<Integer> i:depthArray) {\n        Collections.sort(i);\n//            i.sort(new Comparator<Integer>() {\n//                @Override\n//                public int compare(Integer o1, Integer o2) {\n//                    if (o1 > o2)\n//                        return 1;\n//                    else if (o1 == o2)\n//                        return 0;\n//                    else\n//                        return -1;\n//                }\n//            });\n\n/*\n注释掉的代码在有些时候会出现\njava.lang.IllegalArgumentException: Comparison method violates its general contract!。可见16057179提交的错误提示\n*/\n\n    int res=0;\n    for(ArrayList<Integer> i:depthArray){\n        //System.out.println(i);\n        int tmpres=i.get(0);\n        int tmpIndex=1;\n        while(tmpIndex<i.size()){\n            tmpres=max(tmpres+1,i.get(tmpIndex));\n            tmpIndex++;\n        }\n        res=max(tmpres,res);\n    }\n    System.out.println(res);\n    return res;\n}\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  [1]: http://blog.csdn.net/a601025382s/article/details/46999711\n","slug":"OJ/Codeforces/eduRound/2016-02-18-Codeforces-Edu-Round7总结","published":1,"updated":"2016-10-25T09:03:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjn005zu8jr8oba0wnp","content":"<p><a href=\"http://codeforces.com/contest/622/\" target=\"_blank\" rel=\"external\">题目网址</a></p>\n<h2 id=\"A-Infinite-Sequence\"><a href=\"#A-Infinite-Sequence\" class=\"headerlink\" title=\"A:Infinite Sequence\"></a>A:Infinite Sequence</h2><p>A题比较简单,主要就利用公式$ \\sum_{k=1}^n k=\\frac {(1+n)* n}{2} $来确定距离所要求的数字最近的一个1所在的位置。然后就可得到该数值了。<br><br>代码如下：</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Round7_A</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        Scanner in=<span class=\"keyword\">new</span> Scanner(System.in);</div><div class=\"line\">        <span class=\"keyword\">long</span>  a=in.nextLong();</div><div class=\"line\">        <span class=\"keyword\">long</span> a_one=count(a);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span>(a_one*a_one+a_one==<span class=\"number\">2</span>*a)&#123;</div><div class=\"line\">            System.out.println(a_one);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">long</span> tmp=(<span class=\"keyword\">long</span>)a-(a_one*a_one+a_one)/<span class=\"number\">2</span>;</div><div class=\"line\">            System.out.println(tmp);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">long</span> <span class=\"title\">count</span><span class=\"params\">(<span class=\"keyword\">long</span>  num)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">long</span> num_two = <span class=\"number\">2</span> * num;</div><div class=\"line\">        <span class=\"keyword\">long</span> i = (<span class=\"keyword\">long</span>) Math.sqrt(num_two) - <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"comment\">//System.out.println(i);</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (i &lt;= <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            i = <span class=\"number\">0</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">for</span> (; i &lt;= num; i++) &#123;</div><div class=\"line\">            <span class=\"comment\">//System.out.println(i);</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (i * i + i == num_two) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> i;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">if</span> (i * i + i &gt; num_two) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> i - <span class=\"number\">1</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"B-The-Time\"><a href=\"#B-The-Time\" class=\"headerlink\" title=\"B. The Time\"></a>B. The Time</h2><p>B题也比较简单，主要就注意几个边界条件即可以及格式化输出即可。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//num只有个位时，会自动在十位补0</span></div><div class=\"line\">DecimalFormat df=<span class=\"keyword\">new</span> DecimalFormat(<span class=\"string\">\"00\"</span>);</div><div class=\"line\">df.format(num);</div></pre></td></tr></table></figure>\n<h2 id=\"C-Not-Equal-on-a-Segment\"><a href=\"#C-Not-Equal-on-a-Segment\" class=\"headerlink\" title=\"C. Not Equal on a Segment\"></a>C. Not Equal on a Segment</h2><h3 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h3><p>题意为查询一个数组的某一区间是否存在指定的$$$x$$$不相同的数，若不存在输出-1，否则输出任意一个不相同的树的秩。<br></p>\n<h3 id=\"解法介绍\"><a href=\"#解法介绍\" class=\"headerlink\" title=\"解法介绍\"></a>解法介绍</h3><p>1.暴力解法就是遍历整个区间，但时间肯定不够。<br></p>\n<p>2.线段树法：线段树广泛用于区间查询，但是该题仅需输出任意一个不相同的树的位置即可，所以可以不用该法。(其实我还没有特别熟线段树)</p>\n<p>3.解法：设输入数据的数组为<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">创建一个数组```diff[]=new int[arrayLength]```使其任意秩```diff[i]```值为满足$$$ a_j \\ne a_i (j&gt;i) $$$的第一个j的值。这也是官方答案所给的解法。代码如下：&lt;br&gt;</div><div class=\"line\"></div><div class=\"line\">### 边界条件</div><div class=\"line\">该代码需要考虑到的边界条件有：&lt;br&gt;</div></pre></td></tr></table></figure></p>\n<p>1.数组内容全部相同<br>2.数组内容出现连续相同的项<br>3.数组内容全部不相同<br>4.diff数组的最后一项是否有值(统一将diff数组的最后一项设为数组长度)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">### 代码</div><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">int tmpI=0;</div><div class=\"line\">for(int j=tmpI+1;j&lt;arrayLength;)&#123;</div><div class=\"line\">    if(array[j]==array[tmpI]) &#123;</div><div class=\"line\">        j++;</div><div class=\"line\">        continue;</div><div class=\"line\">    &#125;</div><div class=\"line\">    for(;tmpI&lt;j;tmpI++)&#123;</div><div class=\"line\">        diff[tmpI]=j;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">//若数组中最后出现连续相同的项，上述代码不能将这些项赋值为arrayLength</div><div class=\"line\">//所以需要下面的代码</div><div class=\"line\">for(int i=tmpI;i&lt;arrayLength;i++)&#123;</div><div class=\"line\">    diff[i]=arrayLength;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">diff[arrayLength-1]=arrayLength;</div></pre></td></tr></table></figure>\n<p>查询时使用的代码:<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">try</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;queryTimes;i++)&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> left=getInt()-<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> right=getInt()-<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> x=getInt();</div><div class=\"line\">        <span class=\"keyword\">if</span>(array[left]!=x)&#123;</div><div class=\"line\">            writer.write((left+<span class=\"number\">1</span>)+<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">            <span class=\"keyword\">continue</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(diff[left]&gt;right)&#123;</div><div class=\"line\">            writer.write((-<span class=\"number\">1</span>)+<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            writer.write((diff[left]+<span class=\"number\">1</span>)+<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    writer.flush();</div><div class=\"line\">&#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">    e.printStackTrace();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"IO问题\"><a href=\"#IO问题\" class=\"headerlink\" title=\"IO问题\"></a>IO问题</h3><p>这一题以及下面的e题还有一个问题就是如果使用<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">我使用了[ java_acm快速输入和输出 ][1]中提供的一个输入输出方法，代码如下</div><div class=\"line\">#### 解决代码</div><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">public class Main &#123;  </div><div class=\"line\">    private static Reader reader = null;  </div><div class=\"line\">    private static Writer writer = null;  </div><div class=\"line\"></div><div class=\"line\">    public static void main(String[] args) &#123;  </div><div class=\"line\">        reader = new InputStreamReader(System.in);  </div><div class=\"line\">        writer = new OutputStreamWriter(System.out);  </div><div class=\"line\">        try &#123;  </div><div class=\"line\">                m = getInt();  </div><div class=\"line\">                writer.write(&quot;something&quot;);  </div><div class=\"line\">                writer.flush();  </div><div class=\"line\">            &#125;  </div><div class=\"line\">        &#125; catch (Exception e) &#123;  </div><div class=\"line\">            e.printStackTrace();  </div><div class=\"line\">        &#125;  </div><div class=\"line\">    &#125;  </div><div class=\"line\"></div><div class=\"line\">    /**</div><div class=\"line\">     * 获取键盘输入的整数</div><div class=\"line\">     *  </div><div class=\"line\">     * @return 输入的整数</div><div class=\"line\">     */  </div><div class=\"line\">    public static int getInt() &#123;  </div><div class=\"line\">        int read;  </div><div class=\"line\">        int res = 0;  </div><div class=\"line\">        boolean isNegative = false;// 是不是负数  </div><div class=\"line\">        try &#123;  </div><div class=\"line\">            while ((read = reader.read()) != -1) &#123;  </div><div class=\"line\">                if ((char) read == &apos;-&apos;) &#123;  </div><div class=\"line\">                    res = 0;  </div><div class=\"line\">                    isNegative = true;  </div><div class=\"line\">                    break;  </div><div class=\"line\">                &#125; else if (isNumber((char) read)) &#123;  </div><div class=\"line\">                    res = read - &apos;0&apos;;  </div><div class=\"line\">                    break;  </div><div class=\"line\">                &#125;  </div><div class=\"line\">            &#125;  </div><div class=\"line\">            while ((read = reader.read()) != -1) &#123;  </div><div class=\"line\">                char ch = (char) read;  </div><div class=\"line\">                if (isNumber(ch)) &#123;  </div><div class=\"line\">                    res = res * 10 + (read - &apos;0&apos;);  </div><div class=\"line\">                &#125; else &#123;  </div><div class=\"line\">                    break;  </div><div class=\"line\">                &#125;  </div><div class=\"line\">            &#125;  </div><div class=\"line\">        &#125; catch (IOException e) &#123;  </div><div class=\"line\">            // TODO Auto-generated catch block  </div><div class=\"line\">            e.printStackTrace();  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        if (isNegative == true) &#123;  </div><div class=\"line\">            res = -1 * res;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        return res;  </div><div class=\"line\">    &#125;  </div><div class=\"line\"></div><div class=\"line\">    /**</div><div class=\"line\">     * 判断字符是否空白</div><div class=\"line\">     *  </div><div class=\"line\">     * @param ch</div><div class=\"line\">     *            字符</div><div class=\"line\">     * @return 判断结果</div><div class=\"line\">     */  </div><div class=\"line\">    public static boolean isBlank(char ch) &#123;  </div><div class=\"line\">        if (ch == &apos;\\r&apos; || ch == &apos;\\n&apos; || ch == &apos; &apos;) &#123;  </div><div class=\"line\">            return true;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        return false;  </div><div class=\"line\">    &#125;  </div><div class=\"line\"></div><div class=\"line\">    /**</div><div class=\"line\">     * 判断字符是不是数字</div><div class=\"line\">     *  </div><div class=\"line\">     * @param ch</div><div class=\"line\">     *            字符</div><div class=\"line\">     * @return 判断结果</div><div class=\"line\">     */  </div><div class=\"line\">    public static boolean isNumber(char ch) &#123;  </div><div class=\"line\">        if (ch &lt;= &apos;9&apos; &amp;&amp; ch &gt;= &apos;0&apos;) &#123;  </div><div class=\"line\">            return true;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        return false;  </div><div class=\"line\">    &#125;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"E-Ants-in-Leaves\"><a href=\"#E-Ants-in-Leaves\" class=\"headerlink\" title=\"E. Ants in Leaves\"></a>E. Ants in Leaves</h2><h3 id=\"题目-1\"><a href=\"#题目-1\" class=\"headerlink\" title=\"题目\"></a>题目</h3><p>You are given a tree with n vertices and a root in the vertex 1. There is an ant in each leaf of the tree. In one second some ants can simultaneously go to the parent vertex from the vertex they were in. No two ants can be in the same vertex simultaneously except for the root of the tree.<br></p>\n<p>Find the minimal time required for all ants to be in the root of the tree.<br></p>\n<p>题意：n只蚂蚁从树的叶节点向根节点爬，每秒只能爬到它的父节点处，但是除了根节点，其它所有节点都只能同时存在一只蚂蚁。<br></p>\n<h3 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h3><p>This problem was suggested by Aleksa Plavsic allllekssssa.</p>\n<p>Let z be the array of the depths of all leaves in the subtree of the vertex v. Let’s sort z.</p>\n<p>Statement 1: it’s profitable to lift the leaves in order of their appearing in z.</p>\n<p>Statement 2: denote ax — the time of appearing the x-th leaf in the vertex v, let’s consider the leaves $$$z<em>i$$$ and $$$z</em>{i+1}$$$ then  $$$a_{z<em>i+1} \\geq  a</em>{z_i}+1$$$.</p>\n<p>Statement 3: $$$a_{z<em>i+1}=max(d</em>{z<em>i}+1,a</em>{z_i}+1)$$$, where $$$d_x$$$ is the depth of the x-th leaf in the subtree of the vertex v. The last statement gives us the solution for the problem: we should simply iterate over z from left to right and recalculate the array a by formula from the third statement. All statements can be easily proved and it’s recommended to do by yourself to understand better the idea of the solution.</p>\n<h4 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><h5 id=\"建图\"><a href=\"#建图\" class=\"headerlink\" title=\"建图\"></a>建图</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">int</span> V=getInt();</div><div class=\"line\">    Graph G=<span class=\"keyword\">new</span> Graph(V,V-<span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;V-<span class=\"number\">1</span>;i++)&#123;</div><div class=\"line\">        G.addEdge(getInt(),getInt());</div><div class=\"line\">    &#125;</div><div class=\"line\">    G.dfs();</div><div class=\"line\">    G.solve();</div></pre></td></tr></table></figure>\n<h5 id=\"dfs-详细代码\"><a href=\"#dfs-详细代码\" class=\"headerlink\" title=\"dfs()详细代码\"></a>dfs()详细代码</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">public void dfs(int v)&#123;</div><div class=\"line\">//从根节点出发</div><div class=\"line\">    if(v==1)&#123;</div><div class=\"line\">        int rootSonsNum=adj[v].getConnectedvertexs().size();</div><div class=\"line\">        depthArray=new ArrayList[rootSonsNum];</div><div class=\"line\">        for(int i=0;i&lt;rootSonsNum;i++)&#123;</div><div class=\"line\">            depthArray[i]=new ArrayList&lt;&gt;();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    marked[v]=true;</div><div class=\"line\">    adj[v].setDepth(depth);</div><div class=\"line\">    if(adj[v].getDegree()==1)</div><div class=\"line\">        depthArray[count].add(adj[v].getDepth());</div><div class=\"line\">    depth++;</div><div class=\"line\">    for(Integer i:adj[v].getConnectedvertexs())&#123;</div><div class=\"line\">        if(!marked[i])&#123;</div><div class=\"line\">            dfs(i);</div><div class=\"line\">            depth--;</div><div class=\"line\">        &#125;</div><div class=\"line\">        if(v==1)&#123;</div><div class=\"line\">            count++;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">public void dfs()&#123;</div><div class=\"line\">    dfs(1);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"solve-代码\"><a href=\"#solve-代码\" class=\"headerlink\" title=\"solve()代码\"></a>solve()代码</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">public int solve()&#123;</div><div class=\"line\">    for(ArrayList&lt;Integer&gt; i:depthArray) &#123;</div><div class=\"line\">        Collections.sort(i);</div><div class=\"line\">//            i.sort(new Comparator&lt;Integer&gt;() &#123;</div><div class=\"line\">//                @Override</div><div class=\"line\">//                public int compare(Integer o1, Integer o2) &#123;</div><div class=\"line\">//                    if (o1 &gt; o2)</div><div class=\"line\">//                        return 1;</div><div class=\"line\">//                    else if (o1 == o2)</div><div class=\"line\">//                        return 0;</div><div class=\"line\">//                    else</div><div class=\"line\">//                        return -1;</div><div class=\"line\">//                &#125;</div><div class=\"line\">//            &#125;);</div><div class=\"line\"></div><div class=\"line\">/*</div><div class=\"line\">注释掉的代码在有些时候会出现</div><div class=\"line\">java.lang.IllegalArgumentException: Comparison method violates its general contract!。可见16057179提交的错误提示</div><div class=\"line\">*/</div><div class=\"line\"></div><div class=\"line\">    int res=0;</div><div class=\"line\">    for(ArrayList&lt;Integer&gt; i:depthArray)&#123;</div><div class=\"line\">        //System.out.println(i);</div><div class=\"line\">        int tmpres=i.get(0);</div><div class=\"line\">        int tmpIndex=1;</div><div class=\"line\">        while(tmpIndex&lt;i.size())&#123;</div><div class=\"line\">            tmpres=max(tmpres+1,i.get(tmpIndex));</div><div class=\"line\">            tmpIndex++;</div><div class=\"line\">        &#125;</div><div class=\"line\">        res=max(tmpres,res);</div><div class=\"line\">    &#125;</div><div class=\"line\">    System.out.println(res);</div><div class=\"line\">    return res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p><a href=\"http://codeforces.com/contest/622/\">题目网址</a></p>\n<h2 id=\"A-Infinite-Sequence\"><a href=\"#A-Infinite-Sequence\" class=\"headerlink\" title=\"A:Infinite Sequence\"></a>A:Infinite Sequence</h2><p>A题比较简单,主要就利用公式$ \\sum_{k=1}^n k=\\frac {(1+n)* n}{2} $来确定距离所要求的数字最近的一个1所在的位置。然后就可得到该数值了。<br><br>代码如下：</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Round7_A</span></span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">        Scanner in=<span class=\"keyword\">new</span> Scanner(System.in);</div><div class=\"line\">        <span class=\"keyword\">long</span>  a=in.nextLong();</div><div class=\"line\">        <span class=\"keyword\">long</span> a_one=count(a);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span>(a_one*a_one+a_one==<span class=\"number\">2</span>*a)&#123;</div><div class=\"line\">            System.out.println(a_one);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">long</span> tmp=(<span class=\"keyword\">long</span>)a-(a_one*a_one+a_one)/<span class=\"number\">2</span>;</div><div class=\"line\">            System.out.println(tmp);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">long</span> <span class=\"title\">count</span><span class=\"params\">(<span class=\"keyword\">long</span>  num)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">long</span> num_two = <span class=\"number\">2</span> * num;</div><div class=\"line\">        <span class=\"keyword\">long</span> i = (<span class=\"keyword\">long</span>) Math.sqrt(num_two) - <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"comment\">//System.out.println(i);</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (i &lt;= <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            i = <span class=\"number\">0</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">for</span> (; i &lt;= num; i++) &#123;</div><div class=\"line\">            <span class=\"comment\">//System.out.println(i);</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (i * i + i == num_two) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> i;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">if</span> (i * i + i &gt; num_two) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> i - <span class=\"number\">1</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"B-The-Time\"><a href=\"#B-The-Time\" class=\"headerlink\" title=\"B. The Time\"></a>B. The Time</h2><p>B题也比较简单，主要就注意几个边界条件即可以及格式化输出即可。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//num只有个位时，会自动在十位补0</span></div><div class=\"line\">DecimalFormat df=<span class=\"keyword\">new</span> DecimalFormat(<span class=\"string\">\"00\"</span>);</div><div class=\"line\">df.format(num);</div></pre></td></tr></table></figure>\n<h2 id=\"C-Not-Equal-on-a-Segment\"><a href=\"#C-Not-Equal-on-a-Segment\" class=\"headerlink\" title=\"C. Not Equal on a Segment\"></a>C. Not Equal on a Segment</h2><h3 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h3><p>题意为查询一个数组的某一区间是否存在指定的$$$x$$$不相同的数，若不存在输出-1，否则输出任意一个不相同的树的秩。<br></p>\n<h3 id=\"解法介绍\"><a href=\"#解法介绍\" class=\"headerlink\" title=\"解法介绍\"></a>解法介绍</h3><p>1.暴力解法就是遍历整个区间，但时间肯定不够。<br></p>\n<p>2.线段树法：线段树广泛用于区间查询，但是该题仅需输出任意一个不相同的树的位置即可，所以可以不用该法。(其实我还没有特别熟线段树)</p>\n<p>3.解法：设输入数据的数组为<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">创建一个数组```diff[]=new int[arrayLength]```使其任意秩```diff[i]```值为满足$$$ a_j \\ne a_i (j&gt;i) $$$的第一个j的值。这也是官方答案所给的解法。代码如下：&lt;br&gt;</div><div class=\"line\"></div><div class=\"line\">### 边界条件</div><div class=\"line\">该代码需要考虑到的边界条件有：&lt;br&gt;</div></pre></td></tr></table></figure></p>\n<p>1.数组内容全部相同<br>2.数组内容出现连续相同的项<br>3.数组内容全部不相同<br>4.diff数组的最后一项是否有值(统一将diff数组的最后一项设为数组长度)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">### 代码</div><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">int tmpI=0;</div><div class=\"line\">for(int j=tmpI+1;j&lt;arrayLength;)&#123;</div><div class=\"line\">    if(array[j]==array[tmpI]) &#123;</div><div class=\"line\">        j++;</div><div class=\"line\">        continue;</div><div class=\"line\">    &#125;</div><div class=\"line\">    for(;tmpI&lt;j;tmpI++)&#123;</div><div class=\"line\">        diff[tmpI]=j;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">//若数组中最后出现连续相同的项，上述代码不能将这些项赋值为arrayLength</div><div class=\"line\">//所以需要下面的代码</div><div class=\"line\">for(int i=tmpI;i&lt;arrayLength;i++)&#123;</div><div class=\"line\">    diff[i]=arrayLength;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">diff[arrayLength-1]=arrayLength;</div></pre></td></tr></table></figure>\n<p>查询时使用的代码:<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">try</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;queryTimes;i++)&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> left=getInt()-<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> right=getInt()-<span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> x=getInt();</div><div class=\"line\">        <span class=\"keyword\">if</span>(array[left]!=x)&#123;</div><div class=\"line\">            writer.write((left+<span class=\"number\">1</span>)+<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">            <span class=\"keyword\">continue</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(diff[left]&gt;right)&#123;</div><div class=\"line\">            writer.write((-<span class=\"number\">1</span>)+<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            writer.write((diff[left]+<span class=\"number\">1</span>)+<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    writer.flush();</div><div class=\"line\">&#125;<span class=\"keyword\">catch</span> (IOException e)&#123;</div><div class=\"line\">    e.printStackTrace();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"IO问题\"><a href=\"#IO问题\" class=\"headerlink\" title=\"IO问题\"></a>IO问题</h3><p>这一题以及下面的e题还有一个问题就是如果使用<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">我使用了[ java_acm快速输入和输出 ][1]中提供的一个输入输出方法，代码如下</div><div class=\"line\">#### 解决代码</div><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">public class Main &#123;  </div><div class=\"line\">    private static Reader reader = null;  </div><div class=\"line\">    private static Writer writer = null;  </div><div class=\"line\"></div><div class=\"line\">    public static void main(String[] args) &#123;  </div><div class=\"line\">        reader = new InputStreamReader(System.in);  </div><div class=\"line\">        writer = new OutputStreamWriter(System.out);  </div><div class=\"line\">        try &#123;  </div><div class=\"line\">                m = getInt();  </div><div class=\"line\">                writer.write(&quot;something&quot;);  </div><div class=\"line\">                writer.flush();  </div><div class=\"line\">            &#125;  </div><div class=\"line\">        &#125; catch (Exception e) &#123;  </div><div class=\"line\">            e.printStackTrace();  </div><div class=\"line\">        &#125;  </div><div class=\"line\">    &#125;  </div><div class=\"line\"></div><div class=\"line\">    /**</div><div class=\"line\">     * 获取键盘输入的整数</div><div class=\"line\">     *  </div><div class=\"line\">     * @return 输入的整数</div><div class=\"line\">     */  </div><div class=\"line\">    public static int getInt() &#123;  </div><div class=\"line\">        int read;  </div><div class=\"line\">        int res = 0;  </div><div class=\"line\">        boolean isNegative = false;// 是不是负数  </div><div class=\"line\">        try &#123;  </div><div class=\"line\">            while ((read = reader.read()) != -1) &#123;  </div><div class=\"line\">                if ((char) read == &apos;-&apos;) &#123;  </div><div class=\"line\">                    res = 0;  </div><div class=\"line\">                    isNegative = true;  </div><div class=\"line\">                    break;  </div><div class=\"line\">                &#125; else if (isNumber((char) read)) &#123;  </div><div class=\"line\">                    res = read - &apos;0&apos;;  </div><div class=\"line\">                    break;  </div><div class=\"line\">                &#125;  </div><div class=\"line\">            &#125;  </div><div class=\"line\">            while ((read = reader.read()) != -1) &#123;  </div><div class=\"line\">                char ch = (char) read;  </div><div class=\"line\">                if (isNumber(ch)) &#123;  </div><div class=\"line\">                    res = res * 10 + (read - &apos;0&apos;);  </div><div class=\"line\">                &#125; else &#123;  </div><div class=\"line\">                    break;  </div><div class=\"line\">                &#125;  </div><div class=\"line\">            &#125;  </div><div class=\"line\">        &#125; catch (IOException e) &#123;  </div><div class=\"line\">            // TODO Auto-generated catch block  </div><div class=\"line\">            e.printStackTrace();  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        if (isNegative == true) &#123;  </div><div class=\"line\">            res = -1 * res;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        return res;  </div><div class=\"line\">    &#125;  </div><div class=\"line\"></div><div class=\"line\">    /**</div><div class=\"line\">     * 判断字符是否空白</div><div class=\"line\">     *  </div><div class=\"line\">     * @param ch</div><div class=\"line\">     *            字符</div><div class=\"line\">     * @return 判断结果</div><div class=\"line\">     */  </div><div class=\"line\">    public static boolean isBlank(char ch) &#123;  </div><div class=\"line\">        if (ch == &apos;\\r&apos; || ch == &apos;\\n&apos; || ch == &apos; &apos;) &#123;  </div><div class=\"line\">            return true;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        return false;  </div><div class=\"line\">    &#125;  </div><div class=\"line\"></div><div class=\"line\">    /**</div><div class=\"line\">     * 判断字符是不是数字</div><div class=\"line\">     *  </div><div class=\"line\">     * @param ch</div><div class=\"line\">     *            字符</div><div class=\"line\">     * @return 判断结果</div><div class=\"line\">     */  </div><div class=\"line\">    public static boolean isNumber(char ch) &#123;  </div><div class=\"line\">        if (ch &lt;= &apos;9&apos; &amp;&amp; ch &gt;= &apos;0&apos;) &#123;  </div><div class=\"line\">            return true;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">        return false;  </div><div class=\"line\">    &#125;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"E-Ants-in-Leaves\"><a href=\"#E-Ants-in-Leaves\" class=\"headerlink\" title=\"E. Ants in Leaves\"></a>E. Ants in Leaves</h2><h3 id=\"题目-1\"><a href=\"#题目-1\" class=\"headerlink\" title=\"题目\"></a>题目</h3><p>You are given a tree with n vertices and a root in the vertex 1. There is an ant in each leaf of the tree. In one second some ants can simultaneously go to the parent vertex from the vertex they were in. No two ants can be in the same vertex simultaneously except for the root of the tree.<br></p>\n<p>Find the minimal time required for all ants to be in the root of the tree.<br></p>\n<p>题意：n只蚂蚁从树的叶节点向根节点爬，每秒只能爬到它的父节点处，但是除了根节点，其它所有节点都只能同时存在一只蚂蚁。<br></p>\n<h3 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h3><p>This problem was suggested by Aleksa Plavsic allllekssssa.</p>\n<p>Let z be the array of the depths of all leaves in the subtree of the vertex v. Let’s sort z.</p>\n<p>Statement 1: it’s profitable to lift the leaves in order of their appearing in z.</p>\n<p>Statement 2: denote ax — the time of appearing the x-th leaf in the vertex v, let’s consider the leaves $$$z<em>i$$$ and $$$z</em>{i+1}$$$ then  $$$a_{z<em>i+1} \\geq  a</em>{z_i}+1$$$.</p>\n<p>Statement 3: $$$a_{z<em>i+1}=max(d</em>{z<em>i}+1,a</em>{z_i}+1)$$$, where $$$d_x$$$ is the depth of the x-th leaf in the subtree of the vertex v. The last statement gives us the solution for the problem: we should simply iterate over z from left to right and recalculate the array a by formula from the third statement. All statements can be easily proved and it’s recommended to do by yourself to understand better the idea of the solution.</p>\n<h4 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><h5 id=\"建图\"><a href=\"#建图\" class=\"headerlink\" title=\"建图\"></a>建图</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">int</span> V=getInt();</div><div class=\"line\">    Graph G=<span class=\"keyword\">new</span> Graph(V,V-<span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;V-<span class=\"number\">1</span>;i++)&#123;</div><div class=\"line\">        G.addEdge(getInt(),getInt());</div><div class=\"line\">    &#125;</div><div class=\"line\">    G.dfs();</div><div class=\"line\">    G.solve();</div></pre></td></tr></table></figure>\n<h5 id=\"dfs-详细代码\"><a href=\"#dfs-详细代码\" class=\"headerlink\" title=\"dfs()详细代码\"></a>dfs()详细代码</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">public void dfs(int v)&#123;</div><div class=\"line\">//从根节点出发</div><div class=\"line\">    if(v==1)&#123;</div><div class=\"line\">        int rootSonsNum=adj[v].getConnectedvertexs().size();</div><div class=\"line\">        depthArray=new ArrayList[rootSonsNum];</div><div class=\"line\">        for(int i=0;i&lt;rootSonsNum;i++)&#123;</div><div class=\"line\">            depthArray[i]=new ArrayList&lt;&gt;();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    marked[v]=true;</div><div class=\"line\">    adj[v].setDepth(depth);</div><div class=\"line\">    if(adj[v].getDegree()==1)</div><div class=\"line\">        depthArray[count].add(adj[v].getDepth());</div><div class=\"line\">    depth++;</div><div class=\"line\">    for(Integer i:adj[v].getConnectedvertexs())&#123;</div><div class=\"line\">        if(!marked[i])&#123;</div><div class=\"line\">            dfs(i);</div><div class=\"line\">            depth--;</div><div class=\"line\">        &#125;</div><div class=\"line\">        if(v==1)&#123;</div><div class=\"line\">            count++;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">public void dfs()&#123;</div><div class=\"line\">    dfs(1);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"solve-代码\"><a href=\"#solve-代码\" class=\"headerlink\" title=\"solve()代码\"></a>solve()代码</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">```java</div><div class=\"line\">public int solve()&#123;</div><div class=\"line\">    for(ArrayList&lt;Integer&gt; i:depthArray) &#123;</div><div class=\"line\">        Collections.sort(i);</div><div class=\"line\">//            i.sort(new Comparator&lt;Integer&gt;() &#123;</div><div class=\"line\">//                @Override</div><div class=\"line\">//                public int compare(Integer o1, Integer o2) &#123;</div><div class=\"line\">//                    if (o1 &gt; o2)</div><div class=\"line\">//                        return 1;</div><div class=\"line\">//                    else if (o1 == o2)</div><div class=\"line\">//                        return 0;</div><div class=\"line\">//                    else</div><div class=\"line\">//                        return -1;</div><div class=\"line\">//                &#125;</div><div class=\"line\">//            &#125;);</div><div class=\"line\"></div><div class=\"line\">/*</div><div class=\"line\">注释掉的代码在有些时候会出现</div><div class=\"line\">java.lang.IllegalArgumentException: Comparison method violates its general contract!。可见16057179提交的错误提示</div><div class=\"line\">*/</div><div class=\"line\"></div><div class=\"line\">    int res=0;</div><div class=\"line\">    for(ArrayList&lt;Integer&gt; i:depthArray)&#123;</div><div class=\"line\">        //System.out.println(i);</div><div class=\"line\">        int tmpres=i.get(0);</div><div class=\"line\">        int tmpIndex=1;</div><div class=\"line\">        while(tmpIndex&lt;i.size())&#123;</div><div class=\"line\">            tmpres=max(tmpres+1,i.get(tmpIndex));</div><div class=\"line\">            tmpIndex++;</div><div class=\"line\">        &#125;</div><div class=\"line\">        res=max(tmpres,res);</div><div class=\"line\">    &#125;</div><div class=\"line\">    System.out.println(res);</div><div class=\"line\">    return res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-09-23T16:00:00.000Z","title":"ActionBarCompat","keywords":null,"description":"如何添加菜单项, 以及如何在运行时更改菜单项.","_content":"\n\n```xml\nvalues/style\n\n## 布局文件中添加menu\n\n```xml\nmenu_main.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      xmlns:support=\"http://schemas.android.com/apk/res-auto\"\n    >\n    <item\n        android:id=\"@+id/menu_setting\"\n        android:icon=\"@mipmap/ic_action_settings\"\n        android:title=\"@string/menu_setting\"\n        support:showAsAction=\"never\"/>\n    <item\n        android:id=\"@+id/menu_refresh\"\n        android:icon=\"@mipmap/ic_action_refresh\"\n        android:title=\"@string/menu_refresh\"\n        support:showAsAction=\"always\"/>\n</menu>\n```\n\n## Activity中添加menu\n\n```xml\nvalues/ids.xml\n<resources>\n    <item name=\"menu_location\" type=\"id\"/>\n</resources>\n```\n\n```java\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.menu_main,menu);\n    MenuItem location=menu.add(0,R.id.menu_location,0,\"Location\");\n    location.setIcon(R.mipmap.ic_action_location);\n    MenuItemCompat.setShowAsAction(location,MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);\n    return true;\n}\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    switch (item.getItemId()){\n        case R.id.menu_setting:\n            return true;\n        case R.id.menu_location:\n            return true;\n        case R.id.menu_refresh:\n            return true;\n    }\n    return super.onOptionsItemSelected(item);\n}\n```\n\n## 用法\n\n### 运行时更改菜单项\n\n```java\nmButtonForbidRefresh.setOnClickListener(new View.OnClickListener() {\n           private int i=0;\n           @Override\n           public void onClick(View view) {\n               i++;\n               if(i%2==1)\n                   mButtonForbidRefresh.setActivated(true);\n               else\n                   mButtonForbidRefresh.setActivated(false);\n               invalidateOptionsMenu();\n           }\n       });\n```\n\n\n```java\n@Override\n    public boolean onPrepareOptionsMenu(Menu menu) {\n        menu.clear();\n        getMenuInflater().inflate(R.menu.menu_main, menu);\n        MenuItem item=menu.findItem(R.id.menu_refresh);\n        if(mButtonForbidRefresh.isActivated()){\n           item.setEnabled(false);\n        }\n\n        MenuItem location = menu.add(0, R.id.menu_location, Menu.CATEGORY_SECONDARY, \"Location\");\n        location.setIcon(R.mipmap.ic_action_location);\n        MenuItemCompat.setShowAsAction(location, MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);\n\n        return super.onPrepareOptionsMenu(menu);\n    }\n```\n\n`menu.findItem(int id)`<br>\n\n`menu.getItem(int index)`\n\n### onPrepareOptionsMenu(Menu menu)和onCreateOptionsMenu(Menu menu)区别\n`onCreateOptionsMenu(Menu menu)`只在最初的时候会调用每次点击menu都会\n调用一次`onPrepareOptionsMenu(Menu menu)`.使用`invalidateOptionsMenu()`\n会直接调用onPrepareOptionsMenu(Menu menu);\n\n\n### 多个Activity共用相同ActionBar\n\n如果应用包含多个 Activity，且其中某些 Activity 提供相同的选项菜单，则可考虑创建一个仅\n实现`onCreateOptionsMenu()` 和 `onOptionsItemSelected()`方法的 Activity。然后，\n为每个应共享相同选项菜单的 Activity 扩展此类。 通过这种方式，您可以管理一个用于\n处理菜单操作的代码集，且每个子级类均会继承菜单行为。若要将菜单项添加到一个\n子级 Activity，请重写该 Activity 中的 `onCreateOptionsMenu()`。\n调用 `super.onCreateOptionsMenu(menu)`，以便创建原始菜单项，\n然后使用 `menu.add()` 添加新菜单项。此外，您还可以替代各个菜单项的超类行为。\n","source":"_posts/android/AndroidSamples/UI/2016-09-24-ActionBar-Basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-09-24\ntitle: ActionBarCompat\ncategory: Android\ntags: [android,android_UI]\nkeywords:\ndescription: 如何添加菜单项, 以及如何在运行时更改菜单项.\n---\n\n\n```xml\nvalues/style\n\n## 布局文件中添加menu\n\n```xml\nmenu_main.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      xmlns:support=\"http://schemas.android.com/apk/res-auto\"\n    >\n    <item\n        android:id=\"@+id/menu_setting\"\n        android:icon=\"@mipmap/ic_action_settings\"\n        android:title=\"@string/menu_setting\"\n        support:showAsAction=\"never\"/>\n    <item\n        android:id=\"@+id/menu_refresh\"\n        android:icon=\"@mipmap/ic_action_refresh\"\n        android:title=\"@string/menu_refresh\"\n        support:showAsAction=\"always\"/>\n</menu>\n```\n\n## Activity中添加menu\n\n```xml\nvalues/ids.xml\n<resources>\n    <item name=\"menu_location\" type=\"id\"/>\n</resources>\n```\n\n```java\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.menu_main,menu);\n    MenuItem location=menu.add(0,R.id.menu_location,0,\"Location\");\n    location.setIcon(R.mipmap.ic_action_location);\n    MenuItemCompat.setShowAsAction(location,MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);\n    return true;\n}\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    switch (item.getItemId()){\n        case R.id.menu_setting:\n            return true;\n        case R.id.menu_location:\n            return true;\n        case R.id.menu_refresh:\n            return true;\n    }\n    return super.onOptionsItemSelected(item);\n}\n```\n\n## 用法\n\n### 运行时更改菜单项\n\n```java\nmButtonForbidRefresh.setOnClickListener(new View.OnClickListener() {\n           private int i=0;\n           @Override\n           public void onClick(View view) {\n               i++;\n               if(i%2==1)\n                   mButtonForbidRefresh.setActivated(true);\n               else\n                   mButtonForbidRefresh.setActivated(false);\n               invalidateOptionsMenu();\n           }\n       });\n```\n\n\n```java\n@Override\n    public boolean onPrepareOptionsMenu(Menu menu) {\n        menu.clear();\n        getMenuInflater().inflate(R.menu.menu_main, menu);\n        MenuItem item=menu.findItem(R.id.menu_refresh);\n        if(mButtonForbidRefresh.isActivated()){\n           item.setEnabled(false);\n        }\n\n        MenuItem location = menu.add(0, R.id.menu_location, Menu.CATEGORY_SECONDARY, \"Location\");\n        location.setIcon(R.mipmap.ic_action_location);\n        MenuItemCompat.setShowAsAction(location, MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);\n\n        return super.onPrepareOptionsMenu(menu);\n    }\n```\n\n`menu.findItem(int id)`<br>\n\n`menu.getItem(int index)`\n\n### onPrepareOptionsMenu(Menu menu)和onCreateOptionsMenu(Menu menu)区别\n`onCreateOptionsMenu(Menu menu)`只在最初的时候会调用每次点击menu都会\n调用一次`onPrepareOptionsMenu(Menu menu)`.使用`invalidateOptionsMenu()`\n会直接调用onPrepareOptionsMenu(Menu menu);\n\n\n### 多个Activity共用相同ActionBar\n\n如果应用包含多个 Activity，且其中某些 Activity 提供相同的选项菜单，则可考虑创建一个仅\n实现`onCreateOptionsMenu()` 和 `onOptionsItemSelected()`方法的 Activity。然后，\n为每个应共享相同选项菜单的 Activity 扩展此类。 通过这种方式，您可以管理一个用于\n处理菜单操作的代码集，且每个子级类均会继承菜单行为。若要将菜单项添加到一个\n子级 Activity，请重写该 Activity 中的 `onCreateOptionsMenu()`。\n调用 `super.onCreateOptionsMenu(menu)`，以便创建原始菜单项，\n然后使用 `menu.add()` 添加新菜单项。此外，您还可以替代各个菜单项的超类行为。\n","slug":"android/AndroidSamples/UI/2016-09-24-ActionBar-Basic","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjr0061u8jrup382vyp","content":"<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/style</div><div class=\"line\"></div><div class=\"line\">## 布局文件中添加menu</div><div class=\"line\"></div><div class=\"line\">```xml</div><div class=\"line\">menu_main.xml</div><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">menu</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">      <span class=\"attr\">xmlns:support</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">    &gt;</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/menu_setting\"</span></div><div class=\"line\">        <span class=\"attr\">android:icon</span>=<span class=\"string\">\"@mipmap/ic_action_settings\"</span></div><div class=\"line\">        <span class=\"attr\">android:title</span>=<span class=\"string\">\"@string/menu_setting\"</span></div><div class=\"line\">        <span class=\"attr\">support:showAsAction</span>=<span class=\"string\">\"never\"</span>/&gt;</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/menu_refresh\"</span></div><div class=\"line\">        <span class=\"attr\">android:icon</span>=<span class=\"string\">\"@mipmap/ic_action_refresh\"</span></div><div class=\"line\">        <span class=\"attr\">android:title</span>=<span class=\"string\">\"@string/menu_refresh\"</span></div><div class=\"line\">        <span class=\"attr\">support:showAsAction</span>=<span class=\"string\">\"always\"</span>/&gt;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">menu</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"Activity中添加menu\"><a href=\"#Activity中添加menu\" class=\"headerlink\" title=\"Activity中添加menu\"></a>Activity中添加menu</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/ids.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"menu_location\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"id\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</div><div class=\"line\">    getMenuInflater().inflate(R.menu.menu_main,menu);</div><div class=\"line\">    MenuItem location=menu.add(<span class=\"number\">0</span>,R.id.menu_location,<span class=\"number\">0</span>,<span class=\"string\">\"Location\"</span>);</div><div class=\"line\">    location.setIcon(R.mipmap.ic_action_location);</div><div class=\"line\">    MenuItemCompat.setShowAsAction(location,MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onOptionsItemSelected</span><span class=\"params\">(MenuItem item)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (item.getItemId())&#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.menu_setting:</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.menu_location:</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.menu_refresh:</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onOptionsItemSelected(item);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h2><h3 id=\"运行时更改菜单项\"><a href=\"#运行时更改菜单项\" class=\"headerlink\" title=\"运行时更改菜单项\"></a>运行时更改菜单项</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mButtonForbidRefresh.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">           <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</div><div class=\"line\">           <span class=\"meta\">@Override</span></div><div class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">               i++;</div><div class=\"line\">               <span class=\"keyword\">if</span>(i%<span class=\"number\">2</span>==<span class=\"number\">1</span>)</div><div class=\"line\">                   mButtonForbidRefresh.setActivated(<span class=\"keyword\">true</span>);</div><div class=\"line\">               <span class=\"keyword\">else</span></div><div class=\"line\">                   mButtonForbidRefresh.setActivated(<span class=\"keyword\">false</span>);</div><div class=\"line\">               invalidateOptionsMenu();</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onPrepareOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</div><div class=\"line\">        menu.clear();</div><div class=\"line\">        getMenuInflater().inflate(R.menu.menu_main, menu);</div><div class=\"line\">        MenuItem item=menu.findItem(R.id.menu_refresh);</div><div class=\"line\">        <span class=\"keyword\">if</span>(mButtonForbidRefresh.isActivated())&#123;</div><div class=\"line\">           item.setEnabled(<span class=\"keyword\">false</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        MenuItem location = menu.add(<span class=\"number\">0</span>, R.id.menu_location, Menu.CATEGORY_SECONDARY, <span class=\"string\">\"Location\"</span>);</div><div class=\"line\">        location.setIcon(R.mipmap.ic_action_location);</div><div class=\"line\">        MenuItemCompat.setShowAsAction(location, MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onPrepareOptionsMenu(menu);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p><code>menu.findItem(int id)</code><br></p>\n<p><code>menu.getItem(int index)</code></p>\n<h3 id=\"onPrepareOptionsMenu-Menu-menu-和onCreateOptionsMenu-Menu-menu-区别\"><a href=\"#onPrepareOptionsMenu-Menu-menu-和onCreateOptionsMenu-Menu-menu-区别\" class=\"headerlink\" title=\"onPrepareOptionsMenu(Menu menu)和onCreateOptionsMenu(Menu menu)区别\"></a>onPrepareOptionsMenu(Menu menu)和onCreateOptionsMenu(Menu menu)区别</h3><p><code>onCreateOptionsMenu(Menu menu)</code>只在最初的时候会调用每次点击menu都会<br>调用一次<code>onPrepareOptionsMenu(Menu menu)</code>.使用<code>invalidateOptionsMenu()</code><br>会直接调用onPrepareOptionsMenu(Menu menu);</p>\n<h3 id=\"多个Activity共用相同ActionBar\"><a href=\"#多个Activity共用相同ActionBar\" class=\"headerlink\" title=\"多个Activity共用相同ActionBar\"></a>多个Activity共用相同ActionBar</h3><p>如果应用包含多个 Activity，且其中某些 Activity 提供相同的选项菜单，则可考虑创建一个仅<br>实现<code>onCreateOptionsMenu()</code> 和 <code>onOptionsItemSelected()</code>方法的 Activity。然后，<br>为每个应共享相同选项菜单的 Activity 扩展此类。 通过这种方式，您可以管理一个用于<br>处理菜单操作的代码集，且每个子级类均会继承菜单行为。若要将菜单项添加到一个<br>子级 Activity，请重写该 Activity 中的 <code>onCreateOptionsMenu()</code>。<br>调用 <code>super.onCreateOptionsMenu(menu)</code>，以便创建原始菜单项，<br>然后使用 <code>menu.add()</code> 添加新菜单项。此外，您还可以替代各个菜单项的超类行为。</p>\n","excerpt":"","more":"<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/style</div><div class=\"line\"></div><div class=\"line\">## 布局文件中添加menu</div><div class=\"line\"></div><div class=\"line\">```xml</div><div class=\"line\">menu_main.xml</div><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">menu</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">      <span class=\"attr\">xmlns:support</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">    &gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/menu_setting\"</span></div><div class=\"line\">        <span class=\"attr\">android:icon</span>=<span class=\"string\">\"@mipmap/ic_action_settings\"</span></div><div class=\"line\">        <span class=\"attr\">android:title</span>=<span class=\"string\">\"@string/menu_setting\"</span></div><div class=\"line\">        <span class=\"attr\">support:showAsAction</span>=<span class=\"string\">\"never\"</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/menu_refresh\"</span></div><div class=\"line\">        <span class=\"attr\">android:icon</span>=<span class=\"string\">\"@mipmap/ic_action_refresh\"</span></div><div class=\"line\">        <span class=\"attr\">android:title</span>=<span class=\"string\">\"@string/menu_refresh\"</span></div><div class=\"line\">        <span class=\"attr\">support:showAsAction</span>=<span class=\"string\">\"always\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">menu</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"Activity中添加menu\"><a href=\"#Activity中添加menu\" class=\"headerlink\" title=\"Activity中添加menu\"></a>Activity中添加menu</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/ids.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"menu_location\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"id\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</div><div class=\"line\">    getMenuInflater().inflate(R.menu.menu_main,menu);</div><div class=\"line\">    MenuItem location=menu.add(<span class=\"number\">0</span>,R.id.menu_location,<span class=\"number\">0</span>,<span class=\"string\">\"Location\"</span>);</div><div class=\"line\">    location.setIcon(R.mipmap.ic_action_location);</div><div class=\"line\">    MenuItemCompat.setShowAsAction(location,MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onOptionsItemSelected</span><span class=\"params\">(MenuItem item)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (item.getItemId())&#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.menu_setting:</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.menu_location:</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.menu_refresh:</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onOptionsItemSelected(item);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h2><h3 id=\"运行时更改菜单项\"><a href=\"#运行时更改菜单项\" class=\"headerlink\" title=\"运行时更改菜单项\"></a>运行时更改菜单项</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mButtonForbidRefresh.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">           <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</div><div class=\"line\">           <span class=\"meta\">@Override</span></div><div class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">               i++;</div><div class=\"line\">               <span class=\"keyword\">if</span>(i%<span class=\"number\">2</span>==<span class=\"number\">1</span>)</div><div class=\"line\">                   mButtonForbidRefresh.setActivated(<span class=\"keyword\">true</span>);</div><div class=\"line\">               <span class=\"keyword\">else</span></div><div class=\"line\">                   mButtonForbidRefresh.setActivated(<span class=\"keyword\">false</span>);</div><div class=\"line\">               invalidateOptionsMenu();</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onPrepareOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</div><div class=\"line\">        menu.clear();</div><div class=\"line\">        getMenuInflater().inflate(R.menu.menu_main, menu);</div><div class=\"line\">        MenuItem item=menu.findItem(R.id.menu_refresh);</div><div class=\"line\">        <span class=\"keyword\">if</span>(mButtonForbidRefresh.isActivated())&#123;</div><div class=\"line\">           item.setEnabled(<span class=\"keyword\">false</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        MenuItem location = menu.add(<span class=\"number\">0</span>, R.id.menu_location, Menu.CATEGORY_SECONDARY, <span class=\"string\">\"Location\"</span>);</div><div class=\"line\">        location.setIcon(R.mipmap.ic_action_location);</div><div class=\"line\">        MenuItemCompat.setShowAsAction(location, MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onPrepareOptionsMenu(menu);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p><code>menu.findItem(int id)</code><br></p>\n<p><code>menu.getItem(int index)</code></p>\n<h3 id=\"onPrepareOptionsMenu-Menu-menu-和onCreateOptionsMenu-Menu-menu-区别\"><a href=\"#onPrepareOptionsMenu-Menu-menu-和onCreateOptionsMenu-Menu-menu-区别\" class=\"headerlink\" title=\"onPrepareOptionsMenu(Menu menu)和onCreateOptionsMenu(Menu menu)区别\"></a>onPrepareOptionsMenu(Menu menu)和onCreateOptionsMenu(Menu menu)区别</h3><p><code>onCreateOptionsMenu(Menu menu)</code>只在最初的时候会调用每次点击menu都会<br>调用一次<code>onPrepareOptionsMenu(Menu menu)</code>.使用<code>invalidateOptionsMenu()</code><br>会直接调用onPrepareOptionsMenu(Menu menu);</p>\n<h3 id=\"多个Activity共用相同ActionBar\"><a href=\"#多个Activity共用相同ActionBar\" class=\"headerlink\" title=\"多个Activity共用相同ActionBar\"></a>多个Activity共用相同ActionBar</h3><p>如果应用包含多个 Activity，且其中某些 Activity 提供相同的选项菜单，则可考虑创建一个仅<br>实现<code>onCreateOptionsMenu()</code> 和 <code>onOptionsItemSelected()</code>方法的 Activity。然后，<br>为每个应共享相同选项菜单的 Activity 扩展此类。 通过这种方式，您可以管理一个用于<br>处理菜单操作的代码集，且每个子级类均会继承菜单行为。若要将菜单项添加到一个<br>子级 Activity，请重写该 Activity 中的 <code>onCreateOptionsMenu()</code>。<br>调用 <code>super.onCreateOptionsMenu(menu)</code>，以便创建原始菜单项，<br>然后使用 <code>menu.add()</code> 添加新菜单项。此外，您还可以替代各个菜单项的超类行为。</p>\n"},{"author":"ivyxjc","date":"2016-03-18T16:00:00.000Z","title":"Fragment和Activity通信","keywords":null,"description":null,"_content":"\n## Fragment和Activity通信\n\n为了方便碎片和活动之间进行通信，FragmentManager 提供了一个类似于`findViewById()`的方法，专门用于从布局文件中获取碎片的实例，代码如下所示：\n\n```java\nRightFragment rightFragment = (RightFragment) getFragmentManager()\n.findFragmentById(R.id.right_fragment);\n```\n\n这样即可调用Fragment中的方法\n在Fragment中都可以用getActivity()方法来得到和当前Fragment相关联的Activity实例。\n\n```java\nMainActivity activity=(MainActivity)getActivity();\n```\n","source":"_posts/android/UI相关/Fragment/2016-03-19-Fragment-message-transportation.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-19\ntitle: Fragment和Activity通信\ncategory: Android\ntags: [android,android_UI,android_fragment]\nkeywords:\ndescription:\n---\n\n## Fragment和Activity通信\n\n为了方便碎片和活动之间进行通信，FragmentManager 提供了一个类似于`findViewById()`的方法，专门用于从布局文件中获取碎片的实例，代码如下所示：\n\n```java\nRightFragment rightFragment = (RightFragment) getFragmentManager()\n.findFragmentById(R.id.right_fragment);\n```\n\n这样即可调用Fragment中的方法\n在Fragment中都可以用getActivity()方法来得到和当前Fragment相关联的Activity实例。\n\n```java\nMainActivity activity=(MainActivity)getActivity();\n```\n","slug":"android/UI相关/Fragment/2016-03-19-Fragment-message-transportation","published":1,"updated":"2016-10-25T09:03:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjt0063u8jrgyg2ql8s","content":"<h2 id=\"Fragment和Activity通信\"><a href=\"#Fragment和Activity通信\" class=\"headerlink\" title=\"Fragment和Activity通信\"></a>Fragment和Activity通信</h2><p>为了方便碎片和活动之间进行通信，FragmentManager 提供了一个类似于<code>findViewById()</code>的方法，专门用于从布局文件中获取碎片的实例，代码如下所示：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">RightFragment rightFragment = (RightFragment) getFragmentManager()</div><div class=\"line\">.findFragmentById(R.id.right_fragment);</div></pre></td></tr></table></figure>\n<p>这样即可调用Fragment中的方法<br>在Fragment中都可以用getActivity()方法来得到和当前Fragment相关联的Activity实例。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainActivity activity=(MainActivity)getActivity();</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"Fragment和Activity通信\"><a href=\"#Fragment和Activity通信\" class=\"headerlink\" title=\"Fragment和Activity通信\"></a>Fragment和Activity通信</h2><p>为了方便碎片和活动之间进行通信，FragmentManager 提供了一个类似于<code>findViewById()</code>的方法，专门用于从布局文件中获取碎片的实例，代码如下所示：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">RightFragment rightFragment = (RightFragment) getFragmentManager()</div><div class=\"line\">.findFragmentById(R.id.right_fragment);</div></pre></td></tr></table></figure>\n<p>这样即可调用Fragment中的方法<br>在Fragment中都可以用getActivity()方法来得到和当前Fragment相关联的Activity实例。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainActivity activity=(MainActivity)getActivity();</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-09-23T16:00:00.000Z","title":"ActionBar PopuMenu","keywords":null,"description":"popupmenu可以非常方便得实现在指定view下弹出一个菜单,实现类似ActionBar中的效果.","_content":"\n## PopupMenu\npopupmenu可以非常方便得实现在指定view下弹出一个菜单,实现类似ActionBar中的效果.\n\n```java\npublic void showPopupMenu(View view){\n        final PopupAdapter adapter = (PopupAdapter) getListAdapter();\n        final String item = (String) view.getTag();\n\n        PopupMenu popup = new PopupMenu(getActivity(), view);\n\n        popup.getMenuInflater().inflate(R.menu.popup, popup.getMenu());\n\n        popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\n            @Override\n            public boolean onMenuItemClick(MenuItem menuItem) {\n                switch (menuItem.getItemId()){\n                    case R.id.menu_remove:\n                        adapter.remove(item);\n                        return true;\n                }\n                return false;\n            }\n        });\n        popup.show();\n    }\n```\n","source":"_posts/android/AndroidSamples/UI/2016-09-24-ActionBar-PopupMenu.md","raw":"---\nauthor: ivyxjc\ndate: 2016-09-24\ntitle: ActionBar PopuMenu\ncategory: Android\ntags: [android,android_UI,android_fragment]\nkeywords:\ndescription: popupmenu可以非常方便得实现在指定view下弹出一个菜单,实现类似ActionBar中的效果.\n---\n\n## PopupMenu\npopupmenu可以非常方便得实现在指定view下弹出一个菜单,实现类似ActionBar中的效果.\n\n```java\npublic void showPopupMenu(View view){\n        final PopupAdapter adapter = (PopupAdapter) getListAdapter();\n        final String item = (String) view.getTag();\n\n        PopupMenu popup = new PopupMenu(getActivity(), view);\n\n        popup.getMenuInflater().inflate(R.menu.popup, popup.getMenu());\n\n        popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\n            @Override\n            public boolean onMenuItemClick(MenuItem menuItem) {\n                switch (menuItem.getItemId()){\n                    case R.id.menu_remove:\n                        adapter.remove(item);\n                        return true;\n                }\n                return false;\n            }\n        });\n        popup.show();\n    }\n```\n","slug":"android/AndroidSamples/UI/2016-09-24-ActionBar-PopupMenu","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgju0067u8jrgmmn1c87","content":"<h2 id=\"PopupMenu\"><a href=\"#PopupMenu\" class=\"headerlink\" title=\"PopupMenu\"></a>PopupMenu</h2><p>popupmenu可以非常方便得实现在指定view下弹出一个菜单,实现类似ActionBar中的效果.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">showPopupMenu</span><span class=\"params\">(View view)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">final</span> PopupAdapter adapter = (PopupAdapter) getListAdapter();</div><div class=\"line\">        <span class=\"keyword\">final</span> String item = (String) view.getTag();</div><div class=\"line\"></div><div class=\"line\">        PopupMenu popup = <span class=\"keyword\">new</span> PopupMenu(getActivity(), view);</div><div class=\"line\"></div><div class=\"line\">        popup.getMenuInflater().inflate(R.menu.popup, popup.getMenu());</div><div class=\"line\"></div><div class=\"line\">        popup.setOnMenuItemClickListener(<span class=\"keyword\">new</span> PopupMenu.OnMenuItemClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onMenuItemClick</span><span class=\"params\">(MenuItem menuItem)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">switch</span> (menuItem.getItemId())&#123;</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.menu_remove:</div><div class=\"line\">                        adapter.remove(item);</div><div class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\">        popup.show();</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"PopupMenu\"><a href=\"#PopupMenu\" class=\"headerlink\" title=\"PopupMenu\"></a>PopupMenu</h2><p>popupmenu可以非常方便得实现在指定view下弹出一个菜单,实现类似ActionBar中的效果.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">showPopupMenu</span><span class=\"params\">(View view)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">final</span> PopupAdapter adapter = (PopupAdapter) getListAdapter();</div><div class=\"line\">        <span class=\"keyword\">final</span> String item = (String) view.getTag();</div><div class=\"line\"></div><div class=\"line\">        PopupMenu popup = <span class=\"keyword\">new</span> PopupMenu(getActivity(), view);</div><div class=\"line\"></div><div class=\"line\">        popup.getMenuInflater().inflate(R.menu.popup, popup.getMenu());</div><div class=\"line\"></div><div class=\"line\">        popup.setOnMenuItemClickListener(<span class=\"keyword\">new</span> PopupMenu.OnMenuItemClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onMenuItemClick</span><span class=\"params\">(MenuItem menuItem)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">switch</span> (menuItem.getItemId())&#123;</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.menu_remove:</div><div class=\"line\">                        adapter.remove(item);</div><div class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\">        popup.show();</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-02-21T16:00:00.000Z","title":"Layout_Gravity和Gravity","keywords":null,"description":"LayoutGravity和Gravity的区别","_content":"\n## Android Layout_Gravity和Gravity\n\n简单来说layout_gravity表示子控件在父容器的位置，gravity表示控件内容在控件内的位置。\n![如图所示][1]\n\n\n上面图片的xml代码\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              android:orientation=\"vertical\" >\n\n    <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"1\"\n            android:background=\"#e3e2ad\"\n            android:orientation=\"vertical\"\n            android:id=\"@+id/\">\n\n        <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:textSize=\"24sp\"\n                android:text=\"gravity=\" />\n        <!--如何设置为wrap_content 则gravity失效-->\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#bcf5b1\"\n                android:gravity=\"left\"\n                android:text=\"left\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#aacaff\"\n                android:gravity=\"center_horizontal\"\n                android:text=\"center_horizontal\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#bcf5b1\"\n                android:gravity=\"right\"\n                android:text=\"right\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#aacaff\"\n                android:gravity=\"center\"\n                android:text=\"center\" />\n\n    </LinearLayout>\n    <!--match_parent改为wrap_content则下面的layout_gravity失效-->\n    <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"1\"\n            android:background=\"#d6c6cd\"\n            android:orientation=\"vertical\" >\n\n        <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:textSize=\"24sp\"\n                android:text=\"layout_gravity=\" />\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"left\"\n                android:background=\"#bcf5b1\"\n                android:text=\"left\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"center_horizontal\"\n                android:background=\"#aacaff\"\n                android:text=\"center_horizontal\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"right\"\n                android:background=\"#bcf5b1\"\n                android:text=\"right\"\n                android:id=\"@+id/\"/>\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"center\"\n                android:background=\"#aacaff\"\n                android:text=\"center\" />\n\n    </LinearLayout>\n\n</LinearLayout>\n```\n\n参考\n1.[Gravity and layout_gravity on Android][2]\n\n\n  [1]: http://i.stack.imgur.com/xKdfI.png\n  [2]: http://stackoverflow.com/questions/3482742/gravity-and-layout-gravity-on-android\n","source":"_posts/android/UI相关/布局/2016-02-22-Layout-Gravity和Gravity.md","raw":"---\nauthor: ivyxjc\ndate: 2016-02-22\ntitle: Layout_Gravity和Gravity\ncategory: Android\ntags: [android,android_UI]\nkeywords:\ndescription: LayoutGravity和Gravity的区别\n---\n\n## Android Layout_Gravity和Gravity\n\n简单来说layout_gravity表示子控件在父容器的位置，gravity表示控件内容在控件内的位置。\n![如图所示][1]\n\n\n上面图片的xml代码\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              android:orientation=\"vertical\" >\n\n    <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"1\"\n            android:background=\"#e3e2ad\"\n            android:orientation=\"vertical\"\n            android:id=\"@+id/\">\n\n        <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:textSize=\"24sp\"\n                android:text=\"gravity=\" />\n        <!--如何设置为wrap_content 则gravity失效-->\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#bcf5b1\"\n                android:gravity=\"left\"\n                android:text=\"left\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#aacaff\"\n                android:gravity=\"center_horizontal\"\n                android:text=\"center_horizontal\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#bcf5b1\"\n                android:gravity=\"right\"\n                android:text=\"right\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:background=\"#aacaff\"\n                android:gravity=\"center\"\n                android:text=\"center\" />\n\n    </LinearLayout>\n    <!--match_parent改为wrap_content则下面的layout_gravity失效-->\n    <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"1\"\n            android:background=\"#d6c6cd\"\n            android:orientation=\"vertical\" >\n\n        <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:textSize=\"24sp\"\n                android:text=\"layout_gravity=\" />\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"left\"\n                android:background=\"#bcf5b1\"\n                android:text=\"left\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"center_horizontal\"\n                android:background=\"#aacaff\"\n                android:text=\"center_horizontal\" />\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"right\"\n                android:background=\"#bcf5b1\"\n                android:text=\"right\"\n                android:id=\"@+id/\"/>\n\n        <TextView\n                android:layout_width=\"200dp\"\n                android:layout_height=\"40dp\"\n                android:layout_gravity=\"center\"\n                android:background=\"#aacaff\"\n                android:text=\"center\" />\n\n    </LinearLayout>\n\n</LinearLayout>\n```\n\n参考\n1.[Gravity and layout_gravity on Android][2]\n\n\n  [1]: http://i.stack.imgur.com/xKdfI.png\n  [2]: http://stackoverflow.com/questions/3482742/gravity-and-layout-gravity-on-android\n","slug":"android/UI相关/布局/2016-02-22-Layout-Gravity和Gravity","published":1,"updated":"2016-10-26T11:26:51.798Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjw006au8jrx88hb1n7","content":"<h2 id=\"Android-Layout-Gravity和Gravity\"><a href=\"#Android-Layout-Gravity和Gravity\" class=\"headerlink\" title=\"Android Layout_Gravity和Gravity\"></a>Android Layout_Gravity和Gravity</h2><p>简单来说layout_gravity表示子控件在父容器的位置，gravity表示控件内容在控件内的位置。<br><img src=\"http://i.stack.imgur.com/xKdfI.png\" alt=\"如图所示\"></p>\n<p>上面图片的xml代码</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">              <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span> &gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"#e3e2ad\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"24sp\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"gravity=\"</span> /&gt;</div><div class=\"line\">        <span class=\"comment\">&lt;!--如何设置为wrap_content 则gravity失效--&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"left\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"left\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center_horizontal\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"right\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"right\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!--match_parent改为wrap_content则下面的layout_gravity失效--&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"#d6c6cd\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span> &gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"24sp\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"layout_gravity=\"</span> /&gt;</div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"left\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"left\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center_horizontal\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"right\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"right\"</span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/\"</span>/&gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>参考<br>1.<a href=\"http://stackoverflow.com/questions/3482742/gravity-and-layout-gravity-on-android\" target=\"_blank\" rel=\"external\">Gravity and layout_gravity on Android</a></p>\n","excerpt":"","more":"<h2 id=\"Android-Layout-Gravity和Gravity\"><a href=\"#Android-Layout-Gravity和Gravity\" class=\"headerlink\" title=\"Android Layout_Gravity和Gravity\"></a>Android Layout_Gravity和Gravity</h2><p>简单来说layout_gravity表示子控件在父容器的位置，gravity表示控件内容在控件内的位置。<br><img src=\"http://i.stack.imgur.com/xKdfI.png\" alt=\"如图所示\"></p>\n<p>上面图片的xml代码</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">              <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span> &gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"#e3e2ad\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"24sp\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"gravity=\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!--如何设置为wrap_content 则gravity失效--&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"left\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"left\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center_horizontal\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"right\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"right\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!--match_parent改为wrap_content则下面的layout_gravity失效--&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"#d6c6cd\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span> &gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"24sp\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"layout_gravity=\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"left\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"left\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center_horizontal\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center_horizontal\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"right\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#bcf5b1\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"right\"</span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/\"</span>/&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"200dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"40dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">                <span class=\"attr\">android:background</span>=<span class=\"string\">\"#aacaff\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"center\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>参考<br>1.<a href=\"http://stackoverflow.com/questions/3482742/gravity-and-layout-gravity-on-android\">Gravity and layout_gravity on Android</a></p>\n"},{"author":"ivyxjc","date":"2016-09-23T16:00:00.000Z","title":"自定义FloatingActionButtom","keywords":null,"description":"如何自定义fab, 以及给其设置监听","_content":"\n\n## 设置监听的最基本方式\n\n```java\npublic class FloatingActionButton extends FrameLayout implements Checkable {\n\n    public static interface OnCheckedChangeListener {\n        void onCheckedChanged(FloatingActionButton fabView, boolean isChecked);\n    }\n\n    private OnCheckedChangeListener mOnCheckedChangeListener;\n\n    public void setOnCheckedChangeListener(OnCheckedChangeListener listener) {\n        mOnCheckedChangeListener = listener;\n    }\n```\n","source":"_posts/android/AndroidSamples/controls/2016-10-18-custom-button.md","raw":"---\nauthor: ivyxjc\ndate: 2016-09-24\ntitle: 自定义FloatingActionButtom\ncategory: Android\ntags: [android,android_control]\nkeywords:\ndescription: 如何自定义fab, 以及给其设置监听\n---\n\n\n## 设置监听的最基本方式\n\n```java\npublic class FloatingActionButton extends FrameLayout implements Checkable {\n\n    public static interface OnCheckedChangeListener {\n        void onCheckedChanged(FloatingActionButton fabView, boolean isChecked);\n    }\n\n    private OnCheckedChangeListener mOnCheckedChangeListener;\n\n    public void setOnCheckedChangeListener(OnCheckedChangeListener listener) {\n        mOnCheckedChangeListener = listener;\n    }\n```\n","slug":"android/AndroidSamples/controls/2016-10-18-custom-button","published":1,"updated":"2016-10-26T11:26:51.778Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjy006eu8jrmct1l6q7","content":"<h2 id=\"设置监听的最基本方式\"><a href=\"#设置监听的最基本方式\" class=\"headerlink\" title=\"设置监听的最基本方式\"></a>设置监听的最基本方式</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FloatingActionButton</span> <span class=\"keyword\">extends</span> <span class=\"title\">FrameLayout</span> <span class=\"keyword\">implements</span> <span class=\"title\">Checkable</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnCheckedChangeListener</span> </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onCheckedChanged</span><span class=\"params\">(FloatingActionButton fabView, <span class=\"keyword\">boolean</span> isChecked)</span></span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> OnCheckedChangeListener mOnCheckedChangeListener;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOnCheckedChangeListener</span><span class=\"params\">(OnCheckedChangeListener listener)</span> </span>&#123;</div><div class=\"line\">        mOnCheckedChangeListener = listener;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"设置监听的最基本方式\"><a href=\"#设置监听的最基本方式\" class=\"headerlink\" title=\"设置监听的最基本方式\"></a>设置监听的最基本方式</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FloatingActionButton</span> <span class=\"keyword\">extends</span> <span class=\"title\">FrameLayout</span> <span class=\"keyword\">implements</span> <span class=\"title\">Checkable</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnCheckedChangeListener</span> </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onCheckedChanged</span><span class=\"params\">(FloatingActionButton fabView, <span class=\"keyword\">boolean</span> isChecked)</span></span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> OnCheckedChangeListener mOnCheckedChangeListener;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOnCheckedChangeListener</span><span class=\"params\">(OnCheckedChangeListener listener)</span> </span>&#123;</div><div class=\"line\">        mOnCheckedChangeListener = listener;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-09-23T16:00:00.000Z","title":"自定义FloatingActionButtom","keywords":null,"description":"如何自定义fab, 以及给其设置监听","_content":"","source":"_posts/android/AndroidSamples/controls/2016-11-10-schedule.md","raw":"---\nauthor: ivyxjc\ndate: 2016-09-24\ntitle: 自定义FloatingActionButtom\ncategory: Android\ntags: [android,android_control]\nkeywords:\ndescription: 如何自定义fab, 以及给其设置监听\n---\n","slug":"android/AndroidSamples/controls/2016-11-10-schedule","published":1,"updated":"2016-11-10T13:10:09.918Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgjz006hu8jreny11atn","content":"","excerpt":"","more":""},{"author":"ivyxjc","date":"2016-10-15T16:00:00.000Z","title":"ActionBar ShareActionProvider","keywords":null,"description":"ShareActionProvider 可以非常方便地提供分享功能.","toc":true,"_content":"\n\n## 添加share按钮\n\n添加share按钮的主要步骤:\n1. 在ActionBar中添加share按钮\n2. 从item中获取ShareActionProvider\n```java\nShareActionProvider`<br> `mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);\n```\n3. 向`ShareActionProvider`中添加`itent`\n\n\n```xml\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:support=\"http://schemas.android.com/apk/res-auto\">\n\n    <item\n        android:id=\"@+id/share_item\"\n        android:title=\"@string/menu_share\"\n\n        support:actionProviderClass=\"android.support.v7.widget.ShareActionProvider\"\n        support:showAsAction=\"always\"\n        />\n</menu>\n```\n\n```java\n/MainActivity.java\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.main_menu,menu);\n\n    MenuItem shareItem=menu.findItem(R.id.share_item);\n\n    mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);\n\n    int currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();\n    setShareItem(currentViewPagerItem);\n    return super.onCreateOptionsMenu(menu);\n}\n\n\npublic void setShareItem(int i){\n    if(mShareActionProvider!=null){\n        ContentItem item=mItems.get(i);\n\n        Intent intent=item.getShareIntent(this);\n\n        mShareActionProvider.setShareIntent(intent);\n    }\n  }\n\n```\n\n\n```java\npublic Intent getShareIntent(Context context){\n    Intent intent=new Intent(Intent.ACTION_SEND);\n\n    switch (contentType) {\n        case CONTENT_TYPE_IMAGE:\n            intent.setType(\"image/jpg\");\n            intent.putExtra(Intent.EXTRA_STREAM, getContentUri());\n\n            break;\n\n        case CONTENT_TYPE_TEXT:\n            intent.setType(\"text/plain\");\n            intent.putExtra(Intent.EXTRA_TEXT, context.getString(contentResourceId));\n            break;\n    }\n\n    return intent;\n}\n```\n\n```java\n\\ContentItem\npublic Uri getContentUri(){\n    if(!TextUtils.isEmpty(contentAssetFilePath)){\n        return Uri.parse(ShareProvider.CONTENT_URI+contentAssetFilePath);\n    }else{\n        return null;\n    }\n}\n```\n\n## 注意点\n\n### 确保ShareActionProvider和所在的ViewPager的`CurrentItem()`对应\n\n很容易被`onCreateOptionsMenu()`中下列代码迷惑, 以为ShareActionProvider已经和`CurrentItem()`对应了.\n\n```java\nint currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();\nsetShareItem(currentViewPagerItem);\n```\n\n事实上并没有, `onCreateOptionsMenu`方法只会在初始ActionBar时调用, 且也不会设置监听. 所以ShareActionProvider总是设置在了第一个item的intent中.\n\n所以需要添加以下代码, 确保切换页面后, ShareActionProvider和item仍是正确对应的.\n\n```java\nmViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n      @Override\n      public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n      }\n      @Override\n      public void onPageSelected(int position) {\n          setShareItem(position);\n      }\n      @Override\n      public void onPageScrollStateChanged(int state) {\n      }\n    });\n```\n\n\n### 如何获取图片uri\n\n\n获取`/res/drawable`中图片的uri可以使用以下方法:\n\n```java\nUri imageUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE +\n \"://\" + getResources().getResourcePackageName(R.drawable.ic_launcher)\n + '/' + getResources().getResourceTypeName(R.drawable.ic_launcher) + '/'\n +  getResources().getResourceEntryName(R.drawable.ic_launcher) );\n ```\n\n 等价于\n\n ```\nUri uri = Uri.parse(\"android.resource://your.package.here/drawable/image_name\");\n ```\n\n如果不正确,可以调用第一个方法,再使用Log自行查看准确的字符串.\n","source":"_posts/android/AndroidSamples/UI/2016-10-16-ActionBar-ShareActionProvider.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-16\ntitle: ActionBar ShareActionProvider\ncategory: Android\ntags: [android,android_UI,android_fragment]\nkeywords:\ndescription: ShareActionProvider 可以非常方便地提供分享功能.\ntoc: true\n---\n\n\n## 添加share按钮\n\n添加share按钮的主要步骤:\n1. 在ActionBar中添加share按钮\n2. 从item中获取ShareActionProvider\n```java\nShareActionProvider`<br> `mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);\n```\n3. 向`ShareActionProvider`中添加`itent`\n\n\n```xml\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:support=\"http://schemas.android.com/apk/res-auto\">\n\n    <item\n        android:id=\"@+id/share_item\"\n        android:title=\"@string/menu_share\"\n\n        support:actionProviderClass=\"android.support.v7.widget.ShareActionProvider\"\n        support:showAsAction=\"always\"\n        />\n</menu>\n```\n\n```java\n/MainActivity.java\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.main_menu,menu);\n\n    MenuItem shareItem=menu.findItem(R.id.share_item);\n\n    mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);\n\n    int currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();\n    setShareItem(currentViewPagerItem);\n    return super.onCreateOptionsMenu(menu);\n}\n\n\npublic void setShareItem(int i){\n    if(mShareActionProvider!=null){\n        ContentItem item=mItems.get(i);\n\n        Intent intent=item.getShareIntent(this);\n\n        mShareActionProvider.setShareIntent(intent);\n    }\n  }\n\n```\n\n\n```java\npublic Intent getShareIntent(Context context){\n    Intent intent=new Intent(Intent.ACTION_SEND);\n\n    switch (contentType) {\n        case CONTENT_TYPE_IMAGE:\n            intent.setType(\"image/jpg\");\n            intent.putExtra(Intent.EXTRA_STREAM, getContentUri());\n\n            break;\n\n        case CONTENT_TYPE_TEXT:\n            intent.setType(\"text/plain\");\n            intent.putExtra(Intent.EXTRA_TEXT, context.getString(contentResourceId));\n            break;\n    }\n\n    return intent;\n}\n```\n\n```java\n\\ContentItem\npublic Uri getContentUri(){\n    if(!TextUtils.isEmpty(contentAssetFilePath)){\n        return Uri.parse(ShareProvider.CONTENT_URI+contentAssetFilePath);\n    }else{\n        return null;\n    }\n}\n```\n\n## 注意点\n\n### 确保ShareActionProvider和所在的ViewPager的`CurrentItem()`对应\n\n很容易被`onCreateOptionsMenu()`中下列代码迷惑, 以为ShareActionProvider已经和`CurrentItem()`对应了.\n\n```java\nint currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();\nsetShareItem(currentViewPagerItem);\n```\n\n事实上并没有, `onCreateOptionsMenu`方法只会在初始ActionBar时调用, 且也不会设置监听. 所以ShareActionProvider总是设置在了第一个item的intent中.\n\n所以需要添加以下代码, 确保切换页面后, ShareActionProvider和item仍是正确对应的.\n\n```java\nmViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n      @Override\n      public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n      }\n      @Override\n      public void onPageSelected(int position) {\n          setShareItem(position);\n      }\n      @Override\n      public void onPageScrollStateChanged(int state) {\n      }\n    });\n```\n\n\n### 如何获取图片uri\n\n\n获取`/res/drawable`中图片的uri可以使用以下方法:\n\n```java\nUri imageUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE +\n \"://\" + getResources().getResourcePackageName(R.drawable.ic_launcher)\n + '/' + getResources().getResourceTypeName(R.drawable.ic_launcher) + '/'\n +  getResources().getResourceEntryName(R.drawable.ic_launcher) );\n ```\n\n 等价于\n\n ```\nUri uri = Uri.parse(\"android.resource://your.package.here/drawable/image_name\");\n ```\n\n如果不正确,可以调用第一个方法,再使用Log自行查看准确的字符串.\n","slug":"android/AndroidSamples/UI/2016-10-16-ActionBar-ShareActionProvider","published":1,"updated":"2016-10-25T09:03:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgk1006lu8jr4u9wgbry","content":"<h2 id=\"添加share按钮\"><a href=\"#添加share按钮\" class=\"headerlink\" title=\"添加share按钮\"></a>添加share按钮</h2><p>添加share按钮的主要步骤:</p>\n<ol>\n<li>在ActionBar中添加share按钮</li>\n<li><p>从item中获取ShareActionProvider</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ShareActionProvider`&lt;br&gt; `mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);</div></pre></td></tr></table></figure>\n</li>\n<li><p>向<code>ShareActionProvider</code>中添加<code>itent</code></p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">menu</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">    <span class=\"attr\">xmlns:support</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/share_item\"</span></div><div class=\"line\">        <span class=\"attr\">android:title</span>=<span class=\"string\">\"@string/menu_share\"</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"attr\">support:actionProviderClass</span>=<span class=\"string\">\"android.support.v7.widget.ShareActionProvider\"</span></div><div class=\"line\">        <span class=\"attr\">support:showAsAction</span>=<span class=\"string\">\"always\"</span></div><div class=\"line\">        /&gt;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">menu</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">/MainActivity.java</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</div><div class=\"line\">    getMenuInflater().inflate(R.menu.main_menu,menu);</div><div class=\"line\"></div><div class=\"line\">    MenuItem shareItem=menu.findItem(R.id.share_item);</div><div class=\"line\"></div><div class=\"line\">    mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">int</span> currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();</div><div class=\"line\">    setShareItem(currentViewPagerItem);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onCreateOptionsMenu(menu);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setShareItem</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mShareActionProvider!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">        ContentItem item=mItems.get(i);</div><div class=\"line\"></div><div class=\"line\">        Intent intent=item.getShareIntent(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\">        mShareActionProvider.setShareIntent(intent);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Intent <span class=\"title\">getShareIntent</span><span class=\"params\">(Context context)</span></span>&#123;</div><div class=\"line\">    Intent intent=<span class=\"keyword\">new</span> Intent(Intent.ACTION_SEND);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">switch</span> (contentType) &#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> CONTENT_TYPE_IMAGE:</div><div class=\"line\">            intent.setType(<span class=\"string\">\"image/jpg\"</span>);</div><div class=\"line\">            intent.putExtra(Intent.EXTRA_STREAM, getContentUri());</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">case</span> CONTENT_TYPE_TEXT:</div><div class=\"line\">            intent.setType(<span class=\"string\">\"text/plain\"</span>);</div><div class=\"line\">            intent.putExtra(Intent.EXTRA_TEXT, context.getString(contentResourceId));</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> intent;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">\\<span class=\"function\">ContentItem</span></div><div class=\"line\"><span class=\"keyword\">public</span> Uri <span class=\"title\">getContentUri</span><span class=\"params\">()</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(!TextUtils.isEmpty(contentAssetFilePath))&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> Uri.parse(ShareProvider.CONTENT_URI+contentAssetFilePath);</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h2><h3 id=\"确保ShareActionProvider和所在的ViewPager的CurrentItem-对应\"><a href=\"#确保ShareActionProvider和所在的ViewPager的CurrentItem-对应\" class=\"headerlink\" title=\"确保ShareActionProvider和所在的ViewPager的CurrentItem()对应\"></a>确保ShareActionProvider和所在的ViewPager的<code>CurrentItem()</code>对应</h3><p>很容易被<code>onCreateOptionsMenu()</code>中下列代码迷惑, 以为ShareActionProvider已经和<code>CurrentItem()</code>对应了.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">int</span> currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();</div><div class=\"line\">setShareItem(currentViewPagerItem);</div></pre></td></tr></table></figure>\n<p>事实上并没有, <code>onCreateOptionsMenu</code>方法只会在初始ActionBar时调用, 且也不会设置监听. 所以ShareActionProvider总是设置在了第一个item的intent中.</p>\n<p>所以需要添加以下代码, 确保切换页面后, ShareActionProvider和item仍是正确对应的.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mViewPager.setOnPageChangeListener(<span class=\"keyword\">new</span> ViewPager.OnPageChangeListener() &#123;</div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageScrolled</span><span class=\"params\">(<span class=\"keyword\">int</span> position, <span class=\"keyword\">float</span> positionOffset, <span class=\"keyword\">int</span> positionOffsetPixels)</span> </span>&#123;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageSelected</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</div><div class=\"line\">          setShareItem(position);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageScrollStateChanged</span><span class=\"params\">(<span class=\"keyword\">int</span> state)</span> </span>&#123;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"如何获取图片uri\"><a href=\"#如何获取图片uri\" class=\"headerlink\" title=\"如何获取图片uri\"></a>如何获取图片uri</h3><p>获取<code>/res/drawable</code>中图片的uri可以使用以下方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Uri imageUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE +</div><div class=\"line\"> <span class=\"string\">\"://\"</span> + getResources().getResourcePackageName(R.drawable.ic_launcher)</div><div class=\"line\"> + <span class=\"string\">'/'</span> + getResources().getResourceTypeName(R.drawable.ic_launcher) + <span class=\"string\">'/'</span></div><div class=\"line\"> +  getResources().getResourceEntryName(R.drawable.ic_launcher) );</div></pre></td></tr></table></figure>\n<p> 等价于</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Uri uri = Uri.parse(&quot;android.resource://your.package.here/drawable/image_name&quot;);</div></pre></td></tr></table></figure>\n<p>如果不正确,可以调用第一个方法,再使用Log自行查看准确的字符串.</p>\n","excerpt":"","more":"<h2 id=\"添加share按钮\"><a href=\"#添加share按钮\" class=\"headerlink\" title=\"添加share按钮\"></a>添加share按钮</h2><p>添加share按钮的主要步骤:</p>\n<ol>\n<li>在ActionBar中添加share按钮</li>\n<li><p>从item中获取ShareActionProvider</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ShareActionProvider`&lt;br&gt; `mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);</div></pre></td></tr></table></figure>\n</li>\n<li><p>向<code>ShareActionProvider</code>中添加<code>itent</code></p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">menu</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">xmlns:support</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/share_item\"</span></div><div class=\"line\">        <span class=\"attr\">android:title</span>=<span class=\"string\">\"@string/menu_share\"</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"attr\">support:actionProviderClass</span>=<span class=\"string\">\"android.support.v7.widget.ShareActionProvider\"</span></div><div class=\"line\">        <span class=\"attr\">support:showAsAction</span>=<span class=\"string\">\"always\"</span></div><div class=\"line\">        /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">menu</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">/MainActivity.java</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</div><div class=\"line\">    getMenuInflater().inflate(R.menu.main_menu,menu);</div><div class=\"line\"></div><div class=\"line\">    MenuItem shareItem=menu.findItem(R.id.share_item);</div><div class=\"line\"></div><div class=\"line\">    mShareActionProvider=(ShareActionProvider) MenuItemCompat.getActionProvider(shareItem);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">int</span> currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();</div><div class=\"line\">    setShareItem(currentViewPagerItem);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onCreateOptionsMenu(menu);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setShareItem</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mShareActionProvider!=<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">        ContentItem item=mItems.get(i);</div><div class=\"line\"></div><div class=\"line\">        Intent intent=item.getShareIntent(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\">        mShareActionProvider.setShareIntent(intent);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Intent <span class=\"title\">getShareIntent</span><span class=\"params\">(Context context)</span></span>&#123;</div><div class=\"line\">    Intent intent=<span class=\"keyword\">new</span> Intent(Intent.ACTION_SEND);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">switch</span> (contentType) &#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> CONTENT_TYPE_IMAGE:</div><div class=\"line\">            intent.setType(<span class=\"string\">\"image/jpg\"</span>);</div><div class=\"line\">            intent.putExtra(Intent.EXTRA_STREAM, getContentUri());</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">case</span> CONTENT_TYPE_TEXT:</div><div class=\"line\">            intent.setType(<span class=\"string\">\"text/plain\"</span>);</div><div class=\"line\">            intent.putExtra(Intent.EXTRA_TEXT, context.getString(contentResourceId));</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> intent;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">\\<span class=\"function\">ContentItem</div><div class=\"line\"><span class=\"keyword\">public</span> Uri <span class=\"title\">getContentUri</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(!TextUtils.isEmpty(contentAssetFilePath))&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> Uri.parse(ShareProvider.CONTENT_URI+contentAssetFilePath);</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h2><h3 id=\"确保ShareActionProvider和所在的ViewPager的CurrentItem-对应\"><a href=\"#确保ShareActionProvider和所在的ViewPager的CurrentItem-对应\" class=\"headerlink\" title=\"确保ShareActionProvider和所在的ViewPager的CurrentItem()对应\"></a>确保ShareActionProvider和所在的ViewPager的<code>CurrentItem()</code>对应</h3><p>很容易被<code>onCreateOptionsMenu()</code>中下列代码迷惑, 以为ShareActionProvider已经和<code>CurrentItem()</code>对应了.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">int</span> currentViewPagerItem=((ViewPager)findViewById(R.id.viewPager)).getCurrentItem();</div><div class=\"line\">setShareItem(currentViewPagerItem);</div></pre></td></tr></table></figure>\n<p>事实上并没有, <code>onCreateOptionsMenu</code>方法只会在初始ActionBar时调用, 且也不会设置监听. 所以ShareActionProvider总是设置在了第一个item的intent中.</p>\n<p>所以需要添加以下代码, 确保切换页面后, ShareActionProvider和item仍是正确对应的.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mViewPager.setOnPageChangeListener(<span class=\"keyword\">new</span> ViewPager.OnPageChangeListener() &#123;</div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageScrolled</span><span class=\"params\">(<span class=\"keyword\">int</span> position, <span class=\"keyword\">float</span> positionOffset, <span class=\"keyword\">int</span> positionOffsetPixels)</span> </span>&#123;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageSelected</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</div><div class=\"line\">          setShareItem(position);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageScrollStateChanged</span><span class=\"params\">(<span class=\"keyword\">int</span> state)</span> </span>&#123;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"如何获取图片uri\"><a href=\"#如何获取图片uri\" class=\"headerlink\" title=\"如何获取图片uri\"></a>如何获取图片uri</h3><p>获取<code>/res/drawable</code>中图片的uri可以使用以下方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Uri imageUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE +</div><div class=\"line\"> <span class=\"string\">\"://\"</span> + getResources().getResourcePackageName(R.drawable.ic_launcher)</div><div class=\"line\"> + <span class=\"string\">'/'</span> + getResources().getResourceTypeName(R.drawable.ic_launcher) + <span class=\"string\">'/'</span></div><div class=\"line\"> +  getResources().getResourceEntryName(R.drawable.ic_launcher) );</div></pre></td></tr></table></figure>\n<p> 等价于</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Uri uri = Uri.parse(&quot;android.resource://your.package.here/drawable/image_name&quot;);</div></pre></td></tr></table></figure>\n<p>如果不正确,可以调用第一个方法,再使用Log自行查看准确的字符串.</p>\n"},{"author":"ivyxjc","date":"2016-03-24T16:00:00.000Z","title":"AlertDialog","keywords":null,"description":null,"_content":"\n\n## 在Activity中调用AlertDialog\n\n只能在`Activity`中调用`AlertDialog`，所以要想在`Receiver`中使用`AlerDialog`，可以在`Receiver`中用`starActivity()`启动有`AlertDialog`的`Activity`。\n\n\n```java\n@Override\npublic void onReceive(final Context context, Intent intent) {\n    Intent i=new Intent(context,AlertDialogActivity.class);\n    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);;\n    context.startActivity(i);\n}\n```\n\n```java\npublic class AlertDialogActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(this);\n        dialogBuilder.setTitle(\"Warning\");\n\n        dialogBuilder.setMessage(\"you are force to be offline\");\n        dialogBuilder.setCancelable(false);\n        dialogBuilder.setPositiveButton(\"OK\",\n                new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        ActivityCollector.finishAll();\n                        Intent intent = new Intent(AlertDialogActivity.this,LoginActivity.class);\n                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                        startActivity(intent);//重新启动LoginActivity\n\n                    }\n                });\n        AlertDialog alertDialog=dialogBuilder.create();\n\n        alertDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);\n        alertDialog.show();\n    }\n}\n```\n","source":"_posts/android/控件/AlertDialog/2016-03-25-Alert-Dialog.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-25\ntitle: AlertDialog\ncategory: Android\ntags: [android,android_control]\nkeywords:\ndescription:\n---\n\n\n## 在Activity中调用AlertDialog\n\n只能在`Activity`中调用`AlertDialog`，所以要想在`Receiver`中使用`AlerDialog`，可以在`Receiver`中用`starActivity()`启动有`AlertDialog`的`Activity`。\n\n\n```java\n@Override\npublic void onReceive(final Context context, Intent intent) {\n    Intent i=new Intent(context,AlertDialogActivity.class);\n    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);;\n    context.startActivity(i);\n}\n```\n\n```java\npublic class AlertDialogActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(this);\n        dialogBuilder.setTitle(\"Warning\");\n\n        dialogBuilder.setMessage(\"you are force to be offline\");\n        dialogBuilder.setCancelable(false);\n        dialogBuilder.setPositiveButton(\"OK\",\n                new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        ActivityCollector.finishAll();\n                        Intent intent = new Intent(AlertDialogActivity.this,LoginActivity.class);\n                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                        startActivity(intent);//重新启动LoginActivity\n\n                    }\n                });\n        AlertDialog alertDialog=dialogBuilder.create();\n\n        alertDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);\n        alertDialog.show();\n    }\n}\n```\n","slug":"android/控件/AlertDialog/2016-03-25-Alert-Dialog","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgk4006ou8jr9u4rmpeg","content":"<h2 id=\"在Activity中调用AlertDialog\"><a href=\"#在Activity中调用AlertDialog\" class=\"headerlink\" title=\"在Activity中调用AlertDialog\"></a>在Activity中调用AlertDialog</h2><p>只能在<code>Activity</code>中调用<code>AlertDialog</code>，所以要想在<code>Receiver</code>中使用<code>AlerDialog</code>，可以在<code>Receiver</code>中用<code>starActivity()</code>启动有<code>AlertDialog</code>的<code>Activity</code>。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(<span class=\"keyword\">final</span> Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">    Intent i=<span class=\"keyword\">new</span> Intent(context,AlertDialogActivity.class);</div><div class=\"line\">    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);;</div><div class=\"line\">    context.startActivity(i);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AlertDialogActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\"></div><div class=\"line\">        AlertDialog.Builder dialogBuilder=<span class=\"keyword\">new</span> AlertDialog.Builder(<span class=\"keyword\">this</span>);</div><div class=\"line\">        dialogBuilder.setTitle(<span class=\"string\">\"Warning\"</span>);</div><div class=\"line\"></div><div class=\"line\">        dialogBuilder.setMessage(<span class=\"string\">\"you are force to be offline\"</span>);</div><div class=\"line\">        dialogBuilder.setCancelable(<span class=\"keyword\">false</span>);</div><div class=\"line\">        dialogBuilder.setPositiveButton(<span class=\"string\">\"OK\"</span>,</div><div class=\"line\">                <span class=\"keyword\">new</span> DialogInterface.OnClickListener() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(DialogInterface dialog, <span class=\"keyword\">int</span> which)</span> </span>&#123;</div><div class=\"line\">                        ActivityCollector.finishAll();</div><div class=\"line\">                        Intent intent = <span class=\"keyword\">new</span> Intent(AlertDialogActivity.<span class=\"keyword\">this</span>,LoginActivity.class);</div><div class=\"line\">                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</div><div class=\"line\">                        startActivity(intent);<span class=\"comment\">//重新启动LoginActivity</span></div><div class=\"line\"></div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\">        AlertDialog alertDialog=dialogBuilder.create();</div><div class=\"line\"></div><div class=\"line\">        alertDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);</div><div class=\"line\">        alertDialog.show();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"在Activity中调用AlertDialog\"><a href=\"#在Activity中调用AlertDialog\" class=\"headerlink\" title=\"在Activity中调用AlertDialog\"></a>在Activity中调用AlertDialog</h2><p>只能在<code>Activity</code>中调用<code>AlertDialog</code>，所以要想在<code>Receiver</code>中使用<code>AlerDialog</code>，可以在<code>Receiver</code>中用<code>starActivity()</code>启动有<code>AlertDialog</code>的<code>Activity</code>。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(<span class=\"keyword\">final</span> Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">    Intent i=<span class=\"keyword\">new</span> Intent(context,AlertDialogActivity.class);</div><div class=\"line\">    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);;</div><div class=\"line\">    context.startActivity(i);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AlertDialogActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\"></div><div class=\"line\">        AlertDialog.Builder dialogBuilder=<span class=\"keyword\">new</span> AlertDialog.Builder(<span class=\"keyword\">this</span>);</div><div class=\"line\">        dialogBuilder.setTitle(<span class=\"string\">\"Warning\"</span>);</div><div class=\"line\"></div><div class=\"line\">        dialogBuilder.setMessage(<span class=\"string\">\"you are force to be offline\"</span>);</div><div class=\"line\">        dialogBuilder.setCancelable(<span class=\"keyword\">false</span>);</div><div class=\"line\">        dialogBuilder.setPositiveButton(<span class=\"string\">\"OK\"</span>,</div><div class=\"line\">                <span class=\"keyword\">new</span> DialogInterface.OnClickListener() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(DialogInterface dialog, <span class=\"keyword\">int</span> which)</span> </span>&#123;</div><div class=\"line\">                        ActivityCollector.finishAll();</div><div class=\"line\">                        Intent intent = <span class=\"keyword\">new</span> Intent(AlertDialogActivity.<span class=\"keyword\">this</span>,LoginActivity.class);</div><div class=\"line\">                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</div><div class=\"line\">                        startActivity(intent);<span class=\"comment\">//重新启动LoginActivity</span></div><div class=\"line\"></div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\">        AlertDialog alertDialog=dialogBuilder.create();</div><div class=\"line\"></div><div class=\"line\">        alertDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);</div><div class=\"line\">        alertDialog.show();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-03-06T16:00:00.000Z","title":"使用WebView显示网页","keywords":null,"description":"如何使用WebView访问网页.","_content":"\n## 访问权限\n\n调用第三方或者系统默认浏览器不需要使用网络访问权限，但是自己写WebView访问网络资源需要配置网络访问权限。\n\n```xml\n<uses-permission android:name=\"android.permission.INTERNET\"/>\n```\n\n\n## 使用loadUrl()\n\nweb资源： webView.loadUrl(\"http://www.bing.com\");\n\n本地文件：webView.loadUrl(\"file:///android_assets/xx.html\");\n\n本地文件放在 asset文件夹中\n\n//使页面获得焦点\nwebView.requestFocus();\n\n## 处理页面导航\n\n当用户点击webView中的链接时，通常由默认浏览器打开并加载目标url，需要覆盖该默认处理方法。\n\n```java\nwebView.setWebViewClient(new WebViewClient(){\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\n                //返回True的时候控制网页在WebView中打开\n                //返回False控制网页在默认浏览器中打开。\n                view.loadUrl(url);\n                return true;\n            }\n\n            //WebViewClient帮助WebView处理一些页面控制和请求通知,还有其它很多方法，如下\n\n            @Override\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\n                super.onPageStarted(view, url, favicon);\n            }\n\n            @Override\n            public void onPageFinished(WebView view, String url) {\n                super.onPageFinished(view, url);\n            }\n        });\n```\n\n## WebView使用Javascript\n\n```java\n    WebSettings settings=webView.getSettings();\n    settings.setJavaScriptEnabled(true);\n```\n\n## 设置返回键逻辑\n\n```java\n@Override\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n    if(keyCode==KeyEvent.KEYCODE_BACK){\n        if(webView.canGoBack()){\n            Toast.makeText(this,webView.getUrl(),Toast.LENGTH_SHORT).show();\n            webView.goBack();//返回上一界面\n            return true;\n        }\n    }else{\n        System.exit(0);\n    }\n    return super.onKeyDown(keyCode, event);\n}\n```\n\n## 判断加载页面过程\n\n\n## 使用本地缓存\n\n```java\nWebSettings settings=webView.getSettings();   settings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);\n```\n\n\n\n## 实例\n\n```xml\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingLeft=\"0dp\"\n    android:paddingRight=\"0dp\" >\n\n    <ProgressBar\n        android:id=\"@+id/progressBar\"\n        style=\"?android:attr/progressBarStyleHorizontal\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n    <WebView\n        android:id=\"@+id/webView\"\n        android:layout_below=\"@id/progressBar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_alignParentEnd=\"true\"></WebView>\n</RelativeLayout>\n```\n\n```java\nwebView.setWebChromeClient(new WebChromeClient(){\n    @Override\n    public void onProgressChanged(WebView view, int newProgress) {\n        if (newProgress == 100) {\n            //网页已经加载完毕\n            progressCompleted();\n        } else {\n            //网页正在加载\n            progressUnCompleted(newProgress);\n        }\n    }\n\n    private void progressCompleted(){\n        progressBar.setProgress(100);\n    }\n\n    private void progressUnCompleted(int newProgress){\n        progressBar.setProgress(newProgress);\n    }\n});\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/webview.gif)\n","source":"_posts/android/控件/WebView/2016-03-07-使用WebView显示网页.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-07\ntitle: 使用WebView显示网页\ncategory: Android\ntags: [android,android_control]\nkeywords:\ndescription: 如何使用WebView访问网页.\n---\n\n## 访问权限\n\n调用第三方或者系统默认浏览器不需要使用网络访问权限，但是自己写WebView访问网络资源需要配置网络访问权限。\n\n```xml\n<uses-permission android:name=\"android.permission.INTERNET\"/>\n```\n\n\n## 使用loadUrl()\n\nweb资源： webView.loadUrl(\"http://www.bing.com\");\n\n本地文件：webView.loadUrl(\"file:///android_assets/xx.html\");\n\n本地文件放在 asset文件夹中\n\n//使页面获得焦点\nwebView.requestFocus();\n\n## 处理页面导航\n\n当用户点击webView中的链接时，通常由默认浏览器打开并加载目标url，需要覆盖该默认处理方法。\n\n```java\nwebView.setWebViewClient(new WebViewClient(){\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\n                //返回True的时候控制网页在WebView中打开\n                //返回False控制网页在默认浏览器中打开。\n                view.loadUrl(url);\n                return true;\n            }\n\n            //WebViewClient帮助WebView处理一些页面控制和请求通知,还有其它很多方法，如下\n\n            @Override\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\n                super.onPageStarted(view, url, favicon);\n            }\n\n            @Override\n            public void onPageFinished(WebView view, String url) {\n                super.onPageFinished(view, url);\n            }\n        });\n```\n\n## WebView使用Javascript\n\n```java\n    WebSettings settings=webView.getSettings();\n    settings.setJavaScriptEnabled(true);\n```\n\n## 设置返回键逻辑\n\n```java\n@Override\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n    if(keyCode==KeyEvent.KEYCODE_BACK){\n        if(webView.canGoBack()){\n            Toast.makeText(this,webView.getUrl(),Toast.LENGTH_SHORT).show();\n            webView.goBack();//返回上一界面\n            return true;\n        }\n    }else{\n        System.exit(0);\n    }\n    return super.onKeyDown(keyCode, event);\n}\n```\n\n## 判断加载页面过程\n\n\n## 使用本地缓存\n\n```java\nWebSettings settings=webView.getSettings();   settings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);\n```\n\n\n\n## 实例\n\n```xml\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingLeft=\"0dp\"\n    android:paddingRight=\"0dp\" >\n\n    <ProgressBar\n        android:id=\"@+id/progressBar\"\n        style=\"?android:attr/progressBarStyleHorizontal\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n    <WebView\n        android:id=\"@+id/webView\"\n        android:layout_below=\"@id/progressBar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_alignParentEnd=\"true\"></WebView>\n</RelativeLayout>\n```\n\n```java\nwebView.setWebChromeClient(new WebChromeClient(){\n    @Override\n    public void onProgressChanged(WebView view, int newProgress) {\n        if (newProgress == 100) {\n            //网页已经加载完毕\n            progressCompleted();\n        } else {\n            //网页正在加载\n            progressUnCompleted(newProgress);\n        }\n    }\n\n    private void progressCompleted(){\n        progressBar.setProgress(100);\n    }\n\n    private void progressUnCompleted(int newProgress){\n        progressBar.setProgress(newProgress);\n    }\n});\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/webview.gif)\n","slug":"android/控件/WebView/2016-03-07-使用WebView显示网页","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgk6006su8jrhbdgecjb","content":"<h2 id=\"访问权限\"><a href=\"#访问权限\" class=\"headerlink\" title=\"访问权限\"></a>访问权限</h2><p>调用第三方或者系统默认浏览器不需要使用网络访问权限，但是自己写WebView访问网络资源需要配置网络访问权限。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.INTERNET\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"使用loadUrl\"><a href=\"#使用loadUrl\" class=\"headerlink\" title=\"使用loadUrl()\"></a>使用loadUrl()</h2><p>web资源： webView.loadUrl(“<a href=\"http://www.bing.com\" target=\"_blank\" rel=\"external\">http://www.bing.com</a>“);</p>\n<p>本地文件：webView.loadUrl(“file:///android_assets/xx.html”);</p>\n<p>本地文件放在 asset文件夹中</p>\n<p>//使页面获得焦点<br>webView.requestFocus();</p>\n<h2 id=\"处理页面导航\"><a href=\"#处理页面导航\" class=\"headerlink\" title=\"处理页面导航\"></a>处理页面导航</h2><p>当用户点击webView中的链接时，通常由默认浏览器打开并加载目标url，需要覆盖该默认处理方法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">webView.setWebViewClient(<span class=\"keyword\">new</span> WebViewClient()&#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldOverrideUrlLoading</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</div><div class=\"line\">                <span class=\"comment\">//返回True的时候控制网页在WebView中打开</span></div><div class=\"line\">                <span class=\"comment\">//返回False控制网页在默认浏览器中打开。</span></div><div class=\"line\">                view.loadUrl(url);</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">//WebViewClient帮助WebView处理一些页面控制和请求通知,还有其它很多方法，如下</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageStarted</span><span class=\"params\">(WebView view, String url, Bitmap favicon)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">super</span>.onPageStarted(view, url, favicon);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageFinished</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">super</span>.onPageFinished(view, url);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>\n<h2 id=\"WebView使用Javascript\"><a href=\"#WebView使用Javascript\" class=\"headerlink\" title=\"WebView使用Javascript\"></a>WebView使用Javascript</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebSettings settings=webView.getSettings();</div><div class=\"line\">settings.setJavaScriptEnabled(<span class=\"keyword\">true</span>);</div></pre></td></tr></table></figure>\n<h2 id=\"设置返回键逻辑\"><a href=\"#设置返回键逻辑\" class=\"headerlink\" title=\"设置返回键逻辑\"></a>设置返回键逻辑</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onKeyDown</span><span class=\"params\">(<span class=\"keyword\">int</span> keyCode, KeyEvent event)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(keyCode==KeyEvent.KEYCODE_BACK)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(webView.canGoBack())&#123;</div><div class=\"line\">            Toast.makeText(<span class=\"keyword\">this</span>,webView.getUrl(),Toast.LENGTH_SHORT).show();</div><div class=\"line\">            webView.goBack();<span class=\"comment\">//返回上一界面</span></div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        System.exit(<span class=\"number\">0</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onKeyDown(keyCode, event);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"判断加载页面过程\"><a href=\"#判断加载页面过程\" class=\"headerlink\" title=\"判断加载页面过程\"></a>判断加载页面过程</h2><h2 id=\"使用本地缓存\"><a href=\"#使用本地缓存\" class=\"headerlink\" title=\"使用本地缓存\"></a>使用本地缓存</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebSettings settings=webView.getSettings();   settings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);</div></pre></td></tr></table></figure>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">RelativeLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:paddingLeft</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">    <span class=\"attr\">android:paddingRight</span>=<span class=\"string\">\"0dp\"</span> &gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ProgressBar</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/progressBar\"</span></div><div class=\"line\">        <span class=\"attr\">style</span>=<span class=\"string\">\"?android:attr/progressBarStyleHorizontal\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_alignParentTop</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">WebView</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/webView\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_below</span>=<span class=\"string\">\"@id/progressBar\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_alignParentEnd</span>=<span class=\"string\">\"true\"</span>&gt;<span class=\"tag\">&lt;/<span class=\"name\">WebView</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">webView.setWebChromeClient(<span class=\"keyword\">new</span> WebChromeClient()&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProgressChanged</span><span class=\"params\">(WebView view, <span class=\"keyword\">int</span> newProgress)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (newProgress == <span class=\"number\">100</span>) &#123;</div><div class=\"line\">            <span class=\"comment\">//网页已经加载完毕</span></div><div class=\"line\">            progressCompleted();</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            <span class=\"comment\">//网页正在加载</span></div><div class=\"line\">            progressUnCompleted(newProgress);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">progressCompleted</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        progressBar.setProgress(<span class=\"number\">100</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">progressUnCompleted</span><span class=\"params\">(<span class=\"keyword\">int</span> newProgress)</span></span>&#123;</div><div class=\"line\">        progressBar.setProgress(newProgress);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/webview.gif\" alt=\"\"></p>\n","excerpt":"","more":"<h2 id=\"访问权限\"><a href=\"#访问权限\" class=\"headerlink\" title=\"访问权限\"></a>访问权限</h2><p>调用第三方或者系统默认浏览器不需要使用网络访问权限，但是自己写WebView访问网络资源需要配置网络访问权限。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.permission.INTERNET\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"使用loadUrl\"><a href=\"#使用loadUrl\" class=\"headerlink\" title=\"使用loadUrl()\"></a>使用loadUrl()</h2><p>web资源： webView.loadUrl(“<a href=\"http://www.bing.com\">http://www.bing.com</a>“);</p>\n<p>本地文件：webView.loadUrl(“file:///android_assets/xx.html”);</p>\n<p>本地文件放在 asset文件夹中</p>\n<p>//使页面获得焦点<br>webView.requestFocus();</p>\n<h2 id=\"处理页面导航\"><a href=\"#处理页面导航\" class=\"headerlink\" title=\"处理页面导航\"></a>处理页面导航</h2><p>当用户点击webView中的链接时，通常由默认浏览器打开并加载目标url，需要覆盖该默认处理方法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">webView.setWebViewClient(<span class=\"keyword\">new</span> WebViewClient()&#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldOverrideUrlLoading</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</div><div class=\"line\">                <span class=\"comment\">//返回True的时候控制网页在WebView中打开</span></div><div class=\"line\">                <span class=\"comment\">//返回False控制网页在默认浏览器中打开。</span></div><div class=\"line\">                view.loadUrl(url);</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">//WebViewClient帮助WebView处理一些页面控制和请求通知,还有其它很多方法，如下</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageStarted</span><span class=\"params\">(WebView view, String url, Bitmap favicon)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">super</span>.onPageStarted(view, url, favicon);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageFinished</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">super</span>.onPageFinished(view, url);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>\n<h2 id=\"WebView使用Javascript\"><a href=\"#WebView使用Javascript\" class=\"headerlink\" title=\"WebView使用Javascript\"></a>WebView使用Javascript</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebSettings settings=webView.getSettings();</div><div class=\"line\">settings.setJavaScriptEnabled(<span class=\"keyword\">true</span>);</div></pre></td></tr></table></figure>\n<h2 id=\"设置返回键逻辑\"><a href=\"#设置返回键逻辑\" class=\"headerlink\" title=\"设置返回键逻辑\"></a>设置返回键逻辑</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onKeyDown</span><span class=\"params\">(<span class=\"keyword\">int</span> keyCode, KeyEvent event)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(keyCode==KeyEvent.KEYCODE_BACK)&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(webView.canGoBack())&#123;</div><div class=\"line\">            Toast.makeText(<span class=\"keyword\">this</span>,webView.getUrl(),Toast.LENGTH_SHORT).show();</div><div class=\"line\">            webView.goBack();<span class=\"comment\">//返回上一界面</span></div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">        System.exit(<span class=\"number\">0</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onKeyDown(keyCode, event);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"判断加载页面过程\"><a href=\"#判断加载页面过程\" class=\"headerlink\" title=\"判断加载页面过程\"></a>判断加载页面过程</h2><h2 id=\"使用本地缓存\"><a href=\"#使用本地缓存\" class=\"headerlink\" title=\"使用本地缓存\"></a>使用本地缓存</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebSettings settings=webView.getSettings();   settings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);</div></pre></td></tr></table></figure>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">RelativeLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:paddingLeft</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">    <span class=\"attr\">android:paddingRight</span>=<span class=\"string\">\"0dp\"</span> &gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ProgressBar</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/progressBar\"</span></div><div class=\"line\">        <span class=\"attr\">style</span>=<span class=\"string\">\"?android:attr/progressBarStyleHorizontal\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_alignParentTop</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">WebView</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/webView\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_below</span>=<span class=\"string\">\"@id/progressBar\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_alignParentEnd</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">WebView</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">webView.setWebChromeClient(<span class=\"keyword\">new</span> WebChromeClient()&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProgressChanged</span><span class=\"params\">(WebView view, <span class=\"keyword\">int</span> newProgress)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (newProgress == <span class=\"number\">100</span>) &#123;</div><div class=\"line\">            <span class=\"comment\">//网页已经加载完毕</span></div><div class=\"line\">            progressCompleted();</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            <span class=\"comment\">//网页正在加载</span></div><div class=\"line\">            progressUnCompleted(newProgress);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">progressCompleted</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        progressBar.setProgress(<span class=\"number\">100</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">progressUnCompleted</span><span class=\"params\">(<span class=\"keyword\">int</span> newProgress)</span></span>&#123;</div><div class=\"line\">        progressBar.setProgress(newProgress);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/webview.gif\" alt=\"\"></p>\n"},{"author":"ivyxjc","date":"2016-11-14T16:00:00.000Z","title":"JobScheduler","keywords":null,"description":"如何利用JobScheduler API执行预定的操作","_content":"\n## 任务写在JobService中\n```java\npublic class TestJobService extends JobService {\n    private static final String TAG = \"SyncService\";\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        Log.i(TAG, \"Service created\");\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        Log.i(TAG, \"Service destroyed\");\n    }\n\n    @Override\n    public boolean onStartJob(JobParameters params) {\n        // fake work\n        Log.i(TAG, \"on start job: \" + params.getJobId());\n        return true;\n    }\n\n    @Override\n    public boolean onStopJob(JobParameters params) {\n        Log.i(TAG, \"on stop job: \" + params.getJobId());\n        return true;\n    }\n\n    public void scheduleJob(JobInfo info){\n        Log.i(TAG, \"schedule job \");\n        JobScheduler js=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);\n        js.schedule(info);\n    }\n}\n```\n\n## 设置调度的相关条件\n\n```java\n\n...\nmServiceComponent = new ComponentName(this, TestJobService.class);\n...\n\npublic void scheduleJob(View v){\n        JobInfo info=new JobInfo.Builder(sJobId,mServiceComponent)\n            //延迟\n            .setMinimumLatency(2000)\n            //最长延迟\n            .setOverrideDeadline(5000)\n            //所需网络类型  本例中 为需要无线网络\n            .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED)\n            .setRequiresDeviceIdle(true)\n            .setRequiresCharging(true)\n            .build();\n        JobSchedulerjobScheduler=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);\n        jobScheduler.schedule(info);\n\n    }\n```\n\n\n\n\n## 如何获取正在运行的所有程序的名称\n\n\n```java\npublic String getRunningProcessNames(){\n        ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);\n\n        List<ActivityManager.RunningAppProcessInfo> l = am.getRunningAppProcesses();\n        PackageManager pm = this.getPackageManager();\n        StringBuilder sb=new StringBuilder();\n        for(ActivityManager.RunningAppProcessInfo i:l){\n            try{\n                CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(i.processName, PackageManager.GET_META_DATA));\n                sb.append(c.toString()+'\\n');\n            }catch (Exception e){\n                e.printStackTrace();\n            }\n        }\n        return sb.toString();\n    }\n```\n\n## 相关博客\n\n[在Android 5.0中使用JobScheduler](http://blog.csdn.net/bboyfeiyu/article/details/44809395)\n","source":"_posts/android/AndroidSamples/background/2016-11-15-jobscheduler.md","raw":"---\nauthor: ivyxjc\ndate: 2016-11-15\ntitle: JobScheduler\ncategory: Android\ntags: [android]\nkeywords:\ndescription: 如何利用JobScheduler API执行预定的操作\n---\n\n## 任务写在JobService中\n```java\npublic class TestJobService extends JobService {\n    private static final String TAG = \"SyncService\";\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        Log.i(TAG, \"Service created\");\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        Log.i(TAG, \"Service destroyed\");\n    }\n\n    @Override\n    public boolean onStartJob(JobParameters params) {\n        // fake work\n        Log.i(TAG, \"on start job: \" + params.getJobId());\n        return true;\n    }\n\n    @Override\n    public boolean onStopJob(JobParameters params) {\n        Log.i(TAG, \"on stop job: \" + params.getJobId());\n        return true;\n    }\n\n    public void scheduleJob(JobInfo info){\n        Log.i(TAG, \"schedule job \");\n        JobScheduler js=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);\n        js.schedule(info);\n    }\n}\n```\n\n## 设置调度的相关条件\n\n```java\n\n...\nmServiceComponent = new ComponentName(this, TestJobService.class);\n...\n\npublic void scheduleJob(View v){\n        JobInfo info=new JobInfo.Builder(sJobId,mServiceComponent)\n            //延迟\n            .setMinimumLatency(2000)\n            //最长延迟\n            .setOverrideDeadline(5000)\n            //所需网络类型  本例中 为需要无线网络\n            .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED)\n            .setRequiresDeviceIdle(true)\n            .setRequiresCharging(true)\n            .build();\n        JobSchedulerjobScheduler=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);\n        jobScheduler.schedule(info);\n\n    }\n```\n\n\n\n\n## 如何获取正在运行的所有程序的名称\n\n\n```java\npublic String getRunningProcessNames(){\n        ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);\n\n        List<ActivityManager.RunningAppProcessInfo> l = am.getRunningAppProcesses();\n        PackageManager pm = this.getPackageManager();\n        StringBuilder sb=new StringBuilder();\n        for(ActivityManager.RunningAppProcessInfo i:l){\n            try{\n                CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(i.processName, PackageManager.GET_META_DATA));\n                sb.append(c.toString()+'\\n');\n            }catch (Exception e){\n                e.printStackTrace();\n            }\n        }\n        return sb.toString();\n    }\n```\n\n## 相关博客\n\n[在Android 5.0中使用JobScheduler](http://blog.csdn.net/bboyfeiyu/article/details/44809395)\n","slug":"android/AndroidSamples/background/2016-11-15-jobscheduler","published":1,"updated":"2016-11-15T11:10:30.102Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgk8006vu8jrh9g7lsi6","content":"<h2 id=\"任务写在JobService中\"><a href=\"#任务写在JobService中\" class=\"headerlink\" title=\"任务写在JobService中\"></a>任务写在JobService中</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestJobService</span> <span class=\"keyword\">extends</span> <span class=\"title\">JobService</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"SyncService\"</span>;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate();</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"Service created\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"Service destroyed\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onStartJob</span><span class=\"params\">(JobParameters params)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// fake work</span></div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"on start job: \"</span> + params.getJobId());</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onStopJob</span><span class=\"params\">(JobParameters params)</span> </span>&#123;</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"on stop job: \"</span> + params.getJobId());</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(JobInfo info)</span></span>&#123;</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"schedule job \"</span>);</div><div class=\"line\">        JobScheduler js=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);</div><div class=\"line\">        js.schedule(info);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"设置调度的相关条件\"><a href=\"#设置调度的相关条件\" class=\"headerlink\" title=\"设置调度的相关条件\"></a>设置调度的相关条件</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\">mServiceComponent = <span class=\"keyword\">new</span> ComponentName(<span class=\"keyword\">this</span>, TestJobService.class);</div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(View v)</span></span>&#123;</div><div class=\"line\">        JobInfo info=<span class=\"keyword\">new</span> JobInfo.Builder(sJobId,mServiceComponent)</div><div class=\"line\">            <span class=\"comment\">//延迟</span></div><div class=\"line\">            .setMinimumLatency(<span class=\"number\">2000</span>)</div><div class=\"line\">            <span class=\"comment\">//最长延迟</span></div><div class=\"line\">            .setOverrideDeadline(<span class=\"number\">5000</span>)</div><div class=\"line\">            <span class=\"comment\">//所需网络类型  本例中 为需要无线网络</span></div><div class=\"line\">            .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED)</div><div class=\"line\">            .setRequiresDeviceIdle(<span class=\"keyword\">true</span>)</div><div class=\"line\">            .setRequiresCharging(<span class=\"keyword\">true</span>)</div><div class=\"line\">            .build();</div><div class=\"line\">        JobSchedulerjobScheduler=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);</div><div class=\"line\">        jobScheduler.schedule(info);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h2 id=\"如何获取正在运行的所有程序的名称\"><a href=\"#如何获取正在运行的所有程序的名称\" class=\"headerlink\" title=\"如何获取正在运行的所有程序的名称\"></a>如何获取正在运行的所有程序的名称</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getRunningProcessNames</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        ActivityManager am = (ActivityManager)<span class=\"keyword\">this</span>.getSystemService(ACTIVITY_SERVICE);</div><div class=\"line\"></div><div class=\"line\">        List&lt;ActivityManager.RunningAppProcessInfo&gt; l = am.getRunningAppProcesses();</div><div class=\"line\">        PackageManager pm = <span class=\"keyword\">this</span>.getPackageManager();</div><div class=\"line\">        StringBuilder sb=<span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\">        <span class=\"keyword\">for</span>(ActivityManager.RunningAppProcessInfo i:l)&#123;</div><div class=\"line\">            <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">                CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(i.processName, PackageManager.GET_META_DATA));</div><div class=\"line\">                sb.append(c.toString()+<span class=\"string\">'\\n'</span>);</div><div class=\"line\">            &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> sb.toString();</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h2 id=\"相关博客\"><a href=\"#相关博客\" class=\"headerlink\" title=\"相关博客\"></a>相关博客</h2><p><a href=\"http://blog.csdn.net/bboyfeiyu/article/details/44809395\" target=\"_blank\" rel=\"external\">在Android 5.0中使用JobScheduler</a></p>\n","excerpt":"","more":"<h2 id=\"任务写在JobService中\"><a href=\"#任务写在JobService中\" class=\"headerlink\" title=\"任务写在JobService中\"></a>任务写在JobService中</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestJobService</span> <span class=\"keyword\">extends</span> <span class=\"title\">JobService</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"SyncService\"</span>;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate();</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"Service created\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"Service destroyed\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onStartJob</span><span class=\"params\">(JobParameters params)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// fake work</span></div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"on start job: \"</span> + params.getJobId());</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onStopJob</span><span class=\"params\">(JobParameters params)</span> </span>&#123;</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"on stop job: \"</span> + params.getJobId());</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(JobInfo info)</span></span>&#123;</div><div class=\"line\">        Log.i(TAG, <span class=\"string\">\"schedule job \"</span>);</div><div class=\"line\">        JobScheduler js=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);</div><div class=\"line\">        js.schedule(info);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"设置调度的相关条件\"><a href=\"#设置调度的相关条件\" class=\"headerlink\" title=\"设置调度的相关条件\"></a>设置调度的相关条件</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\">mServiceComponent = <span class=\"keyword\">new</span> ComponentName(<span class=\"keyword\">this</span>, TestJobService.class);</div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(View v)</span></span>&#123;</div><div class=\"line\">        JobInfo info=<span class=\"keyword\">new</span> JobInfo.Builder(sJobId,mServiceComponent)</div><div class=\"line\">            <span class=\"comment\">//延迟</span></div><div class=\"line\">            .setMinimumLatency(<span class=\"number\">2000</span>)</div><div class=\"line\">            <span class=\"comment\">//最长延迟</span></div><div class=\"line\">            .setOverrideDeadline(<span class=\"number\">5000</span>)</div><div class=\"line\">            <span class=\"comment\">//所需网络类型  本例中 为需要无线网络</span></div><div class=\"line\">            .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED)</div><div class=\"line\">            .setRequiresDeviceIdle(<span class=\"keyword\">true</span>)</div><div class=\"line\">            .setRequiresCharging(<span class=\"keyword\">true</span>)</div><div class=\"line\">            .build();</div><div class=\"line\">        JobSchedulerjobScheduler=(JobScheduler)getApplication().getSystemService(Context.JOB_SCHEDULER_SERVICE);</div><div class=\"line\">        jobScheduler.schedule(info);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h2 id=\"如何获取正在运行的所有程序的名称\"><a href=\"#如何获取正在运行的所有程序的名称\" class=\"headerlink\" title=\"如何获取正在运行的所有程序的名称\"></a>如何获取正在运行的所有程序的名称</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getRunningProcessNames</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        ActivityManager am = (ActivityManager)<span class=\"keyword\">this</span>.getSystemService(ACTIVITY_SERVICE);</div><div class=\"line\"></div><div class=\"line\">        List&lt;ActivityManager.RunningAppProcessInfo&gt; l = am.getRunningAppProcesses();</div><div class=\"line\">        PackageManager pm = <span class=\"keyword\">this</span>.getPackageManager();</div><div class=\"line\">        StringBuilder sb=<span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\">        <span class=\"keyword\">for</span>(ActivityManager.RunningAppProcessInfo i:l)&#123;</div><div class=\"line\">            <span class=\"keyword\">try</span>&#123;</div><div class=\"line\">                CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(i.processName, PackageManager.GET_META_DATA));</div><div class=\"line\">                sb.append(c.toString()+<span class=\"string\">'\\n'</span>);</div><div class=\"line\">            &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> sb.toString();</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h2 id=\"相关博客\"><a href=\"#相关博客\" class=\"headerlink\" title=\"相关博客\"></a>相关博客</h2><p><a href=\"http://blog.csdn.net/bboyfeiyu/article/details/44809395\">在Android 5.0中使用JobScheduler</a></p>\n"},{"author":"ivyxjc","date":"2016-03-25T16:00:00.000Z","title":"Notification初步","keywords":null,"description":"如何设置Notificaton","_content":"\n## 通知\n\n```java\nMainActivity.java\n\nNotificationManager notificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);\n\nNotification.Builder builder=new Notification.Builder(this);\n\n//设置点击通知进入NotificationActivity\nIntent intent=new Intent(this,NotificationActivity.class);\n\n//第二个参数int requestCode相同，表示是同一个pendingIntent\nPendingIntent pi=PendingIntent.getActivity(this,0,intent,PendingIntent.FLAG_CANCEL_CURRENT);\n\n//设置通知栏 布局，内容等...\nbuilder.setSmallIcon(R.mipmap.ic_launcher);\nbuilder.setContentTitle(\"Notification Title\");\nbuilder.setContentText(\"Notification text\");\nbuilder.setContentIntent(pi);\n\n//第一个参数在应用中是唯一的，代表这个通知\nnotificationManager.notify(11, builder.build());\n```\n\n1. FLAG_CANCEL_CURRENT:如果当前系统中已经存在一个相同的PendingIntent对象，那么就将先将已有的PendingIntent取消，然后重新生成一个PendingIntent对象。\n2. FLAG_NO_CREATE:如果当前系统中不存在相同的PendingIntent对象，系统将不会创建该PendingIntent对象而是直接返回null。\n3. FLAG_ONE_SHOT:该PendingIntent只作用一次。在该PendingIntent对象通过send()方法触发过后，PendingIntent将自动调用cancel()进行销毁，那么如果你再调用send()方法的话，系统将会返回一个SendIntentException。\n4. FLAG_UPDATE_CURRENT:如果系统中有一个和你描述的PendingIntent对等的PendingInent，那么系统将使用该PendingIntent对象，但是会使用新的Intent来更新之前PendingIntent中的Intent对象数据，例如更新Intent中的Extras。\n\n\n```java\nNotificationActivity.java\n\nNotificationManager manager=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n\n//使通知在通知栏消失\nmanager.cancel(11);\n```\n\n```java\n//设置声音\nUri soundUri=Uri.fromFile(new File(\"/system/media/audio/ringtones/Boxbeat.ogg\"));\nbuilder.setSound(soundUri);\n\n//设置震动上\n//下标为偶数和0的标识手机静止的时长，奇数标识手机震动的时长\nlong [] vibrates={0,1000,1000,1000,1000,1000};\nbuilder.setVibrate(vibrates);\n```\n\n### 效果  \n\n![](/assets/img/posts/notification.gif)\n\n\n\n## 短信\n\n### 接收短信\n\n```java\nmReceiveFilter=new IntentFilter();\nmReceiveFilter.addAction(\"android.provider.Telephony.SMS_RECEIVED\");\nmMessageReceiver=new MessageReceiver();\nregisterReceiver(mMessageReceiver,mReceiveFilter);\n\nclass MessageReceiver extends BroadcastReceiver{\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            Bundle bundle=intent.getExtras();\n\n            Object[] pdus=(Object[])bundle.get(\"pdus\");//提取短信消息\n\n            SmsMessage[] messages=new SmsMessage[pdus.length];\n\n            for(int i=0;i<messages.length;i++){\n                messages[i]=SmsMessage.createFromPdu((byte[])pdus[i]);\n            }\n\n            String address=messages[0].getOriginatingAddress();\n\n            String fullMessage=\"\";\n            for(SmsMessage message:messages){\n                fullMessage+=message.getMessageBody();//获取短信内容\n            }\n            sender.setText(address);\n            content.setText(fullMessage);\n        }\n    }\n\n```\n\n### 拦截短信\n系统发出的短信广播是一条有序广播，所以可以先获得该广播，再中止广播传递即可。\n\n1.提高MessageReceiver的优先级，让它能够先于系统短信程序接收到短信广播。\n2.调用`abortBroadcast()`方法，中止广播传递。\n\n### 发送短信\n\n```java\nmSendButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Log.i(\"AAABBB\", \"before\");\n            SmsManager smsManager = SmsManager.getDefault();\n            Log.i(\"AAABBB\", \"getDefault\");\n            smsManager.sendTextMessage(mTo.getText().toString(), null, mEditText.toString(), null, null);\n        }\n    });\n```\n","source":"_posts/android/控件/Notification/2016-03-26-Notification-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-26\ntitle: Notification初步\ncategory: Android\ntags: [android]\nkeywords:\ndescription: 如何设置Notificaton\n---\n\n## 通知\n\n```java\nMainActivity.java\n\nNotificationManager notificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);\n\nNotification.Builder builder=new Notification.Builder(this);\n\n//设置点击通知进入NotificationActivity\nIntent intent=new Intent(this,NotificationActivity.class);\n\n//第二个参数int requestCode相同，表示是同一个pendingIntent\nPendingIntent pi=PendingIntent.getActivity(this,0,intent,PendingIntent.FLAG_CANCEL_CURRENT);\n\n//设置通知栏 布局，内容等...\nbuilder.setSmallIcon(R.mipmap.ic_launcher);\nbuilder.setContentTitle(\"Notification Title\");\nbuilder.setContentText(\"Notification text\");\nbuilder.setContentIntent(pi);\n\n//第一个参数在应用中是唯一的，代表这个通知\nnotificationManager.notify(11, builder.build());\n```\n\n1. FLAG_CANCEL_CURRENT:如果当前系统中已经存在一个相同的PendingIntent对象，那么就将先将已有的PendingIntent取消，然后重新生成一个PendingIntent对象。\n2. FLAG_NO_CREATE:如果当前系统中不存在相同的PendingIntent对象，系统将不会创建该PendingIntent对象而是直接返回null。\n3. FLAG_ONE_SHOT:该PendingIntent只作用一次。在该PendingIntent对象通过send()方法触发过后，PendingIntent将自动调用cancel()进行销毁，那么如果你再调用send()方法的话，系统将会返回一个SendIntentException。\n4. FLAG_UPDATE_CURRENT:如果系统中有一个和你描述的PendingIntent对等的PendingInent，那么系统将使用该PendingIntent对象，但是会使用新的Intent来更新之前PendingIntent中的Intent对象数据，例如更新Intent中的Extras。\n\n\n```java\nNotificationActivity.java\n\nNotificationManager manager=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n\n//使通知在通知栏消失\nmanager.cancel(11);\n```\n\n```java\n//设置声音\nUri soundUri=Uri.fromFile(new File(\"/system/media/audio/ringtones/Boxbeat.ogg\"));\nbuilder.setSound(soundUri);\n\n//设置震动上\n//下标为偶数和0的标识手机静止的时长，奇数标识手机震动的时长\nlong [] vibrates={0,1000,1000,1000,1000,1000};\nbuilder.setVibrate(vibrates);\n```\n\n### 效果  \n\n![](/assets/img/posts/notification.gif)\n\n\n\n## 短信\n\n### 接收短信\n\n```java\nmReceiveFilter=new IntentFilter();\nmReceiveFilter.addAction(\"android.provider.Telephony.SMS_RECEIVED\");\nmMessageReceiver=new MessageReceiver();\nregisterReceiver(mMessageReceiver,mReceiveFilter);\n\nclass MessageReceiver extends BroadcastReceiver{\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            Bundle bundle=intent.getExtras();\n\n            Object[] pdus=(Object[])bundle.get(\"pdus\");//提取短信消息\n\n            SmsMessage[] messages=new SmsMessage[pdus.length];\n\n            for(int i=0;i<messages.length;i++){\n                messages[i]=SmsMessage.createFromPdu((byte[])pdus[i]);\n            }\n\n            String address=messages[0].getOriginatingAddress();\n\n            String fullMessage=\"\";\n            for(SmsMessage message:messages){\n                fullMessage+=message.getMessageBody();//获取短信内容\n            }\n            sender.setText(address);\n            content.setText(fullMessage);\n        }\n    }\n\n```\n\n### 拦截短信\n系统发出的短信广播是一条有序广播，所以可以先获得该广播，再中止广播传递即可。\n\n1.提高MessageReceiver的优先级，让它能够先于系统短信程序接收到短信广播。\n2.调用`abortBroadcast()`方法，中止广播传递。\n\n### 发送短信\n\n```java\nmSendButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Log.i(\"AAABBB\", \"before\");\n            SmsManager smsManager = SmsManager.getDefault();\n            Log.i(\"AAABBB\", \"getDefault\");\n            smsManager.sendTextMessage(mTo.getText().toString(), null, mEditText.toString(), null, null);\n        }\n    });\n```\n","slug":"android/控件/Notification/2016-03-26-Notification-basic","published":1,"updated":"2016-10-26T11:26:51.829Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgka006yu8jrand4a716","content":"<h2 id=\"通知\"><a href=\"#通知\" class=\"headerlink\" title=\"通知\"></a>通知</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainActivity.java</div><div class=\"line\"></div><div class=\"line\">NotificationManager notificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);</div><div class=\"line\"></div><div class=\"line\">Notification.Builder builder=<span class=\"keyword\">new</span> Notification.Builder(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//设置点击通知进入NotificationActivity</span></div><div class=\"line\">Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"keyword\">this</span>,NotificationActivity.class);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//第二个参数int requestCode相同，表示是同一个pendingIntent</span></div><div class=\"line\">PendingIntent pi=PendingIntent.getActivity(<span class=\"keyword\">this</span>,<span class=\"number\">0</span>,intent,PendingIntent.FLAG_CANCEL_CURRENT);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//设置通知栏 布局，内容等...</span></div><div class=\"line\">builder.setSmallIcon(R.mipmap.ic_launcher);</div><div class=\"line\">builder.setContentTitle(<span class=\"string\">\"Notification Title\"</span>);</div><div class=\"line\">builder.setContentText(<span class=\"string\">\"Notification text\"</span>);</div><div class=\"line\">builder.setContentIntent(pi);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//第一个参数在应用中是唯一的，代表这个通知</span></div><div class=\"line\">notificationManager.notify(<span class=\"number\">11</span>, builder.build());</div></pre></td></tr></table></figure>\n<ol>\n<li>FLAG_CANCEL_CURRENT:如果当前系统中已经存在一个相同的PendingIntent对象，那么就将先将已有的PendingIntent取消，然后重新生成一个PendingIntent对象。</li>\n<li>FLAG_NO_CREATE:如果当前系统中不存在相同的PendingIntent对象，系统将不会创建该PendingIntent对象而是直接返回null。</li>\n<li>FLAG_ONE_SHOT:该PendingIntent只作用一次。在该PendingIntent对象通过send()方法触发过后，PendingIntent将自动调用cancel()进行销毁，那么如果你再调用send()方法的话，系统将会返回一个SendIntentException。</li>\n<li>FLAG_UPDATE_CURRENT:如果系统中有一个和你描述的PendingIntent对等的PendingInent，那么系统将使用该PendingIntent对象，但是会使用新的Intent来更新之前PendingIntent中的Intent对象数据，例如更新Intent中的Extras。</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">NotificationActivity.java</div><div class=\"line\"></div><div class=\"line\">NotificationManager manager=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//使通知在通知栏消失</span></div><div class=\"line\">manager.cancel(<span class=\"number\">11</span>);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//设置声音</span></div><div class=\"line\">Uri soundUri=Uri.fromFile(<span class=\"keyword\">new</span> File(<span class=\"string\">\"/system/media/audio/ringtones/Boxbeat.ogg\"</span>));</div><div class=\"line\">builder.setSound(soundUri);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//设置震动上</span></div><div class=\"line\"><span class=\"comment\">//下标为偶数和0的标识手机静止的时长，奇数标识手机震动的时长</span></div><div class=\"line\"><span class=\"keyword\">long</span> [] vibrates=&#123;<span class=\"number\">0</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>&#125;;</div><div class=\"line\">builder.setVibrate(vibrates);</div></pre></td></tr></table></figure>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><p><img src=\"/assets/img/posts/notification.gif\" alt=\"\"></p>\n<h2 id=\"短信\"><a href=\"#短信\" class=\"headerlink\" title=\"短信\"></a>短信</h2><h3 id=\"接收短信\"><a href=\"#接收短信\" class=\"headerlink\" title=\"接收短信\"></a>接收短信</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">mReceiveFilter=<span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">mReceiveFilter.addAction(<span class=\"string\">\"android.provider.Telephony.SMS_RECEIVED\"</span>);</div><div class=\"line\">mMessageReceiver=<span class=\"keyword\">new</span> MessageReceiver();</div><div class=\"line\">registerReceiver(mMessageReceiver,mReceiveFilter);</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MessageReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">            Bundle bundle=intent.getExtras();</div><div class=\"line\"></div><div class=\"line\">            Object[] pdus=(Object[])bundle.get(<span class=\"string\">\"pdus\"</span>);<span class=\"comment\">//提取短信消息</span></div><div class=\"line\"></div><div class=\"line\">            SmsMessage[] messages=<span class=\"keyword\">new</span> SmsMessage[pdus.length];</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;messages.length;i++)&#123;</div><div class=\"line\">                messages[i]=SmsMessage.createFromPdu((<span class=\"keyword\">byte</span>[])pdus[i]);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            String address=messages[<span class=\"number\">0</span>].getOriginatingAddress();</div><div class=\"line\"></div><div class=\"line\">            String fullMessage=<span class=\"string\">\"\"</span>;</div><div class=\"line\">            <span class=\"keyword\">for</span>(SmsMessage message:messages)&#123;</div><div class=\"line\">                fullMessage+=message.getMessageBody();<span class=\"comment\">//获取短信内容</span></div><div class=\"line\">            &#125;</div><div class=\"line\">            sender.setText(address);</div><div class=\"line\">            content.setText(fullMessage);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"拦截短信\"><a href=\"#拦截短信\" class=\"headerlink\" title=\"拦截短信\"></a>拦截短信</h3><p>系统发出的短信广播是一条有序广播，所以可以先获得该广播，再中止广播传递即可。</p>\n<p>1.提高MessageReceiver的优先级，让它能够先于系统短信程序接收到短信广播。<br>2.调用<code>abortBroadcast()</code>方法，中止广播传递。</p>\n<h3 id=\"发送短信\"><a href=\"#发送短信\" class=\"headerlink\" title=\"发送短信\"></a>发送短信</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">mSendButton.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">            Log.i(<span class=\"string\">\"AAABBB\"</span>, <span class=\"string\">\"before\"</span>);</div><div class=\"line\">            SmsManager smsManager = SmsManager.getDefault();</div><div class=\"line\">            Log.i(<span class=\"string\">\"AAABBB\"</span>, <span class=\"string\">\"getDefault\"</span>);</div><div class=\"line\">            smsManager.sendTextMessage(mTo.getText().toString(), <span class=\"keyword\">null</span>, mEditText.toString(), <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;);</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"通知\"><a href=\"#通知\" class=\"headerlink\" title=\"通知\"></a>通知</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">MainActivity.java</div><div class=\"line\"></div><div class=\"line\">NotificationManager notificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);</div><div class=\"line\"></div><div class=\"line\">Notification.Builder builder=<span class=\"keyword\">new</span> Notification.Builder(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//设置点击通知进入NotificationActivity</span></div><div class=\"line\">Intent intent=<span class=\"keyword\">new</span> Intent(<span class=\"keyword\">this</span>,NotificationActivity.class);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//第二个参数int requestCode相同，表示是同一个pendingIntent</span></div><div class=\"line\">PendingIntent pi=PendingIntent.getActivity(<span class=\"keyword\">this</span>,<span class=\"number\">0</span>,intent,PendingIntent.FLAG_CANCEL_CURRENT);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//设置通知栏 布局，内容等...</span></div><div class=\"line\">builder.setSmallIcon(R.mipmap.ic_launcher);</div><div class=\"line\">builder.setContentTitle(<span class=\"string\">\"Notification Title\"</span>);</div><div class=\"line\">builder.setContentText(<span class=\"string\">\"Notification text\"</span>);</div><div class=\"line\">builder.setContentIntent(pi);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//第一个参数在应用中是唯一的，代表这个通知</span></div><div class=\"line\">notificationManager.notify(<span class=\"number\">11</span>, builder.build());</div></pre></td></tr></table></figure>\n<ol>\n<li>FLAG_CANCEL_CURRENT:如果当前系统中已经存在一个相同的PendingIntent对象，那么就将先将已有的PendingIntent取消，然后重新生成一个PendingIntent对象。</li>\n<li>FLAG_NO_CREATE:如果当前系统中不存在相同的PendingIntent对象，系统将不会创建该PendingIntent对象而是直接返回null。</li>\n<li>FLAG_ONE_SHOT:该PendingIntent只作用一次。在该PendingIntent对象通过send()方法触发过后，PendingIntent将自动调用cancel()进行销毁，那么如果你再调用send()方法的话，系统将会返回一个SendIntentException。</li>\n<li>FLAG_UPDATE_CURRENT:如果系统中有一个和你描述的PendingIntent对等的PendingInent，那么系统将使用该PendingIntent对象，但是会使用新的Intent来更新之前PendingIntent中的Intent对象数据，例如更新Intent中的Extras。</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">NotificationActivity.java</div><div class=\"line\"></div><div class=\"line\">NotificationManager manager=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//使通知在通知栏消失</span></div><div class=\"line\">manager.cancel(<span class=\"number\">11</span>);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//设置声音</span></div><div class=\"line\">Uri soundUri=Uri.fromFile(<span class=\"keyword\">new</span> File(<span class=\"string\">\"/system/media/audio/ringtones/Boxbeat.ogg\"</span>));</div><div class=\"line\">builder.setSound(soundUri);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//设置震动上</span></div><div class=\"line\"><span class=\"comment\">//下标为偶数和0的标识手机静止的时长，奇数标识手机震动的时长</span></div><div class=\"line\"><span class=\"keyword\">long</span> [] vibrates=&#123;<span class=\"number\">0</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>,<span class=\"number\">1000</span>&#125;;</div><div class=\"line\">builder.setVibrate(vibrates);</div></pre></td></tr></table></figure>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><p><img src=\"/assets/img/posts/notification.gif\" alt=\"\"></p>\n<h2 id=\"短信\"><a href=\"#短信\" class=\"headerlink\" title=\"短信\"></a>短信</h2><h3 id=\"接收短信\"><a href=\"#接收短信\" class=\"headerlink\" title=\"接收短信\"></a>接收短信</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">mReceiveFilter=<span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">mReceiveFilter.addAction(<span class=\"string\">\"android.provider.Telephony.SMS_RECEIVED\"</span>);</div><div class=\"line\">mMessageReceiver=<span class=\"keyword\">new</span> MessageReceiver();</div><div class=\"line\">registerReceiver(mMessageReceiver,mReceiveFilter);</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MessageReceiver</span> <span class=\"keyword\">extends</span> <span class=\"title\">BroadcastReceiver</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">            Bundle bundle=intent.getExtras();</div><div class=\"line\"></div><div class=\"line\">            Object[] pdus=(Object[])bundle.get(<span class=\"string\">\"pdus\"</span>);<span class=\"comment\">//提取短信消息</span></div><div class=\"line\"></div><div class=\"line\">            SmsMessage[] messages=<span class=\"keyword\">new</span> SmsMessage[pdus.length];</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;messages.length;i++)&#123;</div><div class=\"line\">                messages[i]=SmsMessage.createFromPdu((<span class=\"keyword\">byte</span>[])pdus[i]);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            String address=messages[<span class=\"number\">0</span>].getOriginatingAddress();</div><div class=\"line\"></div><div class=\"line\">            String fullMessage=<span class=\"string\">\"\"</span>;</div><div class=\"line\">            <span class=\"keyword\">for</span>(SmsMessage message:messages)&#123;</div><div class=\"line\">                fullMessage+=message.getMessageBody();<span class=\"comment\">//获取短信内容</span></div><div class=\"line\">            &#125;</div><div class=\"line\">            sender.setText(address);</div><div class=\"line\">            content.setText(fullMessage);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"拦截短信\"><a href=\"#拦截短信\" class=\"headerlink\" title=\"拦截短信\"></a>拦截短信</h3><p>系统发出的短信广播是一条有序广播，所以可以先获得该广播，再中止广播传递即可。</p>\n<p>1.提高MessageReceiver的优先级，让它能够先于系统短信程序接收到短信广播。<br>2.调用<code>abortBroadcast()</code>方法，中止广播传递。</p>\n<h3 id=\"发送短信\"><a href=\"#发送短信\" class=\"headerlink\" title=\"发送短信\"></a>发送短信</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">mSendButton.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">            Log.i(<span class=\"string\">\"AAABBB\"</span>, <span class=\"string\">\"before\"</span>);</div><div class=\"line\">            SmsManager smsManager = SmsManager.getDefault();</div><div class=\"line\">            Log.i(<span class=\"string\">\"AAABBB\"</span>, <span class=\"string\">\"getDefault\"</span>);</div><div class=\"line\">            smsManager.sendTextMessage(mTo.getText().toString(), <span class=\"keyword\">null</span>, mEditText.toString(), <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;);</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-07-06T16:00:00.000Z","title":"简易计算器开发","keywords":null,"description":"一个简易计算器的开发中遇到的EditText相关问题.","_content":"\n## edittext按回车时操作\n\n如果有多行，没一行有多个edittext时，按回车时，它会到下一行的edittext之中，而不是同一行的下一个editext。\n\n在xml文件中添加`imeOptions`。\n\n```xml\n<EditText\n        android:layout_width=\"0dp\"\n        android:layout_weight=\"1\"\n        android:layout_height=\"wrap_content\"\n        android:inputType=\"numberDecimal\"\n        android:id=\"@+id/editText3\"\n        android:imeOptions=\"actionNext\"/>\n```\n\n但是最后一行按回车回跳到下一行最后一个而不是下一行第一个。\n\n\n\n## listfragment自己编写listadapter中button监听问题\n\nlistfragment自己编写listadapter中button总是监听最后一个item中的数据。\n\n![](http://oezmbgg4j.bkt.clouddn.com/listview_button_click.gif)\n\n无论点击哪一个button都是计算最后一行。\n","source":"_posts/android/开发实战/个人开发/2016-07-07-calculator.md","raw":"---\nauthor: ivyxjc\ndate: 2016-07-07\ntitle: 简易计算器开发\ncategory: Android\ntags: [android,android_project]\nkeywords:\ndescription: 一个简易计算器的开发中遇到的EditText相关问题.\n---\n\n## edittext按回车时操作\n\n如果有多行，没一行有多个edittext时，按回车时，它会到下一行的edittext之中，而不是同一行的下一个editext。\n\n在xml文件中添加`imeOptions`。\n\n```xml\n<EditText\n        android:layout_width=\"0dp\"\n        android:layout_weight=\"1\"\n        android:layout_height=\"wrap_content\"\n        android:inputType=\"numberDecimal\"\n        android:id=\"@+id/editText3\"\n        android:imeOptions=\"actionNext\"/>\n```\n\n但是最后一行按回车回跳到下一行最后一个而不是下一行第一个。\n\n\n\n## listfragment自己编写listadapter中button监听问题\n\nlistfragment自己编写listadapter中button总是监听最后一个item中的数据。\n\n![](http://oezmbgg4j.bkt.clouddn.com/listview_button_click.gif)\n\n无论点击哪一个button都是计算最后一行。\n","slug":"android/开发实战/个人开发/2016-07-07-calculator","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkb0072u8jrbwa3amuv","content":"<h2 id=\"edittext按回车时操作\"><a href=\"#edittext按回车时操作\" class=\"headerlink\" title=\"edittext按回车时操作\"></a>edittext按回车时操作</h2><p>如果有多行，没一行有多个edittext时，按回车时，它会到下一行的edittext之中，而不是同一行的下一个editext。</p>\n<p>在xml文件中添加<code>imeOptions</code>。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">EditText</span></span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:inputType</span>=<span class=\"string\">\"numberDecimal\"</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/editText3\"</span></div><div class=\"line\">        <span class=\"attr\">android:imeOptions</span>=<span class=\"string\">\"actionNext\"</span>/&gt;</div></pre></td></tr></table></figure>\n<p>但是最后一行按回车回跳到下一行最后一个而不是下一行第一个。</p>\n<h2 id=\"listfragment自己编写listadapter中button监听问题\"><a href=\"#listfragment自己编写listadapter中button监听问题\" class=\"headerlink\" title=\"listfragment自己编写listadapter中button监听问题\"></a>listfragment自己编写listadapter中button监听问题</h2><p>listfragment自己编写listadapter中button总是监听最后一个item中的数据。</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/listview_button_click.gif\" alt=\"\"></p>\n<p>无论点击哪一个button都是计算最后一行。</p>\n","excerpt":"","more":"<h2 id=\"edittext按回车时操作\"><a href=\"#edittext按回车时操作\" class=\"headerlink\" title=\"edittext按回车时操作\"></a>edittext按回车时操作</h2><p>如果有多行，没一行有多个edittext时，按回车时，它会到下一行的edittext之中，而不是同一行的下一个editext。</p>\n<p>在xml文件中添加<code>imeOptions</code>。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">EditText</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:inputType</span>=<span class=\"string\">\"numberDecimal\"</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/editText3\"</span></div><div class=\"line\">        <span class=\"attr\">android:imeOptions</span>=<span class=\"string\">\"actionNext\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>但是最后一行按回车回跳到下一行最后一个而不是下一行第一个。</p>\n<h2 id=\"listfragment自己编写listadapter中button监听问题\"><a href=\"#listfragment自己编写listadapter中button监听问题\" class=\"headerlink\" title=\"listfragment自己编写listadapter中button监听问题\"></a>listfragment自己编写listadapter中button监听问题</h2><p>listfragment自己编写listadapter中button总是监听最后一个item中的数据。</p>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/listview_button_click.gif\" alt=\"\"></p>\n<p>无论点击哪一个button都是计算最后一行。</p>\n"},{"author":"ivyxjc","date":"2016-06-01T16:00:00.000Z","title":"Sunshine开发实战:数据持久化","keywords":null,"description":"数据持久化","_content":"\n##　Sunshine应用数据存储总体框架\n![](http://oezmbgg4j.bkt.clouddn.com/sunshine_data_persistence.png)\n\n## WeatherContract\nA contract is an agreement between the data model, storeage, and views, presentation, describing how information is accessed.\n事实上就是在一个类中规定好所有相关的数据表中相应的表名,列名等等.\n\n## WeatherDBHelper\n\n创建数据库并进行初始化\n","source":"_posts/android/开发实战/Sunshine开发实战/2016-06-02-data-persistence.md","raw":"---\nauthor: ivyxjc\ndate: 2016-06-02\ntitle: Sunshine开发实战:数据持久化\ncategory: Android\ntags: [android,android_data]\nkeywords:\ndescription: 数据持久化\n---\n\n##　Sunshine应用数据存储总体框架\n![](http://oezmbgg4j.bkt.clouddn.com/sunshine_data_persistence.png)\n\n## WeatherContract\nA contract is an agreement between the data model, storeage, and views, presentation, describing how information is accessed.\n事实上就是在一个类中规定好所有相关的数据表中相应的表名,列名等等.\n\n## WeatherDBHelper\n\n创建数据库并进行初始化\n","slug":"android/开发实战/Sunshine开发实战/2016-06-02-data-persistence","published":1,"updated":"2016-10-26T11:26:51.824Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkc0075u8jrj2og1wqc","content":"<p>##　Sunshine应用数据存储总体框架<br><img src=\"http://oezmbgg4j.bkt.clouddn.com/sunshine_data_persistence.png\" alt=\"\"></p>\n<h2 id=\"WeatherContract\"><a href=\"#WeatherContract\" class=\"headerlink\" title=\"WeatherContract\"></a>WeatherContract</h2><p>A contract is an agreement between the data model, storeage, and views, presentation, describing how information is accessed.<br>事实上就是在一个类中规定好所有相关的数据表中相应的表名,列名等等.</p>\n<h2 id=\"WeatherDBHelper\"><a href=\"#WeatherDBHelper\" class=\"headerlink\" title=\"WeatherDBHelper\"></a>WeatherDBHelper</h2><p>创建数据库并进行初始化</p>\n","excerpt":"","more":"<p>##　Sunshine应用数据存储总体框架<br><img src=\"http://oezmbgg4j.bkt.clouddn.com/sunshine_data_persistence.png\" alt=\"\"></p>\n<h2 id=\"WeatherContract\"><a href=\"#WeatherContract\" class=\"headerlink\" title=\"WeatherContract\"></a>WeatherContract</h2><p>A contract is an agreement between the data model, storeage, and views, presentation, describing how information is accessed.<br>事实上就是在一个类中规定好所有相关的数据表中相应的表名,列名等等.</p>\n<h2 id=\"WeatherDBHelper\"><a href=\"#WeatherDBHelper\" class=\"headerlink\" title=\"WeatherDBHelper\"></a>WeatherDBHelper</h2><p>创建数据库并进行初始化</p>\n"},{"author":"ivyxjc","date":"2016-06-02T16:00:00.000Z","title":"Sunshine开发实战:测试","keywords":null,"description":"Android开发中如何进行测试的简单例子.","_content":"\n## 简单的例子\n\n```java\npublic class TestPractice extends AndroidTestCase {\n    //测试前进行的工作\n    @Override\n    protected void setUp() throws Exception {\n        super.setUp();\n    }\n\n//所有测试的类必须以test开头\n    public void testThatDemonstratesAssertations() throws Throwable{\n        int a=5;\n        int b=3;\n        int c=5;\n        int d=10;\n\n        assertEquals(\"X should be equal\",a,c);\n        assertTrue(\"Y should be true\",d>a);\n        assertFalse(\"Z should be false\",a==b);\n\n    }\n\n    //测试之后进行的工作\n    @Override\n    protected void tearDown() throws Exception {\n        super.tearDown();\n    }\n}\n```\n然后点击`run 'Tests in ...`即可.\n![](http://oezmbgg4j.bkt.clouddn.com/android_test_run.png)\n","source":"_posts/android/开发实战/Sunshine开发实战/2016-06-03-android-test.md","raw":"---\nauthor: ivyxjc\ndate: 2016-06-03\ntitle: Sunshine开发实战:测试\ncategory: Android\ntags: [android,android_test]\nkeywords:\ndescription: Android开发中如何进行测试的简单例子.\n---\n\n## 简单的例子\n\n```java\npublic class TestPractice extends AndroidTestCase {\n    //测试前进行的工作\n    @Override\n    protected void setUp() throws Exception {\n        super.setUp();\n    }\n\n//所有测试的类必须以test开头\n    public void testThatDemonstratesAssertations() throws Throwable{\n        int a=5;\n        int b=3;\n        int c=5;\n        int d=10;\n\n        assertEquals(\"X should be equal\",a,c);\n        assertTrue(\"Y should be true\",d>a);\n        assertFalse(\"Z should be false\",a==b);\n\n    }\n\n    //测试之后进行的工作\n    @Override\n    protected void tearDown() throws Exception {\n        super.tearDown();\n    }\n}\n```\n然后点击`run 'Tests in ...`即可.\n![](http://oezmbgg4j.bkt.clouddn.com/android_test_run.png)\n","slug":"android/开发实战/Sunshine开发实战/2016-06-03-android-test","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkf0079u8jr151swhj5","content":"<h2 id=\"简单的例子\"><a href=\"#简单的例子\" class=\"headerlink\" title=\"简单的例子\"></a>简单的例子</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestPractice</span> <span class=\"keyword\">extends</span> <span class=\"title\">AndroidTestCase</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//测试前进行的工作</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">setUp</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.setUp();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//所有测试的类必须以test开头</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testThatDemonstratesAssertations</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> a=<span class=\"number\">5</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> b=<span class=\"number\">3</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> c=<span class=\"number\">5</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> d=<span class=\"number\">10</span>;</div><div class=\"line\"></div><div class=\"line\">        assertEquals(<span class=\"string\">\"X should be equal\"</span>,a,c);</div><div class=\"line\">        assertTrue(<span class=\"string\">\"Y should be true\"</span>,d&gt;a);</div><div class=\"line\">        assertFalse(<span class=\"string\">\"Z should be false\"</span>,a==b);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//测试之后进行的工作</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">tearDown</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.tearDown();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后点击<code>run &#39;Tests in ...</code>即可.<br><img src=\"http://oezmbgg4j.bkt.clouddn.com/android_test_run.png\" alt=\"\"></p>\n","excerpt":"","more":"<h2 id=\"简单的例子\"><a href=\"#简单的例子\" class=\"headerlink\" title=\"简单的例子\"></a>简单的例子</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestPractice</span> <span class=\"keyword\">extends</span> <span class=\"title\">AndroidTestCase</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//测试前进行的工作</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">setUp</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.setUp();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//所有测试的类必须以test开头</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testThatDemonstratesAssertations</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> a=<span class=\"number\">5</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> b=<span class=\"number\">3</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> c=<span class=\"number\">5</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> d=<span class=\"number\">10</span>;</div><div class=\"line\"></div><div class=\"line\">        assertEquals(<span class=\"string\">\"X should be equal\"</span>,a,c);</div><div class=\"line\">        assertTrue(<span class=\"string\">\"Y should be true\"</span>,d&gt;a);</div><div class=\"line\">        assertFalse(<span class=\"string\">\"Z should be false\"</span>,a==b);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//测试之后进行的工作</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">tearDown</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.tearDown();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后点击<code>run &#39;Tests in ...</code>即可.<br><img src=\"http://oezmbgg4j.bkt.clouddn.com/android_test_run.png\" alt=\"\"></p>\n"},{"author":"ivyxjc","date":"2016-06-02T16:00:00.000Z","title":"Sunshine开发实战:架构(与官方原版有一些不同)","keywords":null,"description":"Sunshine开发实战","_content":"\n## 搜索\n通过搜索按钮,进入搜索界面,进行搜索,返回搜索结果,选择,将地址存入数据库中.\n\n## 刷新\n点击刷新按钮,联网获取数据,处理数据,若数据非null,存入数据库,从数据库中读取数据,刷新UI.\n","source":"_posts/android/开发实战/Sunshine开发实战/2016-06-03-sunshine-build-custom.md","raw":"---\nauthor: ivyxjc\ndate: 2016-06-03\ntitle: Sunshine开发实战:架构(与官方原版有一些不同)\ncategory: Android\ntags: [android]\nkeywords:\ndescription: Sunshine开发实战\n---\n\n## 搜索\n通过搜索按钮,进入搜索界面,进行搜索,返回搜索结果,选择,将地址存入数据库中.\n\n## 刷新\n点击刷新按钮,联网获取数据,处理数据,若数据非null,存入数据库,从数据库中读取数据,刷新UI.\n","slug":"android/开发实战/Sunshine开发实战/2016-06-03-sunshine-build-custom","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkj007cu8jrvdkikn5m","content":"<h2 id=\"搜索\"><a href=\"#搜索\" class=\"headerlink\" title=\"搜索\"></a>搜索</h2><p>通过搜索按钮,进入搜索界面,进行搜索,返回搜索结果,选择,将地址存入数据库中.</p>\n<h2 id=\"刷新\"><a href=\"#刷新\" class=\"headerlink\" title=\"刷新\"></a>刷新</h2><p>点击刷新按钮,联网获取数据,处理数据,若数据非null,存入数据库,从数据库中读取数据,刷新UI.</p>\n","excerpt":"","more":"<h2 id=\"搜索\"><a href=\"#搜索\" class=\"headerlink\" title=\"搜索\"></a>搜索</h2><p>通过搜索按钮,进入搜索界面,进行搜索,返回搜索结果,选择,将地址存入数据库中.</p>\n<h2 id=\"刷新\"><a href=\"#刷新\" class=\"headerlink\" title=\"刷新\"></a>刷新</h2><p>点击刷新按钮,联网获取数据,处理数据,若数据非null,存入数据库,从数据库中读取数据,刷新UI.</p>\n"},{"author":"ivyxjc","date":"2016-03-08T16:00:00.000Z","title":"ProgressBar和ProgressDialog","keywords":null,"description":"各种类型进度条的samples, 包括ProgressBar, ProgressDialog 以及如何自定义ProgressBar.","_content":"\n## 分类\n\n可以精确显示进度(可以显示刻度或者百分比)\n\n不可以精确显示进度()\n\n```java\n//显示两种进度条\nsetProgressBarVisibility(true);\nsetProgressBarIndeterminateVisibility(false);\n```\n\n还可分类为圆圈型，直线型。\n\n## ProgressBar属性\n\n```xml\nandroid:max=\"100\"\nandroid:progress=\"50\"----第一进度\nandroid:secondaryProgress=\"80\"---第二进度\nandroid:indeterminate=\"true\"---设置是否精确显示，true显示不精确显示进度，false表示精确显示进度\n```\n\n## 实例\n\n```java\nfirst=progressBar.getProgress();//获取第一进度条的进度\nsecond=progressBar.getSecondaryProgress();//获取第二进度条的进度\nmax=progressBar.getMax();//获取进度条的最大进度\nint firstPercent=(int)(first/(float)max*100);\nint seconPercent=(int)(second/(float)max*100);\ntext.setText(\"FirstProgress\"+firstPercent+\"%  SecondProgress\"+seconPercent+\"%\");\n\naddButton.setOnClickListener(this);\nreduceButton.setOnClickListener(this);\nresetButton.setOnClickListener(this);\n\npublic void onClick(View v) {\n    switch (v.getId()){\n        case R.id.add:{\n            first+=5;\n            second+=5;\n            break;\n        }\n        case R.id.reduce:{\n            first-=5;\n            second-=5;\n            break;\n        }\n        case R.id.reset:{\n            first=0;\n            second=10;\n            break;\n        }\n        default:{\n\n        }\n    }\n    //也可使用incrementProgress\n    progressBar.setProgress(first);\n    progressBar.setSecondaryProgress(second);\n    int firstPercent=(int)(first/(float)max*100);\n    int seconPercent=(int)(second/(float)max*100);\n    text.setText(\"FirstProgress\" + firstPercent + \"%  SecondProgress\" + seconPercent+\"%\");\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/progressbar.gif)\n\n## ProgressDialog\n\n```xml\n<Button\n    android:id=\"@+id/showDialog\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"Dialog\"/>\n```\n\n```java\ncase R.id.showDialog:{\n    //新建ProgressDialog的对象\n    prodialog=new ProgressDialog(MainActivity.this);\n    //设置显示风格\n    prodialog.setProgress(ProgressDialog.STYLE_HORIZONTAL);\n    //设置标题\n    prodialog.setTitle(\"IVYXJC\");\n    //设置对话框文本\n    prodialog.setMessage(\"Welcome to ProgressDialog\");\n    //设置图标\n    prodialog.setIcon(android.R.drawable.ic_dialog_alert);\n    //设定最大进度\n    prodialog.setMax(100);\n    //设定初始化已经增长到的进度\n    prodialog.incrementProgressBy(50);\n    //进度条是明确显示进度的\n    prodialog.setIndeterminate(false);\n\n    //设定一个确定按钮\n    prodialog.setButton(DialogInterface.BUTTON_POSITIVE,\"确定\",new DialogInterface.OnClickListener()\n    {\n        @Override\n        public void onClick(DialogInterface dialog, int which) {\n            Toast.makeText(MainActivity.this,\"欢迎\",Toast.LENGTH_SHORT).show();\n        }\n    });\n\n    prodialog.show();\n    //\n\n\n    break;\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/progressdialog.gif)\n\n## 自定义ProgressBar的样式\n\nProgressBar的样式是可以自定义的，可参考默认的样式更改。\n","source":"_posts/android/控件/Bar/2016-03-09-ProgressBar.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-09\ntitle: ProgressBar和ProgressDialog\ncategory: Android\ntags: [android,android_bar]\nkeywords:\ndescription: 各种类型进度条的samples, 包括ProgressBar, ProgressDialog 以及如何自定义ProgressBar.\n---\n\n## 分类\n\n可以精确显示进度(可以显示刻度或者百分比)\n\n不可以精确显示进度()\n\n```java\n//显示两种进度条\nsetProgressBarVisibility(true);\nsetProgressBarIndeterminateVisibility(false);\n```\n\n还可分类为圆圈型，直线型。\n\n## ProgressBar属性\n\n```xml\nandroid:max=\"100\"\nandroid:progress=\"50\"----第一进度\nandroid:secondaryProgress=\"80\"---第二进度\nandroid:indeterminate=\"true\"---设置是否精确显示，true显示不精确显示进度，false表示精确显示进度\n```\n\n## 实例\n\n```java\nfirst=progressBar.getProgress();//获取第一进度条的进度\nsecond=progressBar.getSecondaryProgress();//获取第二进度条的进度\nmax=progressBar.getMax();//获取进度条的最大进度\nint firstPercent=(int)(first/(float)max*100);\nint seconPercent=(int)(second/(float)max*100);\ntext.setText(\"FirstProgress\"+firstPercent+\"%  SecondProgress\"+seconPercent+\"%\");\n\naddButton.setOnClickListener(this);\nreduceButton.setOnClickListener(this);\nresetButton.setOnClickListener(this);\n\npublic void onClick(View v) {\n    switch (v.getId()){\n        case R.id.add:{\n            first+=5;\n            second+=5;\n            break;\n        }\n        case R.id.reduce:{\n            first-=5;\n            second-=5;\n            break;\n        }\n        case R.id.reset:{\n            first=0;\n            second=10;\n            break;\n        }\n        default:{\n\n        }\n    }\n    //也可使用incrementProgress\n    progressBar.setProgress(first);\n    progressBar.setSecondaryProgress(second);\n    int firstPercent=(int)(first/(float)max*100);\n    int seconPercent=(int)(second/(float)max*100);\n    text.setText(\"FirstProgress\" + firstPercent + \"%  SecondProgress\" + seconPercent+\"%\");\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/progressbar.gif)\n\n## ProgressDialog\n\n```xml\n<Button\n    android:id=\"@+id/showDialog\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"Dialog\"/>\n```\n\n```java\ncase R.id.showDialog:{\n    //新建ProgressDialog的对象\n    prodialog=new ProgressDialog(MainActivity.this);\n    //设置显示风格\n    prodialog.setProgress(ProgressDialog.STYLE_HORIZONTAL);\n    //设置标题\n    prodialog.setTitle(\"IVYXJC\");\n    //设置对话框文本\n    prodialog.setMessage(\"Welcome to ProgressDialog\");\n    //设置图标\n    prodialog.setIcon(android.R.drawable.ic_dialog_alert);\n    //设定最大进度\n    prodialog.setMax(100);\n    //设定初始化已经增长到的进度\n    prodialog.incrementProgressBy(50);\n    //进度条是明确显示进度的\n    prodialog.setIndeterminate(false);\n\n    //设定一个确定按钮\n    prodialog.setButton(DialogInterface.BUTTON_POSITIVE,\"确定\",new DialogInterface.OnClickListener()\n    {\n        @Override\n        public void onClick(DialogInterface dialog, int which) {\n            Toast.makeText(MainActivity.this,\"欢迎\",Toast.LENGTH_SHORT).show();\n        }\n    });\n\n    prodialog.show();\n    //\n\n\n    break;\n}\n```\n\n![](http://oezmbgg4j.bkt.clouddn.com/progressdialog.gif)\n\n## 自定义ProgressBar的样式\n\nProgressBar的样式是可以自定义的，可参考默认的样式更改。\n","slug":"android/控件/Bar/2016-03-09-ProgressBar","published":1,"updated":"2016-10-25T09:03:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkk007gu8jro4hoj324","content":"<h2 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h2><p>可以精确显示进度(可以显示刻度或者百分比)</p>\n<p>不可以精确显示进度()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//显示两种进度条</span></div><div class=\"line\">setProgressBarVisibility(<span class=\"keyword\">true</span>);</div><div class=\"line\">setProgressBarIndeterminateVisibility(<span class=\"keyword\">false</span>);</div></pre></td></tr></table></figure>\n<p>还可分类为圆圈型，直线型。</p>\n<h2 id=\"ProgressBar属性\"><a href=\"#ProgressBar属性\" class=\"headerlink\" title=\"ProgressBar属性\"></a>ProgressBar属性</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:max=\"100\"</div><div class=\"line\">android:progress=\"50\"----第一进度</div><div class=\"line\">android:secondaryProgress=\"80\"---第二进度</div><div class=\"line\">android:indeterminate=\"true\"---设置是否精确显示，true显示不精确显示进度，false表示精确显示进度</div></pre></td></tr></table></figure>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">first=progressBar.getProgress();<span class=\"comment\">//获取第一进度条的进度</span></div><div class=\"line\">second=progressBar.getSecondaryProgress();<span class=\"comment\">//获取第二进度条的进度</span></div><div class=\"line\">max=progressBar.getMax();<span class=\"comment\">//获取进度条的最大进度</span></div><div class=\"line\"><span class=\"keyword\">int</span> firstPercent=(<span class=\"keyword\">int</span>)(first/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\"><span class=\"keyword\">int</span> seconPercent=(<span class=\"keyword\">int</span>)(second/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\">text.setText(<span class=\"string\">\"FirstProgress\"</span>+firstPercent+<span class=\"string\">\"%  SecondProgress\"</span>+seconPercent+<span class=\"string\">\"%\"</span>);</div><div class=\"line\"></div><div class=\"line\">addButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">reduceButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">resetButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (v.getId())&#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.add:&#123;</div><div class=\"line\">            first+=<span class=\"number\">5</span>;</div><div class=\"line\">            second+=<span class=\"number\">5</span>;</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.reduce:&#123;</div><div class=\"line\">            first-=<span class=\"number\">5</span>;</div><div class=\"line\">            second-=<span class=\"number\">5</span>;</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.reset:&#123;</div><div class=\"line\">            first=<span class=\"number\">0</span>;</div><div class=\"line\">            second=<span class=\"number\">10</span>;</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">default</span>:&#123;</div><div class=\"line\"></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">//也可使用incrementProgress</span></div><div class=\"line\">    progressBar.setProgress(first);</div><div class=\"line\">    progressBar.setSecondaryProgress(second);</div><div class=\"line\">    <span class=\"keyword\">int</span> firstPercent=(<span class=\"keyword\">int</span>)(first/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\">    <span class=\"keyword\">int</span> seconPercent=(<span class=\"keyword\">int</span>)(second/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\">    text.setText(<span class=\"string\">\"FirstProgress\"</span> + firstPercent + <span class=\"string\">\"%  SecondProgress\"</span> + seconPercent+<span class=\"string\">\"%\"</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/progressbar.gif\" alt=\"\"></p>\n<h2 id=\"ProgressDialog\"><a href=\"#ProgressDialog\" class=\"headerlink\" title=\"ProgressDialog\"></a>ProgressDialog</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Button</span></span></div><div class=\"line\">    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/showDialog\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">    <span class=\"attr\">android:text</span>=<span class=\"string\">\"Dialog\"</span>/&gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> R.id.showDialog:&#123;</div><div class=\"line\">    <span class=\"comment\">//新建ProgressDialog的对象</span></div><div class=\"line\">    prodialog=<span class=\"keyword\">new</span> ProgressDialog(MainActivity.<span class=\"keyword\">this</span>);</div><div class=\"line\">    <span class=\"comment\">//设置显示风格</span></div><div class=\"line\">    prodialog.setProgress(ProgressDialog.STYLE_HORIZONTAL);</div><div class=\"line\">    <span class=\"comment\">//设置标题</span></div><div class=\"line\">    prodialog.setTitle(<span class=\"string\">\"IVYXJC\"</span>);</div><div class=\"line\">    <span class=\"comment\">//设置对话框文本</span></div><div class=\"line\">    prodialog.setMessage(<span class=\"string\">\"Welcome to ProgressDialog\"</span>);</div><div class=\"line\">    <span class=\"comment\">//设置图标</span></div><div class=\"line\">    prodialog.setIcon(android.R.drawable.ic_dialog_alert);</div><div class=\"line\">    <span class=\"comment\">//设定最大进度</span></div><div class=\"line\">    prodialog.setMax(<span class=\"number\">100</span>);</div><div class=\"line\">    <span class=\"comment\">//设定初始化已经增长到的进度</span></div><div class=\"line\">    prodialog.incrementProgressBy(<span class=\"number\">50</span>);</div><div class=\"line\">    <span class=\"comment\">//进度条是明确显示进度的</span></div><div class=\"line\">    prodialog.setIndeterminate(<span class=\"keyword\">false</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//设定一个确定按钮</span></div><div class=\"line\">    prodialog.setButton(DialogInterface.BUTTON_POSITIVE,<span class=\"string\">\"确定\"</span>,<span class=\"keyword\">new</span> DialogInterface.OnClickListener()</div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(DialogInterface dialog, <span class=\"keyword\">int</span> which)</span> </span>&#123;</div><div class=\"line\">            Toast.makeText(MainActivity.<span class=\"keyword\">this</span>,<span class=\"string\">\"欢迎\"</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    prodialog.show();</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">break</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/progressdialog.gif\" alt=\"\"></p>\n<h2 id=\"自定义ProgressBar的样式\"><a href=\"#自定义ProgressBar的样式\" class=\"headerlink\" title=\"自定义ProgressBar的样式\"></a>自定义ProgressBar的样式</h2><p>ProgressBar的样式是可以自定义的，可参考默认的样式更改。</p>\n","excerpt":"","more":"<h2 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h2><p>可以精确显示进度(可以显示刻度或者百分比)</p>\n<p>不可以精确显示进度()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//显示两种进度条</span></div><div class=\"line\">setProgressBarVisibility(<span class=\"keyword\">true</span>);</div><div class=\"line\">setProgressBarIndeterminateVisibility(<span class=\"keyword\">false</span>);</div></pre></td></tr></table></figure>\n<p>还可分类为圆圈型，直线型。</p>\n<h2 id=\"ProgressBar属性\"><a href=\"#ProgressBar属性\" class=\"headerlink\" title=\"ProgressBar属性\"></a>ProgressBar属性</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:max=\"100\"</div><div class=\"line\">android:progress=\"50\"----第一进度</div><div class=\"line\">android:secondaryProgress=\"80\"---第二进度</div><div class=\"line\">android:indeterminate=\"true\"---设置是否精确显示，true显示不精确显示进度，false表示精确显示进度</div></pre></td></tr></table></figure>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">first=progressBar.getProgress();<span class=\"comment\">//获取第一进度条的进度</span></div><div class=\"line\">second=progressBar.getSecondaryProgress();<span class=\"comment\">//获取第二进度条的进度</span></div><div class=\"line\">max=progressBar.getMax();<span class=\"comment\">//获取进度条的最大进度</span></div><div class=\"line\"><span class=\"keyword\">int</span> firstPercent=(<span class=\"keyword\">int</span>)(first/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\"><span class=\"keyword\">int</span> seconPercent=(<span class=\"keyword\">int</span>)(second/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\">text.setText(<span class=\"string\">\"FirstProgress\"</span>+firstPercent+<span class=\"string\">\"%  SecondProgress\"</span>+seconPercent+<span class=\"string\">\"%\"</span>);</div><div class=\"line\"></div><div class=\"line\">addButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">reduceButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">resetButton.setOnClickListener(<span class=\"keyword\">this</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (v.getId())&#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.add:&#123;</div><div class=\"line\">            first+=<span class=\"number\">5</span>;</div><div class=\"line\">            second+=<span class=\"number\">5</span>;</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.reduce:&#123;</div><div class=\"line\">            first-=<span class=\"number\">5</span>;</div><div class=\"line\">            second-=<span class=\"number\">5</span>;</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">case</span> R.id.reset:&#123;</div><div class=\"line\">            first=<span class=\"number\">0</span>;</div><div class=\"line\">            second=<span class=\"number\">10</span>;</div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">default</span>:&#123;</div><div class=\"line\"></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">//也可使用incrementProgress</span></div><div class=\"line\">    progressBar.setProgress(first);</div><div class=\"line\">    progressBar.setSecondaryProgress(second);</div><div class=\"line\">    <span class=\"keyword\">int</span> firstPercent=(<span class=\"keyword\">int</span>)(first/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\">    <span class=\"keyword\">int</span> seconPercent=(<span class=\"keyword\">int</span>)(second/(<span class=\"keyword\">float</span>)max*<span class=\"number\">100</span>);</div><div class=\"line\">    text.setText(<span class=\"string\">\"FirstProgress\"</span> + firstPercent + <span class=\"string\">\"%  SecondProgress\"</span> + seconPercent+<span class=\"string\">\"%\"</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/progressbar.gif\" alt=\"\"></p>\n<h2 id=\"ProgressDialog\"><a href=\"#ProgressDialog\" class=\"headerlink\" title=\"ProgressDialog\"></a>ProgressDialog</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Button</span></div><div class=\"line\">    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/showDialog\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">    <span class=\"attr\">android:text</span>=<span class=\"string\">\"Dialog\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> R.id.showDialog:&#123;</div><div class=\"line\">    <span class=\"comment\">//新建ProgressDialog的对象</span></div><div class=\"line\">    prodialog=<span class=\"keyword\">new</span> ProgressDialog(MainActivity.<span class=\"keyword\">this</span>);</div><div class=\"line\">    <span class=\"comment\">//设置显示风格</span></div><div class=\"line\">    prodialog.setProgress(ProgressDialog.STYLE_HORIZONTAL);</div><div class=\"line\">    <span class=\"comment\">//设置标题</span></div><div class=\"line\">    prodialog.setTitle(<span class=\"string\">\"IVYXJC\"</span>);</div><div class=\"line\">    <span class=\"comment\">//设置对话框文本</span></div><div class=\"line\">    prodialog.setMessage(<span class=\"string\">\"Welcome to ProgressDialog\"</span>);</div><div class=\"line\">    <span class=\"comment\">//设置图标</span></div><div class=\"line\">    prodialog.setIcon(android.R.drawable.ic_dialog_alert);</div><div class=\"line\">    <span class=\"comment\">//设定最大进度</span></div><div class=\"line\">    prodialog.setMax(<span class=\"number\">100</span>);</div><div class=\"line\">    <span class=\"comment\">//设定初始化已经增长到的进度</span></div><div class=\"line\">    prodialog.incrementProgressBy(<span class=\"number\">50</span>);</div><div class=\"line\">    <span class=\"comment\">//进度条是明确显示进度的</span></div><div class=\"line\">    prodialog.setIndeterminate(<span class=\"keyword\">false</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//设定一个确定按钮</span></div><div class=\"line\">    prodialog.setButton(DialogInterface.BUTTON_POSITIVE,<span class=\"string\">\"确定\"</span>,<span class=\"keyword\">new</span> DialogInterface.OnClickListener()</div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(DialogInterface dialog, <span class=\"keyword\">int</span> which)</span> </span>&#123;</div><div class=\"line\">            Toast.makeText(MainActivity.<span class=\"keyword\">this</span>,<span class=\"string\">\"欢迎\"</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    prodialog.show();</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">break</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oezmbgg4j.bkt.clouddn.com/progressdialog.gif\" alt=\"\"></p>\n<h2 id=\"自定义ProgressBar的样式\"><a href=\"#自定义ProgressBar的样式\" class=\"headerlink\" title=\"自定义ProgressBar的样式\"></a>自定义ProgressBar的样式</h2><p>ProgressBar的样式是可以自定义的，可参考默认的样式更改。</p>\n"},{"author":"ivyxjc","date":"2016-10-29T16:00:00.000Z","title":"爬取豆瓣","keywords":null,"description":"获取豆瓣的内容并下载至本地, 并将其中有关内容解析至mysql数据库中","_content":"\n\n断断续续谢了一个多星期, 基本上完成了豆瓣的爬虫的编写.\n\n最初还是没有准备使用框架写, 还是准备利用`requests`获取网页内容然后分析, 后来觉得这么写有点浪费时间, 而且`requests`是阻塞的, 不便于写多线程的. 另一方面, python爬虫框架Scrapy大名鼎鼎, 不学习一下有点亏, 就决定使用Scrapy来写这个爬虫.\n\n\n## Scrapy\n\n利用Scrapy来写爬虫还是比较方便简单的, 主要的代码都在`douban_spider`中, 后续处理的代码在`pipeline`中, `setting`中还可以设置爬取速率, 是否遵循robot.txt, middleware等内容.\n\n## 获取的豆瓣信息\n\n```python\n{'casts': {'1004780': '雷诺·维尔森',\n           '1017898': '约翰·古德曼',\n           '1018140': '马克·瑞安',\n           '1025212': '彼特·库伦',\n           '1025213': '托马斯·列农',\n           '1027181': '渡边谦',\n           '1031825': '弗兰克·维尔克',\n           '1031847': '凯尔希·格兰莫',\n           '1031869': '索非亚·迈尔斯',\n           '1035674': '马克·沃尔伯格',\n           '1037706': '吕良伟',\n           '1040517': '斯坦利·图齐',\n           '1040990': '李冰冰',\n           '1041214': '罗伯特·福克沃斯',\n           '1049627': '约翰·迪·玛吉欧',\n           '1162139': '王敏德 ',\n           '1165630': '提图斯·维里沃',\n           '1248294': 'T·J·米勒',\n           '1274253': '妮可拉·佩尔茨',\n           '1275106': '纪培慧',\n           '1275667': '韩庚',\n           '1312271': '巫刚',\n           '1326135': '杰克·莱诺',\n           '1340189': '阿比盖尔·克莱恩',\n           '1340928': '邹市明'},\n 'directors': {'1027776': '迈克尔·贝'},\n 'writers': {'1027468': '伊伦·克鲁格'}\n\n #----------\n 'rating_better_than': {'动作片': '46', '科幻片': '44'},\n 'release_date': {'美国/中国大陆': '2014-06-27', '香港首映': '2014-06-19'},\n #----------\n\n 'movie_aka': ['变形金刚：歼灭世纪(港)', '变形金刚4：灭绝时代', '变形金刚4', '变4', 'Transformers4'],\n  'movie_tags': ['变形金刚', '科幻', '美国', '动作', '2014', '美国电影', 'Transformers', '电影'],\n 'movie_country': ['美国', '中国大陆'],\n 'movie_genre': ['动作', '科幻'],\n  'movie_language': [ '英语','汉语普通话', '粤语'],\n  'movie_similar': ['3610047',\n                    '6082518',\n                    '10741834',\n                    '2063914',\n                    '3718424',\n                    '3231742',\n                    '6390823',\n                    '24404677',\n                    '6560058',\n                    '3217149'],\n #----------          \n\n 'movie_id': '7054604',\n 'movie_imdb_id': 'tt2109248',\n\n 'movie_length': '166',\n 'movie_name': '变形金刚4：绝迹重生 Transformers: Age of Extinction',\n 'movie_rating': '6.6',\n 'movie_rating_distribute': ['11.0', '28.4', '43.5', '13.1', '4.1'],\n 'movie_rating_people_num': '178399',\n\n }\n```\n\n以变形金刚四为例, 数据根据格式主要分成四类:\n1. 导演, 编剧, 演员\n2. 数据格式为map的数据\n3. 数据格式为list的数据\n4. 数据格式为str的数据\n","source":"_posts/python/Spider/douban/2016-10-30-douban-spider.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-30\ntitle: 爬取豆瓣\ncategory: Python\ntags: [python,spider,xml]\nkeywords:\ndescription: 获取豆瓣的内容并下载至本地, 并将其中有关内容解析至mysql数据库中\n---\n\n\n断断续续谢了一个多星期, 基本上完成了豆瓣的爬虫的编写.\n\n最初还是没有准备使用框架写, 还是准备利用`requests`获取网页内容然后分析, 后来觉得这么写有点浪费时间, 而且`requests`是阻塞的, 不便于写多线程的. 另一方面, python爬虫框架Scrapy大名鼎鼎, 不学习一下有点亏, 就决定使用Scrapy来写这个爬虫.\n\n\n## Scrapy\n\n利用Scrapy来写爬虫还是比较方便简单的, 主要的代码都在`douban_spider`中, 后续处理的代码在`pipeline`中, `setting`中还可以设置爬取速率, 是否遵循robot.txt, middleware等内容.\n\n## 获取的豆瓣信息\n\n```python\n{'casts': {'1004780': '雷诺·维尔森',\n           '1017898': '约翰·古德曼',\n           '1018140': '马克·瑞安',\n           '1025212': '彼特·库伦',\n           '1025213': '托马斯·列农',\n           '1027181': '渡边谦',\n           '1031825': '弗兰克·维尔克',\n           '1031847': '凯尔希·格兰莫',\n           '1031869': '索非亚·迈尔斯',\n           '1035674': '马克·沃尔伯格',\n           '1037706': '吕良伟',\n           '1040517': '斯坦利·图齐',\n           '1040990': '李冰冰',\n           '1041214': '罗伯特·福克沃斯',\n           '1049627': '约翰·迪·玛吉欧',\n           '1162139': '王敏德 ',\n           '1165630': '提图斯·维里沃',\n           '1248294': 'T·J·米勒',\n           '1274253': '妮可拉·佩尔茨',\n           '1275106': '纪培慧',\n           '1275667': '韩庚',\n           '1312271': '巫刚',\n           '1326135': '杰克·莱诺',\n           '1340189': '阿比盖尔·克莱恩',\n           '1340928': '邹市明'},\n 'directors': {'1027776': '迈克尔·贝'},\n 'writers': {'1027468': '伊伦·克鲁格'}\n\n #----------\n 'rating_better_than': {'动作片': '46', '科幻片': '44'},\n 'release_date': {'美国/中国大陆': '2014-06-27', '香港首映': '2014-06-19'},\n #----------\n\n 'movie_aka': ['变形金刚：歼灭世纪(港)', '变形金刚4：灭绝时代', '变形金刚4', '变4', 'Transformers4'],\n  'movie_tags': ['变形金刚', '科幻', '美国', '动作', '2014', '美国电影', 'Transformers', '电影'],\n 'movie_country': ['美国', '中国大陆'],\n 'movie_genre': ['动作', '科幻'],\n  'movie_language': [ '英语','汉语普通话', '粤语'],\n  'movie_similar': ['3610047',\n                    '6082518',\n                    '10741834',\n                    '2063914',\n                    '3718424',\n                    '3231742',\n                    '6390823',\n                    '24404677',\n                    '6560058',\n                    '3217149'],\n #----------          \n\n 'movie_id': '7054604',\n 'movie_imdb_id': 'tt2109248',\n\n 'movie_length': '166',\n 'movie_name': '变形金刚4：绝迹重生 Transformers: Age of Extinction',\n 'movie_rating': '6.6',\n 'movie_rating_distribute': ['11.0', '28.4', '43.5', '13.1', '4.1'],\n 'movie_rating_people_num': '178399',\n\n }\n```\n\n以变形金刚四为例, 数据根据格式主要分成四类:\n1. 导演, 编剧, 演员\n2. 数据格式为map的数据\n3. 数据格式为list的数据\n4. 数据格式为str的数据\n","slug":"python/Spider/douban/2016-10-30-douban-spider","published":1,"updated":"2016-11-10T12:49:06.831Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkr007ju8jrgefg4sho","content":"<p>断断续续谢了一个多星期, 基本上完成了豆瓣的爬虫的编写.</p>\n<p>最初还是没有准备使用框架写, 还是准备利用<code>requests</code>获取网页内容然后分析, 后来觉得这么写有点浪费时间, 而且<code>requests</code>是阻塞的, 不便于写多线程的. 另一方面, python爬虫框架Scrapy大名鼎鼎, 不学习一下有点亏, 就决定使用Scrapy来写这个爬虫.</p>\n<h2 id=\"Scrapy\"><a href=\"#Scrapy\" class=\"headerlink\" title=\"Scrapy\"></a>Scrapy</h2><p>利用Scrapy来写爬虫还是比较方便简单的, 主要的代码都在<code>douban_spider</code>中, 后续处理的代码在<code>pipeline</code>中, <code>setting</code>中还可以设置爬取速率, 是否遵循robot.txt, middleware等内容.</p>\n<h2 id=\"获取的豆瓣信息\"><a href=\"#获取的豆瓣信息\" class=\"headerlink\" title=\"获取的豆瓣信息\"></a>获取的豆瓣信息</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;<span class=\"string\">'casts'</span>: &#123;<span class=\"string\">'1004780'</span>: <span class=\"string\">'雷诺·维尔森'</span>,</div><div class=\"line\">           <span class=\"string\">'1017898'</span>: <span class=\"string\">'约翰·古德曼'</span>,</div><div class=\"line\">           <span class=\"string\">'1018140'</span>: <span class=\"string\">'马克·瑞安'</span>,</div><div class=\"line\">           <span class=\"string\">'1025212'</span>: <span class=\"string\">'彼特·库伦'</span>,</div><div class=\"line\">           <span class=\"string\">'1025213'</span>: <span class=\"string\">'托马斯·列农'</span>,</div><div class=\"line\">           <span class=\"string\">'1027181'</span>: <span class=\"string\">'渡边谦'</span>,</div><div class=\"line\">           <span class=\"string\">'1031825'</span>: <span class=\"string\">'弗兰克·维尔克'</span>,</div><div class=\"line\">           <span class=\"string\">'1031847'</span>: <span class=\"string\">'凯尔希·格兰莫'</span>,</div><div class=\"line\">           <span class=\"string\">'1031869'</span>: <span class=\"string\">'索非亚·迈尔斯'</span>,</div><div class=\"line\">           <span class=\"string\">'1035674'</span>: <span class=\"string\">'马克·沃尔伯格'</span>,</div><div class=\"line\">           <span class=\"string\">'1037706'</span>: <span class=\"string\">'吕良伟'</span>,</div><div class=\"line\">           <span class=\"string\">'1040517'</span>: <span class=\"string\">'斯坦利·图齐'</span>,</div><div class=\"line\">           <span class=\"string\">'1040990'</span>: <span class=\"string\">'李冰冰'</span>,</div><div class=\"line\">           <span class=\"string\">'1041214'</span>: <span class=\"string\">'罗伯特·福克沃斯'</span>,</div><div class=\"line\">           <span class=\"string\">'1049627'</span>: <span class=\"string\">'约翰·迪·玛吉欧'</span>,</div><div class=\"line\">           <span class=\"string\">'1162139'</span>: <span class=\"string\">'王敏德 '</span>,</div><div class=\"line\">           <span class=\"string\">'1165630'</span>: <span class=\"string\">'提图斯·维里沃'</span>,</div><div class=\"line\">           <span class=\"string\">'1248294'</span>: <span class=\"string\">'T·J·米勒'</span>,</div><div class=\"line\">           <span class=\"string\">'1274253'</span>: <span class=\"string\">'妮可拉·佩尔茨'</span>,</div><div class=\"line\">           <span class=\"string\">'1275106'</span>: <span class=\"string\">'纪培慧'</span>,</div><div class=\"line\">           <span class=\"string\">'1275667'</span>: <span class=\"string\">'韩庚'</span>,</div><div class=\"line\">           <span class=\"string\">'1312271'</span>: <span class=\"string\">'巫刚'</span>,</div><div class=\"line\">           <span class=\"string\">'1326135'</span>: <span class=\"string\">'杰克·莱诺'</span>,</div><div class=\"line\">           <span class=\"string\">'1340189'</span>: <span class=\"string\">'阿比盖尔·克莱恩'</span>,</div><div class=\"line\">           <span class=\"string\">'1340928'</span>: <span class=\"string\">'邹市明'</span>&#125;,</div><div class=\"line\"> <span class=\"string\">'directors'</span>: &#123;<span class=\"string\">'1027776'</span>: <span class=\"string\">'迈克尔·贝'</span>&#125;,</div><div class=\"line\"> <span class=\"string\">'writers'</span>: &#123;<span class=\"string\">'1027468'</span>: <span class=\"string\">'伊伦·克鲁格'</span>&#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">#----------</span></div><div class=\"line\"> <span class=\"string\">'rating_better_than'</span>: &#123;<span class=\"string\">'动作片'</span>: <span class=\"string\">'46'</span>, <span class=\"string\">'科幻片'</span>: <span class=\"string\">'44'</span>&#125;,</div><div class=\"line\"> <span class=\"string\">'release_date'</span>: &#123;<span class=\"string\">'美国/中国大陆'</span>: <span class=\"string\">'2014-06-27'</span>, <span class=\"string\">'香港首映'</span>: <span class=\"string\">'2014-06-19'</span>&#125;,</div><div class=\"line\"> <span class=\"comment\">#----------</span></div><div class=\"line\"></div><div class=\"line\"> <span class=\"string\">'movie_aka'</span>: [<span class=\"string\">'变形金刚：歼灭世纪(港)'</span>, <span class=\"string\">'变形金刚4：灭绝时代'</span>, <span class=\"string\">'变形金刚4'</span>, <span class=\"string\">'变4'</span>, <span class=\"string\">'Transformers4'</span>],</div><div class=\"line\">  <span class=\"string\">'movie_tags'</span>: [<span class=\"string\">'变形金刚'</span>, <span class=\"string\">'科幻'</span>, <span class=\"string\">'美国'</span>, <span class=\"string\">'动作'</span>, <span class=\"string\">'2014'</span>, <span class=\"string\">'美国电影'</span>, <span class=\"string\">'Transformers'</span>, <span class=\"string\">'电影'</span>],</div><div class=\"line\"> <span class=\"string\">'movie_country'</span>: [<span class=\"string\">'美国'</span>, <span class=\"string\">'中国大陆'</span>],</div><div class=\"line\"> <span class=\"string\">'movie_genre'</span>: [<span class=\"string\">'动作'</span>, <span class=\"string\">'科幻'</span>],</div><div class=\"line\">  <span class=\"string\">'movie_language'</span>: [ <span class=\"string\">'英语'</span>,<span class=\"string\">'汉语普通话'</span>, <span class=\"string\">'粤语'</span>],</div><div class=\"line\">  <span class=\"string\">'movie_similar'</span>: [<span class=\"string\">'3610047'</span>,</div><div class=\"line\">                    <span class=\"string\">'6082518'</span>,</div><div class=\"line\">                    <span class=\"string\">'10741834'</span>,</div><div class=\"line\">                    <span class=\"string\">'2063914'</span>,</div><div class=\"line\">                    <span class=\"string\">'3718424'</span>,</div><div class=\"line\">                    <span class=\"string\">'3231742'</span>,</div><div class=\"line\">                    <span class=\"string\">'6390823'</span>,</div><div class=\"line\">                    <span class=\"string\">'24404677'</span>,</div><div class=\"line\">                    <span class=\"string\">'6560058'</span>,</div><div class=\"line\">                    <span class=\"string\">'3217149'</span>],</div><div class=\"line\"> <span class=\"comment\">#----------          </span></div><div class=\"line\"></div><div class=\"line\"> <span class=\"string\">'movie_id'</span>: <span class=\"string\">'7054604'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_imdb_id'</span>: <span class=\"string\">'tt2109248'</span>,</div><div class=\"line\"></div><div class=\"line\"> <span class=\"string\">'movie_length'</span>: <span class=\"string\">'166'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_name'</span>: <span class=\"string\">'变形金刚4：绝迹重生 Transformers: Age of Extinction'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_rating'</span>: <span class=\"string\">'6.6'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_rating_distribute'</span>: [<span class=\"string\">'11.0'</span>, <span class=\"string\">'28.4'</span>, <span class=\"string\">'43.5'</span>, <span class=\"string\">'13.1'</span>, <span class=\"string\">'4.1'</span>],</div><div class=\"line\"> <span class=\"string\">'movie_rating_people_num'</span>: <span class=\"string\">'178399'</span>,</div><div class=\"line\"></div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p>以变形金刚四为例, 数据根据格式主要分成四类:</p>\n<ol>\n<li>导演, 编剧, 演员</li>\n<li>数据格式为map的数据</li>\n<li>数据格式为list的数据</li>\n<li>数据格式为str的数据</li>\n</ol>\n","excerpt":"","more":"<p>断断续续谢了一个多星期, 基本上完成了豆瓣的爬虫的编写.</p>\n<p>最初还是没有准备使用框架写, 还是准备利用<code>requests</code>获取网页内容然后分析, 后来觉得这么写有点浪费时间, 而且<code>requests</code>是阻塞的, 不便于写多线程的. 另一方面, python爬虫框架Scrapy大名鼎鼎, 不学习一下有点亏, 就决定使用Scrapy来写这个爬虫.</p>\n<h2 id=\"Scrapy\"><a href=\"#Scrapy\" class=\"headerlink\" title=\"Scrapy\"></a>Scrapy</h2><p>利用Scrapy来写爬虫还是比较方便简单的, 主要的代码都在<code>douban_spider</code>中, 后续处理的代码在<code>pipeline</code>中, <code>setting</code>中还可以设置爬取速率, 是否遵循robot.txt, middleware等内容.</p>\n<h2 id=\"获取的豆瓣信息\"><a href=\"#获取的豆瓣信息\" class=\"headerlink\" title=\"获取的豆瓣信息\"></a>获取的豆瓣信息</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;<span class=\"string\">'casts'</span>: &#123;<span class=\"string\">'1004780'</span>: <span class=\"string\">'雷诺·维尔森'</span>,</div><div class=\"line\">           <span class=\"string\">'1017898'</span>: <span class=\"string\">'约翰·古德曼'</span>,</div><div class=\"line\">           <span class=\"string\">'1018140'</span>: <span class=\"string\">'马克·瑞安'</span>,</div><div class=\"line\">           <span class=\"string\">'1025212'</span>: <span class=\"string\">'彼特·库伦'</span>,</div><div class=\"line\">           <span class=\"string\">'1025213'</span>: <span class=\"string\">'托马斯·列农'</span>,</div><div class=\"line\">           <span class=\"string\">'1027181'</span>: <span class=\"string\">'渡边谦'</span>,</div><div class=\"line\">           <span class=\"string\">'1031825'</span>: <span class=\"string\">'弗兰克·维尔克'</span>,</div><div class=\"line\">           <span class=\"string\">'1031847'</span>: <span class=\"string\">'凯尔希·格兰莫'</span>,</div><div class=\"line\">           <span class=\"string\">'1031869'</span>: <span class=\"string\">'索非亚·迈尔斯'</span>,</div><div class=\"line\">           <span class=\"string\">'1035674'</span>: <span class=\"string\">'马克·沃尔伯格'</span>,</div><div class=\"line\">           <span class=\"string\">'1037706'</span>: <span class=\"string\">'吕良伟'</span>,</div><div class=\"line\">           <span class=\"string\">'1040517'</span>: <span class=\"string\">'斯坦利·图齐'</span>,</div><div class=\"line\">           <span class=\"string\">'1040990'</span>: <span class=\"string\">'李冰冰'</span>,</div><div class=\"line\">           <span class=\"string\">'1041214'</span>: <span class=\"string\">'罗伯特·福克沃斯'</span>,</div><div class=\"line\">           <span class=\"string\">'1049627'</span>: <span class=\"string\">'约翰·迪·玛吉欧'</span>,</div><div class=\"line\">           <span class=\"string\">'1162139'</span>: <span class=\"string\">'王敏德 '</span>,</div><div class=\"line\">           <span class=\"string\">'1165630'</span>: <span class=\"string\">'提图斯·维里沃'</span>,</div><div class=\"line\">           <span class=\"string\">'1248294'</span>: <span class=\"string\">'T·J·米勒'</span>,</div><div class=\"line\">           <span class=\"string\">'1274253'</span>: <span class=\"string\">'妮可拉·佩尔茨'</span>,</div><div class=\"line\">           <span class=\"string\">'1275106'</span>: <span class=\"string\">'纪培慧'</span>,</div><div class=\"line\">           <span class=\"string\">'1275667'</span>: <span class=\"string\">'韩庚'</span>,</div><div class=\"line\">           <span class=\"string\">'1312271'</span>: <span class=\"string\">'巫刚'</span>,</div><div class=\"line\">           <span class=\"string\">'1326135'</span>: <span class=\"string\">'杰克·莱诺'</span>,</div><div class=\"line\">           <span class=\"string\">'1340189'</span>: <span class=\"string\">'阿比盖尔·克莱恩'</span>,</div><div class=\"line\">           <span class=\"string\">'1340928'</span>: <span class=\"string\">'邹市明'</span>&#125;,</div><div class=\"line\"> <span class=\"string\">'directors'</span>: &#123;<span class=\"string\">'1027776'</span>: <span class=\"string\">'迈克尔·贝'</span>&#125;,</div><div class=\"line\"> <span class=\"string\">'writers'</span>: &#123;<span class=\"string\">'1027468'</span>: <span class=\"string\">'伊伦·克鲁格'</span>&#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">#----------</span></div><div class=\"line\"> <span class=\"string\">'rating_better_than'</span>: &#123;<span class=\"string\">'动作片'</span>: <span class=\"string\">'46'</span>, <span class=\"string\">'科幻片'</span>: <span class=\"string\">'44'</span>&#125;,</div><div class=\"line\"> <span class=\"string\">'release_date'</span>: &#123;<span class=\"string\">'美国/中国大陆'</span>: <span class=\"string\">'2014-06-27'</span>, <span class=\"string\">'香港首映'</span>: <span class=\"string\">'2014-06-19'</span>&#125;,</div><div class=\"line\"> <span class=\"comment\">#----------</span></div><div class=\"line\"></div><div class=\"line\"> <span class=\"string\">'movie_aka'</span>: [<span class=\"string\">'变形金刚：歼灭世纪(港)'</span>, <span class=\"string\">'变形金刚4：灭绝时代'</span>, <span class=\"string\">'变形金刚4'</span>, <span class=\"string\">'变4'</span>, <span class=\"string\">'Transformers4'</span>],</div><div class=\"line\">  <span class=\"string\">'movie_tags'</span>: [<span class=\"string\">'变形金刚'</span>, <span class=\"string\">'科幻'</span>, <span class=\"string\">'美国'</span>, <span class=\"string\">'动作'</span>, <span class=\"string\">'2014'</span>, <span class=\"string\">'美国电影'</span>, <span class=\"string\">'Transformers'</span>, <span class=\"string\">'电影'</span>],</div><div class=\"line\"> <span class=\"string\">'movie_country'</span>: [<span class=\"string\">'美国'</span>, <span class=\"string\">'中国大陆'</span>],</div><div class=\"line\"> <span class=\"string\">'movie_genre'</span>: [<span class=\"string\">'动作'</span>, <span class=\"string\">'科幻'</span>],</div><div class=\"line\">  <span class=\"string\">'movie_language'</span>: [ <span class=\"string\">'英语'</span>,<span class=\"string\">'汉语普通话'</span>, <span class=\"string\">'粤语'</span>],</div><div class=\"line\">  <span class=\"string\">'movie_similar'</span>: [<span class=\"string\">'3610047'</span>,</div><div class=\"line\">                    <span class=\"string\">'6082518'</span>,</div><div class=\"line\">                    <span class=\"string\">'10741834'</span>,</div><div class=\"line\">                    <span class=\"string\">'2063914'</span>,</div><div class=\"line\">                    <span class=\"string\">'3718424'</span>,</div><div class=\"line\">                    <span class=\"string\">'3231742'</span>,</div><div class=\"line\">                    <span class=\"string\">'6390823'</span>,</div><div class=\"line\">                    <span class=\"string\">'24404677'</span>,</div><div class=\"line\">                    <span class=\"string\">'6560058'</span>,</div><div class=\"line\">                    <span class=\"string\">'3217149'</span>],</div><div class=\"line\"> <span class=\"comment\">#----------          </span></div><div class=\"line\"></div><div class=\"line\"> <span class=\"string\">'movie_id'</span>: <span class=\"string\">'7054604'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_imdb_id'</span>: <span class=\"string\">'tt2109248'</span>,</div><div class=\"line\"></div><div class=\"line\"> <span class=\"string\">'movie_length'</span>: <span class=\"string\">'166'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_name'</span>: <span class=\"string\">'变形金刚4：绝迹重生 Transformers: Age of Extinction'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_rating'</span>: <span class=\"string\">'6.6'</span>,</div><div class=\"line\"> <span class=\"string\">'movie_rating_distribute'</span>: [<span class=\"string\">'11.0'</span>, <span class=\"string\">'28.4'</span>, <span class=\"string\">'43.5'</span>, <span class=\"string\">'13.1'</span>, <span class=\"string\">'4.1'</span>],</div><div class=\"line\"> <span class=\"string\">'movie_rating_people_num'</span>: <span class=\"string\">'178399'</span>,</div><div class=\"line\"></div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p>以变形金刚四为例, 数据根据格式主要分成四类:</p>\n<ol>\n<li>导演, 编剧, 演员</li>\n<li>数据格式为map的数据</li>\n<li>数据格式为list的数据</li>\n<li>数据格式为str的数据</li>\n</ol>\n"},{"author":"ivyxjc","date":"2016-03-26T16:00:00.000Z","title":"Python Spider入门","keywords":null,"description":"利用`urllib.request.Request(url)`获取网络中的信息. 且可以设置Header, http methods, 代理等.","_content":"\n## 添加header和data\n\n```python\nrequest=urllib.request.Request(url)\nresponse=urllib.request.urlopen(request)\n#response是一个http.client.HTTPResponse对象\nprint(response.geturl()) #获取网址\nprint(response.info())  #获取信息\nprint(response.getcode()) # http状态码\n\nhtml=response.read()\n```\n\n`urllib.request.Request(url, data=None, headers={}, origin_req_host=None, unverifiable=False, method=None)`\n1.data参数：the HTTP request will be a POST instead of a GET when the data parameter is provided.data should be a buffer in the standard application/x-www-form-urlencoded format. The urllib.parse.urlencode() function takes a mapping or sequence of 2-tuples and returns a string in this format.<br>\n\n```python\ndata={}\ndata['type']='AUTO'\ndata['i']=content\ndata['doctype']='json'\ndata['xmlVersion']=1.8\ndata['keyfrom']='fanyi.web'\ndata['ue']='UTF-8'\ndata['action']='FY_BY_CLICKBUTTON'\ndata['typoResult']='true'\n\ndata=urllib.parse.urlencode(data).encode('utf-8')\n```\n\n2.headers：一个字典，可以直接从浏览器中复制过来\n\n```python\nheader={}\n#添加header的第一种方法\nheader['User-Agent']='Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'\nrequest=urllib.request.Request(url,data,header)\n#也可使用以下方法\nrequest.add_header('User-Agent','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0')\n```\n\n\n## 获取Response Headers\n\n下面代码是用来判断 网页是否使用`gzip`压缩过。\n```python\nfor i in response.getheaders():\n    if i[0]==\"Content-Encoding\":\n        if(i[-1]==\"gzip\"):\n            html=gzip.decompress(html)\n```\n\n## 使用代理\n\n\n\n1.参数是一个字典{'类型’：‘代理ip:端口号’}\n`proxy_support=urllib.request.ProxyHandler({})`\n2.定制、创建一个openner\n`opener=urllib.request.build_opener(proxy_support)\n3a.安装opener\n`urllib.request.install_opener(opener)`\n3b.调用opener\n`opener.open(url)`\n\n### 代码\n\n```python\nproxy_support=urllib.request.ProxyHandler({'http':random.choice(iplist)})\n\nopener=urllib.request.build_opener(proxy_support)\nopener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0')]\nurllib.request.install_opener(opener)\n\nreq=urllib.request.Request(url)\nresponse=urllib.request.urlopen(req)\n```\n\n\n## 爬知乎图片\n\n```python\nimport urllib.request\nimport os\nimport random\n\n#打开网页\ndef url_open(url):\n    iplist=[\n        '49.77.22.1:8118',\n        '58.134.102.3:12696',\n        '120.26.213.55:9999'...]\n\n    proxy_support=urllib.request.ProxyHandler({'http':random.choice(iplist)})\n\n    opener=urllib.request.build_opener(proxy_support)\n    opener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0')]\n\n    urllib.request.install_opener(opener)\n\n    req=urllib.request.Request(url)\n    response=urllib.request.urlopen(req)\n    html=response.read()\n    return html\n\n#获取图片地址，返回图片地址的list\ndef get_imgs(url):\n    html=url_open(url).decode('utf-8')\n\n    img_address=[]\n    a=html.find('data-original')\n    while(a!=-1):\n        b=html.find('.jpg',a,a+300)\n        if(b!=-1):\n            # print(html[a+15:b+4])\n            img_address.append(html[a+15:b+4])\n        else:\n            b=a+9\n        a=html.find('data-original=',b)\n\n\n    for i in img_address:\n        print(i)\n\n    return img_address\n\n#存储到本地\ndef save_imgs(img_address):\n\n    for i in img_address:\n        # print(i)\n        filename=i.split('/')[-1]\n        with open(filename,'wb') as f:\n            img=url_open(i)\n            f.write(img)\n\n\ndef zhihuPic(url,folder=\"zhihu\"):\n    if(os.path.exists(folder)):\n        os.chdir(folder)\n    else:\n        os.mkdir(folder)\n        os.chdir(folder)\n    img_address=get_imgs(url)\n    save_imgs(img_address)\n\n\n\n\n\nif __name__=='__main__':\n    zhihuPic(\"https://www.zhihu.com/question/22070147\")\n```\n","source":"_posts/python/Spider/基础知识/2016-03-27-python-spider.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-27\ntitle: Python Spider入门\ncategory: Python\ntags: [python,spider,pythonspider]\nkeywords:\ndescription: 利用`urllib.request.Request(url)`获取网络中的信息. 且可以设置Header, http methods, 代理等.\n---\n\n## 添加header和data\n\n```python\nrequest=urllib.request.Request(url)\nresponse=urllib.request.urlopen(request)\n#response是一个http.client.HTTPResponse对象\nprint(response.geturl()) #获取网址\nprint(response.info())  #获取信息\nprint(response.getcode()) # http状态码\n\nhtml=response.read()\n```\n\n`urllib.request.Request(url, data=None, headers={}, origin_req_host=None, unverifiable=False, method=None)`\n1.data参数：the HTTP request will be a POST instead of a GET when the data parameter is provided.data should be a buffer in the standard application/x-www-form-urlencoded format. The urllib.parse.urlencode() function takes a mapping or sequence of 2-tuples and returns a string in this format.<br>\n\n```python\ndata={}\ndata['type']='AUTO'\ndata['i']=content\ndata['doctype']='json'\ndata['xmlVersion']=1.8\ndata['keyfrom']='fanyi.web'\ndata['ue']='UTF-8'\ndata['action']='FY_BY_CLICKBUTTON'\ndata['typoResult']='true'\n\ndata=urllib.parse.urlencode(data).encode('utf-8')\n```\n\n2.headers：一个字典，可以直接从浏览器中复制过来\n\n```python\nheader={}\n#添加header的第一种方法\nheader['User-Agent']='Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'\nrequest=urllib.request.Request(url,data,header)\n#也可使用以下方法\nrequest.add_header('User-Agent','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0')\n```\n\n\n## 获取Response Headers\n\n下面代码是用来判断 网页是否使用`gzip`压缩过。\n```python\nfor i in response.getheaders():\n    if i[0]==\"Content-Encoding\":\n        if(i[-1]==\"gzip\"):\n            html=gzip.decompress(html)\n```\n\n## 使用代理\n\n\n\n1.参数是一个字典{'类型’：‘代理ip:端口号’}\n`proxy_support=urllib.request.ProxyHandler({})`\n2.定制、创建一个openner\n`opener=urllib.request.build_opener(proxy_support)\n3a.安装opener\n`urllib.request.install_opener(opener)`\n3b.调用opener\n`opener.open(url)`\n\n### 代码\n\n```python\nproxy_support=urllib.request.ProxyHandler({'http':random.choice(iplist)})\n\nopener=urllib.request.build_opener(proxy_support)\nopener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0')]\nurllib.request.install_opener(opener)\n\nreq=urllib.request.Request(url)\nresponse=urllib.request.urlopen(req)\n```\n\n\n## 爬知乎图片\n\n```python\nimport urllib.request\nimport os\nimport random\n\n#打开网页\ndef url_open(url):\n    iplist=[\n        '49.77.22.1:8118',\n        '58.134.102.3:12696',\n        '120.26.213.55:9999'...]\n\n    proxy_support=urllib.request.ProxyHandler({'http':random.choice(iplist)})\n\n    opener=urllib.request.build_opener(proxy_support)\n    opener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0')]\n\n    urllib.request.install_opener(opener)\n\n    req=urllib.request.Request(url)\n    response=urllib.request.urlopen(req)\n    html=response.read()\n    return html\n\n#获取图片地址，返回图片地址的list\ndef get_imgs(url):\n    html=url_open(url).decode('utf-8')\n\n    img_address=[]\n    a=html.find('data-original')\n    while(a!=-1):\n        b=html.find('.jpg',a,a+300)\n        if(b!=-1):\n            # print(html[a+15:b+4])\n            img_address.append(html[a+15:b+4])\n        else:\n            b=a+9\n        a=html.find('data-original=',b)\n\n\n    for i in img_address:\n        print(i)\n\n    return img_address\n\n#存储到本地\ndef save_imgs(img_address):\n\n    for i in img_address:\n        # print(i)\n        filename=i.split('/')[-1]\n        with open(filename,'wb') as f:\n            img=url_open(i)\n            f.write(img)\n\n\ndef zhihuPic(url,folder=\"zhihu\"):\n    if(os.path.exists(folder)):\n        os.chdir(folder)\n    else:\n        os.mkdir(folder)\n        os.chdir(folder)\n    img_address=get_imgs(url)\n    save_imgs(img_address)\n\n\n\n\n\nif __name__=='__main__':\n    zhihuPic(\"https://www.zhihu.com/question/22070147\")\n```\n","slug":"python/Spider/基础知识/2016-03-27-python-spider","published":1,"updated":"2016-10-25T09:03:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgks007nu8jrljarzequ","content":"<h2 id=\"添加header和data\"><a href=\"#添加header和data\" class=\"headerlink\" title=\"添加header和data\"></a>添加header和data</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">request=urllib.request.Request(url)</div><div class=\"line\">response=urllib.request.urlopen(request)</div><div class=\"line\"><span class=\"comment\">#response是一个http.client.HTTPResponse对象</span></div><div class=\"line\">print(response.geturl()) <span class=\"comment\">#获取网址</span></div><div class=\"line\">print(response.info())  <span class=\"comment\">#获取信息</span></div><div class=\"line\">print(response.getcode()) <span class=\"comment\"># http状态码</span></div><div class=\"line\"></div><div class=\"line\">html=response.read()</div></pre></td></tr></table></figure>\n<p><code>urllib.request.Request(url, data=None, headers={}, origin_req_host=None, unverifiable=False, method=None)</code><br>1.data参数：the HTTP request will be a POST instead of a GET when the data parameter is provided.data should be a buffer in the standard application/x-www-form-urlencoded format. The urllib.parse.urlencode() function takes a mapping or sequence of 2-tuples and returns a string in this format.<br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">data=&#123;&#125;</div><div class=\"line\">data[<span class=\"string\">'type'</span>]=<span class=\"string\">'AUTO'</span></div><div class=\"line\">data[<span class=\"string\">'i'</span>]=content</div><div class=\"line\">data[<span class=\"string\">'doctype'</span>]=<span class=\"string\">'json'</span></div><div class=\"line\">data[<span class=\"string\">'xmlVersion'</span>]=<span class=\"number\">1.8</span></div><div class=\"line\">data[<span class=\"string\">'keyfrom'</span>]=<span class=\"string\">'fanyi.web'</span></div><div class=\"line\">data[<span class=\"string\">'ue'</span>]=<span class=\"string\">'UTF-8'</span></div><div class=\"line\">data[<span class=\"string\">'action'</span>]=<span class=\"string\">'FY_BY_CLICKBUTTON'</span></div><div class=\"line\">data[<span class=\"string\">'typoResult'</span>]=<span class=\"string\">'true'</span></div><div class=\"line\"></div><div class=\"line\">data=urllib.parse.urlencode(data).encode(<span class=\"string\">'utf-8'</span>)</div></pre></td></tr></table></figure>\n<p>2.headers：一个字典，可以直接从浏览器中复制过来</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">header=&#123;&#125;</div><div class=\"line\"><span class=\"comment\">#添加header的第一种方法</span></div><div class=\"line\">header[<span class=\"string\">'User-Agent'</span>]=<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span></div><div class=\"line\">request=urllib.request.Request(url,data,header)</div><div class=\"line\"><span class=\"comment\">#也可使用以下方法</span></div><div class=\"line\">request.add_header(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span>)</div></pre></td></tr></table></figure>\n<h2 id=\"获取Response-Headers\"><a href=\"#获取Response-Headers\" class=\"headerlink\" title=\"获取Response Headers\"></a>获取Response Headers</h2><p>下面代码是用来判断 网页是否使用<code>gzip</code>压缩过。<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> response.getheaders():</div><div class=\"line\">    <span class=\"keyword\">if</span> i[<span class=\"number\">0</span>]==<span class=\"string\">\"Content-Encoding\"</span>:</div><div class=\"line\">        <span class=\"keyword\">if</span>(i[<span class=\"number\">-1</span>]==<span class=\"string\">\"gzip\"</span>):</div><div class=\"line\">            html=gzip.decompress(html)</div></pre></td></tr></table></figure></p>\n<h2 id=\"使用代理\"><a href=\"#使用代理\" class=\"headerlink\" title=\"使用代理\"></a>使用代理</h2><p>1.参数是一个字典{‘类型’：‘代理ip:端口号’}<br><code>proxy_support=urllib.request.ProxyHandler({})</code><br>2.定制、创建一个openner<br><code>opener=urllib.request.build_opener(proxy_support)\n3a.安装opener</code>urllib.request.install_opener(opener)<code>3b.调用opener</code>opener.open(url)`</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">proxy_support=urllib.request.ProxyHandler(&#123;<span class=\"string\">'http'</span>:random.choice(iplist)&#125;)</div><div class=\"line\"></div><div class=\"line\">opener=urllib.request.build_opener(proxy_support)</div><div class=\"line\">opener.addheaders=[(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span>)]</div><div class=\"line\">urllib.request.install_opener(opener)</div><div class=\"line\"></div><div class=\"line\">req=urllib.request.Request(url)</div><div class=\"line\">response=urllib.request.urlopen(req)</div></pre></td></tr></table></figure>\n<h2 id=\"爬知乎图片\"><a href=\"#爬知乎图片\" class=\"headerlink\" title=\"爬知乎图片\"></a>爬知乎图片</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib.request</div><div class=\"line\"><span class=\"keyword\">import</span> os</div><div class=\"line\"><span class=\"keyword\">import</span> random</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#打开网页</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">url_open</span><span class=\"params\">(url)</span>:</span></div><div class=\"line\">    iplist=[</div><div class=\"line\">        <span class=\"string\">'49.77.22.1:8118'</span>,</div><div class=\"line\">        <span class=\"string\">'58.134.102.3:12696'</span>,</div><div class=\"line\">        <span class=\"string\">'120.26.213.55:9999'</span>...]</div><div class=\"line\"></div><div class=\"line\">    proxy_support=urllib.request.ProxyHandler(&#123;<span class=\"string\">'http'</span>:random.choice(iplist)&#125;)</div><div class=\"line\"></div><div class=\"line\">    opener=urllib.request.build_opener(proxy_support)</div><div class=\"line\">    opener.addheaders=[(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span>)]</div><div class=\"line\"></div><div class=\"line\">    urllib.request.install_opener(opener)</div><div class=\"line\"></div><div class=\"line\">    req=urllib.request.Request(url)</div><div class=\"line\">    response=urllib.request.urlopen(req)</div><div class=\"line\">    html=response.read()</div><div class=\"line\">    <span class=\"keyword\">return</span> html</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#获取图片地址，返回图片地址的list</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_imgs</span><span class=\"params\">(url)</span>:</span></div><div class=\"line\">    html=url_open(url).decode(<span class=\"string\">'utf-8'</span>)</div><div class=\"line\"></div><div class=\"line\">    img_address=[]</div><div class=\"line\">    a=html.find(<span class=\"string\">'data-original'</span>)</div><div class=\"line\">    <span class=\"keyword\">while</span>(a!=<span class=\"number\">-1</span>):</div><div class=\"line\">        b=html.find(<span class=\"string\">'.jpg'</span>,a,a+<span class=\"number\">300</span>)</div><div class=\"line\">        <span class=\"keyword\">if</span>(b!=<span class=\"number\">-1</span>):</div><div class=\"line\">            <span class=\"comment\"># print(html[a+15:b+4])</span></div><div class=\"line\">            img_address.append(html[a+<span class=\"number\">15</span>:b+<span class=\"number\">4</span>])</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            b=a+<span class=\"number\">9</span></div><div class=\"line\">        a=html.find(<span class=\"string\">'data-original='</span>,b)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> img_address:</div><div class=\"line\">        print(i)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> img_address</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#存储到本地</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">save_imgs</span><span class=\"params\">(img_address)</span>:</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> img_address:</div><div class=\"line\">        <span class=\"comment\"># print(i)</span></div><div class=\"line\">        filename=i.split(<span class=\"string\">'/'</span>)[<span class=\"number\">-1</span>]</div><div class=\"line\">        <span class=\"keyword\">with</span> open(filename,<span class=\"string\">'wb'</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">            img=url_open(i)</div><div class=\"line\">            f.write(img)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">zhihuPic</span><span class=\"params\">(url,folder=<span class=\"string\">\"zhihu\"</span>)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(os.path.exists(folder)):</div><div class=\"line\">        os.chdir(folder)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        os.mkdir(folder)</div><div class=\"line\">        os.chdir(folder)</div><div class=\"line\">    img_address=get_imgs(url)</div><div class=\"line\">    save_imgs(img_address)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</div><div class=\"line\">    zhihuPic(<span class=\"string\">\"https://www.zhihu.com/question/22070147\"</span>)</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"添加header和data\"><a href=\"#添加header和data\" class=\"headerlink\" title=\"添加header和data\"></a>添加header和data</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">request=urllib.request.Request(url)</div><div class=\"line\">response=urllib.request.urlopen(request)</div><div class=\"line\"><span class=\"comment\">#response是一个http.client.HTTPResponse对象</span></div><div class=\"line\">print(response.geturl()) <span class=\"comment\">#获取网址</span></div><div class=\"line\">print(response.info())  <span class=\"comment\">#获取信息</span></div><div class=\"line\">print(response.getcode()) <span class=\"comment\"># http状态码</span></div><div class=\"line\"></div><div class=\"line\">html=response.read()</div></pre></td></tr></table></figure>\n<p><code>urllib.request.Request(url, data=None, headers={}, origin_req_host=None, unverifiable=False, method=None)</code><br>1.data参数：the HTTP request will be a POST instead of a GET when the data parameter is provided.data should be a buffer in the standard application/x-www-form-urlencoded format. The urllib.parse.urlencode() function takes a mapping or sequence of 2-tuples and returns a string in this format.<br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">data=&#123;&#125;</div><div class=\"line\">data[<span class=\"string\">'type'</span>]=<span class=\"string\">'AUTO'</span></div><div class=\"line\">data[<span class=\"string\">'i'</span>]=content</div><div class=\"line\">data[<span class=\"string\">'doctype'</span>]=<span class=\"string\">'json'</span></div><div class=\"line\">data[<span class=\"string\">'xmlVersion'</span>]=<span class=\"number\">1.8</span></div><div class=\"line\">data[<span class=\"string\">'keyfrom'</span>]=<span class=\"string\">'fanyi.web'</span></div><div class=\"line\">data[<span class=\"string\">'ue'</span>]=<span class=\"string\">'UTF-8'</span></div><div class=\"line\">data[<span class=\"string\">'action'</span>]=<span class=\"string\">'FY_BY_CLICKBUTTON'</span></div><div class=\"line\">data[<span class=\"string\">'typoResult'</span>]=<span class=\"string\">'true'</span></div><div class=\"line\"></div><div class=\"line\">data=urllib.parse.urlencode(data).encode(<span class=\"string\">'utf-8'</span>)</div></pre></td></tr></table></figure>\n<p>2.headers：一个字典，可以直接从浏览器中复制过来</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">header=&#123;&#125;</div><div class=\"line\"><span class=\"comment\">#添加header的第一种方法</span></div><div class=\"line\">header[<span class=\"string\">'User-Agent'</span>]=<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span></div><div class=\"line\">request=urllib.request.Request(url,data,header)</div><div class=\"line\"><span class=\"comment\">#也可使用以下方法</span></div><div class=\"line\">request.add_header(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span>)</div></pre></td></tr></table></figure>\n<h2 id=\"获取Response-Headers\"><a href=\"#获取Response-Headers\" class=\"headerlink\" title=\"获取Response Headers\"></a>获取Response Headers</h2><p>下面代码是用来判断 网页是否使用<code>gzip</code>压缩过。<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> response.getheaders():</div><div class=\"line\">    <span class=\"keyword\">if</span> i[<span class=\"number\">0</span>]==<span class=\"string\">\"Content-Encoding\"</span>:</div><div class=\"line\">        <span class=\"keyword\">if</span>(i[<span class=\"number\">-1</span>]==<span class=\"string\">\"gzip\"</span>):</div><div class=\"line\">            html=gzip.decompress(html)</div></pre></td></tr></table></figure></p>\n<h2 id=\"使用代理\"><a href=\"#使用代理\" class=\"headerlink\" title=\"使用代理\"></a>使用代理</h2><p>1.参数是一个字典{‘类型’：‘代理ip:端口号’}<br><code>proxy_support=urllib.request.ProxyHandler({})</code><br>2.定制、创建一个openner<br><code>opener=urllib.request.build_opener(proxy_support)\n3a.安装opener</code>urllib.request.install_opener(opener)<code>3b.调用opener</code>opener.open(url)`</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">proxy_support=urllib.request.ProxyHandler(&#123;<span class=\"string\">'http'</span>:random.choice(iplist)&#125;)</div><div class=\"line\"></div><div class=\"line\">opener=urllib.request.build_opener(proxy_support)</div><div class=\"line\">opener.addheaders=[(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span>)]</div><div class=\"line\">urllib.request.install_opener(opener)</div><div class=\"line\"></div><div class=\"line\">req=urllib.request.Request(url)</div><div class=\"line\">response=urllib.request.urlopen(req)</div></pre></td></tr></table></figure>\n<h2 id=\"爬知乎图片\"><a href=\"#爬知乎图片\" class=\"headerlink\" title=\"爬知乎图片\"></a>爬知乎图片</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib.request</div><div class=\"line\"><span class=\"keyword\">import</span> os</div><div class=\"line\"><span class=\"keyword\">import</span> random</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#打开网页</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">url_open</span><span class=\"params\">(url)</span>:</span></div><div class=\"line\">    iplist=[</div><div class=\"line\">        <span class=\"string\">'49.77.22.1:8118'</span>,</div><div class=\"line\">        <span class=\"string\">'58.134.102.3:12696'</span>,</div><div class=\"line\">        <span class=\"string\">'120.26.213.55:9999'</span>...]</div><div class=\"line\"></div><div class=\"line\">    proxy_support=urllib.request.ProxyHandler(&#123;<span class=\"string\">'http'</span>:random.choice(iplist)&#125;)</div><div class=\"line\"></div><div class=\"line\">    opener=urllib.request.build_opener(proxy_support)</div><div class=\"line\">    opener.addheaders=[(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0'</span>)]</div><div class=\"line\"></div><div class=\"line\">    urllib.request.install_opener(opener)</div><div class=\"line\"></div><div class=\"line\">    req=urllib.request.Request(url)</div><div class=\"line\">    response=urllib.request.urlopen(req)</div><div class=\"line\">    html=response.read()</div><div class=\"line\">    <span class=\"keyword\">return</span> html</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#获取图片地址，返回图片地址的list</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_imgs</span><span class=\"params\">(url)</span>:</span></div><div class=\"line\">    html=url_open(url).decode(<span class=\"string\">'utf-8'</span>)</div><div class=\"line\"></div><div class=\"line\">    img_address=[]</div><div class=\"line\">    a=html.find(<span class=\"string\">'data-original'</span>)</div><div class=\"line\">    <span class=\"keyword\">while</span>(a!=<span class=\"number\">-1</span>):</div><div class=\"line\">        b=html.find(<span class=\"string\">'.jpg'</span>,a,a+<span class=\"number\">300</span>)</div><div class=\"line\">        <span class=\"keyword\">if</span>(b!=<span class=\"number\">-1</span>):</div><div class=\"line\">            <span class=\"comment\"># print(html[a+15:b+4])</span></div><div class=\"line\">            img_address.append(html[a+<span class=\"number\">15</span>:b+<span class=\"number\">4</span>])</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            b=a+<span class=\"number\">9</span></div><div class=\"line\">        a=html.find(<span class=\"string\">'data-original='</span>,b)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> img_address:</div><div class=\"line\">        print(i)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> img_address</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#存储到本地</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">save_imgs</span><span class=\"params\">(img_address)</span>:</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> img_address:</div><div class=\"line\">        <span class=\"comment\"># print(i)</span></div><div class=\"line\">        filename=i.split(<span class=\"string\">'/'</span>)[<span class=\"number\">-1</span>]</div><div class=\"line\">        <span class=\"keyword\">with</span> open(filename,<span class=\"string\">'wb'</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">            img=url_open(i)</div><div class=\"line\">            f.write(img)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">zhihuPic</span><span class=\"params\">(url,folder=<span class=\"string\">\"zhihu\"</span>)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(os.path.exists(folder)):</div><div class=\"line\">        os.chdir(folder)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        os.mkdir(folder)</div><div class=\"line\">        os.chdir(folder)</div><div class=\"line\">    img_address=get_imgs(url)</div><div class=\"line\">    save_imgs(img_address)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</div><div class=\"line\">    zhihuPic(<span class=\"string\">\"https://www.zhihu.com/question/22070147\"</span>)</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-10-22T16:00:00.000Z","title":"selenium + PhantomJS","keywords":null,"description":"selenium可以调用浏览器来完成网页的读取","_content":"\n## 初始化WebDriver\n\n\n### Chrome\n\n```python\nself.__driver=webdriver.Chrome(\"D:\\\\applicationsGreen\\\\chromedriver_win32\\\\chromedriver\")\n```\n\n### PhantomJS\n\n```python\ndcap = dict(DesiredCapabilities.PHANTOMJS)\n        dcap[\"phantomjs.page.settings.userAgent\"] = (\n            \"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0\"\n        )\nself.__driver=webdriver.PhantomJS(desired_capabilities=dcap)\n```\n","source":"_posts/python/Spider/基础知识/2016-10-23-selenium.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-23\ntitle: selenium + PhantomJS\ncategory: Python\ntags: [python,spider,selenium,PhantomJS]\nkeywords:\ndescription: selenium可以调用浏览器来完成网页的读取\n---\n\n## 初始化WebDriver\n\n\n### Chrome\n\n```python\nself.__driver=webdriver.Chrome(\"D:\\\\applicationsGreen\\\\chromedriver_win32\\\\chromedriver\")\n```\n\n### PhantomJS\n\n```python\ndcap = dict(DesiredCapabilities.PHANTOMJS)\n        dcap[\"phantomjs.page.settings.userAgent\"] = (\n            \"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0\"\n        )\nself.__driver=webdriver.PhantomJS(desired_capabilities=dcap)\n```\n","slug":"python/Spider/基础知识/2016-10-23-selenium","published":1,"updated":"2016-10-25T09:03:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgku007qu8jrfoamkits","content":"<h2 id=\"初始化WebDriver\"><a href=\"#初始化WebDriver\" class=\"headerlink\" title=\"初始化WebDriver\"></a>初始化WebDriver</h2><h3 id=\"Chrome\"><a href=\"#Chrome\" class=\"headerlink\" title=\"Chrome\"></a>Chrome</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">self.__driver=webdriver.Chrome(<span class=\"string\">\"D:\\\\applicationsGreen\\\\chromedriver_win32\\\\chromedriver\"</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"PhantomJS\"><a href=\"#PhantomJS\" class=\"headerlink\" title=\"PhantomJS\"></a>PhantomJS</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">dcap = dict(DesiredCapabilities.PHANTOMJS)</div><div class=\"line\">        dcap[<span class=\"string\">\"phantomjs.page.settings.userAgent\"</span>] = (</div><div class=\"line\">            <span class=\"string\">\"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0\"</span></div><div class=\"line\">        )</div><div class=\"line\">self.__driver=webdriver.PhantomJS(desired_capabilities=dcap)</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"初始化WebDriver\"><a href=\"#初始化WebDriver\" class=\"headerlink\" title=\"初始化WebDriver\"></a>初始化WebDriver</h2><h3 id=\"Chrome\"><a href=\"#Chrome\" class=\"headerlink\" title=\"Chrome\"></a>Chrome</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">self.__driver=webdriver.Chrome(<span class=\"string\">\"D:\\\\applicationsGreen\\\\chromedriver_win32\\\\chromedriver\"</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"PhantomJS\"><a href=\"#PhantomJS\" class=\"headerlink\" title=\"PhantomJS\"></a>PhantomJS</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">dcap = dict(DesiredCapabilities.PHANTOMJS)</div><div class=\"line\">        dcap[<span class=\"string\">\"phantomjs.page.settings.userAgent\"</span>] = (</div><div class=\"line\">            <span class=\"string\">\"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0\"</span></div><div class=\"line\">        )</div><div class=\"line\">self.__driver=webdriver.PhantomJS(desired_capabilities=dcap)</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-03-26T16:00:00.000Z","title":"正则表达式（python）","keywords":null,"description":"正则在字符串的处理中有着很大的作用.","_content":"\n## re方法\n### re.search()\n`re.search(pattern,string,flags=0)`\n例：`re.search(r'love','I love you')`\n\n### re.findall()\n\n返回一个符合pattern的全部字符的list。\n\n### re.compile()\n\n```python\np=re.compile(r'[a-z]')\nres=re.findall(p,'iLadfaww')\nprint(res)\n\n['i', 'a', 'd', 'f', 'a', 'w', 'w']\n```\n\n```python\np=re.compile(r'[a-z]+',re.IGNORECASE)\nres=p.search('ADSwqefS',2,5)#后两个参数表示范围\nprint(res)\n\n<_sre.SRE_Match object; span=(2, 5), match='Swq'>\n\n```\n\n### 代码\n\n```python\np=re.compile(r'(Love) (You)')\nres=p.search('I Love You')\nprint(res.group(0))\nprint(res.group(1))\nprint(res.group(2))\n\nprint(res.start())\nprint(res.end())\nprint(res.span())\n\nLove You\nLove\nYou\n2\n10\n(2, 10)\n```\n\n## 编译标志\n\n[编译标志](http://bbs.fishc.com/forum.php?mod=viewthread&tid=57207&extra=page%3D1%26filter%3Dtypeid%26typeid%3D403)\n\n编译标志有两个名字：完整名和简写名\n\n1.ASCII,A：使得`\\w`,`\\b`,`\\s`和`\\d`只能匹配ASCII字符\n2.DOTALL,S：使得`.`匹配任何符号，包括换行符\n3.IGNORECASE,I：不区分大小写\n4.LOCALE,L：支持当前的语言，区域设置\n5.MULTILINE,M：多行匹配，影响`^`和`$`\n6.VERBOSE,X ：启用详细的正则表达式\n\n## 正则Pattern\n\n[Python3正则表达式特殊符号及用法](http://bbs.fishc.com/forum.php?mod=viewthread&tid=57691&extra=page%3D1%26filter%3Dtypeid%26typeid%3D403)\n\n`\\d`：匹配数字\n`\\D`:与`\\d`相反，相当于`[^0-9]`\n\n`\\s`：匹配任何空白字符（包含空格，换行符，制表符等），相当于`[\\t\\n\\r\\f\\v]`\n`\\S`：与上相反\n\n`\\w`匹配任何单词字符\n`\\W`与上相反\n\n`\\b`匹配单词的开始或者结束。`\\b`在字符类中可表示空格\n`\\B`与上相反\n\n`.`：匹配除换行符以外的任何字符\n\n`|`：或\n\n`*`:匹配前面的表达式0次或者而多次=={0,}\n`+`:匹配前面的表达式1次或者多次=={1,}\n`?`:匹配前面的表达式0次或者1次=={0,1}\n\n`\\`:\n1.转义字符\n2.类似于`\\d`这种用途\n3.引用序号对应的子组所对应的字符串(两位数)\n`r'(ABC)(.com)\\2'匹配的就是'ABC.com.com’`\n4.(三位数，首位可为0)表示八进制数所代表的ASCII码\n\n`[..]`:字符类，匹配所包含的任意一个字符\n\n\n`^`:\n1.匹配字符串的开始位置\n2.如果设置了re.MULTILINE标志，则表示换行符之后的位置\n3.`[^..]`取反，只能放在最开头。若不在最开头，则表示`^`本身。\n\n`%`：\n1.匹配字符串的结束位置，\n2.如果设置了re.MULTILINE标志，则表示换行符之前的位置\n\n`{M,N}`：匹配前面的内容M~N次\n\n`[a-z]`：匹配a-z\n\n\n`ab{3}z`:匹配abbbc\n\n`ab{3,10}c`：匹配a(3-10个)bc\n\n## 零宽断言\n\n`\\b` `^` `$` `\\A` `\\Z` 等用于指定位置，这个位置应满足的一定的条件（即断言），称为零宽断言。\n\n### 前向肯定断言\n`(?=exp)`\n\n例`abc(?=.com)`只会匹配后面紧跟着`.com`的`abc`\n\n### 前向否定断言\n`(?!exp)`\n\n### 后向肯定断言\n`(?<=exp)`\n\n例：`(?<=abc).com`只会匹配前面为`abc`的`.com`\n\n### 后向否定断言\n`(?<!exp)`\n\n## 贪婪与非贪婪\n\n默认是贪婪模式（在符合条件下尽可能多的匹配）：\n\n```python\nres=re.search(r'ABC{2,8}','ABCCCCCC')\nprint(res)\n\n<_sre.SRE_Match object; span=(0, 8), match='ABCCCCCC'>\n```\n\n可以利用`?`变为非贪婪模式\n\n```python\nres=re.search(r'ABC{2,8}?','ABCCCCCC')\nprint(res)\n\n<_sre.SRE_Match object; span=(0, 4), match='ABCC'>\n```\n\n## 捕获\n使用`(....)`会捕获其中内容\n\n使用`(?:...)`不会捕获其中内容\n\n## 例子\n\n### 匹配ip地址\n\n`res=re.search(r'((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5]))','2.1.1.1')`\n\n\n相关博客：[Python3如何优雅地使用正则表达式](http://bbs.fishc.com/thread-57073-1-1.html)\n","source":"_posts/python/Spider/基础知识/2016-03-27-regex.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-27\ntitle: 正则表达式（python）\ncategory: Python\ntags: [python,regex]\nkeywords:\ndescription: 正则在字符串的处理中有着很大的作用.\n---\n\n## re方法\n### re.search()\n`re.search(pattern,string,flags=0)`\n例：`re.search(r'love','I love you')`\n\n### re.findall()\n\n返回一个符合pattern的全部字符的list。\n\n### re.compile()\n\n```python\np=re.compile(r'[a-z]')\nres=re.findall(p,'iLadfaww')\nprint(res)\n\n['i', 'a', 'd', 'f', 'a', 'w', 'w']\n```\n\n```python\np=re.compile(r'[a-z]+',re.IGNORECASE)\nres=p.search('ADSwqefS',2,5)#后两个参数表示范围\nprint(res)\n\n<_sre.SRE_Match object; span=(2, 5), match='Swq'>\n\n```\n\n### 代码\n\n```python\np=re.compile(r'(Love) (You)')\nres=p.search('I Love You')\nprint(res.group(0))\nprint(res.group(1))\nprint(res.group(2))\n\nprint(res.start())\nprint(res.end())\nprint(res.span())\n\nLove You\nLove\nYou\n2\n10\n(2, 10)\n```\n\n## 编译标志\n\n[编译标志](http://bbs.fishc.com/forum.php?mod=viewthread&tid=57207&extra=page%3D1%26filter%3Dtypeid%26typeid%3D403)\n\n编译标志有两个名字：完整名和简写名\n\n1.ASCII,A：使得`\\w`,`\\b`,`\\s`和`\\d`只能匹配ASCII字符\n2.DOTALL,S：使得`.`匹配任何符号，包括换行符\n3.IGNORECASE,I：不区分大小写\n4.LOCALE,L：支持当前的语言，区域设置\n5.MULTILINE,M：多行匹配，影响`^`和`$`\n6.VERBOSE,X ：启用详细的正则表达式\n\n## 正则Pattern\n\n[Python3正则表达式特殊符号及用法](http://bbs.fishc.com/forum.php?mod=viewthread&tid=57691&extra=page%3D1%26filter%3Dtypeid%26typeid%3D403)\n\n`\\d`：匹配数字\n`\\D`:与`\\d`相反，相当于`[^0-9]`\n\n`\\s`：匹配任何空白字符（包含空格，换行符，制表符等），相当于`[\\t\\n\\r\\f\\v]`\n`\\S`：与上相反\n\n`\\w`匹配任何单词字符\n`\\W`与上相反\n\n`\\b`匹配单词的开始或者结束。`\\b`在字符类中可表示空格\n`\\B`与上相反\n\n`.`：匹配除换行符以外的任何字符\n\n`|`：或\n\n`*`:匹配前面的表达式0次或者而多次=={0,}\n`+`:匹配前面的表达式1次或者多次=={1,}\n`?`:匹配前面的表达式0次或者1次=={0,1}\n\n`\\`:\n1.转义字符\n2.类似于`\\d`这种用途\n3.引用序号对应的子组所对应的字符串(两位数)\n`r'(ABC)(.com)\\2'匹配的就是'ABC.com.com’`\n4.(三位数，首位可为0)表示八进制数所代表的ASCII码\n\n`[..]`:字符类，匹配所包含的任意一个字符\n\n\n`^`:\n1.匹配字符串的开始位置\n2.如果设置了re.MULTILINE标志，则表示换行符之后的位置\n3.`[^..]`取反，只能放在最开头。若不在最开头，则表示`^`本身。\n\n`%`：\n1.匹配字符串的结束位置，\n2.如果设置了re.MULTILINE标志，则表示换行符之前的位置\n\n`{M,N}`：匹配前面的内容M~N次\n\n`[a-z]`：匹配a-z\n\n\n`ab{3}z`:匹配abbbc\n\n`ab{3,10}c`：匹配a(3-10个)bc\n\n## 零宽断言\n\n`\\b` `^` `$` `\\A` `\\Z` 等用于指定位置，这个位置应满足的一定的条件（即断言），称为零宽断言。\n\n### 前向肯定断言\n`(?=exp)`\n\n例`abc(?=.com)`只会匹配后面紧跟着`.com`的`abc`\n\n### 前向否定断言\n`(?!exp)`\n\n### 后向肯定断言\n`(?<=exp)`\n\n例：`(?<=abc).com`只会匹配前面为`abc`的`.com`\n\n### 后向否定断言\n`(?<!exp)`\n\n## 贪婪与非贪婪\n\n默认是贪婪模式（在符合条件下尽可能多的匹配）：\n\n```python\nres=re.search(r'ABC{2,8}','ABCCCCCC')\nprint(res)\n\n<_sre.SRE_Match object; span=(0, 8), match='ABCCCCCC'>\n```\n\n可以利用`?`变为非贪婪模式\n\n```python\nres=re.search(r'ABC{2,8}?','ABCCCCCC')\nprint(res)\n\n<_sre.SRE_Match object; span=(0, 4), match='ABCC'>\n```\n\n## 捕获\n使用`(....)`会捕获其中内容\n\n使用`(?:...)`不会捕获其中内容\n\n## 例子\n\n### 匹配ip地址\n\n`res=re.search(r'((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5]))','2.1.1.1')`\n\n\n相关博客：[Python3如何优雅地使用正则表达式](http://bbs.fishc.com/thread-57073-1-1.html)\n","slug":"python/Spider/基础知识/2016-03-27-regex","published":1,"updated":"2016-10-25T09:03:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkv007uu8jrrs5scyxw","content":"<h2 id=\"re方法\"><a href=\"#re方法\" class=\"headerlink\" title=\"re方法\"></a>re方法</h2><h3 id=\"re-search\"><a href=\"#re-search\" class=\"headerlink\" title=\"re.search()\"></a>re.search()</h3><p><code>re.search(pattern,string,flags=0)</code><br>例：<code>re.search(r&#39;love&#39;,&#39;I love you&#39;)</code></p>\n<h3 id=\"re-findall\"><a href=\"#re-findall\" class=\"headerlink\" title=\"re.findall()\"></a>re.findall()</h3><p>返回一个符合pattern的全部字符的list。</p>\n<h3 id=\"re-compile\"><a href=\"#re-compile\" class=\"headerlink\" title=\"re.compile()\"></a>re.compile()</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">p=re.compile(<span class=\"string\">r'[a-z]'</span>)</div><div class=\"line\">res=re.findall(p,<span class=\"string\">'iLadfaww'</span>)</div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">[<span class=\"string\">'i'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'d'</span>, <span class=\"string\">'f'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'w'</span>, <span class=\"string\">'w'</span>]</div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">p=re.compile(<span class=\"string\">r'[a-z]+'</span>,re.IGNORECASE)</div><div class=\"line\">res=p.search(<span class=\"string\">'ADSwqefS'</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>)<span class=\"comment\">#后两个参数表示范围</span></div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">&lt;_sre.SRE_Match object; span=(<span class=\"number\">2</span>, <span class=\"number\">5</span>), match=<span class=\"string\">'Swq'</span>&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">p=re.compile(<span class=\"string\">r'(Love) (You)'</span>)</div><div class=\"line\">res=p.search(<span class=\"string\">'I Love You'</span>)</div><div class=\"line\">print(res.group(<span class=\"number\">0</span>))</div><div class=\"line\">print(res.group(<span class=\"number\">1</span>))</div><div class=\"line\">print(res.group(<span class=\"number\">2</span>))</div><div class=\"line\"></div><div class=\"line\">print(res.start())</div><div class=\"line\">print(res.end())</div><div class=\"line\">print(res.span())</div><div class=\"line\"></div><div class=\"line\">Love You</div><div class=\"line\">Love</div><div class=\"line\">You</div><div class=\"line\"><span class=\"number\">2</span></div><div class=\"line\"><span class=\"number\">10</span></div><div class=\"line\">(<span class=\"number\">2</span>, <span class=\"number\">10</span>)</div></pre></td></tr></table></figure>\n<h2 id=\"编译标志\"><a href=\"#编译标志\" class=\"headerlink\" title=\"编译标志\"></a>编译标志</h2><p><a href=\"http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=57207&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403\" target=\"_blank\" rel=\"external\">编译标志</a></p>\n<p>编译标志有两个名字：完整名和简写名</p>\n<p>1.ASCII,A：使得<code>\\w</code>,<code>\\b</code>,<code>\\s</code>和<code>\\d</code>只能匹配ASCII字符<br>2.DOTALL,S：使得<code>.</code>匹配任何符号，包括换行符<br>3.IGNORECASE,I：不区分大小写<br>4.LOCALE,L：支持当前的语言，区域设置<br>5.MULTILINE,M：多行匹配，影响<code>^</code>和<code>$</code><br>6.VERBOSE,X ：启用详细的正则表达式</p>\n<h2 id=\"正则Pattern\"><a href=\"#正则Pattern\" class=\"headerlink\" title=\"正则Pattern\"></a>正则Pattern</h2><p><a href=\"http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=57691&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403\" target=\"_blank\" rel=\"external\">Python3正则表达式特殊符号及用法</a></p>\n<p><code>\\d</code>：匹配数字<br><code>\\D</code>:与<code>\\d</code>相反，相当于<code>[^0-9]</code></p>\n<p><code>\\s</code>：匹配任何空白字符（包含空格，换行符，制表符等），相当于<code>[\\t\\n\\r\\f\\v]</code><br><code>\\S</code>：与上相反</p>\n<p><code>\\w</code>匹配任何单词字符<br><code>\\W</code>与上相反</p>\n<p><code>\\b</code>匹配单词的开始或者结束。<code>\\b</code>在字符类中可表示空格<br><code>\\B</code>与上相反</p>\n<p><code>.</code>：匹配除换行符以外的任何字符</p>\n<p><code>|</code>：或</p>\n<p><code>*</code>:匹配前面的表达式0次或者而多次=={0,}<br><code>+</code>:匹配前面的表达式1次或者多次=={1,}<br><code>?</code>:匹配前面的表达式0次或者1次=={0,1}</p>\n<p><code>\\</code>:<br>1.转义字符<br>2.类似于<code>\\d</code>这种用途<br>3.引用序号对应的子组所对应的字符串(两位数)<br><code>r&#39;(ABC)(.com)\\2&#39;匹配的就是&#39;ABC.com.com’</code><br>4.(三位数，首位可为0)表示八进制数所代表的ASCII码</p>\n<p><code>[..]</code>:字符类，匹配所包含的任意一个字符</p>\n<p><code>^</code>:<br>1.匹配字符串的开始位置<br>2.如果设置了re.MULTILINE标志，则表示换行符之后的位置<br>3.<code>[^..]</code>取反，只能放在最开头。若不在最开头，则表示<code>^</code>本身。</p>\n<p><code>%</code>：<br>1.匹配字符串的结束位置，<br>2.如果设置了re.MULTILINE标志，则表示换行符之前的位置</p>\n<p><code>{M,N}</code>：匹配前面的内容M~N次</p>\n<p><code>[a-z]</code>：匹配a-z</p>\n<p><code>ab{3}z</code>:匹配abbbc</p>\n<p><code>ab{3,10}c</code>：匹配a(3-10个)bc</p>\n<h2 id=\"零宽断言\"><a href=\"#零宽断言\" class=\"headerlink\" title=\"零宽断言\"></a>零宽断言</h2><p><code>\\b</code> <code>^</code> <code>$</code> <code>\\A</code> <code>\\Z</code> 等用于指定位置，这个位置应满足的一定的条件（即断言），称为零宽断言。</p>\n<h3 id=\"前向肯定断言\"><a href=\"#前向肯定断言\" class=\"headerlink\" title=\"前向肯定断言\"></a>前向肯定断言</h3><p><code>(?=exp)</code></p>\n<p>例<code>abc(?=.com)</code>只会匹配后面紧跟着<code>.com</code>的<code>abc</code></p>\n<h3 id=\"前向否定断言\"><a href=\"#前向否定断言\" class=\"headerlink\" title=\"前向否定断言\"></a>前向否定断言</h3><p><code>(?!exp)</code></p>\n<h3 id=\"后向肯定断言\"><a href=\"#后向肯定断言\" class=\"headerlink\" title=\"后向肯定断言\"></a>后向肯定断言</h3><p><code>(?&lt;=exp)</code></p>\n<p>例：<code>(?&lt;=abc).com</code>只会匹配前面为<code>abc</code>的<code>.com</code></p>\n<h3 id=\"后向否定断言\"><a href=\"#后向否定断言\" class=\"headerlink\" title=\"后向否定断言\"></a>后向否定断言</h3><p><code>(?&lt;!exp)</code></p>\n<h2 id=\"贪婪与非贪婪\"><a href=\"#贪婪与非贪婪\" class=\"headerlink\" title=\"贪婪与非贪婪\"></a>贪婪与非贪婪</h2><p>默认是贪婪模式（在符合条件下尽可能多的匹配）：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">res=re.search(<span class=\"string\">r'ABC&#123;2,8&#125;'</span>,<span class=\"string\">'ABCCCCCC'</span>)</div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">&lt;_sre.SRE_Match object; span=(<span class=\"number\">0</span>, <span class=\"number\">8</span>), match=<span class=\"string\">'ABCCCCCC'</span>&gt;</div></pre></td></tr></table></figure>\n<p>可以利用<code>?</code>变为非贪婪模式</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">res=re.search(<span class=\"string\">r'ABC&#123;2,8&#125;?'</span>,<span class=\"string\">'ABCCCCCC'</span>)</div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">&lt;_sre.SRE_Match object; span=(<span class=\"number\">0</span>, <span class=\"number\">4</span>), match=<span class=\"string\">'ABCC'</span>&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"捕获\"><a href=\"#捕获\" class=\"headerlink\" title=\"捕获\"></a>捕获</h2><p>使用<code>(....)</code>会捕获其中内容</p>\n<p>使用<code>(?:...)</code>不会捕获其中内容</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><h3 id=\"匹配ip地址\"><a href=\"#匹配ip地址\" class=\"headerlink\" title=\"匹配ip地址\"></a>匹配ip地址</h3><p><code>res=re.search(r&#39;((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5]))&#39;,&#39;2.1.1.1&#39;)</code></p>\n<p>相关博客：<a href=\"http://bbs.fishc.com/thread-57073-1-1.html\" target=\"_blank\" rel=\"external\">Python3如何优雅地使用正则表达式</a></p>\n","excerpt":"","more":"<h2 id=\"re方法\"><a href=\"#re方法\" class=\"headerlink\" title=\"re方法\"></a>re方法</h2><h3 id=\"re-search\"><a href=\"#re-search\" class=\"headerlink\" title=\"re.search()\"></a>re.search()</h3><p><code>re.search(pattern,string,flags=0)</code><br>例：<code>re.search(r&#39;love&#39;,&#39;I love you&#39;)</code></p>\n<h3 id=\"re-findall\"><a href=\"#re-findall\" class=\"headerlink\" title=\"re.findall()\"></a>re.findall()</h3><p>返回一个符合pattern的全部字符的list。</p>\n<h3 id=\"re-compile\"><a href=\"#re-compile\" class=\"headerlink\" title=\"re.compile()\"></a>re.compile()</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">p=re.compile(<span class=\"string\">r'[a-z]'</span>)</div><div class=\"line\">res=re.findall(p,<span class=\"string\">'iLadfaww'</span>)</div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">[<span class=\"string\">'i'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'d'</span>, <span class=\"string\">'f'</span>, <span class=\"string\">'a'</span>, <span class=\"string\">'w'</span>, <span class=\"string\">'w'</span>]</div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">p=re.compile(<span class=\"string\">r'[a-z]+'</span>,re.IGNORECASE)</div><div class=\"line\">res=p.search(<span class=\"string\">'ADSwqefS'</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>)<span class=\"comment\">#后两个参数表示范围</span></div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">&lt;_sre.SRE_Match object; span=(<span class=\"number\">2</span>, <span class=\"number\">5</span>), match=<span class=\"string\">'Swq'</span>&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">p=re.compile(<span class=\"string\">r'(Love) (You)'</span>)</div><div class=\"line\">res=p.search(<span class=\"string\">'I Love You'</span>)</div><div class=\"line\">print(res.group(<span class=\"number\">0</span>))</div><div class=\"line\">print(res.group(<span class=\"number\">1</span>))</div><div class=\"line\">print(res.group(<span class=\"number\">2</span>))</div><div class=\"line\"></div><div class=\"line\">print(res.start())</div><div class=\"line\">print(res.end())</div><div class=\"line\">print(res.span())</div><div class=\"line\"></div><div class=\"line\">Love You</div><div class=\"line\">Love</div><div class=\"line\">You</div><div class=\"line\"><span class=\"number\">2</span></div><div class=\"line\"><span class=\"number\">10</span></div><div class=\"line\">(<span class=\"number\">2</span>, <span class=\"number\">10</span>)</div></pre></td></tr></table></figure>\n<h2 id=\"编译标志\"><a href=\"#编译标志\" class=\"headerlink\" title=\"编译标志\"></a>编译标志</h2><p><a href=\"http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=57207&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403\">编译标志</a></p>\n<p>编译标志有两个名字：完整名和简写名</p>\n<p>1.ASCII,A：使得<code>\\w</code>,<code>\\b</code>,<code>\\s</code>和<code>\\d</code>只能匹配ASCII字符<br>2.DOTALL,S：使得<code>.</code>匹配任何符号，包括换行符<br>3.IGNORECASE,I：不区分大小写<br>4.LOCALE,L：支持当前的语言，区域设置<br>5.MULTILINE,M：多行匹配，影响<code>^</code>和<code>$</code><br>6.VERBOSE,X ：启用详细的正则表达式</p>\n<h2 id=\"正则Pattern\"><a href=\"#正则Pattern\" class=\"headerlink\" title=\"正则Pattern\"></a>正则Pattern</h2><p><a href=\"http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=57691&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403\">Python3正则表达式特殊符号及用法</a></p>\n<p><code>\\d</code>：匹配数字<br><code>\\D</code>:与<code>\\d</code>相反，相当于<code>[^0-9]</code></p>\n<p><code>\\s</code>：匹配任何空白字符（包含空格，换行符，制表符等），相当于<code>[\\t\\n\\r\\f\\v]</code><br><code>\\S</code>：与上相反</p>\n<p><code>\\w</code>匹配任何单词字符<br><code>\\W</code>与上相反</p>\n<p><code>\\b</code>匹配单词的开始或者结束。<code>\\b</code>在字符类中可表示空格<br><code>\\B</code>与上相反</p>\n<p><code>.</code>：匹配除换行符以外的任何字符</p>\n<p><code>|</code>：或</p>\n<p><code>*</code>:匹配前面的表达式0次或者而多次=={0,}<br><code>+</code>:匹配前面的表达式1次或者多次=={1,}<br><code>?</code>:匹配前面的表达式0次或者1次=={0,1}</p>\n<p><code>\\</code>:<br>1.转义字符<br>2.类似于<code>\\d</code>这种用途<br>3.引用序号对应的子组所对应的字符串(两位数)<br><code>r&#39;(ABC)(.com)\\2&#39;匹配的就是&#39;ABC.com.com’</code><br>4.(三位数，首位可为0)表示八进制数所代表的ASCII码</p>\n<p><code>[..]</code>:字符类，匹配所包含的任意一个字符</p>\n<p><code>^</code>:<br>1.匹配字符串的开始位置<br>2.如果设置了re.MULTILINE标志，则表示换行符之后的位置<br>3.<code>[^..]</code>取反，只能放在最开头。若不在最开头，则表示<code>^</code>本身。</p>\n<p><code>%</code>：<br>1.匹配字符串的结束位置，<br>2.如果设置了re.MULTILINE标志，则表示换行符之前的位置</p>\n<p><code>{M,N}</code>：匹配前面的内容M~N次</p>\n<p><code>[a-z]</code>：匹配a-z</p>\n<p><code>ab{3}z</code>:匹配abbbc</p>\n<p><code>ab{3,10}c</code>：匹配a(3-10个)bc</p>\n<h2 id=\"零宽断言\"><a href=\"#零宽断言\" class=\"headerlink\" title=\"零宽断言\"></a>零宽断言</h2><p><code>\\b</code> <code>^</code> <code>$</code> <code>\\A</code> <code>\\Z</code> 等用于指定位置，这个位置应满足的一定的条件（即断言），称为零宽断言。</p>\n<h3 id=\"前向肯定断言\"><a href=\"#前向肯定断言\" class=\"headerlink\" title=\"前向肯定断言\"></a>前向肯定断言</h3><p><code>(?=exp)</code></p>\n<p>例<code>abc(?=.com)</code>只会匹配后面紧跟着<code>.com</code>的<code>abc</code></p>\n<h3 id=\"前向否定断言\"><a href=\"#前向否定断言\" class=\"headerlink\" title=\"前向否定断言\"></a>前向否定断言</h3><p><code>(?!exp)</code></p>\n<h3 id=\"后向肯定断言\"><a href=\"#后向肯定断言\" class=\"headerlink\" title=\"后向肯定断言\"></a>后向肯定断言</h3><p><code>(?&lt;=exp)</code></p>\n<p>例：<code>(?&lt;=abc).com</code>只会匹配前面为<code>abc</code>的<code>.com</code></p>\n<h3 id=\"后向否定断言\"><a href=\"#后向否定断言\" class=\"headerlink\" title=\"后向否定断言\"></a>后向否定断言</h3><p><code>(?&lt;!exp)</code></p>\n<h2 id=\"贪婪与非贪婪\"><a href=\"#贪婪与非贪婪\" class=\"headerlink\" title=\"贪婪与非贪婪\"></a>贪婪与非贪婪</h2><p>默认是贪婪模式（在符合条件下尽可能多的匹配）：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">res=re.search(<span class=\"string\">r'ABC&#123;2,8&#125;'</span>,<span class=\"string\">'ABCCCCCC'</span>)</div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">&lt;_sre.SRE_Match object; span=(<span class=\"number\">0</span>, <span class=\"number\">8</span>), match=<span class=\"string\">'ABCCCCCC'</span>&gt;</div></pre></td></tr></table></figure>\n<p>可以利用<code>?</code>变为非贪婪模式</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">res=re.search(<span class=\"string\">r'ABC&#123;2,8&#125;?'</span>,<span class=\"string\">'ABCCCCCC'</span>)</div><div class=\"line\">print(res)</div><div class=\"line\"></div><div class=\"line\">&lt;_sre.SRE_Match object; span=(<span class=\"number\">0</span>, <span class=\"number\">4</span>), match=<span class=\"string\">'ABCC'</span>&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"捕获\"><a href=\"#捕获\" class=\"headerlink\" title=\"捕获\"></a>捕获</h2><p>使用<code>(....)</code>会捕获其中内容</p>\n<p>使用<code>(?:...)</code>不会捕获其中内容</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><h3 id=\"匹配ip地址\"><a href=\"#匹配ip地址\" class=\"headerlink\" title=\"匹配ip地址\"></a>匹配ip地址</h3><p><code>res=re.search(r&#39;((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}((\\d\\d|\\d|1\\d\\d|2[0-4]\\d|25[0-5]))&#39;,&#39;2.1.1.1&#39;)</code></p>\n<p>相关博客：<a href=\"http://bbs.fishc.com/thread-57073-1-1.html\">Python3如何优雅地使用正则表达式</a></p>\n"},{"author":"ivyxjc","date":"2016-03-30T16:00:00.000Z","title":"Scrapy入门","keywords":null,"description":"scrapy的一个简单sample.","_content":"\n## creating a project\n\nrun `scrapy startproject tutorial`\n\n```\n---scrapy.cfg\n---tutorial/\n-------__init__.py\n-------items.py\n-------pipelines.py\n-------settring.py\n-------spiders/\n-----------__init__.py\n```\n\n## items.py\n\n`Items` are containers that will be loaded with the scraped data;like simple python dicts.\n\n\n```python\nclass DmozItem(scrapy.Item):\n    title = scrapy.Field()\n    link = scrapy.Field()\n    desc = scrapy.Field()\n```\n\n## 第一个spider\n\n四个步骤：\n 1.创建一个Scrapy项目\n 2.定义Item容器\n 3.编写爬虫\n 4.存储内容\n\n\n\n创建一个Spider，必须继承scrapy.Spider类。且自定义一些属性：\n 1.`name`:用于区别Spider，必须是唯一的。\n 2.`start_urls`:\n 3.`parse()`:个初始URL完成下载后生成的`Response` 对象将会作为唯一的参数传递给该函数。 该方法负责解析返回的数据(response data)，提取数据(生成item)以及生成需要进一步处理的URL的`Request`对象。\n","source":"_posts/python/Spider/基础知识/2016-03-31-scrapy.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-31\ntitle: Scrapy入门\ncategory: Python\ntags: [python,spider,bs4]\nkeywords:\ndescription: scrapy的一个简单sample.\n---\n\n## creating a project\n\nrun `scrapy startproject tutorial`\n\n```\n---scrapy.cfg\n---tutorial/\n-------__init__.py\n-------items.py\n-------pipelines.py\n-------settring.py\n-------spiders/\n-----------__init__.py\n```\n\n## items.py\n\n`Items` are containers that will be loaded with the scraped data;like simple python dicts.\n\n\n```python\nclass DmozItem(scrapy.Item):\n    title = scrapy.Field()\n    link = scrapy.Field()\n    desc = scrapy.Field()\n```\n\n## 第一个spider\n\n四个步骤：\n 1.创建一个Scrapy项目\n 2.定义Item容器\n 3.编写爬虫\n 4.存储内容\n\n\n\n创建一个Spider，必须继承scrapy.Spider类。且自定义一些属性：\n 1.`name`:用于区别Spider，必须是唯一的。\n 2.`start_urls`:\n 3.`parse()`:个初始URL完成下载后生成的`Response` 对象将会作为唯一的参数传递给该函数。 该方法负责解析返回的数据(response data)，提取数据(生成item)以及生成需要进一步处理的URL的`Request`对象。\n","slug":"python/Spider/基础知识/2016-03-31-scrapy","published":1,"updated":"2016-10-25T09:03:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgkx007xu8jrz1n1vvo2","content":"<h2 id=\"creating-a-project\"><a href=\"#creating-a-project\" class=\"headerlink\" title=\"creating a project\"></a>creating a project</h2><p>run <code>scrapy startproject tutorial</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">---scrapy.cfg</div><div class=\"line\">---tutorial/</div><div class=\"line\">-------__init__.py</div><div class=\"line\">-------items.py</div><div class=\"line\">-------pipelines.py</div><div class=\"line\">-------settring.py</div><div class=\"line\">-------spiders/</div><div class=\"line\">-----------__init__.py</div></pre></td></tr></table></figure>\n<h2 id=\"items-py\"><a href=\"#items-py\" class=\"headerlink\" title=\"items.py\"></a>items.py</h2><p><code>Items</code> are containers that will be loaded with the scraped data;like simple python dicts.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DmozItem</span><span class=\"params\">(scrapy.Item)</span>:</span></div><div class=\"line\">    title = scrapy.Field()</div><div class=\"line\">    link = scrapy.Field()</div><div class=\"line\">    desc = scrapy.Field()</div></pre></td></tr></table></figure>\n<h2 id=\"第一个spider\"><a href=\"#第一个spider\" class=\"headerlink\" title=\"第一个spider\"></a>第一个spider</h2><p>四个步骤：<br> 1.创建一个Scrapy项目<br> 2.定义Item容器<br> 3.编写爬虫<br> 4.存储内容</p>\n<p>创建一个Spider，必须继承scrapy.Spider类。且自定义一些属性：<br> 1.<code>name</code>:用于区别Spider，必须是唯一的。<br> 2.<code>start_urls</code>:<br> 3.<code>parse()</code>:个初始URL完成下载后生成的<code>Response</code> 对象将会作为唯一的参数传递给该函数。 该方法负责解析返回的数据(response data)，提取数据(生成item)以及生成需要进一步处理的URL的<code>Request</code>对象。</p>\n","excerpt":"","more":"<h2 id=\"creating-a-project\"><a href=\"#creating-a-project\" class=\"headerlink\" title=\"creating a project\"></a>creating a project</h2><p>run <code>scrapy startproject tutorial</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">---scrapy.cfg</div><div class=\"line\">---tutorial/</div><div class=\"line\">-------__init__.py</div><div class=\"line\">-------items.py</div><div class=\"line\">-------pipelines.py</div><div class=\"line\">-------settring.py</div><div class=\"line\">-------spiders/</div><div class=\"line\">-----------__init__.py</div></pre></td></tr></table></figure>\n<h2 id=\"items-py\"><a href=\"#items-py\" class=\"headerlink\" title=\"items.py\"></a>items.py</h2><p><code>Items</code> are containers that will be loaded with the scraped data;like simple python dicts.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DmozItem</span><span class=\"params\">(scrapy.Item)</span>:</span></div><div class=\"line\">    title = scrapy.Field()</div><div class=\"line\">    link = scrapy.Field()</div><div class=\"line\">    desc = scrapy.Field()</div></pre></td></tr></table></figure>\n<h2 id=\"第一个spider\"><a href=\"#第一个spider\" class=\"headerlink\" title=\"第一个spider\"></a>第一个spider</h2><p>四个步骤：<br> 1.创建一个Scrapy项目<br> 2.定义Item容器<br> 3.编写爬虫<br> 4.存储内容</p>\n<p>创建一个Spider，必须继承scrapy.Spider类。且自定义一些属性：<br> 1.<code>name</code>:用于区别Spider，必须是唯一的。<br> 2.<code>start_urls</code>:<br> 3.<code>parse()</code>:个初始URL完成下载后生成的<code>Response</code> 对象将会作为唯一的参数传递给该函数。 该方法负责解析返回的数据(response data)，提取数据(生成item)以及生成需要进一步处理的URL的<code>Request</code>对象。</p>\n"},{"author":"ivyxjc","date":"2016-03-28T16:00:00.000Z","title":"BeautifulSoup4入门","keywords":null,"description":"bs4可以非常高效地获取网页中的指定内容.","_content":"\n## 对象的种类\nBeautifulSoup会将HTML文档抓换成一个树形结构, 每个节点都是Python对象，所有对象可以分为4类：`Tag`,`NavigableString`,`BeautifulSoup`,`Comment`。\n\n\n### Tag\n`Tag`与XML或HTML中的tag相同：\n\n```python3\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>')\ntag = soup.b\nprint(type(tag))\nprint(tag)\n\n--<class 'bs4.element.Tag'>\n--<b class=\"boldest\">Extremely bold</b>\n```\n\n#### name\n\n每一个Tag都有自己的name，可以通过`.name`。改变tag的name，将会影响通过当前BS对象生成的HTML文档\n\n```python3\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\nprint(tag)\nprint(tag.name)\ntag.name=\"blockquote\"\nprint(tag)\n\n---<b class=\"boldest\">Extremely bold</b>\n---b\n---<blockquote class=\"boldest\">Extremely bold</blockquote>\n```\n\n#### attributes\n一个tag可能有多个属性\n\n```python3\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\nprint(tag['class'])\nprint(tag.attrs)\n\n---['boldest']\n---{'class': ['boldest']}\n```\n\ntag的属性可以被添加，删除或修改\n\n```python\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\n#更改属性\ntag['class']=\"verybold\"\ntag['id']=1\nprint(tag)\n\n#删除属性\ndel tag['class']\nprint(tag)\nprint(tag.get('class'))\n\n---<b class=\"verybold\" id=\"1\">Extremely bold</b>\n---<b id=\"1\">Extremely bold</b>\n---\n```\n\n##### 多值属性\n多值属性即为可包含多个值的属性，最常见的即为`class`\n`xml`中没有多值属性\n\n多值属性的返回类型是list\n\n```python\ncss_soup = BeautifulSoup('<p class=\"body strikeout\"></p>',\"html.parser\")\nprint(css_soup.p['class'])\n\n---['body', 'strikeout']\n```\n\n若某个属性看起来像多值属性，但是在任何版本HTML中都没有被定义为多值属性，那么BS会将这个属性作为字符串返回\n\n```python\nid_soup = BeautifulSoup('<p id=\"my id\"></p>',\"html.parser\")\nprint(id_soup.p['id'])\n\n---my id\n```\n\n### NavigableString\n\n`NavigableString`不支持`.content`,`.string`,`find()`方法。\n\n如果想在Beautiful Soup之外使用`NavigableString`对象,需要调用`unicode()`方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.\n\n```python\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\nprint(tag.string)\nprint(type(tag.string))\ntag.string.replace_with(\"No long bold\")\nprint(tag)\n\n---Extremely bold\n---<class 'bs4.element.NavigableString'>\n---<b class=\"boldest\">No long bold</b>\n```\n\n## BeautifulSoup\n\n`BeautifulSoup`对象表示的是一个文档的全部内容.大部分时候,可以把它当作 Tag 对象,它支持 遍历文档树 和 搜索文档树 中描述的大部分的方法.\n\n`BeautifuSoup`没有name和attribute属性。但有一个值为`[document]`的特殊属性`.name`\n\n```python\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\nprint(soup.name)\n\n---[document]\n```\n\n### Comment\n\n## 遍历文档树\n\n```\nhtml_doc = \"\"\"\n<html><head><title>The Dormouse's story</title></head>\n\n<p class=\"title\"><b>The Dormouse's story</b></p>\n\n<p class=\"story\">Once upon a time there were three little sisters; and their names were\n<a href=\"http://example.com/elsie\" class=\"sister\" id=\"link1\">Elsie</a>,\n<a href=\"http://example.com/lacie\" class=\"sister\" id=\"link2\">Lacie</a> and\n<a href=\"http://example.com/tillie\" class=\"sister\" id=\"link3\">Tillie</a>;\nand they lived at the bottom of a well.</p>\n\n<p class=\"story\">...</p>\n\"\"\"\n```\n\n### `.content`和`.children`\ntag的`.contents`属性可以将tag的子节点以列表的方式输出:\n通过tag的`.children`生成器,可以对tag的子节点进行循环:\n\n```python\nprint(soup.title.contents)\nprint(soup.title.contents[0])\n\n---[\"The Dormouse's story\"]\n---The Dormouse's story\n```\n\n```python\nfor i in soup.head.children:\n    print(i)\n\n---<title>The Dormouse's story</title>\n```\n\n### `.descendants`\n\n`.descendants`属性可以对所有tag的子孙节点进行递归循环\n\n```python\nprint(soup.head.contents)\nfor child in soup.head.descendants:\n    print(child)\n\nprint(len(list(soup.children)))\nprint(len(list(soup.descendants)))\n\n---[<title>The Dormouse's story</title>]\n---<title>The Dormouse's story</title>\n---The Dormouse's story\n---2\n---25\n```\n\n### `.string`\n\n如果tag只有一个`NavigableString`类型子节点,那么这个tag可以使用`.string`得到子节点\n\n```python\nprint(soup.head.string)\n\n---The Dormouse's story\n```\n\n### `.strings`和`stripped_strings`\n如果tag中有多个字符串，可以使用`.strings`循环获取\n使用`.stripped_strings`可以去除多余空白内容：\n\n```python\nfor string in soup.stripped_strings:\n    print(repr(string))\n```\n\n### `.parent`和`.parents`\n通过`.parent`属性来获取某个元素的父节点\n通过元素的`.parents`属性可以递归得到元素的所有父辈节点。\n\n```python\nfor parent in soup.a.parents:\n    if parent is None:\n        print(parent)\n    else:\n        print(parent.name)\n\n---p\n---html\n---[document]\n```\n\n### 兄弟节点\n\n#### `.next_sibling`和`.previous_sibling`\n\n使用`。next_sibling`和`.previous_sibling`属性来查询兄弟节点\n\n实际文档中的tag的 .next_sibling 和 .previous_sibling 属性通常是字符串或空白。因为中间可能会隔着一些字符以及标点。\n\n#### `.next_siblings`和`.previous_siblings`\n\n```python3\nfor sibling in soup.a.next_siblings:\n    print(repr(sibling))\n\n---',\\n'\n---<a class=\"sister\" href=\"http://example.com/lacie\" id=\"link2\">Lacie</a>\n---' and\\n'\n---<a class=\"sister\" href=\"http://example.com/tillie\" id=\"link3\">Tillie</a>\n';\\nand they lived at the bottom of a well.'\n```\n\n### 重现解析过程\n\n#### `.next_element`和`.previous_element`\n`next_element`属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与`.next_sibling`相同,但通常是不一样的.\n\n```python\nlast_a_tag=soup.find(\"a\",id=\"link3\")\nprint(last_a_tag)\nprint(last_a_tag.next_sibling)\nprint(last_a_tag.next_element)\n\n---<a class=\"sister\" href=\"http://example.com/tillie\" id=\"link3\">Tillie</a>\n---;\n---and they lived at the bottom of a well.\n---Tillie\n```\n\n#### `.next_elements`和`.previous_elements`\n\n## 搜索文档树\n\n### 过滤器\n\n#### 字符串\n\n#### 正则表达式\n\n```python\nfor tag in soup.find_all(re.compile(\"^b\")):\n    print(tag.name)\n```\n\n#### 列表\n如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.\n\n#### True\n\nTrue可以匹配任何值,但是不会返回字符串节点\n\n#### 方法\n如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数,如果这个方法返回True表示当前元素匹配并且被找到,如果不是则反回False。\n\n```python3\ndef has_class_but_no_id(tag):\n    return tag.has_attr('class') and not tag.has_attr('id')\n```\n\n\n### find_all()\n\n#### name参数\n\n#### keyword参数\n\n`soup.find_all(id='link2')`\n\n\n#### 按CSS搜索\n\n因为`class`是python保留字，所以用`class_`\n例：\n`soup.find_all(\"a\",class_=\"sister\")`\n\n`class_`参数同样接受不同类型的过滤器 ,字符串,正则表达式,方法或 True :\n\ntag的`class`属性是 多值属性 .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:\n\n#### text参数\n通过`text`参数可以搜搜文档中的字符串内容.\n\n#### limit参数\n\n`limit`参数限制返回结果的数量\n\n#### recursive参数\n调用tag的`find_all()`方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 `recursive=False`.\n\n#### 简写\n\n```\nsoup.find_all(\"a\")\nsoup(\"a\")\n```\n\n```\nsoup.title.find_all(text=True)\nsoup.title(text=True)\n```\n\n### find()\n\n只返回一个结果\n\n### `find_parents()`和`find_parent()`\n\n### `find_next_siblings()和`find_next_sibling()`\n\n### `find_all_next()`和`find_next()`\n\n### `find_all_previous()`和`find_previous()`\n\n### CSS选择器\n在Tag或BeautifulSoup对象的`.select()`方法中传入字符串参数,即可使用CSS选择器的语法找到tag:\n","source":"_posts/python/Spider/基础知识/2016-03-29-beautiful-soup4-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-29\ntitle: BeautifulSoup4入门\ncategory: Python\ntags: [python,spider,bs4]\nkeywords:\ndescription: bs4可以非常高效地获取网页中的指定内容.\n---\n\n## 对象的种类\nBeautifulSoup会将HTML文档抓换成一个树形结构, 每个节点都是Python对象，所有对象可以分为4类：`Tag`,`NavigableString`,`BeautifulSoup`,`Comment`。\n\n\n### Tag\n`Tag`与XML或HTML中的tag相同：\n\n```python3\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>')\ntag = soup.b\nprint(type(tag))\nprint(tag)\n\n--<class 'bs4.element.Tag'>\n--<b class=\"boldest\">Extremely bold</b>\n```\n\n#### name\n\n每一个Tag都有自己的name，可以通过`.name`。改变tag的name，将会影响通过当前BS对象生成的HTML文档\n\n```python3\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\nprint(tag)\nprint(tag.name)\ntag.name=\"blockquote\"\nprint(tag)\n\n---<b class=\"boldest\">Extremely bold</b>\n---b\n---<blockquote class=\"boldest\">Extremely bold</blockquote>\n```\n\n#### attributes\n一个tag可能有多个属性\n\n```python3\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\nprint(tag['class'])\nprint(tag.attrs)\n\n---['boldest']\n---{'class': ['boldest']}\n```\n\ntag的属性可以被添加，删除或修改\n\n```python\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\n#更改属性\ntag['class']=\"verybold\"\ntag['id']=1\nprint(tag)\n\n#删除属性\ndel tag['class']\nprint(tag)\nprint(tag.get('class'))\n\n---<b class=\"verybold\" id=\"1\">Extremely bold</b>\n---<b id=\"1\">Extremely bold</b>\n---\n```\n\n##### 多值属性\n多值属性即为可包含多个值的属性，最常见的即为`class`\n`xml`中没有多值属性\n\n多值属性的返回类型是list\n\n```python\ncss_soup = BeautifulSoup('<p class=\"body strikeout\"></p>',\"html.parser\")\nprint(css_soup.p['class'])\n\n---['body', 'strikeout']\n```\n\n若某个属性看起来像多值属性，但是在任何版本HTML中都没有被定义为多值属性，那么BS会将这个属性作为字符串返回\n\n```python\nid_soup = BeautifulSoup('<p id=\"my id\"></p>',\"html.parser\")\nprint(id_soup.p['id'])\n\n---my id\n```\n\n### NavigableString\n\n`NavigableString`不支持`.content`,`.string`,`find()`方法。\n\n如果想在Beautiful Soup之外使用`NavigableString`对象,需要调用`unicode()`方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.\n\n```python\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\ntag = soup.b\nprint(tag.string)\nprint(type(tag.string))\ntag.string.replace_with(\"No long bold\")\nprint(tag)\n\n---Extremely bold\n---<class 'bs4.element.NavigableString'>\n---<b class=\"boldest\">No long bold</b>\n```\n\n## BeautifulSoup\n\n`BeautifulSoup`对象表示的是一个文档的全部内容.大部分时候,可以把它当作 Tag 对象,它支持 遍历文档树 和 搜索文档树 中描述的大部分的方法.\n\n`BeautifuSoup`没有name和attribute属性。但有一个值为`[document]`的特殊属性`.name`\n\n```python\nsoup = BeautifulSoup('<b class=\"boldest\">Extremely bold</b>',\"html.parser\")\nprint(soup.name)\n\n---[document]\n```\n\n### Comment\n\n## 遍历文档树\n\n```\nhtml_doc = \"\"\"\n<html><head><title>The Dormouse's story</title></head>\n\n<p class=\"title\"><b>The Dormouse's story</b></p>\n\n<p class=\"story\">Once upon a time there were three little sisters; and their names were\n<a href=\"http://example.com/elsie\" class=\"sister\" id=\"link1\">Elsie</a>,\n<a href=\"http://example.com/lacie\" class=\"sister\" id=\"link2\">Lacie</a> and\n<a href=\"http://example.com/tillie\" class=\"sister\" id=\"link3\">Tillie</a>;\nand they lived at the bottom of a well.</p>\n\n<p class=\"story\">...</p>\n\"\"\"\n```\n\n### `.content`和`.children`\ntag的`.contents`属性可以将tag的子节点以列表的方式输出:\n通过tag的`.children`生成器,可以对tag的子节点进行循环:\n\n```python\nprint(soup.title.contents)\nprint(soup.title.contents[0])\n\n---[\"The Dormouse's story\"]\n---The Dormouse's story\n```\n\n```python\nfor i in soup.head.children:\n    print(i)\n\n---<title>The Dormouse's story</title>\n```\n\n### `.descendants`\n\n`.descendants`属性可以对所有tag的子孙节点进行递归循环\n\n```python\nprint(soup.head.contents)\nfor child in soup.head.descendants:\n    print(child)\n\nprint(len(list(soup.children)))\nprint(len(list(soup.descendants)))\n\n---[<title>The Dormouse's story</title>]\n---<title>The Dormouse's story</title>\n---The Dormouse's story\n---2\n---25\n```\n\n### `.string`\n\n如果tag只有一个`NavigableString`类型子节点,那么这个tag可以使用`.string`得到子节点\n\n```python\nprint(soup.head.string)\n\n---The Dormouse's story\n```\n\n### `.strings`和`stripped_strings`\n如果tag中有多个字符串，可以使用`.strings`循环获取\n使用`.stripped_strings`可以去除多余空白内容：\n\n```python\nfor string in soup.stripped_strings:\n    print(repr(string))\n```\n\n### `.parent`和`.parents`\n通过`.parent`属性来获取某个元素的父节点\n通过元素的`.parents`属性可以递归得到元素的所有父辈节点。\n\n```python\nfor parent in soup.a.parents:\n    if parent is None:\n        print(parent)\n    else:\n        print(parent.name)\n\n---p\n---html\n---[document]\n```\n\n### 兄弟节点\n\n#### `.next_sibling`和`.previous_sibling`\n\n使用`。next_sibling`和`.previous_sibling`属性来查询兄弟节点\n\n实际文档中的tag的 .next_sibling 和 .previous_sibling 属性通常是字符串或空白。因为中间可能会隔着一些字符以及标点。\n\n#### `.next_siblings`和`.previous_siblings`\n\n```python3\nfor sibling in soup.a.next_siblings:\n    print(repr(sibling))\n\n---',\\n'\n---<a class=\"sister\" href=\"http://example.com/lacie\" id=\"link2\">Lacie</a>\n---' and\\n'\n---<a class=\"sister\" href=\"http://example.com/tillie\" id=\"link3\">Tillie</a>\n';\\nand they lived at the bottom of a well.'\n```\n\n### 重现解析过程\n\n#### `.next_element`和`.previous_element`\n`next_element`属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与`.next_sibling`相同,但通常是不一样的.\n\n```python\nlast_a_tag=soup.find(\"a\",id=\"link3\")\nprint(last_a_tag)\nprint(last_a_tag.next_sibling)\nprint(last_a_tag.next_element)\n\n---<a class=\"sister\" href=\"http://example.com/tillie\" id=\"link3\">Tillie</a>\n---;\n---and they lived at the bottom of a well.\n---Tillie\n```\n\n#### `.next_elements`和`.previous_elements`\n\n## 搜索文档树\n\n### 过滤器\n\n#### 字符串\n\n#### 正则表达式\n\n```python\nfor tag in soup.find_all(re.compile(\"^b\")):\n    print(tag.name)\n```\n\n#### 列表\n如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.\n\n#### True\n\nTrue可以匹配任何值,但是不会返回字符串节点\n\n#### 方法\n如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数,如果这个方法返回True表示当前元素匹配并且被找到,如果不是则反回False。\n\n```python3\ndef has_class_but_no_id(tag):\n    return tag.has_attr('class') and not tag.has_attr('id')\n```\n\n\n### find_all()\n\n#### name参数\n\n#### keyword参数\n\n`soup.find_all(id='link2')`\n\n\n#### 按CSS搜索\n\n因为`class`是python保留字，所以用`class_`\n例：\n`soup.find_all(\"a\",class_=\"sister\")`\n\n`class_`参数同样接受不同类型的过滤器 ,字符串,正则表达式,方法或 True :\n\ntag的`class`属性是 多值属性 .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:\n\n#### text参数\n通过`text`参数可以搜搜文档中的字符串内容.\n\n#### limit参数\n\n`limit`参数限制返回结果的数量\n\n#### recursive参数\n调用tag的`find_all()`方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 `recursive=False`.\n\n#### 简写\n\n```\nsoup.find_all(\"a\")\nsoup(\"a\")\n```\n\n```\nsoup.title.find_all(text=True)\nsoup.title(text=True)\n```\n\n### find()\n\n只返回一个结果\n\n### `find_parents()`和`find_parent()`\n\n### `find_next_siblings()和`find_next_sibling()`\n\n### `find_all_next()`和`find_next()`\n\n### `find_all_previous()`和`find_previous()`\n\n### CSS选择器\n在Tag或BeautifulSoup对象的`.select()`方法中传入字符串参数,即可使用CSS选择器的语法找到tag:\n","slug":"python/Spider/基础知识/2016-03-29-beautiful-soup4-basic","published":1,"updated":"2016-11-07T14:20:37.446Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgl8009bu8jrwgl05l6m","content":"<h2 id=\"对象的种类\"><a href=\"#对象的种类\" class=\"headerlink\" title=\"对象的种类\"></a>对象的种类</h2><p>BeautifulSoup会将HTML文档抓换成一个树形结构, 每个节点都是Python对象，所有对象可以分为4类：<code>Tag</code>,<code>NavigableString</code>,<code>BeautifulSoup</code>,<code>Comment</code>。</p>\n<h3 id=\"Tag\"><a href=\"#Tag\" class=\"headerlink\" title=\"Tag\"></a>Tag</h3><p><code>Tag</code>与XML或HTML中的tag相同：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(&apos;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&apos;)</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(type(tag))</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">--&lt;class &apos;bs4.element.Tag&apos;&gt;</div><div class=\"line\">--&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>每一个Tag都有自己的name，可以通过<code>.name</code>。改变tag的name，将会影响通过当前BS对象生成的HTML文档</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(&apos;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&apos;,&quot;html.parser&quot;)</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(tag)</div><div class=\"line\">print(tag.name)</div><div class=\"line\">tag.name=&quot;blockquote&quot;</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">---&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;</div><div class=\"line\">---b</div><div class=\"line\">---&lt;blockquote class=&quot;boldest&quot;&gt;Extremely bold&lt;/blockquote&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"attributes\"><a href=\"#attributes\" class=\"headerlink\" title=\"attributes\"></a>attributes</h4><p>一个tag可能有多个属性</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(&apos;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&apos;,&quot;html.parser&quot;)</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(tag[&apos;class&apos;])</div><div class=\"line\">print(tag.attrs)</div><div class=\"line\"></div><div class=\"line\">---[&apos;boldest&apos;]</div><div class=\"line\">---&#123;&apos;class&apos;: [&apos;boldest&apos;]&#125;</div></pre></td></tr></table></figure>\n<p>tag的属性可以被添加，删除或修改</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup('&lt;b class=\"boldest\"&gt;Extremely bold&lt;/b&gt;',\"html.parser\")</div><div class=\"line\">tag = soup.b</div><div class=\"line\">#更改属性</div><div class=\"line\">tag['class']=\"verybold\"</div><div class=\"line\">tag['id']=1</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">#删除属性</div><div class=\"line\">del tag['class']</div><div class=\"line\">print(tag)</div><div class=\"line\">print(tag.get('class'))</div><div class=\"line\"></div><div class=\"line\">---&lt;b class=\"verybold\" id=\"1\"&gt;Extremely bold&lt;/b&gt;</div><div class=\"line\">---&lt;b id=\"1\"&gt;Extremely bold&lt;/b&gt;</div><div class=\"line\">---</div></pre></td></tr></table></figure>\n<h5 id=\"多值属性\"><a href=\"#多值属性\" class=\"headerlink\" title=\"多值属性\"></a>多值属性</h5><p>多值属性即为可包含多个值的属性，最常见的即为<code>class</code><br><code>xml</code>中没有多值属性</p>\n<p>多值属性的返回类型是list</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">css_soup = BeautifulSoup(<span class=\"string\">'&lt;p class=\"body strikeout\"&gt;&lt;/p&gt;'</span>,<span class=\"string\">\"html.parser\"</span>)</div><div class=\"line\">print(css_soup.p[<span class=\"string\">'class'</span>])</div><div class=\"line\"></div><div class=\"line\">---[<span class=\"string\">'body'</span>, <span class=\"string\">'strikeout'</span>]</div></pre></td></tr></table></figure>\n<p>若某个属性看起来像多值属性，但是在任何版本HTML中都没有被定义为多值属性，那么BS会将这个属性作为字符串返回</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">id_soup = BeautifulSoup(<span class=\"string\">'&lt;p id=\"my id\"&gt;&lt;/p&gt;'</span>,<span class=\"string\">\"html.parser\"</span>)</div><div class=\"line\">print(id_soup.p[<span class=\"string\">'id'</span>])</div><div class=\"line\"></div><div class=\"line\">---my id</div></pre></td></tr></table></figure>\n<h3 id=\"NavigableString\"><a href=\"#NavigableString\" class=\"headerlink\" title=\"NavigableString\"></a>NavigableString</h3><p><code>NavigableString</code>不支持<code>.content</code>,<code>.string</code>,<code>find()</code>方法。</p>\n<p>如果想在Beautiful Soup之外使用<code>NavigableString</code>对象,需要调用<code>unicode()</code>方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup('&lt;b class=\"boldest\"&gt;Extremely bold&lt;/b&gt;',\"html.parser\")</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(tag.string)</div><div class=\"line\">print(type(tag.string))</div><div class=\"line\">tag.string.replace_with(\"No long bold\")</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">---Extremely bold</div><div class=\"line\">---&lt;class 'bs4.element.NavigableString'&gt;</div><div class=\"line\">---&lt;b class=\"boldest\"&gt;No long bold&lt;/b&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"BeautifulSoup\"><a href=\"#BeautifulSoup\" class=\"headerlink\" title=\"BeautifulSoup\"></a>BeautifulSoup</h2><p><code>BeautifulSoup</code>对象表示的是一个文档的全部内容.大部分时候,可以把它当作 Tag 对象,它支持 遍历文档树 和 搜索文档树 中描述的大部分的方法.</p>\n<p><code>BeautifuSoup</code>没有name和attribute属性。但有一个值为<code>[document]</code>的特殊属性<code>.name</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(<span class=\"string\">'&lt;b class=\"boldest\"&gt;Extremely bold&lt;/b&gt;'</span>,<span class=\"string\">\"html.parser\"</span>)</div><div class=\"line\">print(soup.name)</div><div class=\"line\"></div><div class=\"line\">---[document]</div></pre></td></tr></table></figure>\n<h3 id=\"Comment\"><a href=\"#Comment\" class=\"headerlink\" title=\"Comment\"></a>Comment</h3><h2 id=\"遍历文档树\"><a href=\"#遍历文档树\" class=\"headerlink\" title=\"遍历文档树\"></a>遍历文档树</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">html_doc = &quot;&quot;&quot;</div><div class=\"line\">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</div><div class=\"line\">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class=\"line\">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</div><div class=\"line\">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</div><div class=\"line\">and they lived at the bottom of a well.&lt;/p&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</div><div class=\"line\">&quot;&quot;&quot;</div></pre></td></tr></table></figure>\n<h3 id=\"content和-children\"><a href=\"#content和-children\" class=\"headerlink\" title=\".content和.children\"></a><code>.content</code>和<code>.children</code></h3><p>tag的<code>.contents</code>属性可以将tag的子节点以列表的方式输出:<br>通过tag的<code>.children</code>生成器,可以对tag的子节点进行循环:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(soup.title.contents)</div><div class=\"line\">print(soup.title.contents[<span class=\"number\">0</span>])</div><div class=\"line\"></div><div class=\"line\">---[<span class=\"string\">\"The Dormouse's story\"</span>]</div><div class=\"line\">---The Dormouse<span class=\"string\">'s story</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> soup.head.children:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">---&lt;title&gt;The Dormouse<span class=\"string\">'s story&lt;/title&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"descendants\"><a href=\"#descendants\" class=\"headerlink\" title=\".descendants\"></a><code>.descendants</code></h3><p><code>.descendants</code>属性可以对所有tag的子孙节点进行递归循环</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(soup.head.contents)</div><div class=\"line\">for child in soup.head.descendants:</div><div class=\"line\">    print(child)</div><div class=\"line\"></div><div class=\"line\">print(len(list(soup.children)))</div><div class=\"line\">print(len(list(soup.descendants)))</div><div class=\"line\"></div><div class=\"line\">---[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</div><div class=\"line\">---&lt;title&gt;The Dormouse's story&lt;/title&gt;</div><div class=\"line\">---The Dormouse's story</div><div class=\"line\">---2</div><div class=\"line\">---25</div></pre></td></tr></table></figure>\n<h3 id=\"string\"><a href=\"#string\" class=\"headerlink\" title=\".string\"></a><code>.string</code></h3><p>如果tag只有一个<code>NavigableString</code>类型子节点,那么这个tag可以使用<code>.string</code>得到子节点</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(soup.head.string)</div><div class=\"line\"></div><div class=\"line\">---The Dormouse<span class=\"string\">'s story</span></div></pre></td></tr></table></figure>\n<h3 id=\"strings和stripped-strings\"><a href=\"#strings和stripped-strings\" class=\"headerlink\" title=\".strings和stripped_strings\"></a><code>.strings</code>和<code>stripped_strings</code></h3><p>如果tag中有多个字符串，可以使用<code>.strings</code>循环获取<br>使用<code>.stripped_strings</code>可以去除多余空白内容：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> string <span class=\"keyword\">in</span> soup.stripped_strings:</div><div class=\"line\">    print(repr(string))</div></pre></td></tr></table></figure>\n<h3 id=\"parent和-parents\"><a href=\"#parent和-parents\" class=\"headerlink\" title=\".parent和.parents\"></a><code>.parent</code>和<code>.parents</code></h3><p>通过<code>.parent</code>属性来获取某个元素的父节点<br>通过元素的<code>.parents</code>属性可以递归得到元素的所有父辈节点。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> parent <span class=\"keyword\">in</span> soup.a.parents:</div><div class=\"line\">    <span class=\"keyword\">if</span> parent <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">        print(parent)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        print(parent.name)</div><div class=\"line\"></div><div class=\"line\">---p</div><div class=\"line\">---html</div><div class=\"line\">---[document]</div></pre></td></tr></table></figure>\n<h3 id=\"兄弟节点\"><a href=\"#兄弟节点\" class=\"headerlink\" title=\"兄弟节点\"></a>兄弟节点</h3><h4 id=\"next-sibling和-previous-sibling\"><a href=\"#next-sibling和-previous-sibling\" class=\"headerlink\" title=\".next_sibling和.previous_sibling\"></a><code>.next_sibling</code>和<code>.previous_sibling</code></h4><p>使用<code>。next_sibling</code>和<code>.previous_sibling</code>属性来查询兄弟节点</p>\n<p>实际文档中的tag的 .next_sibling 和 .previous_sibling 属性通常是字符串或空白。因为中间可能会隔着一些字符以及标点。</p>\n<h4 id=\"next-siblings和-previous-siblings\"><a href=\"#next-siblings和-previous-siblings\" class=\"headerlink\" title=\".next_siblings和.previous_siblings\"></a><code>.next_siblings</code>和<code>.previous_siblings</code></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">for sibling in soup.a.next_siblings:</div><div class=\"line\">    print(repr(sibling))</div><div class=\"line\"></div><div class=\"line\">---&apos;,\\n&apos;</div><div class=\"line\">---&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</div><div class=\"line\">---&apos; and\\n&apos;</div><div class=\"line\">---&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</div><div class=\"line\">&apos;;\\nand they lived at the bottom of a well.&apos;</div></pre></td></tr></table></figure>\n<h3 id=\"重现解析过程\"><a href=\"#重现解析过程\" class=\"headerlink\" title=\"重现解析过程\"></a>重现解析过程</h3><h4 id=\"next-element和-previous-element\"><a href=\"#next-element和-previous-element\" class=\"headerlink\" title=\".next_element和.previous_element\"></a><code>.next_element</code>和<code>.previous_element</code></h4><p><code>next_element</code>属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与<code>.next_sibling</code>相同,但通常是不一样的.</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">last_a_tag=soup.find(\"a\",id=\"link3\")</div><div class=\"line\">print(last_a_tag)</div><div class=\"line\">print(last_a_tag.next_sibling)</div><div class=\"line\">print(last_a_tag.next_element)</div><div class=\"line\"></div><div class=\"line\">---&lt;a class=\"sister\" href=\"http://example.com/tillie\" id=\"link3\"&gt;Tillie&lt;/a&gt;</div><div class=\"line\">---;</div><div class=\"line\">---and they lived at the bottom of a well.</div><div class=\"line\">---Tillie</div></pre></td></tr></table></figure>\n<h4 id=\"next-elements和-previous-elements\"><a href=\"#next-elements和-previous-elements\" class=\"headerlink\" title=\".next_elements和.previous_elements\"></a><code>.next_elements</code>和<code>.previous_elements</code></h4><h2 id=\"搜索文档树\"><a href=\"#搜索文档树\" class=\"headerlink\" title=\"搜索文档树\"></a>搜索文档树</h2><h3 id=\"过滤器\"><a href=\"#过滤器\" class=\"headerlink\" title=\"过滤器\"></a>过滤器</h3><h4 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h4><h4 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> tag <span class=\"keyword\">in</span> soup.find_all(re.compile(<span class=\"string\">\"^b\"</span>)):</div><div class=\"line\">    print(tag.name)</div></pre></td></tr></table></figure>\n<h4 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h4><p>如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.</p>\n<h4 id=\"True\"><a href=\"#True\" class=\"headerlink\" title=\"True\"></a>True</h4><p>True可以匹配任何值,但是不会返回字符串节点</p>\n<h4 id=\"方法\"><a href=\"#方法\" class=\"headerlink\" title=\"方法\"></a>方法</h4><p>如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数,如果这个方法返回True表示当前元素匹配并且被找到,如果不是则反回False。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">def has_class_but_no_id(tag):</div><div class=\"line\">    return tag.has_attr(&apos;class&apos;) and not tag.has_attr(&apos;id&apos;)</div></pre></td></tr></table></figure>\n<h3 id=\"find-all\"><a href=\"#find-all\" class=\"headerlink\" title=\"find_all()\"></a>find_all()</h3><h4 id=\"name参数\"><a href=\"#name参数\" class=\"headerlink\" title=\"name参数\"></a>name参数</h4><h4 id=\"keyword参数\"><a href=\"#keyword参数\" class=\"headerlink\" title=\"keyword参数\"></a>keyword参数</h4><p><code>soup.find_all(id=&#39;link2&#39;)</code></p>\n<h4 id=\"按CSS搜索\"><a href=\"#按CSS搜索\" class=\"headerlink\" title=\"按CSS搜索\"></a>按CSS搜索</h4><p>因为<code>class</code>是python保留字，所以用<code>class_</code><br>例：<br><code>soup.find_all(&quot;a&quot;,class_=&quot;sister&quot;)</code></p>\n<p><code>class_</code>参数同样接受不同类型的过滤器 ,字符串,正则表达式,方法或 True :</p>\n<p>tag的<code>class</code>属性是 多值属性 .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:</p>\n<h4 id=\"text参数\"><a href=\"#text参数\" class=\"headerlink\" title=\"text参数\"></a>text参数</h4><p>通过<code>text</code>参数可以搜搜文档中的字符串内容.</p>\n<h4 id=\"limit参数\"><a href=\"#limit参数\" class=\"headerlink\" title=\"limit参数\"></a>limit参数</h4><p><code>limit</code>参数限制返回结果的数量</p>\n<h4 id=\"recursive参数\"><a href=\"#recursive参数\" class=\"headerlink\" title=\"recursive参数\"></a>recursive参数</h4><p>调用tag的<code>find_all()</code>方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 <code>recursive=False</code>.</p>\n<h4 id=\"简写\"><a href=\"#简写\" class=\"headerlink\" title=\"简写\"></a>简写</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup.find_all(&quot;a&quot;)</div><div class=\"line\">soup(&quot;a&quot;)</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup.title.find_all(text=True)</div><div class=\"line\">soup.title(text=True)</div></pre></td></tr></table></figure>\n<h3 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find()\"></a>find()</h3><p>只返回一个结果</p>\n<h3 id=\"find-parents-和find-parent\"><a href=\"#find-parents-和find-parent\" class=\"headerlink\" title=\"find_parents()和find_parent()\"></a><code>find_parents()</code>和<code>find_parent()</code></h3><h3 id=\"find-next-siblings-和find-next-sibling\"><a href=\"#find-next-siblings-和find-next-sibling\" class=\"headerlink\" title=\"find_next_siblings()和find_next_sibling()`\"></a><code>find_next_siblings()和</code>find_next_sibling()`</h3><h3 id=\"find-all-next-和find-next\"><a href=\"#find-all-next-和find-next\" class=\"headerlink\" title=\"find_all_next()和find_next()\"></a><code>find_all_next()</code>和<code>find_next()</code></h3><h3 id=\"find-all-previous-和find-previous\"><a href=\"#find-all-previous-和find-previous\" class=\"headerlink\" title=\"find_all_previous()和find_previous()\"></a><code>find_all_previous()</code>和<code>find_previous()</code></h3><h3 id=\"CSS选择器\"><a href=\"#CSS选择器\" class=\"headerlink\" title=\"CSS选择器\"></a>CSS选择器</h3><p>在Tag或BeautifulSoup对象的<code>.select()</code>方法中传入字符串参数,即可使用CSS选择器的语法找到tag:</p>\n","excerpt":"","more":"<h2 id=\"对象的种类\"><a href=\"#对象的种类\" class=\"headerlink\" title=\"对象的种类\"></a>对象的种类</h2><p>BeautifulSoup会将HTML文档抓换成一个树形结构, 每个节点都是Python对象，所有对象可以分为4类：<code>Tag</code>,<code>NavigableString</code>,<code>BeautifulSoup</code>,<code>Comment</code>。</p>\n<h3 id=\"Tag\"><a href=\"#Tag\" class=\"headerlink\" title=\"Tag\"></a>Tag</h3><p><code>Tag</code>与XML或HTML中的tag相同：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(&apos;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&apos;)</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(type(tag))</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">--&lt;class &apos;bs4.element.Tag&apos;&gt;</div><div class=\"line\">--&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>每一个Tag都有自己的name，可以通过<code>.name</code>。改变tag的name，将会影响通过当前BS对象生成的HTML文档</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(&apos;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&apos;,&quot;html.parser&quot;)</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(tag)</div><div class=\"line\">print(tag.name)</div><div class=\"line\">tag.name=&quot;blockquote&quot;</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">---&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;</div><div class=\"line\">---b</div><div class=\"line\">---&lt;blockquote class=&quot;boldest&quot;&gt;Extremely bold&lt;/blockquote&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"attributes\"><a href=\"#attributes\" class=\"headerlink\" title=\"attributes\"></a>attributes</h4><p>一个tag可能有多个属性</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(&apos;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&apos;,&quot;html.parser&quot;)</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(tag[&apos;class&apos;])</div><div class=\"line\">print(tag.attrs)</div><div class=\"line\"></div><div class=\"line\">---[&apos;boldest&apos;]</div><div class=\"line\">---&#123;&apos;class&apos;: [&apos;boldest&apos;]&#125;</div></pre></td></tr></table></figure>\n<p>tag的属性可以被添加，删除或修改</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup('&lt;b class=\"boldest\"&gt;Extremely bold&lt;/b&gt;',\"html.parser\")</div><div class=\"line\">tag = soup.b</div><div class=\"line\">#更改属性</div><div class=\"line\">tag['class']=\"verybold\"</div><div class=\"line\">tag['id']=1</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">#删除属性</div><div class=\"line\">del tag['class']</div><div class=\"line\">print(tag)</div><div class=\"line\">print(tag.get('class'))</div><div class=\"line\"></div><div class=\"line\">---&lt;b class=\"verybold\" id=\"1\"&gt;Extremely bold&lt;/b&gt;</div><div class=\"line\">---&lt;b id=\"1\"&gt;Extremely bold&lt;/b&gt;</div><div class=\"line\">---</div></pre></td></tr></table></figure>\n<h5 id=\"多值属性\"><a href=\"#多值属性\" class=\"headerlink\" title=\"多值属性\"></a>多值属性</h5><p>多值属性即为可包含多个值的属性，最常见的即为<code>class</code><br><code>xml</code>中没有多值属性</p>\n<p>多值属性的返回类型是list</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">css_soup = BeautifulSoup(<span class=\"string\">'&lt;p class=\"body strikeout\"&gt;&lt;/p&gt;'</span>,<span class=\"string\">\"html.parser\"</span>)</div><div class=\"line\">print(css_soup.p[<span class=\"string\">'class'</span>])</div><div class=\"line\"></div><div class=\"line\">---[<span class=\"string\">'body'</span>, <span class=\"string\">'strikeout'</span>]</div></pre></td></tr></table></figure>\n<p>若某个属性看起来像多值属性，但是在任何版本HTML中都没有被定义为多值属性，那么BS会将这个属性作为字符串返回</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">id_soup = BeautifulSoup(<span class=\"string\">'&lt;p id=\"my id\"&gt;&lt;/p&gt;'</span>,<span class=\"string\">\"html.parser\"</span>)</div><div class=\"line\">print(id_soup.p[<span class=\"string\">'id'</span>])</div><div class=\"line\"></div><div class=\"line\">---my id</div></pre></td></tr></table></figure>\n<h3 id=\"NavigableString\"><a href=\"#NavigableString\" class=\"headerlink\" title=\"NavigableString\"></a>NavigableString</h3><p><code>NavigableString</code>不支持<code>.content</code>,<code>.string</code>,<code>find()</code>方法。</p>\n<p>如果想在Beautiful Soup之外使用<code>NavigableString</code>对象,需要调用<code>unicode()</code>方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup('&lt;b class=\"boldest\"&gt;Extremely bold&lt;/b&gt;',\"html.parser\")</div><div class=\"line\">tag = soup.b</div><div class=\"line\">print(tag.string)</div><div class=\"line\">print(type(tag.string))</div><div class=\"line\">tag.string.replace_with(\"No long bold\")</div><div class=\"line\">print(tag)</div><div class=\"line\"></div><div class=\"line\">---Extremely bold</div><div class=\"line\">---&lt;class 'bs4.element.NavigableString'&gt;</div><div class=\"line\">---&lt;b class=\"boldest\"&gt;No long bold&lt;/b&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"BeautifulSoup\"><a href=\"#BeautifulSoup\" class=\"headerlink\" title=\"BeautifulSoup\"></a>BeautifulSoup</h2><p><code>BeautifulSoup</code>对象表示的是一个文档的全部内容.大部分时候,可以把它当作 Tag 对象,它支持 遍历文档树 和 搜索文档树 中描述的大部分的方法.</p>\n<p><code>BeautifuSoup</code>没有name和attribute属性。但有一个值为<code>[document]</code>的特殊属性<code>.name</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup = BeautifulSoup(<span class=\"string\">'&lt;b class=\"boldest\"&gt;Extremely bold&lt;/b&gt;'</span>,<span class=\"string\">\"html.parser\"</span>)</div><div class=\"line\">print(soup.name)</div><div class=\"line\"></div><div class=\"line\">---[document]</div></pre></td></tr></table></figure>\n<h3 id=\"Comment\"><a href=\"#Comment\" class=\"headerlink\" title=\"Comment\"></a>Comment</h3><h2 id=\"遍历文档树\"><a href=\"#遍历文档树\" class=\"headerlink\" title=\"遍历文档树\"></a>遍历文档树</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">html_doc = &quot;&quot;&quot;</div><div class=\"line\">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</div><div class=\"line\">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class=\"line\">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</div><div class=\"line\">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</div><div class=\"line\">and they lived at the bottom of a well.&lt;/p&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</div><div class=\"line\">&quot;&quot;&quot;</div></pre></td></tr></table></figure>\n<h3 id=\"content和-children\"><a href=\"#content和-children\" class=\"headerlink\" title=\".content和.children\"></a><code>.content</code>和<code>.children</code></h3><p>tag的<code>.contents</code>属性可以将tag的子节点以列表的方式输出:<br>通过tag的<code>.children</code>生成器,可以对tag的子节点进行循环:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(soup.title.contents)</div><div class=\"line\">print(soup.title.contents[<span class=\"number\">0</span>])</div><div class=\"line\"></div><div class=\"line\">---[<span class=\"string\">\"The Dormouse's story\"</span>]</div><div class=\"line\">---The Dormouse<span class=\"string\">'s story</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> soup.head.children:</div><div class=\"line\">    print(i)</div><div class=\"line\"></div><div class=\"line\">---&lt;title&gt;The Dormouse<span class=\"string\">'s story&lt;/title&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"descendants\"><a href=\"#descendants\" class=\"headerlink\" title=\".descendants\"></a><code>.descendants</code></h3><p><code>.descendants</code>属性可以对所有tag的子孙节点进行递归循环</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(soup.head.contents)</div><div class=\"line\">for child in soup.head.descendants:</div><div class=\"line\">    print(child)</div><div class=\"line\"></div><div class=\"line\">print(len(list(soup.children)))</div><div class=\"line\">print(len(list(soup.descendants)))</div><div class=\"line\"></div><div class=\"line\">---[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</div><div class=\"line\">---&lt;title&gt;The Dormouse's story&lt;/title&gt;</div><div class=\"line\">---The Dormouse's story</div><div class=\"line\">---2</div><div class=\"line\">---25</div></pre></td></tr></table></figure>\n<h3 id=\"string\"><a href=\"#string\" class=\"headerlink\" title=\".string\"></a><code>.string</code></h3><p>如果tag只有一个<code>NavigableString</code>类型子节点,那么这个tag可以使用<code>.string</code>得到子节点</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">print(soup.head.string)</div><div class=\"line\"></div><div class=\"line\">---The Dormouse<span class=\"string\">'s story</span></div></pre></td></tr></table></figure>\n<h3 id=\"strings和stripped-strings\"><a href=\"#strings和stripped-strings\" class=\"headerlink\" title=\".strings和stripped_strings\"></a><code>.strings</code>和<code>stripped_strings</code></h3><p>如果tag中有多个字符串，可以使用<code>.strings</code>循环获取<br>使用<code>.stripped_strings</code>可以去除多余空白内容：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> string <span class=\"keyword\">in</span> soup.stripped_strings:</div><div class=\"line\">    print(repr(string))</div></pre></td></tr></table></figure>\n<h3 id=\"parent和-parents\"><a href=\"#parent和-parents\" class=\"headerlink\" title=\".parent和.parents\"></a><code>.parent</code>和<code>.parents</code></h3><p>通过<code>.parent</code>属性来获取某个元素的父节点<br>通过元素的<code>.parents</code>属性可以递归得到元素的所有父辈节点。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> parent <span class=\"keyword\">in</span> soup.a.parents:</div><div class=\"line\">    <span class=\"keyword\">if</span> parent <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">        print(parent)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        print(parent.name)</div><div class=\"line\"></div><div class=\"line\">---p</div><div class=\"line\">---html</div><div class=\"line\">---[document]</div></pre></td></tr></table></figure>\n<h3 id=\"兄弟节点\"><a href=\"#兄弟节点\" class=\"headerlink\" title=\"兄弟节点\"></a>兄弟节点</h3><h4 id=\"next-sibling和-previous-sibling\"><a href=\"#next-sibling和-previous-sibling\" class=\"headerlink\" title=\".next_sibling和.previous_sibling\"></a><code>.next_sibling</code>和<code>.previous_sibling</code></h4><p>使用<code>。next_sibling</code>和<code>.previous_sibling</code>属性来查询兄弟节点</p>\n<p>实际文档中的tag的 .next_sibling 和 .previous_sibling 属性通常是字符串或空白。因为中间可能会隔着一些字符以及标点。</p>\n<h4 id=\"next-siblings和-previous-siblings\"><a href=\"#next-siblings和-previous-siblings\" class=\"headerlink\" title=\".next_siblings和.previous_siblings\"></a><code>.next_siblings</code>和<code>.previous_siblings</code></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">for sibling in soup.a.next_siblings:</div><div class=\"line\">    print(repr(sibling))</div><div class=\"line\"></div><div class=\"line\">---&apos;,\\n&apos;</div><div class=\"line\">---&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</div><div class=\"line\">---&apos; and\\n&apos;</div><div class=\"line\">---&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</div><div class=\"line\">&apos;;\\nand they lived at the bottom of a well.&apos;</div></pre></td></tr></table></figure>\n<h3 id=\"重现解析过程\"><a href=\"#重现解析过程\" class=\"headerlink\" title=\"重现解析过程\"></a>重现解析过程</h3><h4 id=\"next-element和-previous-element\"><a href=\"#next-element和-previous-element\" class=\"headerlink\" title=\".next_element和.previous_element\"></a><code>.next_element</code>和<code>.previous_element</code></h4><p><code>next_element</code>属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与<code>.next_sibling</code>相同,但通常是不一样的.</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">last_a_tag=soup.find(\"a\",id=\"link3\")</div><div class=\"line\">print(last_a_tag)</div><div class=\"line\">print(last_a_tag.next_sibling)</div><div class=\"line\">print(last_a_tag.next_element)</div><div class=\"line\"></div><div class=\"line\">---&lt;a class=\"sister\" href=\"http://example.com/tillie\" id=\"link3\"&gt;Tillie&lt;/a&gt;</div><div class=\"line\">---;</div><div class=\"line\">---and they lived at the bottom of a well.</div><div class=\"line\">---Tillie</div></pre></td></tr></table></figure>\n<h4 id=\"next-elements和-previous-elements\"><a href=\"#next-elements和-previous-elements\" class=\"headerlink\" title=\".next_elements和.previous_elements\"></a><code>.next_elements</code>和<code>.previous_elements</code></h4><h2 id=\"搜索文档树\"><a href=\"#搜索文档树\" class=\"headerlink\" title=\"搜索文档树\"></a>搜索文档树</h2><h3 id=\"过滤器\"><a href=\"#过滤器\" class=\"headerlink\" title=\"过滤器\"></a>过滤器</h3><h4 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h4><h4 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> tag <span class=\"keyword\">in</span> soup.find_all(re.compile(<span class=\"string\">\"^b\"</span>)):</div><div class=\"line\">    print(tag.name)</div></pre></td></tr></table></figure>\n<h4 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h4><p>如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.</p>\n<h4 id=\"True\"><a href=\"#True\" class=\"headerlink\" title=\"True\"></a>True</h4><p>True可以匹配任何值,但是不会返回字符串节点</p>\n<h4 id=\"方法\"><a href=\"#方法\" class=\"headerlink\" title=\"方法\"></a>方法</h4><p>如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数,如果这个方法返回True表示当前元素匹配并且被找到,如果不是则反回False。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">def has_class_but_no_id(tag):</div><div class=\"line\">    return tag.has_attr(&apos;class&apos;) and not tag.has_attr(&apos;id&apos;)</div></pre></td></tr></table></figure>\n<h3 id=\"find-all\"><a href=\"#find-all\" class=\"headerlink\" title=\"find_all()\"></a>find_all()</h3><h4 id=\"name参数\"><a href=\"#name参数\" class=\"headerlink\" title=\"name参数\"></a>name参数</h4><h4 id=\"keyword参数\"><a href=\"#keyword参数\" class=\"headerlink\" title=\"keyword参数\"></a>keyword参数</h4><p><code>soup.find_all(id=&#39;link2&#39;)</code></p>\n<h4 id=\"按CSS搜索\"><a href=\"#按CSS搜索\" class=\"headerlink\" title=\"按CSS搜索\"></a>按CSS搜索</h4><p>因为<code>class</code>是python保留字，所以用<code>class_</code><br>例：<br><code>soup.find_all(&quot;a&quot;,class_=&quot;sister&quot;)</code></p>\n<p><code>class_</code>参数同样接受不同类型的过滤器 ,字符串,正则表达式,方法或 True :</p>\n<p>tag的<code>class</code>属性是 多值属性 .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:</p>\n<h4 id=\"text参数\"><a href=\"#text参数\" class=\"headerlink\" title=\"text参数\"></a>text参数</h4><p>通过<code>text</code>参数可以搜搜文档中的字符串内容.</p>\n<h4 id=\"limit参数\"><a href=\"#limit参数\" class=\"headerlink\" title=\"limit参数\"></a>limit参数</h4><p><code>limit</code>参数限制返回结果的数量</p>\n<h4 id=\"recursive参数\"><a href=\"#recursive参数\" class=\"headerlink\" title=\"recursive参数\"></a>recursive参数</h4><p>调用tag的<code>find_all()</code>方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 <code>recursive=False</code>.</p>\n<h4 id=\"简写\"><a href=\"#简写\" class=\"headerlink\" title=\"简写\"></a>简写</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup.find_all(&quot;a&quot;)</div><div class=\"line\">soup(&quot;a&quot;)</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">soup.title.find_all(text=True)</div><div class=\"line\">soup.title(text=True)</div></pre></td></tr></table></figure>\n<h3 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find()\"></a>find()</h3><p>只返回一个结果</p>\n<h3 id=\"find-parents-和find-parent\"><a href=\"#find-parents-和find-parent\" class=\"headerlink\" title=\"find_parents()和find_parent()\"></a><code>find_parents()</code>和<code>find_parent()</code></h3><h3 id=\"find-next-siblings-和find-next-sibling\"><a href=\"#find-next-siblings-和find-next-sibling\" class=\"headerlink\" title=\"find_next_siblings()和find_next_sibling()`\"></a><code>find_next_siblings()和</code>find_next_sibling()`</h3><h3 id=\"find-all-next-和find-next\"><a href=\"#find-all-next-和find-next\" class=\"headerlink\" title=\"find_all_next()和find_next()\"></a><code>find_all_next()</code>和<code>find_next()</code></h3><h3 id=\"find-all-previous-和find-previous\"><a href=\"#find-all-previous-和find-previous\" class=\"headerlink\" title=\"find_all_previous()和find_previous()\"></a><code>find_all_previous()</code>和<code>find_previous()</code></h3><h3 id=\"CSS选择器\"><a href=\"#CSS选择器\" class=\"headerlink\" title=\"CSS选择器\"></a>CSS选择器</h3><p>在Tag或BeautifulSoup对象的<code>.select()</code>方法中传入字符串参数,即可使用CSS选择器的语法找到tag:</p>\n"},{"author":"ivyxjc","date":"2016-10-29T16:00:00.000Z","title":"python socket编程功能","keywords":null,"description":"利用socket获取网络内容","_content":"\n## socket编程基本思路\n\n### 服务器端\n\n1. 创建socket, 绑定socket到本地IP, 端口 socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.bind()\n2. 开始监听连接  s.listen()\n3. 进入循环，不断接受客户端的连接请求  s.accept()\n4. 然后接收传来的数据，并发送给对方数据  s.recv() , s.sendall()\n5. 传输完毕后，关闭socket  \n\n### 客户端\n1. 创建套接字，连接远端地址 #socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.connect()\n2. 连接后发送数据和接收数据 #s.sendall(), s.recv()\n3. 传输完毕后，关闭套接字 #s.close()\n\n```python\n# 导入socket库:\nimport socket\n# 创建一个socket:\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n# 建立连接:\ns.connect(('www.sina.com.cn', 80))\n```\n\n创建socket时, `socket.AF_INET`代表使用用IPv4协议, 如果要使用IPv6协议, 则指定`sockt.AF_INET6`, `SOCK_STREAM`指定使用面向流的TCP协议.\n\n```python\ns.send(b'GET / HTTP/1.1\\r\\nHost: www.sina.com.cn\\r\\nConnection: close\\r\\n\\r\\n')\n\n# 接收数据:\nbuffer = []\nwhile True:\n    # 每次最多接收1k字节:\n    d = s.recv(1024)\n    if d:\n        buffer.append(d)\n    else:\n        break\ndata = b''.join(buffer)\n\n# 关闭连接:\ns.close()\n\n\n# 处理数据\nheader, html = response.split(b'\\r\\n\\r\\n', 1)\nprint(header.decode(\"utf-8\"))\nprint(html.decode('utf-8'))\n```\n\n## socket 并发\n\nsocket默认是堵塞的, 当socket运行`connect()`,`recv()`方法时, 会堵塞直到运行完成.\n\n```python\nsock = socket.socket()\n#将socket设为非堵塞的self.\nsock.setblocking(False)\n```\n\n这样做会直接抛出一个`BlockingIOError`的异常, 详细内容`A non-blocking socket operation could not be completed immediately`,\n\n**解决方法**:\n```python\ntry:\n    sock.connect(('xkcd.com', 80))\nexcept BlockingIOError:\n    pass\n```\n\n```python\nrequest = 'GET {} HTTP/1.0\\r\\nHost: xkcd.com\\r\\n\\r\\n'.format(url)\nencoded=request.encode('ascii')\nsock.send(encoded)\n```\n\n也会抛出异常`OSError: A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied`\n\n**解决方法**:\n\n```python\nwhile True:\n    try:\n        sock.send(encoded)\n        break  # Done.\n    except OSError as e:\n        pass\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\na\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nn\n","source":"_posts/python/Spider/基础知识/2016-10-30-socket-basic.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-30\ntitle: python socket编程功能\ncategory: Python\ntags: [python,spider,socket]\nkeywords:\ndescription: 利用socket获取网络内容\n---\n\n## socket编程基本思路\n\n### 服务器端\n\n1. 创建socket, 绑定socket到本地IP, 端口 socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.bind()\n2. 开始监听连接  s.listen()\n3. 进入循环，不断接受客户端的连接请求  s.accept()\n4. 然后接收传来的数据，并发送给对方数据  s.recv() , s.sendall()\n5. 传输完毕后，关闭socket  \n\n### 客户端\n1. 创建套接字，连接远端地址 #socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.connect()\n2. 连接后发送数据和接收数据 #s.sendall(), s.recv()\n3. 传输完毕后，关闭套接字 #s.close()\n\n```python\n# 导入socket库:\nimport socket\n# 创建一个socket:\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n# 建立连接:\ns.connect(('www.sina.com.cn', 80))\n```\n\n创建socket时, `socket.AF_INET`代表使用用IPv4协议, 如果要使用IPv6协议, 则指定`sockt.AF_INET6`, `SOCK_STREAM`指定使用面向流的TCP协议.\n\n```python\ns.send(b'GET / HTTP/1.1\\r\\nHost: www.sina.com.cn\\r\\nConnection: close\\r\\n\\r\\n')\n\n# 接收数据:\nbuffer = []\nwhile True:\n    # 每次最多接收1k字节:\n    d = s.recv(1024)\n    if d:\n        buffer.append(d)\n    else:\n        break\ndata = b''.join(buffer)\n\n# 关闭连接:\ns.close()\n\n\n# 处理数据\nheader, html = response.split(b'\\r\\n\\r\\n', 1)\nprint(header.decode(\"utf-8\"))\nprint(html.decode('utf-8'))\n```\n\n## socket 并发\n\nsocket默认是堵塞的, 当socket运行`connect()`,`recv()`方法时, 会堵塞直到运行完成.\n\n```python\nsock = socket.socket()\n#将socket设为非堵塞的self.\nsock.setblocking(False)\n```\n\n这样做会直接抛出一个`BlockingIOError`的异常, 详细内容`A non-blocking socket operation could not be completed immediately`,\n\n**解决方法**:\n```python\ntry:\n    sock.connect(('xkcd.com', 80))\nexcept BlockingIOError:\n    pass\n```\n\n```python\nrequest = 'GET {} HTTP/1.0\\r\\nHost: xkcd.com\\r\\n\\r\\n'.format(url)\nencoded=request.encode('ascii')\nsock.send(encoded)\n```\n\n也会抛出异常`OSError: A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied`\n\n**解决方法**:\n\n```python\nwhile True:\n    try:\n        sock.send(encoded)\n        break  # Done.\n    except OSError as e:\n        pass\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\na\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nn\n","slug":"python/Spider/基础知识/2016-10-30-socket-basic","published":1,"updated":"2016-11-07T14:20:37.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgl8009cu8jr03mbe02j","content":"<h2 id=\"socket编程基本思路\"><a href=\"#socket编程基本思路\" class=\"headerlink\" title=\"socket编程基本思路\"></a>socket编程基本思路</h2><h3 id=\"服务器端\"><a href=\"#服务器端\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h3><ol>\n<li>创建socket, 绑定socket到本地IP, 端口 socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.bind()</li>\n<li>开始监听连接  s.listen()</li>\n<li>进入循环，不断接受客户端的连接请求  s.accept()</li>\n<li>然后接收传来的数据，并发送给对方数据  s.recv() , s.sendall()</li>\n<li>传输完毕后，关闭socket  </li>\n</ol>\n<h3 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h3><ol>\n<li>创建套接字，连接远端地址 #socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.connect()</li>\n<li>连接后发送数据和接收数据 #s.sendall(), s.recv()</li>\n<li>传输完毕后，关闭套接字 #s.close()</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 导入socket库:</span></div><div class=\"line\"><span class=\"keyword\">import</span> socket</div><div class=\"line\"><span class=\"comment\"># 创建一个socket:</span></div><div class=\"line\">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class=\"line\"><span class=\"comment\"># 建立连接:</span></div><div class=\"line\">s.connect((<span class=\"string\">'www.sina.com.cn'</span>, <span class=\"number\">80</span>))</div></pre></td></tr></table></figure>\n<p>创建socket时, <code>socket.AF_INET</code>代表使用用IPv4协议, 如果要使用IPv6协议, 则指定<code>sockt.AF_INET6</code>, <code>SOCK_STREAM</code>指定使用面向流的TCP协议.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">s.send(<span class=\"string\">b'GET / HTTP/1.1\\r\\nHost: www.sina.com.cn\\r\\nConnection: close\\r\\n\\r\\n'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 接收数据:</span></div><div class=\"line\">buffer = []</div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">    <span class=\"comment\"># 每次最多接收1k字节:</span></div><div class=\"line\">    d = s.recv(<span class=\"number\">1024</span>)</div><div class=\"line\">    <span class=\"keyword\">if</span> d:</div><div class=\"line\">        buffer.append(d)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">data = <span class=\"string\">b''</span>.join(buffer)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 关闭连接:</span></div><div class=\"line\">s.close()</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 处理数据</span></div><div class=\"line\">header, html = response.split(<span class=\"string\">b'\\r\\n\\r\\n'</span>, <span class=\"number\">1</span>)</div><div class=\"line\">print(header.decode(<span class=\"string\">\"utf-8\"</span>))</div><div class=\"line\">print(html.decode(<span class=\"string\">'utf-8'</span>))</div></pre></td></tr></table></figure>\n<h2 id=\"socket-并发\"><a href=\"#socket-并发\" class=\"headerlink\" title=\"socket 并发\"></a>socket 并发</h2><p>socket默认是堵塞的, 当socket运行<code>connect()</code>,<code>recv()</code>方法时, 会堵塞直到运行完成.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sock = socket.socket()</div><div class=\"line\"><span class=\"comment\">#将socket设为非堵塞的self.</span></div><div class=\"line\">sock.setblocking(<span class=\"keyword\">False</span>)</div></pre></td></tr></table></figure>\n<p>这样做会直接抛出一个<code>BlockingIOError</code>的异常, 详细内容<code>A non-blocking socket operation could not be completed immediately</code>,</p>\n<p><strong>解决方法</strong>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">try</span>:</div><div class=\"line\">    sock.connect((<span class=\"string\">'xkcd.com'</span>, <span class=\"number\">80</span>))</div><div class=\"line\"><span class=\"keyword\">except</span> BlockingIOError:</div><div class=\"line\">    <span class=\"keyword\">pass</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">request = <span class=\"string\">'GET &#123;&#125; HTTP/1.0\\r\\nHost: xkcd.com\\r\\n\\r\\n'</span>.format(url)</div><div class=\"line\">encoded=request.encode(<span class=\"string\">'ascii'</span>)</div><div class=\"line\">sock.send(encoded)</div></pre></td></tr></table></figure>\n<p>也会抛出异常<code>OSError: A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied</code></p>\n<p><strong>解决方法</strong>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">    <span class=\"keyword\">try</span>:</div><div class=\"line\">        sock.send(encoded)</div><div class=\"line\">        <span class=\"keyword\">break</span>  <span class=\"comment\"># Done.</span></div><div class=\"line\">    <span class=\"keyword\">except</span> OSError <span class=\"keyword\">as</span> e:</div><div class=\"line\">        <span class=\"keyword\">pass</span></div></pre></td></tr></table></figure>\n<p>a</p>\n<p>n</p>\n","excerpt":"","more":"<h2 id=\"socket编程基本思路\"><a href=\"#socket编程基本思路\" class=\"headerlink\" title=\"socket编程基本思路\"></a>socket编程基本思路</h2><h3 id=\"服务器端\"><a href=\"#服务器端\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h3><ol>\n<li>创建socket, 绑定socket到本地IP, 端口 socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.bind()</li>\n<li>开始监听连接  s.listen()</li>\n<li>进入循环，不断接受客户端的连接请求  s.accept()</li>\n<li>然后接收传来的数据，并发送给对方数据  s.recv() , s.sendall()</li>\n<li>传输完毕后，关闭socket  </li>\n</ol>\n<h3 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h3><ol>\n<li>创建套接字，连接远端地址 #socket.socket(socket.AF_INET,socket.SOCK_STREAM), s.connect()</li>\n<li>连接后发送数据和接收数据 #s.sendall(), s.recv()</li>\n<li>传输完毕后，关闭套接字 #s.close()</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 导入socket库:</span></div><div class=\"line\"><span class=\"keyword\">import</span> socket</div><div class=\"line\"><span class=\"comment\"># 创建一个socket:</span></div><div class=\"line\">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class=\"line\"><span class=\"comment\"># 建立连接:</span></div><div class=\"line\">s.connect((<span class=\"string\">'www.sina.com.cn'</span>, <span class=\"number\">80</span>))</div></pre></td></tr></table></figure>\n<p>创建socket时, <code>socket.AF_INET</code>代表使用用IPv4协议, 如果要使用IPv6协议, 则指定<code>sockt.AF_INET6</code>, <code>SOCK_STREAM</code>指定使用面向流的TCP协议.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">s.send(<span class=\"string\">b'GET / HTTP/1.1\\r\\nHost: www.sina.com.cn\\r\\nConnection: close\\r\\n\\r\\n'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 接收数据:</span></div><div class=\"line\">buffer = []</div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">    <span class=\"comment\"># 每次最多接收1k字节:</span></div><div class=\"line\">    d = s.recv(<span class=\"number\">1024</span>)</div><div class=\"line\">    <span class=\"keyword\">if</span> d:</div><div class=\"line\">        buffer.append(d)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">data = <span class=\"string\">b''</span>.join(buffer)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 关闭连接:</span></div><div class=\"line\">s.close()</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 处理数据</span></div><div class=\"line\">header, html = response.split(<span class=\"string\">b'\\r\\n\\r\\n'</span>, <span class=\"number\">1</span>)</div><div class=\"line\">print(header.decode(<span class=\"string\">\"utf-8\"</span>))</div><div class=\"line\">print(html.decode(<span class=\"string\">'utf-8'</span>))</div></pre></td></tr></table></figure>\n<h2 id=\"socket-并发\"><a href=\"#socket-并发\" class=\"headerlink\" title=\"socket 并发\"></a>socket 并发</h2><p>socket默认是堵塞的, 当socket运行<code>connect()</code>,<code>recv()</code>方法时, 会堵塞直到运行完成.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sock = socket.socket()</div><div class=\"line\"><span class=\"comment\">#将socket设为非堵塞的self.</span></div><div class=\"line\">sock.setblocking(<span class=\"keyword\">False</span>)</div></pre></td></tr></table></figure>\n<p>这样做会直接抛出一个<code>BlockingIOError</code>的异常, 详细内容<code>A non-blocking socket operation could not be completed immediately</code>,</p>\n<p><strong>解决方法</strong>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">try</span>:</div><div class=\"line\">    sock.connect((<span class=\"string\">'xkcd.com'</span>, <span class=\"number\">80</span>))</div><div class=\"line\"><span class=\"keyword\">except</span> BlockingIOError:</div><div class=\"line\">    <span class=\"keyword\">pass</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">request = <span class=\"string\">'GET &#123;&#125; HTTP/1.0\\r\\nHost: xkcd.com\\r\\n\\r\\n'</span>.format(url)</div><div class=\"line\">encoded=request.encode(<span class=\"string\">'ascii'</span>)</div><div class=\"line\">sock.send(encoded)</div></pre></td></tr></table></figure>\n<p>也会抛出异常<code>OSError: A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied</code></p>\n<p><strong>解决方法</strong>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">    <span class=\"keyword\">try</span>:</div><div class=\"line\">        sock.send(encoded)</div><div class=\"line\">        <span class=\"keyword\">break</span>  <span class=\"comment\"># Done.</span></div><div class=\"line\">    <span class=\"keyword\">except</span> OSError <span class=\"keyword\">as</span> e:</div><div class=\"line\">        <span class=\"keyword\">pass</span></div></pre></td></tr></table></figure>\n<p>a</p>\n<p>n</p>\n"},{"author":"ivyxjc","date":"2016-10-22T16:00:00.000Z","title":"利用python解析xml, json","keywords":null,"description":"以豆瓣sitemap.xml为例介绍利用python解析xml, json","_content":"\n\n##　ＸＭＬ\n\n需要到的库:\n\n```python\nfrom xml.dom.minidom import parse\nimport xml.dom.minidom\n```\n\n豆瓣sitemap_index.xml格式如下(2016-10-29):\n\n```xml\n<sitemapindex>\n    <sitemap>\n        <loc>https://www.douban.com/sitemap3782.xml.gz</loc>\n        <lastmod>2016-10-19T10:36:31Z</lastmod>\n    </sitemap>\n    <sitemap>\n        <loc>https://www.douban.com/sitemap3783.xml.gz</loc>\n        <lastmod>2016-10-19T10:36:31Z</lastmod>\n    </sitemap>\n</sitemapindex>\n```\n\n**解析过程:**\n\n```python\nxml_str=douban.sitemap.xml\nDOMTree =xml.dom.minidom.parseString(xml_str)\ncollection = DOMTree.documentElement\nelements=collection.getElementsByTagName(\"sitemap\")\nfor i in elements:\n    a=i.getElementsByTagName(\"loc\")\n    print(a[0].childNodes[0].nodeValue)\n```\n\n\n##　Json\n\n```python\nmap={}\nfor i in range(0,3783):\n    map[i]=0\n\nwith open(\"text\\\\sitemap_config.json\",\"w\") as f:\n    json.dump(map,f)\n\nmap={}\nwith open(\"text\\\\sitemap_config.json\", 'r') as f:\n    map = json.load(f)\nprint(map)\n```\n","source":"_posts/python/Spider/基础知识/2016-10-29-xml-parse.md","raw":"---\nauthor: ivyxjc\ndate: 2016-10-23\ntitle: 利用python解析xml, json\ncategory: Python\ntags: [python,spider,xml]\nkeywords:\ndescription: 以豆瓣sitemap.xml为例介绍利用python解析xml, json\n---\n\n\n##　ＸＭＬ\n\n需要到的库:\n\n```python\nfrom xml.dom.minidom import parse\nimport xml.dom.minidom\n```\n\n豆瓣sitemap_index.xml格式如下(2016-10-29):\n\n```xml\n<sitemapindex>\n    <sitemap>\n        <loc>https://www.douban.com/sitemap3782.xml.gz</loc>\n        <lastmod>2016-10-19T10:36:31Z</lastmod>\n    </sitemap>\n    <sitemap>\n        <loc>https://www.douban.com/sitemap3783.xml.gz</loc>\n        <lastmod>2016-10-19T10:36:31Z</lastmod>\n    </sitemap>\n</sitemapindex>\n```\n\n**解析过程:**\n\n```python\nxml_str=douban.sitemap.xml\nDOMTree =xml.dom.minidom.parseString(xml_str)\ncollection = DOMTree.documentElement\nelements=collection.getElementsByTagName(\"sitemap\")\nfor i in elements:\n    a=i.getElementsByTagName(\"loc\")\n    print(a[0].childNodes[0].nodeValue)\n```\n\n\n##　Json\n\n```python\nmap={}\nfor i in range(0,3783):\n    map[i]=0\n\nwith open(\"text\\\\sitemap_config.json\",\"w\") as f:\n    json.dump(map,f)\n\nmap={}\nwith open(\"text\\\\sitemap_config.json\", 'r') as f:\n    map = json.load(f)\nprint(map)\n```\n","slug":"python/Spider/基础知识/2016-10-29-xml-parse","published":1,"updated":"2016-10-30T06:14:35.016Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgla009eu8jr306l1nkq","content":"<p>##　ＸＭＬ</p>\n<p>需要到的库:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> xml.dom.minidom <span class=\"keyword\">import</span> parse</div><div class=\"line\"><span class=\"keyword\">import</span> xml.dom.minidom</div></pre></td></tr></table></figure>\n<p>豆瓣sitemap_index.xml格式如下(2016-10-29):</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sitemapindex</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.douban.com/sitemap3782.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2016-10-19T10:36:31Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.douban.com/sitemap3783.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2016-10-19T10:36:31Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">sitemapindex</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><strong>解析过程:</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">xml_str=douban.sitemap.xml</div><div class=\"line\">DOMTree =xml.dom.minidom.parseString(xml_str)</div><div class=\"line\">collection = DOMTree.documentElement</div><div class=\"line\">elements=collection.getElementsByTagName(<span class=\"string\">\"sitemap\"</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> elements:</div><div class=\"line\">    a=i.getElementsByTagName(<span class=\"string\">\"loc\"</span>)</div><div class=\"line\">    print(a[<span class=\"number\">0</span>].childNodes[<span class=\"number\">0</span>].nodeValue)</div></pre></td></tr></table></figure>\n<p>##　Json</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">map=&#123;&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>,<span class=\"number\">3783</span>):</div><div class=\"line\">    map[i]=<span class=\"number\">0</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">\"text\\\\sitemap_config.json\"</span>,<span class=\"string\">\"w\"</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">    json.dump(map,f)</div><div class=\"line\"></div><div class=\"line\">map=&#123;&#125;</div><div class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">\"text\\\\sitemap_config.json\"</span>, <span class=\"string\">'r'</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">    map = json.load(f)</div><div class=\"line\">print(map)</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>##　ＸＭＬ</p>\n<p>需要到的库:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> xml.dom.minidom <span class=\"keyword\">import</span> parse</div><div class=\"line\"><span class=\"keyword\">import</span> xml.dom.minidom</div></pre></td></tr></table></figure>\n<p>豆瓣sitemap_index.xml格式如下(2016-10-29):</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sitemapindex</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.douban.com/sitemap3782.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2016-10-19T10:36:31Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.douban.com/sitemap3783.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2016-10-19T10:36:31Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">sitemapindex</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><strong>解析过程:</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">xml_str=douban.sitemap.xml</div><div class=\"line\">DOMTree =xml.dom.minidom.parseString(xml_str)</div><div class=\"line\">collection = DOMTree.documentElement</div><div class=\"line\">elements=collection.getElementsByTagName(<span class=\"string\">\"sitemap\"</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> elements:</div><div class=\"line\">    a=i.getElementsByTagName(<span class=\"string\">\"loc\"</span>)</div><div class=\"line\">    print(a[<span class=\"number\">0</span>].childNodes[<span class=\"number\">0</span>].nodeValue)</div></pre></td></tr></table></figure>\n<p>##　Json</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">map=&#123;&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>,<span class=\"number\">3783</span>):</div><div class=\"line\">    map[i]=<span class=\"number\">0</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">\"text\\\\sitemap_config.json\"</span>,<span class=\"string\">\"w\"</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">    json.dump(map,f)</div><div class=\"line\"></div><div class=\"line\">map=&#123;&#125;</div><div class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">\"text\\\\sitemap_config.json\"</span>, <span class=\"string\">'r'</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">    map = json.load(f)</div><div class=\"line\">print(map)</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-03-13T16:00:00.000Z","title":"CriminalIntent程序中Fragment相关内容","keywords":null,"description":"如何使用Fragment","_content":"\n## Activity中托管UI fragment有两种方式：\n1. 添加fragment到acitivity中\n2. 在activity代码中添加fragment\n\n第一种方法即将fragment添加到acitivity的布局中，这样会使得fragment视图和activity视图绑定。\n\n第二种方法可以在运行时控制fragment，可以决定何时将fragment添加到activity中，也可以移除当前fragment，用其它fragment代替当前fragment...\n\n为了能够灵活地设计UI，所以常用第二种方式来添加fragment。\n\n### 详细步骤\n\n#### 托管UI fragment\n1. 需要在activity视图层级结构中为fragment试图安排位置。\n\n#### 创建UI fragment\n1. 通过定义布局文件中的组件,组装界面\n2. 创建fragment类并设置试图为定义的布局\n3. 通过代码的方式,连接布局文件中生成的组件\n\n`Fragment`类要实现两个方法--`onCreate()`和`onCreateView()`方法。`onCreateView()`方法用来生成fragment视图的布局。\n\n```java\n@Nullable\n@Override\npublic View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n    View v=inflater.inflate(R.layout.fragment_crime,container,false);\n    return v;\n}\n```\n\n`onCreateView()`方法也是生成其它组件的地方。\n\n#### 代码\n\n1. 设置容器\n\n```xml\nactivity_crime.xml\n<FrameLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:id=\"@+id/fragment_container\"/>\n```\n\n2. 编写fragment布局文件\n\n```xml\nfragment_crime.xml\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n    <EditText\n        android:id=\"@+id/crime_title_edit_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:hint=\"@string/crime_title_hint\"/>\n</LinearLayout>\n```\n\n3.使用代码添加fragment\n\n```java\nactivity_main.java\n\nFragmentManager fm=getSupportFragmentManager();\n        Fragment fragment=fm.findFragmentById(R.id.fragment_container);\n\n        if(fragment==null){\n            fragment=new FragmentCrime();\n            fm.beginTransaction()\n                    .add(R.id.fragment_container,fragment)\n                    .commit();\n        }\n```\n\n#### 添加UI fragment到FragmentManager\n\nFragmentManager主要处理：\n1. fragment队列\n2. fragment事务的回退栈\n\n\n\n## Fragment与Activity数据传送\n\nFragment传送数据到Activity\n\n```java\nIntent i=new Intent(getActivity(),CrimeActivity.class);\ni.putExtra(CrimeFragment.EXTRA_CRIME_ID,c.getId());\nstartActivity(i);\n```\n\nActivity中接受数据\n\n```java\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    UUID crimeId=(UUID)getActivity().getIntent()\n            .getSerializableExtra(EXTRA_CRIME_ID);\n\n    mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);\n}\n```\n","source":"_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-14-CriminalIntent-Fragment.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-14\ntitle: CriminalIntent程序中Fragment相关内容\ncategory: Android\ntags: [android,android_fragment]\nkeywords:\ndescription: 如何使用Fragment\n---\n\n## Activity中托管UI fragment有两种方式：\n1. 添加fragment到acitivity中\n2. 在activity代码中添加fragment\n\n第一种方法即将fragment添加到acitivity的布局中，这样会使得fragment视图和activity视图绑定。\n\n第二种方法可以在运行时控制fragment，可以决定何时将fragment添加到activity中，也可以移除当前fragment，用其它fragment代替当前fragment...\n\n为了能够灵活地设计UI，所以常用第二种方式来添加fragment。\n\n### 详细步骤\n\n#### 托管UI fragment\n1. 需要在activity视图层级结构中为fragment试图安排位置。\n\n#### 创建UI fragment\n1. 通过定义布局文件中的组件,组装界面\n2. 创建fragment类并设置试图为定义的布局\n3. 通过代码的方式,连接布局文件中生成的组件\n\n`Fragment`类要实现两个方法--`onCreate()`和`onCreateView()`方法。`onCreateView()`方法用来生成fragment视图的布局。\n\n```java\n@Nullable\n@Override\npublic View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n    View v=inflater.inflate(R.layout.fragment_crime,container,false);\n    return v;\n}\n```\n\n`onCreateView()`方法也是生成其它组件的地方。\n\n#### 代码\n\n1. 设置容器\n\n```xml\nactivity_crime.xml\n<FrameLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:id=\"@+id/fragment_container\"/>\n```\n\n2. 编写fragment布局文件\n\n```xml\nfragment_crime.xml\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n    <EditText\n        android:id=\"@+id/crime_title_edit_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:hint=\"@string/crime_title_hint\"/>\n</LinearLayout>\n```\n\n3.使用代码添加fragment\n\n```java\nactivity_main.java\n\nFragmentManager fm=getSupportFragmentManager();\n        Fragment fragment=fm.findFragmentById(R.id.fragment_container);\n\n        if(fragment==null){\n            fragment=new FragmentCrime();\n            fm.beginTransaction()\n                    .add(R.id.fragment_container,fragment)\n                    .commit();\n        }\n```\n\n#### 添加UI fragment到FragmentManager\n\nFragmentManager主要处理：\n1. fragment队列\n2. fragment事务的回退栈\n\n\n\n## Fragment与Activity数据传送\n\nFragment传送数据到Activity\n\n```java\nIntent i=new Intent(getActivity(),CrimeActivity.class);\ni.putExtra(CrimeFragment.EXTRA_CRIME_ID,c.getId());\nstartActivity(i);\n```\n\nActivity中接受数据\n\n```java\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    UUID crimeId=(UUID)getActivity().getIntent()\n            .getSerializableExtra(EXTRA_CRIME_ID);\n\n    mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);\n}\n```\n","slug":"android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-14-CriminalIntent-Fragment","published":1,"updated":"2016-10-26T11:26:51.813Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdglh009ru8jrpiyiml9j","content":"<h2 id=\"Activity中托管UI-fragment有两种方式：\"><a href=\"#Activity中托管UI-fragment有两种方式：\" class=\"headerlink\" title=\"Activity中托管UI fragment有两种方式：\"></a>Activity中托管UI fragment有两种方式：</h2><ol>\n<li>添加fragment到acitivity中</li>\n<li>在activity代码中添加fragment</li>\n</ol>\n<p>第一种方法即将fragment添加到acitivity的布局中，这样会使得fragment视图和activity视图绑定。</p>\n<p>第二种方法可以在运行时控制fragment，可以决定何时将fragment添加到activity中，也可以移除当前fragment，用其它fragment代替当前fragment…</p>\n<p>为了能够灵活地设计UI，所以常用第二种方式来添加fragment。</p>\n<h3 id=\"详细步骤\"><a href=\"#详细步骤\" class=\"headerlink\" title=\"详细步骤\"></a>详细步骤</h3><h4 id=\"托管UI-fragment\"><a href=\"#托管UI-fragment\" class=\"headerlink\" title=\"托管UI fragment\"></a>托管UI fragment</h4><ol>\n<li>需要在activity视图层级结构中为fragment试图安排位置。</li>\n</ol>\n<h4 id=\"创建UI-fragment\"><a href=\"#创建UI-fragment\" class=\"headerlink\" title=\"创建UI fragment\"></a>创建UI fragment</h4><ol>\n<li>通过定义布局文件中的组件,组装界面</li>\n<li>创建fragment类并设置试图为定义的布局</li>\n<li>通过代码的方式,连接布局文件中生成的组件</li>\n</ol>\n<p><code>Fragment</code>类要实现两个方法–<code>onCreate()</code>和<code>onCreateView()</code>方法。<code>onCreateView()</code>方法用来生成fragment视图的布局。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Nullable</span></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    View v=inflater.inflate(R.layout.fragment_crime,container,<span class=\"keyword\">false</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> v;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>onCreateView()</code>方法也是生成其它组件的地方。</p>\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><ol>\n<li>设置容器</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">activity_crime.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">FrameLayout</span></span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_container\"</span>/&gt;</div></pre></td></tr></table></figure>\n<ol>\n<li>编写fragment布局文件</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">fragment_crime.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">EditText</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/crime_title_edit_text\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:hint</span>=<span class=\"string\">\"@string/crime_title_hint\"</span>/&gt;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>3.使用代码添加fragment</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">activity_main.java</div><div class=\"line\"></div><div class=\"line\">FragmentManager fm=getSupportFragmentManager();</div><div class=\"line\">        Fragment fragment=fm.findFragmentById(R.id.fragment_container);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span>(fragment==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            fragment=<span class=\"keyword\">new</span> FragmentCrime();</div><div class=\"line\">            fm.beginTransaction()</div><div class=\"line\">                    .add(R.id.fragment_container,fragment)</div><div class=\"line\">                    .commit();</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure>\n<h4 id=\"添加UI-fragment到FragmentManager\"><a href=\"#添加UI-fragment到FragmentManager\" class=\"headerlink\" title=\"添加UI fragment到FragmentManager\"></a>添加UI fragment到FragmentManager</h4><p>FragmentManager主要处理：</p>\n<ol>\n<li>fragment队列</li>\n<li>fragment事务的回退栈</li>\n</ol>\n<h2 id=\"Fragment与Activity数据传送\"><a href=\"#Fragment与Activity数据传送\" class=\"headerlink\" title=\"Fragment与Activity数据传送\"></a>Fragment与Activity数据传送</h2><p>Fragment传送数据到Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent i=<span class=\"keyword\">new</span> Intent(getActivity(),CrimeActivity.class);</div><div class=\"line\">i.putExtra(CrimeFragment.EXTRA_CRIME_ID,c.getId());</div><div class=\"line\">startActivity(i);</div></pre></td></tr></table></figure>\n<p>Activity中接受数据</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">    UUID crimeId=(UUID)getActivity().getIntent()</div><div class=\"line\">            .getSerializableExtra(EXTRA_CRIME_ID);</div><div class=\"line\"></div><div class=\"line\">    mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"Activity中托管UI-fragment有两种方式：\"><a href=\"#Activity中托管UI-fragment有两种方式：\" class=\"headerlink\" title=\"Activity中托管UI fragment有两种方式：\"></a>Activity中托管UI fragment有两种方式：</h2><ol>\n<li>添加fragment到acitivity中</li>\n<li>在activity代码中添加fragment</li>\n</ol>\n<p>第一种方法即将fragment添加到acitivity的布局中，这样会使得fragment视图和activity视图绑定。</p>\n<p>第二种方法可以在运行时控制fragment，可以决定何时将fragment添加到activity中，也可以移除当前fragment，用其它fragment代替当前fragment…</p>\n<p>为了能够灵活地设计UI，所以常用第二种方式来添加fragment。</p>\n<h3 id=\"详细步骤\"><a href=\"#详细步骤\" class=\"headerlink\" title=\"详细步骤\"></a>详细步骤</h3><h4 id=\"托管UI-fragment\"><a href=\"#托管UI-fragment\" class=\"headerlink\" title=\"托管UI fragment\"></a>托管UI fragment</h4><ol>\n<li>需要在activity视图层级结构中为fragment试图安排位置。</li>\n</ol>\n<h4 id=\"创建UI-fragment\"><a href=\"#创建UI-fragment\" class=\"headerlink\" title=\"创建UI fragment\"></a>创建UI fragment</h4><ol>\n<li>通过定义布局文件中的组件,组装界面</li>\n<li>创建fragment类并设置试图为定义的布局</li>\n<li>通过代码的方式,连接布局文件中生成的组件</li>\n</ol>\n<p><code>Fragment</code>类要实现两个方法–<code>onCreate()</code>和<code>onCreateView()</code>方法。<code>onCreateView()</code>方法用来生成fragment视图的布局。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Nullable</span></div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    View v=inflater.inflate(R.layout.fragment_crime,container,<span class=\"keyword\">false</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> v;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>onCreateView()</code>方法也是生成其它组件的地方。</p>\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><ol>\n<li>设置容器</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">activity_crime.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">FrameLayout</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_container\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<ol>\n<li>编写fragment布局文件</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">fragment_crime.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></div><div class=\"line\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">EditText</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/crime_title_edit_text\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:hint</span>=<span class=\"string\">\"@string/crime_title_hint\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>3.使用代码添加fragment</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">activity_main.java</div><div class=\"line\"></div><div class=\"line\">FragmentManager fm=getSupportFragmentManager();</div><div class=\"line\">        Fragment fragment=fm.findFragmentById(R.id.fragment_container);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span>(fragment==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            fragment=<span class=\"keyword\">new</span> FragmentCrime();</div><div class=\"line\">            fm.beginTransaction()</div><div class=\"line\">                    .add(R.id.fragment_container,fragment)</div><div class=\"line\">                    .commit();</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure>\n<h4 id=\"添加UI-fragment到FragmentManager\"><a href=\"#添加UI-fragment到FragmentManager\" class=\"headerlink\" title=\"添加UI fragment到FragmentManager\"></a>添加UI fragment到FragmentManager</h4><p>FragmentManager主要处理：</p>\n<ol>\n<li>fragment队列</li>\n<li>fragment事务的回退栈</li>\n</ol>\n<h2 id=\"Fragment与Activity数据传送\"><a href=\"#Fragment与Activity数据传送\" class=\"headerlink\" title=\"Fragment与Activity数据传送\"></a>Fragment与Activity数据传送</h2><p>Fragment传送数据到Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent i=<span class=\"keyword\">new</span> Intent(getActivity(),CrimeActivity.class);</div><div class=\"line\">i.putExtra(CrimeFragment.EXTRA_CRIME_ID,c.getId());</div><div class=\"line\">startActivity(i);</div></pre></td></tr></table></figure>\n<p>Activity中接受数据</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">    UUID crimeId=(UUID)getActivity().getIntent()</div><div class=\"line\">            .getSerializableExtra(EXTRA_CRIME_ID);</div><div class=\"line\"></div><div class=\"line\">    mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-07-05T16:00:00.000Z","title":"CriminalIntent程序中Fragment，Activity通信","keywords":null,"description":"使用Intent在Fragment, Activity中进行通信.","_content":"\n## 最简单的应用\n\n```java\nIntent intent=new Intent(getActivity(), ActivityCrimeBase.class);\nstartActivity(intent);\n```\n\n## 使用extra添加信息\n\n### 附加extra信息\n\n```java\nintent.putExtra(FragmentCrime.EXTRA_CRIME_ID,c.getId());\n```\n\n### 获取extra信息\n\n```java\n\nFragmentCrime.java\n\npublic static final String EXTRA_CRIME_ID=\"com.jc.criminalIntent2.crime_id\";\n....\n....\nUUID crimeId=(UUID)getActivity()\n                .getIntent()\n                .getSerializableExtra(EXTRA_CRIME_ID);\n```\n\n此方法会破坏fragment的封装性，因为这时fragment总是需要由某个具体的activity托管。\n\n为了解决这一问题，可以就爱你个`mCrimeId`存放在fragment的arguments bundle中。\n\n\n```java\n\nActivityCrime.java\npublic class ActivityCrime extends ActivitySetFragmentBase {\n\n    @Override\n    protected Fragment createFragment() {\n        UUID crimeId=(UUID)getIntent()\n                .getSerializableExtra(FragmentCrime.EXTRA_CRIME_ID);\n\n        return FragmentCrime.newInstance(crimeId);\n    }\n}\n\nFragmentCrime.java\n\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n     super.onCreate(savedInstanceState);\n     UUID crimeId=(UUID)getArguments()\n             .getSerializable(EXTRA_CRIME_ID);\n     mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);\n }\n\n\n public static FragmentCrime newInstance(UUID crimeId){\n\n     Bundle args=new Bundle();\n     args.putSerializable(EXTRA_CRIME_ID,crimeId);\n     FragmentCrime fragment=new FragmentCrime();\n     fragment.setArguments(args);\n     return fragment;\n }\n\n```\n","source":"_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-Intent.md","raw":"---\nauthor: ivyxjc\ndate: 2016-07-06\ntitle: CriminalIntent程序中Fragment，Activity通信\ncategory: Android\ntags: [android,android_fragment,android_activity,android_adapter]\nkeywords:\ndescription: 使用Intent在Fragment, Activity中进行通信.\n---\n\n## 最简单的应用\n\n```java\nIntent intent=new Intent(getActivity(), ActivityCrimeBase.class);\nstartActivity(intent);\n```\n\n## 使用extra添加信息\n\n### 附加extra信息\n\n```java\nintent.putExtra(FragmentCrime.EXTRA_CRIME_ID,c.getId());\n```\n\n### 获取extra信息\n\n```java\n\nFragmentCrime.java\n\npublic static final String EXTRA_CRIME_ID=\"com.jc.criminalIntent2.crime_id\";\n....\n....\nUUID crimeId=(UUID)getActivity()\n                .getIntent()\n                .getSerializableExtra(EXTRA_CRIME_ID);\n```\n\n此方法会破坏fragment的封装性，因为这时fragment总是需要由某个具体的activity托管。\n\n为了解决这一问题，可以就爱你个`mCrimeId`存放在fragment的arguments bundle中。\n\n\n```java\n\nActivityCrime.java\npublic class ActivityCrime extends ActivitySetFragmentBase {\n\n    @Override\n    protected Fragment createFragment() {\n        UUID crimeId=(UUID)getIntent()\n                .getSerializableExtra(FragmentCrime.EXTRA_CRIME_ID);\n\n        return FragmentCrime.newInstance(crimeId);\n    }\n}\n\nFragmentCrime.java\n\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n     super.onCreate(savedInstanceState);\n     UUID crimeId=(UUID)getArguments()\n             .getSerializable(EXTRA_CRIME_ID);\n     mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);\n }\n\n\n public static FragmentCrime newInstance(UUID crimeId){\n\n     Bundle args=new Bundle();\n     args.putSerializable(EXTRA_CRIME_ID,crimeId);\n     FragmentCrime fragment=new FragmentCrime();\n     fragment.setArguments(args);\n     return fragment;\n }\n\n```\n","slug":"android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-Intent","published":1,"updated":"2016-10-26T11:26:51.821Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdgli009su8jrc7m800rk","content":"<h2 id=\"最简单的应用\"><a href=\"#最简单的应用\" class=\"headerlink\" title=\"最简单的应用\"></a>最简单的应用</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent intent=<span class=\"keyword\">new</span> Intent(getActivity(), ActivityCrimeBase.class);</div><div class=\"line\">startActivity(intent);</div></pre></td></tr></table></figure>\n<h2 id=\"使用extra添加信息\"><a href=\"#使用extra添加信息\" class=\"headerlink\" title=\"使用extra添加信息\"></a>使用extra添加信息</h2><h3 id=\"附加extra信息\"><a href=\"#附加extra信息\" class=\"headerlink\" title=\"附加extra信息\"></a>附加extra信息</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">intent.putExtra(FragmentCrime.EXTRA_CRIME_ID,c.getId());</div></pre></td></tr></table></figure>\n<h3 id=\"获取extra信息\"><a href=\"#获取extra信息\" class=\"headerlink\" title=\"获取extra信息\"></a>获取extra信息</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">FragmentCrime.java</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String EXTRA_CRIME_ID=<span class=\"string\">\"com.jc.criminalIntent2.crime_id\"</span>;</div><div class=\"line\">....</div><div class=\"line\">....</div><div class=\"line\">UUID crimeId=(UUID)getActivity()</div><div class=\"line\">                .getIntent()</div><div class=\"line\">                .getSerializableExtra(EXTRA_CRIME_ID);</div></pre></td></tr></table></figure>\n<p>此方法会破坏fragment的封装性，因为这时fragment总是需要由某个具体的activity托管。</p>\n<p>为了解决这一问题，可以就爱你个<code>mCrimeId</code>存放在fragment的arguments bundle中。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">ActivityCrime.java</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ActivityCrime</span> <span class=\"keyword\">extends</span> <span class=\"title\">ActivitySetFragmentBase</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> Fragment <span class=\"title\">createFragment</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        UUID crimeId=(UUID)getIntent()</div><div class=\"line\">                .getSerializableExtra(FragmentCrime.EXTRA_CRIME_ID);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> FragmentCrime.newInstance(crimeId);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">FragmentCrime.<span class=\"function\">java</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(@Nullable Bundle savedInstanceState)</span> &#123;</div><div class=\"line\">     <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">     UUID crimeId=(UUID)getArguments()</div><div class=\"line\">             .getSerializable(EXTRA_CRIME_ID);</div><div class=\"line\">     mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);</div><div class=\"line\"> &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> FragmentCrime <span class=\"title\">newInstance</span><span class=\"params\">(UUID crimeId)</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">     Bundle args=<span class=\"keyword\">new</span> Bundle();</div><div class=\"line\">     args.putSerializable(EXTRA_CRIME_ID,crimeId);</div><div class=\"line\">     FragmentCrime fragment=<span class=\"keyword\">new</span> FragmentCrime();</div><div class=\"line\">     fragment.setArguments(args);</div><div class=\"line\">     <span class=\"keyword\">return</span> fragment;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"最简单的应用\"><a href=\"#最简单的应用\" class=\"headerlink\" title=\"最简单的应用\"></a>最简单的应用</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent intent=<span class=\"keyword\">new</span> Intent(getActivity(), ActivityCrimeBase.class);</div><div class=\"line\">startActivity(intent);</div></pre></td></tr></table></figure>\n<h2 id=\"使用extra添加信息\"><a href=\"#使用extra添加信息\" class=\"headerlink\" title=\"使用extra添加信息\"></a>使用extra添加信息</h2><h3 id=\"附加extra信息\"><a href=\"#附加extra信息\" class=\"headerlink\" title=\"附加extra信息\"></a>附加extra信息</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">intent.putExtra(FragmentCrime.EXTRA_CRIME_ID,c.getId());</div></pre></td></tr></table></figure>\n<h3 id=\"获取extra信息\"><a href=\"#获取extra信息\" class=\"headerlink\" title=\"获取extra信息\"></a>获取extra信息</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">FragmentCrime.java</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String EXTRA_CRIME_ID=<span class=\"string\">\"com.jc.criminalIntent2.crime_id\"</span>;</div><div class=\"line\">....</div><div class=\"line\">....</div><div class=\"line\">UUID crimeId=(UUID)getActivity()</div><div class=\"line\">                .getIntent()</div><div class=\"line\">                .getSerializableExtra(EXTRA_CRIME_ID);</div></pre></td></tr></table></figure>\n<p>此方法会破坏fragment的封装性，因为这时fragment总是需要由某个具体的activity托管。</p>\n<p>为了解决这一问题，可以就爱你个<code>mCrimeId</code>存放在fragment的arguments bundle中。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">ActivityCrime.java</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ActivityCrime</span> <span class=\"keyword\">extends</span> <span class=\"title\">ActivitySetFragmentBase</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> Fragment <span class=\"title\">createFragment</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        UUID crimeId=(UUID)getIntent()</div><div class=\"line\">                .getSerializableExtra(FragmentCrime.EXTRA_CRIME_ID);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> FragmentCrime.newInstance(crimeId);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">FragmentCrime.<span class=\"function\">java</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">     <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">     UUID crimeId=(UUID)getArguments()</div><div class=\"line\">             .getSerializable(EXTRA_CRIME_ID);</div><div class=\"line\">     mCrime=CrimeLab.get(getActivity()).getCrime(crimeId);</div><div class=\"line\"> &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> FragmentCrime <span class=\"title\">newInstance</span><span class=\"params\">(UUID crimeId)</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">     Bundle args=<span class=\"keyword\">new</span> Bundle();</div><div class=\"line\">     args.putSerializable(EXTRA_CRIME_ID,crimeId);</div><div class=\"line\">     FragmentCrime fragment=<span class=\"keyword\">new</span> FragmentCrime();</div><div class=\"line\">     fragment.setArguments(args);</div><div class=\"line\">     <span class=\"keyword\">return</span> fragment;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-07-05T16:00:00.000Z","title":"CriminalIntent程序中ListFragment相关内容","keywords":null,"description":"如何使用ListFragment.","_content":"\n## 定制adapter\n\nadapter负责：\n1. 创建必要的视图对象\n2. 用模型层数据填充视图对性爱那个\n3. 将准备好的视图对象返回给ListView\n\n\n```java\n...\n内部类\nprivate class CrimeAdapter extends ArrayAdapter<Crime>{\n        public CrimeAdapter(ArrayList<Crime> crimes){\n            super(getActivity(),0,crimes);\n        }\n\n        @Override\n        public View getView(int position, View convertView, ViewGroup parent) {\n            if(convertView==null){\n                convertView=getActivity()\n                        .getLayoutInflater()\n                        .inflate(R.layout.list_item_crime,null);\n            }\n\n            Crime c=(Crime)(getListAdapter()).getItem(position);\n\n            TextView titleTextView=(TextView)convertView.findViewById(R.id.list_item_crime_title_TextView);\n            TextView dateTextView=(TextView)convertView.findViewById(R.id.list_item_crime_date_TextView);\n            CheckBox solvedCheckBox=(CheckBox)convertView.findViewById(R.id.list_item_crime_isSolved_CheckBox);\n\n            solvedCheckBox.setChecked(c.isSolved());\n            return convertView;\n        }\n    }\n\n...\n```\n注： 由于CheckBox默认是可聚焦的，也就是点击列表向会被解读为切换CheckBox的状态，因而无法触发`onListItemClick()`方法。解决方法：\n\n```xml\n<CheckBox\n        android:id=\"@+id/list_item_crime_isSolved_CheckBox\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentRight=\"true\"\n        android:gravity=\"center\"\n    android:focusable=\"false\"/>\n```\n","source":"_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-ListFragment.md","raw":"---\nauthor: ivyxjc\ndate: 2016-07-06\ntitle: CriminalIntent程序中ListFragment相关内容\ncategory: Android\ntags: [android,android_adapter]\nkeywords:\ndescription: 如何使用ListFragment.\n---\n\n## 定制adapter\n\nadapter负责：\n1. 创建必要的视图对象\n2. 用模型层数据填充视图对性爱那个\n3. 将准备好的视图对象返回给ListView\n\n\n```java\n...\n内部类\nprivate class CrimeAdapter extends ArrayAdapter<Crime>{\n        public CrimeAdapter(ArrayList<Crime> crimes){\n            super(getActivity(),0,crimes);\n        }\n\n        @Override\n        public View getView(int position, View convertView, ViewGroup parent) {\n            if(convertView==null){\n                convertView=getActivity()\n                        .getLayoutInflater()\n                        .inflate(R.layout.list_item_crime,null);\n            }\n\n            Crime c=(Crime)(getListAdapter()).getItem(position);\n\n            TextView titleTextView=(TextView)convertView.findViewById(R.id.list_item_crime_title_TextView);\n            TextView dateTextView=(TextView)convertView.findViewById(R.id.list_item_crime_date_TextView);\n            CheckBox solvedCheckBox=(CheckBox)convertView.findViewById(R.id.list_item_crime_isSolved_CheckBox);\n\n            solvedCheckBox.setChecked(c.isSolved());\n            return convertView;\n        }\n    }\n\n...\n```\n注： 由于CheckBox默认是可聚焦的，也就是点击列表向会被解读为切换CheckBox的状态，因而无法触发`onListItemClick()`方法。解决方法：\n\n```xml\n<CheckBox\n        android:id=\"@+id/list_item_crime_isSolved_CheckBox\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentRight=\"true\"\n        android:gravity=\"center\"\n    android:focusable=\"false\"/>\n```\n","slug":"android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-06-CriminalIntent-ListFragment","published":1,"updated":"2016-10-25T09:03:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdglk009uu8jr6flj1d71","content":"<h2 id=\"定制adapter\"><a href=\"#定制adapter\" class=\"headerlink\" title=\"定制adapter\"></a>定制adapter</h2><p>adapter负责：</p>\n<ol>\n<li>创建必要的视图对象</li>\n<li>用模型层数据填充视图对性爱那个</li>\n<li>将准备好的视图对象返回给ListView</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\">内部类</div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CrimeAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">ArrayAdapter</span>&lt;<span class=\"title\">Crime</span>&gt;</span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CrimeAdapter</span><span class=\"params\">(ArrayList&lt;Crime&gt; crimes)</span></span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(getActivity(),<span class=\"number\">0</span>,crimes);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(convertView==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                convertView=getActivity()</div><div class=\"line\">                        .getLayoutInflater()</div><div class=\"line\">                        .inflate(R.layout.list_item_crime,<span class=\"keyword\">null</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            Crime c=(Crime)(getListAdapter()).getItem(position);</div><div class=\"line\"></div><div class=\"line\">            TextView titleTextView=(TextView)convertView.findViewById(R.id.list_item_crime_title_TextView);</div><div class=\"line\">            TextView dateTextView=(TextView)convertView.findViewById(R.id.list_item_crime_date_TextView);</div><div class=\"line\">            CheckBox solvedCheckBox=(CheckBox)convertView.findViewById(R.id.list_item_crime_isSolved_CheckBox);</div><div class=\"line\"></div><div class=\"line\">            solvedCheckBox.setChecked(c.isSolved());</div><div class=\"line\">            <span class=\"keyword\">return</span> convertView;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>注： 由于CheckBox默认是可聚焦的，也就是点击列表向会被解读为切换CheckBox的状态，因而无法触发<code>onListItemClick()</code>方法。解决方法：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">CheckBox</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/list_item_crime_isSolved_CheckBox\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_alignParentRight</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">    <span class=\"attr\">android:focusable</span>=<span class=\"string\">\"false\"</span>/&gt;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"定制adapter\"><a href=\"#定制adapter\" class=\"headerlink\" title=\"定制adapter\"></a>定制adapter</h2><p>adapter负责：</p>\n<ol>\n<li>创建必要的视图对象</li>\n<li>用模型层数据填充视图对性爱那个</li>\n<li>将准备好的视图对象返回给ListView</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\">内部类</div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CrimeAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">ArrayAdapter</span>&lt;<span class=\"title\">Crime</span>&gt;</span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CrimeAdapter</span><span class=\"params\">(ArrayList&lt;Crime&gt; crimes)</span></span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(getActivity(),<span class=\"number\">0</span>,crimes);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(convertView==<span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">                convertView=getActivity()</div><div class=\"line\">                        .getLayoutInflater()</div><div class=\"line\">                        .inflate(R.layout.list_item_crime,<span class=\"keyword\">null</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            Crime c=(Crime)(getListAdapter()).getItem(position);</div><div class=\"line\"></div><div class=\"line\">            TextView titleTextView=(TextView)convertView.findViewById(R.id.list_item_crime_title_TextView);</div><div class=\"line\">            TextView dateTextView=(TextView)convertView.findViewById(R.id.list_item_crime_date_TextView);</div><div class=\"line\">            CheckBox solvedCheckBox=(CheckBox)convertView.findViewById(R.id.list_item_crime_isSolved_CheckBox);</div><div class=\"line\"></div><div class=\"line\">            solvedCheckBox.setChecked(c.isSolved());</div><div class=\"line\">            <span class=\"keyword\">return</span> convertView;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>注： 由于CheckBox默认是可聚焦的，也就是点击列表向会被解读为切换CheckBox的状态，因而无法触发<code>onListItemClick()</code>方法。解决方法：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">CheckBox</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/list_item_crime_isSolved_CheckBox\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_alignParentRight</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">    <span class=\"attr\">android:focusable</span>=<span class=\"string\">\"false\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-03-16T16:00:00.000Z","title":"CriminalIntent程序中Fragment相关内容","keywords":null,"description":null,"_content":"\n## 实现DialogFragment方法\n1. 创建DialogPickerFragment类\n2. 创建AlertDialog\n3. 通过FragmentManager在屏幕上显示对话框\n\n\n\n##　创建DialogFrgment\n\n在屏幕上显示DialogFrgment时,托管Activity的FragmentManager会调用以下方法:\n\n`  public Dialog onCreateDialog(Bundle savedInstanceState)`\n\n1.2.\n\n\n ```java\npublic class FragmentDataPicker extends DialogFragment {\n    @Override\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\n        return new AlertDialog.Builder(getActivity())\n                .setTitle(R.string.date_picker_title)\n                .setPositiveButton(android.R.string.ok,null)\n                .create();\n    }\n}\n```\n\n3.\n\n```java\nmDateButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                FragmentManager fm=getActivity()\n                        .getSupportFragmentManager();\n\n                FragmentDataPicker dialog=new FragmentDataPicker();\n                dialog.show(fm,DIALOG_DATE);\n            }\n        });\n```\n\nandroid有三种用于对话框的按钮：positive按钮，negative按钮和neutral按钮。\n\n### 设置对话框的显示内容\n\n```java\nView v=getActivity().getLayoutInflater()\n                .inflate(R.layout.dialog_date,null);\n\nreturn new AlertDialog.Builder(getActivity())\n      .setView(v)\n          .setTitle(R.string.date_picker_title)\n          .setPositiveButton(android.R.string.ok,null)\n          .create();\n```\n","source":"_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-17-Diaglog.md","raw":"---\nauthor: ivyxjc\ndate: 2016-03-17\ntitle: CriminalIntent程序中Fragment相关内容\ncategory: Android\ntags: [android,android_project,android_fragment]\nkeywords:\ndescription:\n---\n\n## 实现DialogFragment方法\n1. 创建DialogPickerFragment类\n2. 创建AlertDialog\n3. 通过FragmentManager在屏幕上显示对话框\n\n\n\n##　创建DialogFrgment\n\n在屏幕上显示DialogFrgment时,托管Activity的FragmentManager会调用以下方法:\n\n`  public Dialog onCreateDialog(Bundle savedInstanceState)`\n\n1.2.\n\n\n ```java\npublic class FragmentDataPicker extends DialogFragment {\n    @Override\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\n        return new AlertDialog.Builder(getActivity())\n                .setTitle(R.string.date_picker_title)\n                .setPositiveButton(android.R.string.ok,null)\n                .create();\n    }\n}\n```\n\n3.\n\n```java\nmDateButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                FragmentManager fm=getActivity()\n                        .getSupportFragmentManager();\n\n                FragmentDataPicker dialog=new FragmentDataPicker();\n                dialog.show(fm,DIALOG_DATE);\n            }\n        });\n```\n\nandroid有三种用于对话框的按钮：positive按钮，negative按钮和neutral按钮。\n\n### 设置对话框的显示内容\n\n```java\nView v=getActivity().getLayoutInflater()\n                .inflate(R.layout.dialog_date,null);\n\nreturn new AlertDialog.Builder(getActivity())\n      .setView(v)\n          .setTitle(R.string.date_picker_title)\n          .setPositiveButton(android.R.string.ok,null)\n          .create();\n```\n","slug":"android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-03-17-Diaglog","published":1,"updated":"2016-10-26T11:26:51.817Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdglm009yu8jr9wikxngw","content":"<h2 id=\"实现DialogFragment方法\"><a href=\"#实现DialogFragment方法\" class=\"headerlink\" title=\"实现DialogFragment方法\"></a>实现DialogFragment方法</h2><ol>\n<li>创建DialogPickerFragment类</li>\n<li>创建AlertDialog</li>\n<li>通过FragmentManager在屏幕上显示对话框</li>\n</ol>\n<p>##　创建DialogFrgment</p>\n<p>在屏幕上显示DialogFrgment时,托管Activity的FragmentManager会调用以下方法:</p>\n<p><code>public Dialog onCreateDialog(Bundle savedInstanceState)</code></p>\n<p>1.2.</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FragmentDataPicker</span> <span class=\"keyword\">extends</span> <span class=\"title\">DialogFragment</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dialog <span class=\"title\">onCreateDialog</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AlertDialog.Builder(getActivity())</div><div class=\"line\">                .setTitle(R.string.date_picker_title)</div><div class=\"line\">                .setPositiveButton(android.R.string.ok,<span class=\"keyword\">null</span>)</div><div class=\"line\">                .create();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>3.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">mDateButton.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">                FragmentManager fm=getActivity()</div><div class=\"line\">                        .getSupportFragmentManager();</div><div class=\"line\"></div><div class=\"line\">                FragmentDataPicker dialog=<span class=\"keyword\">new</span> FragmentDataPicker();</div><div class=\"line\">                dialog.show(fm,DIALOG_DATE);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>\n<p>android有三种用于对话框的按钮：positive按钮，negative按钮和neutral按钮。</p>\n<h3 id=\"设置对话框的显示内容\"><a href=\"#设置对话框的显示内容\" class=\"headerlink\" title=\"设置对话框的显示内容\"></a>设置对话框的显示内容</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">View v=getActivity().getLayoutInflater()</div><div class=\"line\">                .inflate(R.layout.dialog_date,<span class=\"keyword\">null</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AlertDialog.Builder(getActivity())</div><div class=\"line\">      .setView(v)</div><div class=\"line\">          .setTitle(R.string.date_picker_title)</div><div class=\"line\">          .setPositiveButton(android.R.string.ok,<span class=\"keyword\">null</span>)</div><div class=\"line\">          .create();</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h2 id=\"实现DialogFragment方法\"><a href=\"#实现DialogFragment方法\" class=\"headerlink\" title=\"实现DialogFragment方法\"></a>实现DialogFragment方法</h2><ol>\n<li>创建DialogPickerFragment类</li>\n<li>创建AlertDialog</li>\n<li>通过FragmentManager在屏幕上显示对话框</li>\n</ol>\n<p>##　创建DialogFrgment</p>\n<p>在屏幕上显示DialogFrgment时,托管Activity的FragmentManager会调用以下方法:</p>\n<p><code>public Dialog onCreateDialog(Bundle savedInstanceState)</code></p>\n<p>1.2.</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FragmentDataPicker</span> <span class=\"keyword\">extends</span> <span class=\"title\">DialogFragment</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dialog <span class=\"title\">onCreateDialog</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AlertDialog.Builder(getActivity())</div><div class=\"line\">                .setTitle(R.string.date_picker_title)</div><div class=\"line\">                .setPositiveButton(android.R.string.ok,<span class=\"keyword\">null</span>)</div><div class=\"line\">                .create();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>3.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">mDateButton.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</div><div class=\"line\">                FragmentManager fm=getActivity()</div><div class=\"line\">                        .getSupportFragmentManager();</div><div class=\"line\"></div><div class=\"line\">                FragmentDataPicker dialog=<span class=\"keyword\">new</span> FragmentDataPicker();</div><div class=\"line\">                dialog.show(fm,DIALOG_DATE);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>\n<p>android有三种用于对话框的按钮：positive按钮，negative按钮和neutral按钮。</p>\n<h3 id=\"设置对话框的显示内容\"><a href=\"#设置对话框的显示内容\" class=\"headerlink\" title=\"设置对话框的显示内容\"></a>设置对话框的显示内容</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">View v=getActivity().getLayoutInflater()</div><div class=\"line\">                .inflate(R.layout.dialog_date,<span class=\"keyword\">null</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AlertDialog.Builder(getActivity())</div><div class=\"line\">      .setView(v)</div><div class=\"line\">          .setTitle(R.string.date_picker_title)</div><div class=\"line\">          .setPositiveButton(android.R.string.ok,<span class=\"keyword\">null</span>)</div><div class=\"line\">          .create();</div></pre></td></tr></table></figure>\n"},{"author":"ivyxjc","date":"2016-07-07T16:00:00.000Z","title":"CriminalIntent程序中ViewPager相关内容","keywords":null,"description":"FragmenPagerAdapter和FragmenStatePagerAdapter这两者的区别主要在于卸载不再需要的fragment时采取的方法不同。","_content":"\n\n## FragmenPagerAdapter和FragmenStatePagerAdapter\n\n这两者的区别主要在于卸载不再需要的fragment时采取的方法不同。\n\n使用FragmentStatePagerAdapter会销毁掉不需要的fragment。事务提交后，可以将fragment从activity的FragmentManager中彻底移除。该类名中的`state`表明在销毁fragment时，它会将`onSaveInstanceState(Bundle)`方法中的Bundle信息保存下来。用户切换回来时，保存的实例可用于回复生成新的fragment。\n\n\nFragmentPagerAdapter对于不再需要的fragment，FragmentManager选择调用事务的`detach(fragment)`方法，而非`remove(fragment)`方法，FragmentPagerAdapter只是销毁fragment的视图，但是仍将实例保留在FragmentManager中。FragmentPagerAdapter创建的fragment不会被销毁。\n\n由上可知:\n1. FragmentStatePagerAdapter更省内存，所以当有大量的fragment时，推荐使用FragmentStatePagerAdapter.\n2. 但是当用户界面只有少量fragment时，推荐FragmentPagerAdapter。\n","source":"_posts/android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-08-ViewPager.md","raw":"---\nauthor: ivyxjc\ndate: 2016-07-08\ntitle: CriminalIntent程序中ViewPager相关内容\ncategory: Android\ntags: [android,android_view_pager]\nkeywords:\ndescription: FragmenPagerAdapter和FragmenStatePagerAdapter这两者的区别主要在于卸载不再需要的fragment时采取的方法不同。\n---\n\n\n## FragmenPagerAdapter和FragmenStatePagerAdapter\n\n这两者的区别主要在于卸载不再需要的fragment时采取的方法不同。\n\n使用FragmentStatePagerAdapter会销毁掉不需要的fragment。事务提交后，可以将fragment从activity的FragmentManager中彻底移除。该类名中的`state`表明在销毁fragment时，它会将`onSaveInstanceState(Bundle)`方法中的Bundle信息保存下来。用户切换回来时，保存的实例可用于回复生成新的fragment。\n\n\nFragmentPagerAdapter对于不再需要的fragment，FragmentManager选择调用事务的`detach(fragment)`方法，而非`remove(fragment)`方法，FragmentPagerAdapter只是销毁fragment的视图，但是仍将实例保留在FragmentManager中。FragmentPagerAdapter创建的fragment不会被销毁。\n\n由上可知:\n1. FragmentStatePagerAdapter更省内存，所以当有大量的fragment时，推荐使用FragmentStatePagerAdapter.\n2. 但是当用户界面只有少量fragment时，推荐FragmentPagerAdapter。\n","slug":"android/开发实战/AndroidBigNerdRanceGuide/CriminalIntent开发/2016-07-08-ViewPager","published":1,"updated":"2016-10-25T09:03:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"civxvdglq00adu8jrt3ufrs6f","content":"<h2 id=\"FragmenPagerAdapter和FragmenStatePagerAdapter\"><a href=\"#FragmenPagerAdapter和FragmenStatePagerAdapter\" class=\"headerlink\" title=\"FragmenPagerAdapter和FragmenStatePagerAdapter\"></a>FragmenPagerAdapter和FragmenStatePagerAdapter</h2><p>这两者的区别主要在于卸载不再需要的fragment时采取的方法不同。</p>\n<p>使用FragmentStatePagerAdapter会销毁掉不需要的fragment。事务提交后，可以将fragment从activity的FragmentManager中彻底移除。该类名中的<code>state</code>表明在销毁fragment时，它会将<code>onSaveInstanceState(Bundle)</code>方法中的Bundle信息保存下来。用户切换回来时，保存的实例可用于回复生成新的fragment。</p>\n<p>FragmentPagerAdapter对于不再需要的fragment，FragmentManager选择调用事务的<code>detach(fragment)</code>方法，而非<code>remove(fragment)</code>方法，FragmentPagerAdapter只是销毁fragment的视图，但是仍将实例保留在FragmentManager中。FragmentPagerAdapter创建的fragment不会被销毁。</p>\n<p>由上可知:</p>\n<ol>\n<li>FragmentStatePagerAdapter更省内存，所以当有大量的fragment时，推荐使用FragmentStatePagerAdapter.</li>\n<li>但是当用户界面只有少量fragment时，推荐FragmentPagerAdapter。</li>\n</ol>\n","excerpt":"","more":"<h2 id=\"FragmenPagerAdapter和FragmenStatePagerAdapter\"><a href=\"#FragmenPagerAdapter和FragmenStatePagerAdapter\" class=\"headerlink\" title=\"FragmenPagerAdapter和FragmenStatePagerAdapter\"></a>FragmenPagerAdapter和FragmenStatePagerAdapter</h2><p>这两者的区别主要在于卸载不再需要的fragment时采取的方法不同。</p>\n<p>使用FragmentStatePagerAdapter会销毁掉不需要的fragment。事务提交后，可以将fragment从activity的FragmentManager中彻底移除。该类名中的<code>state</code>表明在销毁fragment时，它会将<code>onSaveInstanceState(Bundle)</code>方法中的Bundle信息保存下来。用户切换回来时，保存的实例可用于回复生成新的fragment。</p>\n<p>FragmentPagerAdapter对于不再需要的fragment，FragmentManager选择调用事务的<code>detach(fragment)</code>方法，而非<code>remove(fragment)</code>方法，FragmentPagerAdapter只是销毁fragment的视图，但是仍将实例保留在FragmentManager中。FragmentPagerAdapter创建的fragment不会被销毁。</p>\n<p>由上可知:</p>\n<ol>\n<li>FragmentStatePagerAdapter更省内存，所以当有大量的fragment时，推荐使用FragmentStatePagerAdapter.</li>\n<li>但是当用户界面只有少量fragment时，推荐FragmentPagerAdapter。</li>\n</ol>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"civxvdged0005u8jrsq7bu0g0","category_id":"civxvdgeg0007u8jrvjh4pmhm","_id":"civxvdgeu000gu8jrbyc4yvyq"},{"post_id":"civxvdgef0006u8jr6hrodi9m","category_id":"civxvdgen000cu8jrhix8k5nk","_id":"civxvdgey000nu8jrythno5tc"},{"post_id":"civxvdgej000au8jrptyxozaz","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgf2000su8jrrjwkfv1z"},{"post_id":"civxvdgem000bu8jr3gf9y1bk","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgf6000yu8jrkuzptrim"},{"post_id":"civxvdger000fu8jrplrimbf6","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgfb0015u8jr7bu4grt8"},{"post_id":"civxvdgeu000hu8jrzc17tqki","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgfh001bu8jr7hsfe1bs"},{"post_id":"civxvdgfc0017u8jrcfl6yfs5","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgfj001fu8jrt4y90ybo"},{"post_id":"civxvdgew000ku8jrbzvf0ds7","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgfj001hu8jr82nwpkuf"},{"post_id":"civxvdgfe001au8jr16bnxqv1","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgfl001ku8jr25lumeg1"},{"post_id":"civxvdgex000mu8jrug30mb3p","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgfl001mu8jr2u8ue70y"},{"post_id":"civxvdgez000qu8jraz0ackob","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgfn001pu8jrqzhqivrs"},{"post_id":"civxvdgf1000ru8jrhkvzmrkd","category_id":"civxvdgfm001nu8jrak971dmq","_id":"civxvdgfo001tu8jrxqodpw85"},{"post_id":"civxvdgf3000vu8jr8t5a4xbf","category_id":"civxvdgfm001nu8jrak971dmq","_id":"civxvdgfp001xu8jrj7b5nazr"},{"post_id":"civxvdgf5000xu8jrt9xf2zkk","category_id":"civxvdgfm001nu8jrak971dmq","_id":"civxvdgfr0021u8jr4aj4uqvn"},{"post_id":"civxvdgf70011u8jrwjegrb0i","category_id":"civxvdgfm001nu8jrak971dmq","_id":"civxvdgfs0025u8jruknyoe07"},{"post_id":"civxvdgfa0014u8jrr183itc1","category_id":"civxvdgfm001nu8jrak971dmq","_id":"civxvdgfs0027u8jrw2yanme8"},{"post_id":"civxvdghp002pu8jr4h71hg93","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdghr002ru8jr7qvwsnw0"},{"post_id":"civxvdgi1002wu8jr58f1axkz","category_id":"civxvdgfm001nu8jrak971dmq","_id":"civxvdgi50032u8jr7h18wfgx"},{"post_id":"civxvdgi3002xu8jrebrxdsh9","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgi80034u8jrf2uixmmg"},{"post_id":"civxvdghy002su8jrlz07kz23","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgia0037u8jrn7eh6p42"},{"post_id":"civxvdgi4002zu8jr00gqklja","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgic0039u8jrd1w35sn7"},{"post_id":"civxvdgi60033u8jrsx3t03wg","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgif003cu8jrtxp65jqa"},{"post_id":"civxvdghz002tu8jrdccwq6cq","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgig003fu8jrsach723n"},{"post_id":"civxvdgi90035u8jr5x60qco7","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgih003iu8jrq93d4hn6"},{"post_id":"civxvdgia0038u8jre30rh2r3","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgij003mu8jr15syjp5s"},{"post_id":"civxvdgic003au8jrkmvgrx5t","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgik003pu8jrr3iqokyh"},{"post_id":"civxvdgif003du8jrmhwwf06y","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgin003su8jrpunkb9ol"},{"post_id":"civxvdgig003gu8jr6iw1ltql","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgio003vu8jr12afr5jp"},{"post_id":"civxvdgii003ku8jr0dztof9t","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgip003yu8jrtgyj3k4c"},{"post_id":"civxvdgij003nu8jro10gzxgl","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgis0041u8jrnfvt77wd"},{"post_id":"civxvdgim003qu8jrn9zj864o","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgiu0044u8jrfqmtxyix"},{"post_id":"civxvdgio003uu8jrpinqgz99","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgiv0046u8jrwmvfn3ww"},{"post_id":"civxvdgip003wu8jrjgm20kpu","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgiw0048u8jr047gkac6"},{"post_id":"civxvdgiq003zu8jrfcopyuu6","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgiy004bu8jroj7az329"},{"post_id":"civxvdgit0042u8jrr44ps1yi","category_id":"civxvdgey000ou8jrysy0zcqu","_id":"civxvdgiy004du8jr9ctkw7jr"},{"post_id":"civxvdgiu0045u8jrsezv0azq","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgiy004fu8jr5hx8kbzo"},{"post_id":"civxvdgiw0047u8jrtsxqv9k6","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgiy004gu8jrgjjs9tg7"},{"post_id":"civxvdgj9005ru8jrtj04i1k2","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgjg005tu8jr5wndczsb"},{"post_id":"civxvdgjl005wu8jrwqef0al0","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgjq0060u8jra6gv6igv"},{"post_id":"civxvdgjm005xu8jrfqlymhwr","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgjs0062u8jrioxeo1z1"},{"post_id":"civxvdgjn005zu8jr8oba0wnp","category_id":"civxvdgi1002uu8jrxepd7ayc","_id":"civxvdgju0066u8jrbhsv08do"},{"post_id":"civxvdgjr0061u8jrup382vyp","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgjw0069u8jrjo60yx9a"},{"post_id":"civxvdgjt0063u8jrgyg2ql8s","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgjx006du8jr4q6zpe0j"},{"post_id":"civxvdgju0067u8jrgmmn1c87","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgjz006gu8jrxpc5yp2s"},{"post_id":"civxvdgjw006au8jrx88hb1n7","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgk1006ku8jrjfaeh81i"},{"post_id":"civxvdgjy006eu8jrmct1l6q7","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgk4006nu8jrnu24gw46"},{"post_id":"civxvdgjz006hu8jreny11atn","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgk5006qu8jrn6modi5u"},{"post_id":"civxvdgk1006lu8jr4u9wgbry","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgk7006uu8jr6srxb9ft"},{"post_id":"civxvdgk4006ou8jr9u4rmpeg","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgk9006xu8jrj1ztkymk"},{"post_id":"civxvdgk6006su8jrhbdgecjb","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgkb0071u8jrmgbse93p"},{"post_id":"civxvdgk8006vu8jrh9g7lsi6","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgkc0074u8jr8yv6qcd0"},{"post_id":"civxvdgka006yu8jrand4a716","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgkf0078u8jr22ev4t8r"},{"post_id":"civxvdgkb0072u8jrbwa3amuv","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgki007bu8jrfmnytdn3"},{"post_id":"civxvdgkc0075u8jrj2og1wqc","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgkk007fu8jr04vnybbn"},{"post_id":"civxvdgkf0079u8jr151swhj5","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgkr007iu8jrd3qxzfmo"},{"post_id":"civxvdgkj007cu8jrvdkikn5m","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgks007mu8jrkjq384o4"},{"post_id":"civxvdgkk007gu8jro4hoj324","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgkt007pu8jrxbcehsh5"},{"post_id":"civxvdgkr007ju8jrgefg4sho","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgkv007tu8jrlyuncgai"},{"post_id":"civxvdgks007nu8jrljarzequ","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgkx007wu8jrt8lv4usp"},{"post_id":"civxvdgku007qu8jrfoamkits","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgkz0080u8jrir64tp0n"},{"post_id":"civxvdgkv007uu8jrrs5scyxw","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgl00082u8jrzbjfpwv7"},{"post_id":"civxvdgkx007xu8jrz1n1vvo2","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgl00085u8jr2w7sp1sj"},{"post_id":"civxvdgl8009bu8jrwgl05l6m","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdglb009gu8jr6uvwrlya"},{"post_id":"civxvdgl8009cu8jr03mbe02j","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgle009iu8jrjnxrozq7"},{"post_id":"civxvdgla009eu8jr306l1nkq","category_id":"civxvdgfh001cu8jr3fv85pif","_id":"civxvdgle009ku8jr5guoo7q8"},{"post_id":"civxvdglh009ru8jrpiyiml9j","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdglm009wu8jr4ykwcqli"},{"post_id":"civxvdgli009su8jrc7m800rk","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdgln009zu8jrydksaf6c"},{"post_id":"civxvdglk009uu8jr6flj1d71","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdglo00a1u8jrjz6fb6ga"},{"post_id":"civxvdglm009yu8jr9wikxngw","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdglo00a4u8jriu5zreda"},{"post_id":"civxvdglq00adu8jrt3ufrs6f","category_id":"civxvdgev000iu8jry4m1mr47","_id":"civxvdglr00afu8jra23nn9um"}],"PostTag":[{"post_id":"civxvdg9k0000u8jr7ccwwqgz","tag_id":"civxvdg9p0001u8jrrlsdni2p","_id":"civxvdg9r0003u8jrg1l3ked0"},{"post_id":"civxvdg9k0000u8jr7ccwwqgz","tag_id":"civxvdg9r0002u8jrrt4wxbcg","_id":"civxvdg9s0004u8jrjy1hcamf"},{"post_id":"civxvdged0005u8jrsq7bu0g0","tag_id":"civxvdgeg0008u8jrumfxczio","_id":"civxvdger000eu8jrcwh9ot5s"},{"post_id":"civxvdgef0006u8jr6hrodi9m","tag_id":"civxvdgeo000du8jr8m105akw","_id":"civxvdgex000lu8jrklte5idi"},{"post_id":"civxvdgej000au8jrptyxozaz","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgf4000wu8jrr96t6w3x"},{"post_id":"civxvdgej000au8jrptyxozaz","tag_id":"civxvdgez000pu8jrq9jgnxut","_id":"civxvdgf6000zu8jr1jopofvi"},{"post_id":"civxvdgem000bu8jr3gf9y1bk","tag_id":"civxvdgf3000uu8jrmz0bdcqn","_id":"civxvdgf90013u8jru5ocvh8e"},{"post_id":"civxvdger000fu8jrplrimbf6","tag_id":"civxvdgf3000uu8jrmz0bdcqn","_id":"civxvdgfe0019u8jrnm48ore1"},{"post_id":"civxvdgfe001au8jr16bnxqv1","tag_id":"civxvdgf3000uu8jrmz0bdcqn","_id":"civxvdgfi001eu8jrfu3f6kr7"},{"post_id":"civxvdgeu000hu8jrzc17tqki","tag_id":"civxvdgf3000uu8jrmz0bdcqn","_id":"civxvdgfj001gu8jrjrci7c19"},{"post_id":"civxvdgew000ku8jrbzvf0ds7","tag_id":"civxvdgf3000uu8jrmz0bdcqn","_id":"civxvdgfl001lu8jr8uaq5uu8"},{"post_id":"civxvdgex000mu8jrug30mb3p","tag_id":"civxvdgfj001ju8jr0gee8skr","_id":"civxvdgfn001su8jrfgh9zhyk"},{"post_id":"civxvdgex000mu8jrug30mb3p","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgfo001vu8jrrohp5vwm"},{"post_id":"civxvdgez000qu8jraz0ackob","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgfr0020u8jriaggct74"},{"post_id":"civxvdgez000qu8jraz0ackob","tag_id":"civxvdgfp001wu8jr2ujvirku","_id":"civxvdgfr0023u8jrkth0ozsx"},{"post_id":"civxvdgf1000ru8jrhkvzmrkd","tag_id":"civxvdgfq001zu8jrfku2cdrl","_id":"civxvdgfu002au8jrl9cbejmr"},{"post_id":"civxvdgf1000ru8jrhkvzmrkd","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgfu002bu8jrol7z4kts"},{"post_id":"civxvdgf1000ru8jrhkvzmrkd","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdgfu002du8jroavjej46"},{"post_id":"civxvdgf1000ru8jrhkvzmrkd","tag_id":"civxvdgft0028u8jrs5fp1qtj","_id":"civxvdgfu002eu8jrjx1zjgz8"},{"post_id":"civxvdgf3000vu8jr8t5a4xbf","tag_id":"civxvdgfq001zu8jrfku2cdrl","_id":"civxvdgfv002gu8jr960a1f41"},{"post_id":"civxvdgf5000xu8jrt9xf2zkk","tag_id":"civxvdgfq001zu8jrfku2cdrl","_id":"civxvdgfv002hu8jrywr8wlpq"},{"post_id":"civxvdgf70011u8jrwjegrb0i","tag_id":"civxvdgfq001zu8jrfku2cdrl","_id":"civxvdgfw002ju8jr3snh2r3z"},{"post_id":"civxvdgfa0014u8jrr183itc1","tag_id":"civxvdgfq001zu8jrfku2cdrl","_id":"civxvdgfw002mu8jrz7vll0ge"},{"post_id":"civxvdgfa0014u8jrr183itc1","tag_id":"civxvdgfw002ku8jrmv4b683h","_id":"civxvdgfw002nu8jr06m81rxf"},{"post_id":"civxvdgfc0017u8jrcfl6yfs5","tag_id":"civxvdgfw002lu8jrsede9n8t","_id":"civxvdgfw002ou8jr6cdu1wd8"},{"post_id":"civxvdghp002pu8jr4h71hg93","tag_id":"civxvdgf3000uu8jrmz0bdcqn","_id":"civxvdghr002qu8jr6ylrei5s"},{"post_id":"civxvdgi1002wu8jr58f1axkz","tag_id":"civxvdgeo000du8jr8m105akw","_id":"civxvdgi4002yu8jrw906vzqh"},{"post_id":"civxvdghy002su8jrlz07kz23","tag_id":"civxvdgi1002vu8jrh05azu3y","_id":"civxvdgig003eu8jr8mmmd02l"},{"post_id":"civxvdghy002su8jrlz07kz23","tag_id":"civxvdgi50031u8jr25tlt7hj","_id":"civxvdgih003hu8jr8dex7j6y"},{"post_id":"civxvdghy002su8jrlz07kz23","tag_id":"civxvdgia0036u8jrwpagohkw","_id":"civxvdgij003lu8jr7iz0tq0e"},{"post_id":"civxvdghz002tu8jrdccwq6cq","tag_id":"civxvdgif003bu8jrr2o3ku9p","_id":"civxvdgik003ou8jroyyyrrlw"},{"post_id":"civxvdgi3002xu8jrebrxdsh9","tag_id":"civxvdgih003ju8jrzy3rmfmu","_id":"civxvdgin003tu8jrxcrcuou5"},{"post_id":"civxvdgi4002zu8jr00gqklja","tag_id":"civxvdgin003ru8jrz720aja8","_id":"civxvdgis0040u8jrbqcan5ag"},{"post_id":"civxvdgi60033u8jrsx3t03wg","tag_id":"civxvdgip003xu8jr70xbgneb","_id":"civxvdgiy004au8jrlzx22o33"},{"post_id":"civxvdgi60033u8jrsx3t03wg","tag_id":"civxvdgiu0043u8jrnkk35ydc","_id":"civxvdgiy004cu8jrue6vfn6u"},{"post_id":"civxvdgi90035u8jr5x60qco7","tag_id":"civxvdgix0049u8jrb40r789b","_id":"civxvdgiz004ju8jrsr32do7o"},{"post_id":"civxvdgi90035u8jr5x60qco7","tag_id":"civxvdgiy004eu8jrhv3bqpz8","_id":"civxvdgiz004ku8jrutklb78w"},{"post_id":"civxvdgi90035u8jr5x60qco7","tag_id":"civxvdgiz004hu8jr9v8nze5l","_id":"civxvdgj0004mu8jrpgqsqmyn"},{"post_id":"civxvdgia0038u8jre30rh2r3","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj0004ou8jrr4my39ds"},{"post_id":"civxvdgia0038u8jre30rh2r3","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgj0004pu8jr0qp35mna"},{"post_id":"civxvdgia0038u8jre30rh2r3","tag_id":"civxvdgiz004lu8jr4ia2oqnd","_id":"civxvdgj1004ru8jrfpq69xtc"},{"post_id":"civxvdgic003au8jrkmvgrx5t","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj1004su8jrsk3ksz2b"},{"post_id":"civxvdgic003au8jrkmvgrx5t","tag_id":"civxvdgj0004nu8jr490orxgi","_id":"civxvdgj1004uu8jrfgfweroi"},{"post_id":"civxvdgif003du8jrmhwwf06y","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj1004vu8jrlzpwdp8l"},{"post_id":"civxvdgif003du8jrmhwwf06y","tag_id":"civxvdgj1004qu8jr4a7c4edq","_id":"civxvdgj2004xu8jrjee64qgp"},{"post_id":"civxvdgig003gu8jr6iw1ltql","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj2004yu8jrnbofgkc3"},{"post_id":"civxvdgig003gu8jr6iw1ltql","tag_id":"civxvdgj1004tu8jr7k1npsst","_id":"civxvdgj2004zu8jrat3j172u"},{"post_id":"civxvdgii003ku8jr0dztof9t","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj20051u8jrlrc5spxb"},{"post_id":"civxvdgii003ku8jr0dztof9t","tag_id":"civxvdgj1004wu8jr3z7whsxd","_id":"civxvdgj30052u8jr1yh3gh5e"},{"post_id":"civxvdgij003nu8jro10gzxgl","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj30054u8jroi3ruydz"},{"post_id":"civxvdgij003nu8jro10gzxgl","tag_id":"civxvdgj20050u8jra9lang9w","_id":"civxvdgj30055u8jriss9j39f"},{"post_id":"civxvdgim003qu8jrn9zj864o","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj40057u8jrvwf4t9i2"},{"post_id":"civxvdgim003qu8jrn9zj864o","tag_id":"civxvdgj30053u8jrucvg4ukh","_id":"civxvdgj40058u8jrhvp58xvs"},{"post_id":"civxvdgio003uu8jrpinqgz99","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj4005au8jrqu571jdd"},{"post_id":"civxvdgio003uu8jrpinqgz99","tag_id":"civxvdgj20050u8jra9lang9w","_id":"civxvdgj4005bu8jrj2mub9yq"},{"post_id":"civxvdgip003wu8jrjgm20kpu","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj5005du8jrqcgi04qf"},{"post_id":"civxvdgip003wu8jrjgm20kpu","tag_id":"civxvdgj40059u8jrx9nwwzxf","_id":"civxvdgj5005eu8jrycgvmkcx"},{"post_id":"civxvdgiq003zu8jrfcopyuu6","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj5005gu8jrl2noevoj"},{"post_id":"civxvdgiq003zu8jrfcopyuu6","tag_id":"civxvdgj40059u8jrx9nwwzxf","_id":"civxvdgj6005hu8jri321hc48"},{"post_id":"civxvdgit0042u8jrr44ps1yi","tag_id":"civxvdgj5005fu8jrr1nei961","_id":"civxvdgj6005ku8jro3wvesy9"},{"post_id":"civxvdgit0042u8jrr44ps1yi","tag_id":"civxvdgj6005iu8jrsqcu2mru","_id":"civxvdgj6005lu8jrk56km5uy"},{"post_id":"civxvdgiu0045u8jrsezv0azq","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgj7005nu8jrwklqh9c8"},{"post_id":"civxvdgiu0045u8jrsezv0azq","tag_id":"civxvdgj6005ju8jrkpl1fx7r","_id":"civxvdgj7005ou8jr489b8znm"},{"post_id":"civxvdgiw0047u8jrtsxqv9k6","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgj7005pu8jrkvzfmmhh"},{"post_id":"civxvdgiw0047u8jrtsxqv9k6","tag_id":"civxvdgj30053u8jrucvg4ukh","_id":"civxvdgj7005qu8jr3397p7hl"},{"post_id":"civxvdgj9005ru8jrtj04i1k2","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgjg005uu8jrmz4j3l8y"},{"post_id":"civxvdgj9005ru8jrtj04i1k2","tag_id":"civxvdgjg005su8jronde53fp","_id":"civxvdgjh005vu8jr23qcg2mw"},{"post_id":"civxvdgjr0061u8jrup382vyp","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgju0065u8jrrix9qt0f"},{"post_id":"civxvdgjr0061u8jrup382vyp","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgjw0068u8jruybl8t6a"},{"post_id":"civxvdgjl005wu8jrwqef0al0","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgjx006cu8jrq78b7hmq"},{"post_id":"civxvdgjl005wu8jrwqef0al0","tag_id":"civxvdgjn005yu8jrht4pfjbe","_id":"civxvdgjz006fu8jr49nlt9mk"},{"post_id":"civxvdgju0067u8jrgmmn1c87","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgk0006ju8jrn4lxdfx9"},{"post_id":"civxvdgju0067u8jrgmmn1c87","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgk4006mu8jr17rfoiyw"},{"post_id":"civxvdgju0067u8jrgmmn1c87","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdgk5006pu8jrpv8hdu60"},{"post_id":"civxvdgjm005xu8jrfqlymhwr","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgk7006tu8jr5t5kqi0o"},{"post_id":"civxvdgjm005xu8jrfqlymhwr","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdgk9006wu8jrzd3fb214"},{"post_id":"civxvdgjm005xu8jrfqlymhwr","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgkb0070u8jr33hr40yz"},{"post_id":"civxvdgjw006au8jrx88hb1n7","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgkc0073u8jrc3i5onvv"},{"post_id":"civxvdgjw006au8jrx88hb1n7","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgkf0077u8jroa8ojacs"},{"post_id":"civxvdgk1006lu8jr4u9wgbry","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgki007au8jrd7lmscb6"},{"post_id":"civxvdgk1006lu8jr4u9wgbry","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgkk007eu8jrc0sezxrl"},{"post_id":"civxvdgk1006lu8jr4u9wgbry","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdgkr007hu8jrjdrsc5k5"},{"post_id":"civxvdgk8006vu8jrh9g7lsi6","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgks007lu8jr9f1wv50n"},{"post_id":"civxvdgka006yu8jrand4a716","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgkt007ou8jrexpsy5ps"},{"post_id":"civxvdgjn005zu8jr8oba0wnp","tag_id":"civxvdgjx006bu8jraaen08e1","_id":"civxvdgkv007su8jr65yfnzec"},{"post_id":"civxvdgjn005zu8jr8oba0wnp","tag_id":"civxvdgiy004eu8jrhv3bqpz8","_id":"civxvdgkx007vu8jr90oiyb6n"},{"post_id":"civxvdgjn005zu8jr8oba0wnp","tag_id":"civxvdgk0006iu8jrb7t2lpbf","_id":"civxvdgkz007zu8jr5jhkbuxv"},{"post_id":"civxvdgjn005zu8jr8oba0wnp","tag_id":"civxvdgk5006ru8jrmm17p9gu","_id":"civxvdgkz0081u8jr34xl50ac"},{"post_id":"civxvdgjn005zu8jr8oba0wnp","tag_id":"civxvdgka006zu8jr8ewi11to","_id":"civxvdgl00084u8jrwekjed66"},{"post_id":"civxvdgkc0075u8jrj2og1wqc","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl00086u8jrl2khd4s5"},{"post_id":"civxvdgkc0075u8jrj2og1wqc","tag_id":"civxvdgj40059u8jrx9nwwzxf","_id":"civxvdgl00087u8jrcwjxul05"},{"post_id":"civxvdgjt0063u8jrgyg2ql8s","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl10089u8jrefbapldp"},{"post_id":"civxvdgjt0063u8jrgyg2ql8s","tag_id":"civxvdgiz004iu8jr2ln1y071","_id":"civxvdgl1008au8jrba41z6as"},{"post_id":"civxvdgjt0063u8jrgyg2ql8s","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdgl1008cu8jr38n1qqiz"},{"post_id":"civxvdgkj007cu8jrvdkikn5m","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl1008du8jrgvxwthwe"},{"post_id":"civxvdgjy006eu8jrmct1l6q7","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl2008fu8jriq664g79"},{"post_id":"civxvdgjy006eu8jrmct1l6q7","tag_id":"civxvdgkj007du8jrtm7yb61i","_id":"civxvdgl2008gu8jruvevtr2o"},{"post_id":"civxvdgjz006hu8jreny11atn","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl2008iu8jraatt54x0"},{"post_id":"civxvdgjz006hu8jreny11atn","tag_id":"civxvdgkj007du8jrtm7yb61i","_id":"civxvdgl2008ju8jreva2lpnk"},{"post_id":"civxvdgkv007uu8jrrs5scyxw","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgl2008ku8jrci56cstp"},{"post_id":"civxvdgkv007uu8jrrs5scyxw","tag_id":"civxvdgjn005yu8jrht4pfjbe","_id":"civxvdgl3008mu8jrrxqzvfav"},{"post_id":"civxvdgk4006ou8jr9u4rmpeg","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl3008nu8jrrtam6q7o"},{"post_id":"civxvdgk4006ou8jr9u4rmpeg","tag_id":"civxvdgkj007du8jrtm7yb61i","_id":"civxvdgl4008pu8jrfzj6ugpl"},{"post_id":"civxvdgkx007xu8jrz1n1vvo2","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgl4008qu8jri4h5eq3a"},{"post_id":"civxvdgkx007xu8jrz1n1vvo2","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdgl4008ru8jrme3rnxf5"},{"post_id":"civxvdgkx007xu8jrz1n1vvo2","tag_id":"civxvdgft0028u8jrs5fp1qtj","_id":"civxvdgl4008su8jr80jd4hrv"},{"post_id":"civxvdgk6006su8jrhbdgecjb","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl4008tu8jricsirbzu"},{"post_id":"civxvdgk6006su8jrhbdgecjb","tag_id":"civxvdgkj007du8jrtm7yb61i","_id":"civxvdgl4008uu8jrcz99nd1h"},{"post_id":"civxvdgkb0072u8jrbwa3amuv","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl4008vu8jri7ytrwls"},{"post_id":"civxvdgkb0072u8jrbwa3amuv","tag_id":"civxvdgl00083u8jrbcs04br2","_id":"civxvdgl5008wu8jr13cif2wx"},{"post_id":"civxvdgkf0079u8jr151swhj5","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl5008xu8jr1ikf5rml"},{"post_id":"civxvdgkf0079u8jr151swhj5","tag_id":"civxvdgl00088u8jr6hcllod4","_id":"civxvdgl5008yu8jrgcjyrqe5"},{"post_id":"civxvdgkk007gu8jro4hoj324","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdgl5008zu8jrmo0ablf2"},{"post_id":"civxvdgkk007gu8jro4hoj324","tag_id":"civxvdgl1008bu8jrv167e82x","_id":"civxvdgl50090u8jr1nj66r8d"},{"post_id":"civxvdgkr007ju8jrgefg4sho","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgl50091u8jrnwfgci5f"},{"post_id":"civxvdgkr007ju8jrgefg4sho","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdgl50092u8jrnb1fpro4"},{"post_id":"civxvdgkr007ju8jrgefg4sho","tag_id":"civxvdgl1008eu8jrb0w1izz1","_id":"civxvdgl50093u8jrv92e3ehe"},{"post_id":"civxvdgks007nu8jrljarzequ","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgl50094u8jr15i77w8b"},{"post_id":"civxvdgks007nu8jrljarzequ","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdgl50095u8jrz47yy5up"},{"post_id":"civxvdgks007nu8jrljarzequ","tag_id":"civxvdgl2008hu8jr2eq8lzpq","_id":"civxvdgl60096u8jr072qh6tn"},{"post_id":"civxvdgku007qu8jrfoamkits","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgl60097u8jrxhpty9lj"},{"post_id":"civxvdgku007qu8jrfoamkits","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdgl60098u8jrzmzdykqm"},{"post_id":"civxvdgku007qu8jrfoamkits","tag_id":"civxvdgl2008lu8jruirr3a59","_id":"civxvdgl60099u8jrwa1ummr9"},{"post_id":"civxvdgku007qu8jrfoamkits","tag_id":"civxvdgl4008ou8jrtzgvj4wz","_id":"civxvdgl6009au8jr0vrt0bxp"},{"post_id":"civxvdgl8009bu8jrwgl05l6m","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdgla009du8jrfjf9l5cw"},{"post_id":"civxvdgl8009bu8jrwgl05l6m","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdglb009hu8jrxir4c5fi"},{"post_id":"civxvdgl8009bu8jrwgl05l6m","tag_id":"civxvdgft0028u8jrs5fp1qtj","_id":"civxvdgle009ju8jr3nfrm0se"},{"post_id":"civxvdgla009eu8jr306l1nkq","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdglf009lu8jrffm6ucuk"},{"post_id":"civxvdgla009eu8jr306l1nkq","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdglg009mu8jrunp5q924"},{"post_id":"civxvdgla009eu8jr306l1nkq","tag_id":"civxvdgl1008eu8jrb0w1izz1","_id":"civxvdglg009nu8jrr1l8pk0o"},{"post_id":"civxvdgl8009cu8jr03mbe02j","tag_id":"civxvdgfm001ou8jrchbdn8b8","_id":"civxvdglg009ou8jrfd4f6st0"},{"post_id":"civxvdgl8009cu8jr03mbe02j","tag_id":"civxvdgfs0026u8jrtyps7mx1","_id":"civxvdglg009pu8jrs09cu818"},{"post_id":"civxvdgl8009cu8jr03mbe02j","tag_id":"civxvdglb009fu8jro79gsomu","_id":"civxvdglg009qu8jrthxyyi25"},{"post_id":"civxvdglh009ru8jrpiyiml9j","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdglj009tu8jrjpvbk9j3"},{"post_id":"civxvdglh009ru8jrpiyiml9j","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdglm009xu8jrz6fjiuww"},{"post_id":"civxvdglm009yu8jr9wikxngw","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdglo00a0u8jrhk37m08f"},{"post_id":"civxvdglm009yu8jr9wikxngw","tag_id":"civxvdgl00083u8jrbcs04br2","_id":"civxvdglo00a3u8jrpaeurdnw"},{"post_id":"civxvdglm009yu8jr9wikxngw","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdglo00a5u8jrdm374spw"},{"post_id":"civxvdgli009su8jrc7m800rk","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdglp00a7u8jrdr4v366e"},{"post_id":"civxvdgli009su8jrc7m800rk","tag_id":"civxvdgju0064u8jr48vgul4a","_id":"civxvdglp00a8u8jrcl1yxim6"},{"post_id":"civxvdgli009su8jrc7m800rk","tag_id":"civxvdglm009vu8jr9gb17ezd","_id":"civxvdglp00a9u8jrklb5948z"},{"post_id":"civxvdgli009su8jrc7m800rk","tag_id":"civxvdglo00a2u8jr1cv5wai7","_id":"civxvdglp00aau8jrj5poaev8"},{"post_id":"civxvdglk009uu8jr6flj1d71","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdglq00abu8jr8t3vkb30"},{"post_id":"civxvdglk009uu8jr6flj1d71","tag_id":"civxvdglo00a2u8jr1cv5wai7","_id":"civxvdglq00acu8jrtv0nqfll"},{"post_id":"civxvdglq00adu8jrt3ufrs6f","tag_id":"civxvdgev000ju8jru7ou3okj","_id":"civxvdglr00agu8jr6ufoebpy"},{"post_id":"civxvdglq00adu8jrt3ufrs6f","tag_id":"civxvdglr00aeu8jrhjw3zqnz","_id":"civxvdglr00ahu8jriyckpl6k"}],"Tag":[{"name":"backup","_id":"civxvdg9p0001u8jrrlsdni2p"},{"name":"blog","_id":"civxvdg9r0002u8jrrt4wxbcg"},{"name":"database","_id":"civxvdgeg0008u8jrumfxczio"},{"name":"linux","_id":"civxvdgeo000du8jr8m105akw"},{"name":"android","_id":"civxvdgev000ju8jru7ou3okj"},{"name":"java","_id":"civxvdgez000pu8jrq9jgnxut"},{"name":"设计模式","_id":"civxvdgf3000uu8jrmz0bdcqn"},{"name":"python3","_id":"civxvdgfj001ju8jr0gee8skr"},{"name":"python","_id":"civxvdgfm001ou8jrchbdn8b8"},{"name":"generators","_id":"civxvdgfp001wu8jr2ujvirku"},{"name":"faq","_id":"civxvdgfq001zu8jrfku2cdrl"},{"name":"spider","_id":"civxvdgfs0026u8jrtyps7mx1"},{"name":"bs4","_id":"civxvdgft0028u8jrs5fp1qtj"},{"name":"git","_id":"civxvdgfw002ku8jrmv4b683h"},{"name":"callback","_id":"civxvdgfw002lu8jrsede9n8t"},{"name":"quicksort","_id":"civxvdgi1002vu8jrh05azu3y"},{"name":"sort","_id":"civxvdgi50031u8jr25tlt7hj"},{"name":"bit manipulation","_id":"civxvdgia0036u8jrwpagohkw"},{"name":"oj","_id":"civxvdgif003bu8jrr2o3ku9p"},{"name":"math","_id":"civxvdgih003ju8jrzy3rmfmu"},{"name":"recursion","_id":"civxvdgin003ru8jrz720aja8"},{"name":"array","_id":"civxvdgip003xu8jr70xbgneb"},{"name":"twoPointer","_id":"civxvdgiu0043u8jrnkk35ydc"},{"name":"todo","_id":"civxvdgix0049u8jrb40r789b"},{"name":"onlinejudge","_id":"civxvdgiy004eu8jrhv3bqpz8"},{"name":"binarysearch","_id":"civxvdgiz004hu8jr9v8nze5l"},{"name":"android_UI","_id":"civxvdgiz004iu8jr2ln1y071"},{"name":"android_RecyclerView","_id":"civxvdgiz004lu8jr4ia2oqnd"},{"name":"android_adb","_id":"civxvdgj0004nu8jr490orxgi"},{"name":"android_lifecycle","_id":"civxvdgj1004qu8jr4a7c4edq"},{"name":"android_broadcast","_id":"civxvdgj1004tu8jr7k1npsst"},{"name":"android_service","_id":"civxvdgj1004wu8jr3z7whsxd"},{"name":"concurrency","_id":"civxvdgj20050u8jra9lang9w"},{"name":"android_lib","_id":"civxvdgj30053u8jrucvg4ukh"},{"name":"android_data","_id":"civxvdgj40059u8jrx9nwwzxf"},{"name":"Java","_id":"civxvdgj5005fu8jrr1nei961"},{"name":"oncurrency","_id":"civxvdgj6005iu8jrsqcu2mru"},{"name":"matplotlib","_id":"civxvdgj6005ju8jrkpl1fx7r"},{"name":"numpy","_id":"civxvdgjg005su8jronde53fp"},{"name":"regex","_id":"civxvdgjn005yu8jrht4pfjbe"},{"name":"android_fragment","_id":"civxvdgju0064u8jr48vgul4a"},{"name":"格式化输出","_id":"civxvdgjx006bu8jraaen08e1"},{"name":"io","_id":"civxvdgk0006iu8jrb7t2lpbf"},{"name":"线段树","_id":"civxvdgk5006ru8jrmm17p9gu"},{"name":"区间查询","_id":"civxvdgka006zu8jr8ewi11to"},{"name":"android_control","_id":"civxvdgkj007du8jrtm7yb61i"},{"name":"android_project","_id":"civxvdgl00083u8jrbcs04br2"},{"name":"android_test","_id":"civxvdgl00088u8jr6hcllod4"},{"name":"android_bar","_id":"civxvdgl1008bu8jrv167e82x"},{"name":"xml","_id":"civxvdgl1008eu8jrb0w1izz1"},{"name":"pythonspider","_id":"civxvdgl2008hu8jr2eq8lzpq"},{"name":"selenium","_id":"civxvdgl2008lu8jruirr3a59"},{"name":"PhantomJS","_id":"civxvdgl4008ou8jrtzgvj4wz"},{"name":"socket","_id":"civxvdglb009fu8jro79gsomu"},{"name":"android_activity","_id":"civxvdglm009vu8jr9gb17ezd"},{"name":"android_adapter","_id":"civxvdglo00a2u8jr1cv5wai7"},{"name":"android_view_pager","_id":"civxvdglr00aeu8jrhjw3zqnz"}]}}